(function(e){function t(t){for(var l,o,n=t[0],r=t[1],i=t[2],m=0,b=[];m<n.length;m++)o=n[m],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);d&&d(t);while(b.length)b.shift()();return s.push.apply(s,i||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],l=!0,n=1;n<a.length;n++){var r=a[n];0!==c[r]&&(l=!1)}l&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var l={},c={app:0},s=[];function o(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=l,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(a,l,function(t){return e[t]}.bind(null,l));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var i=0;i<n.length;i++)t(n[i]);var d=r;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0147":function(e,t,a){},"0c19":function(e,t,a){},"0cb5":function(e,t,a){"use strict";a("ee25")},"12f7":function(e,t,a){"use strict";a("ea26")},1317:function(e,t,a){"use strict";a("8a5e")},"14f2":function(e,t,a){},"15bb":function(e,t,a){},"190c":function(e,t,a){e.exports=a.p+"img/down-arrow-white.157f6258.svg"},"19b8":function(e,t,a){"use strict";a("a432")},"1b33":function(e,t,a){},"1ca5":function(e,t,a){},"21f7":function(e,t,a){"use strict";a("f333")},2409:function(e,t,a){"use strict";a("14f2")},"243b":function(e,t,a){},"24b7":function(e,t,a){"use strict";a("71d3")},"254a":function(e,t,a){"use strict";a("975b")},"264c":function(e,t,a){e.exports=a.p+"img/mastercard.e1efc600.png"},"26be":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAsASURBVHic7d0xb1RnFoDh49FKoKzpY4mKjiJl5A5FiCqSBdT8ApfUG1GgbE3JL6DGCCnVCkXpUMoUdK6QnB6DTOUtxt4FAgQB9gje55GmuTNjn2q+d+7M3G/t8PBwPsTzK5tnZubyzFydmYszs3F0W/+gPwB8dv/8z+O1Vf7/rZ3rH/YCApyE/ZnZO7o9mZkHM/Po4bX7Lz/kyWt/FwDPr2xuzMytmbkxM+c+aVTgsxIAwBuezcy9mbn98Nr9vfc98J0B8PzK5tmZ+Wlmbs7MN597QuDTCQDgHV7MzJ2Z+fnhtfsHb3vA4m0Hn1/Z/HZmfp2Zf43FHwC+NN/Mcg3/dWvn+rdve8BfAuD5lc3vZub3mdk82dkAgBO2OTO/b+1c/+7NO14LgKN3/r/MzPlTGgwAOFnnZ+aXN88E/C8Ajj7z3xmLPwB8bc7PzM7WzvWzxwdePQPw0zjtDwBfq81ZrvUzcxQARz/1u7mqiQCAU3Fza+f6xsz/zwDcGt/2B4Cv3TezXPNncXSFvxurnQcAOCU3tnaun1nM8vK+rvAHAA3nZubyYpbX9gcAOq4uZrmxDwDQcXExyx39AICODQEAAD0bi5lZX/UUAMCpWn/rboAAwNdNAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIWjs8PFz1DADAKXMGAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAoH9cuLt/uOohgI+zu72+ttIBfjvr9QO+UM4AAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQtJiZ/VUPAQCcqv3FzOytegoA4FTtCQAA6NlbzMyTVU8BAJyqJ4uZebDqKQCAU/VgMTOPZubZqicBAE7Fs5l5tNjdXn85M/dWPQ0AcCruzaWDl8fXAbg9My9WOQ0AcOJezHLNX14IaHd7fW9m7qxyIgDgxN2ZSwd7M69fCfDnmXm8mnkAgBP2eJZr/cy8EgC72+sHM3NtZp6uYCgA4OQ8nZlrc+ng4PjAa3sB7G6v/zkzP44IAICvxdOZ+XEuHfz56sG/bAa0u73+x8x8Pz4OAIAv3eOZ+X4uHfzx5h1v3Q3w6EzADzPz7/HrAAD40ryY5Rr+w5vv/I+tHR4evvcvXLi7vzEzt2bmxsyc+9wTAh9vd3t9baUD/Hb2/S8gwGl7Nstr+9w+/rb/u/xtABy7cHf/zMxcnpmrM3NxZjaObuufNCrw0QQApO3PckO/vVnu6/NgZh7NpYOXH/Lk/wKQAq5eW3YI8AAAAABJRU5ErkJggg=="},"26fd":function(e,t,a){"use strict";a("ac37")},"281f":function(e,t,a){e.exports=a.p+"img/logo-invision.43586d43.svg"},2827:function(e,t,a){},"2b19":function(e,t,a){"use strict";a("af54")},"2b29":function(e,t,a){},"2bc4":function(e,t,a){"use strict";a("5d69")},"2d39":function(e,t,a){e.exports=a.p+"img/kal-visuals-square.779cce2b.jpg"},"2e3b":function(e,t,a){},"2e77":function(e,t,a){e.exports=a.p+"img/logo-spotify.4bb67532.svg"},"2e7a":function(e,t,a){},"2f8f":function(e,t,a){"use strict";a("c307")},"30b4":function(e,t,a){},3345:function(e,t,a){"use strict";a("ee17")},"350a":function(e,t,a){e.exports=a.p+"img/team-1.0e461794.jpg"},"35ea":function(e,t,a){"use strict";a("8a93")},"37de":function(e,t,a){"use strict";a("2e7a")},"37f7":function(e,t,a){e.exports=a.p+"img/logo-atlassian.0569965a.svg"},"38a8":function(e,t,a){},"3b43":function(e,t,a){"use strict";a("c5c7")},"3dfe":function(e,t,a){e.exports=a.p+"img/logo-jira.09288465.svg"},"3e9d":function(e,t,a){"use strict";a("b406")},"40bd":function(e,t,a){e.exports=a.p+"img/bruce-mars.0c440467.jpg"},"40fa":function(e,t,a){"use strict";a("0c19")},4257:function(e,t,a){},"44e5":function(e,t,a){},"45d6":function(e,t,a){"use strict";a("7ec8")},4678:function(e,t,a){var l={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=s(e);return a(t)}function s(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}c.keys=function(){return Object.keys(l)},c.resolve=s,e.exports=c,c.id="4678"},"46d4":function(e,t,a){},4753:function(e,t,a){e.exports=a.p+"img/home-decor-2.249f600c.jpg"},4994:function(e,t,a){},"4ce1":function(e,t,a){"use strict";a("5df9")},"4db4":function(e,t,a){"use strict";a("243b")},5054:function(e,t,a){},"506d":function(e,t,a){"use strict";a("15bb")},"52d6":function(e,t,a){e.exports=a.p+"img/down-arrow-dark.601cff39.svg"},"532f":function(e,t,a){e.exports=a.p+"img/home-decor-3.2d98a7aa.jpg"},"539e":function(e,t,a){},"55ff":function(e,t,a){},"566d":function(e,t,a){"use strict";a("e978")},"56d7":function(e,t,a){"use strict";a.r(t);var l=a("7a23");const c={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function s(e,t,a,s,o,n){const r=Object(l["resolveComponent"])("sidenav"),i=Object(l["resolveComponent"])("navbar"),d=Object(l["resolveComponent"])("router-view"),m=Object(l["resolveComponent"])("app-footer"),b=Object(l["resolveComponent"])("configurator"),p=Object(l["resolveComponent"])("vue3-snackbar");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[e.showSidenav?(Object(l["openBlock"])(),Object(l["createBlock"])(r,{key:0,custom_class:e.color,class:Object(l["normalizeClass"])([e.isRTL?"fixed-end":"fixed-start"])},null,8,["custom_class","class"])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("main",c,[e.showNavbar?(Object(l["openBlock"])(),Object(l["createBlock"])(i,{key:0,class:Object(l["normalizeClass"])([e.isNavFixed?e.navbarFixed:"",e.isAbsolute?e.absolute:""]),color:e.isAbsolute?"text-white opacity-8":"",minNav:e.navbarMinimize},null,8,["class","color","minNav"])):Object(l["createCommentVNode"])("",!0),Object(l["createVNode"])(d),Object(l["withDirectives"])(Object(l["createVNode"])(m,null,null,512),[[l["vShow"],e.showFooter]]),Object(l["createVNode"])(b,{toggle:e.toggleConfigurator,class:Object(l["normalizeClass"])([e.showConfig?"show":"",e.hideConfigButton?"d-none":""])},null,8,["toggle","class"])]),Object(l["createVNode"])(p,{top:"",right:"",duration:3e3})],64)}var o=a("7b9a"),n=a.n(o);const r={class:"sidenav-header"},i=Object(l["createElementVNode"])("i",{class:"top-0 p-3 cursor-pointer fas fa-times text-secondary opacity-5 position-absolute end-0 d-none d-xl-none","aria-hidden":"true",id:"iconSidenav"},null,-1),d={class:"m-0 navbar-brand",href:"/"},m=["src"],b=Object(l["createElementVNode"])("span",{class:"ms-2 font-weight-bold text-white"},"StudentPay Portal",-1),p={key:1,src:n.a,class:"navbar-brand-img h-100",alt:"main_logo"};function u(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("sidenav-list");return Object(l["openBlock"])(),Object(l["createElementBlock"])("aside",{id:"sidenav-main",class:Object(l["normalizeClass"])(["sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 ms-3",`${e.isRTL?"me-3 rotate-caret fixed-end":"fixed-start ms-3"} ${e.sidebarType}`])},[Object(l["createElementVNode"])("div",r,[i,Object(l["createElementVNode"])("a",d,["null"!==e.getBrandingSetting.logo?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createElementVNode"])("img",{src:s.StudentPayLogo,class:"navbar-brand-img h-100",alt:""},null,8,m),b],64)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",p))])]),Object(l["createVNode"])(n)],2)}const O={class:"w-auto collapse navbar-collapse vh-100",id:"sidenav-collapse-main"},j={class:"navbar-nav"},h={class:"nav-item"},g=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"dashboard",-1),f=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),E=["onClick"],V=Object(l["createElementVNode"])("div",{class:"select"},null,-1),N={class:"text-white ms-1 ps-1"},x={key:1,class:"nav-item"},y=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),v={key:2,class:"nav-item"},k=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),w={key:0,class:"nav-item"},A=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"admin_panel_settings",-1),S={key:4,class:"nav-item"},B=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#schools"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Sites "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),C={id:"schools",class:"collapse"},_={class:"nav nav-sm flex-column"},P={class:"nav-item"},I=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),D=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Sites List",-1),T={class:"nav-item"},M=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),z=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Sites",-1),F={key:5,class:"nav-item"},U=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"security",-1),L={key:6,class:"nav-item"},q=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#projectsExample"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Students "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),R={id:"projectsExample",class:"collapse"},$={class:"nav nav-sm flex-column"},Q={class:"nav-item"},J=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),H=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Students List",-1),Y={class:"nav-item"},W=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),X=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Students",-1),Z={key:7,class:"nav-item"},K=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#staffNav"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"portrait"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Staff "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),G={id:"staffNav",class:"collapse"},ee={class:"nav nav-sm flex-column"},te={class:"nav-item"},ae=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),le=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Staff List",-1),ce={class:"nav-item"},se=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),oe=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Staff",-1),ne={key:8,class:"nav-item"},re=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people",-1),ie={key:0,class:"nav-item"},de=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#courses"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Courses "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),me={id:"courses",class:"collapse"},be={class:"nav nav-sm flex-column"},pe={class:"nav-item"},ue=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),Oe=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"All Courses",-1),je={key:0,class:"nav-item"},he=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#shop"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Shop "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),ge={id:"shop",class:"collapse"},fe={class:"nav nav-sm flex-column"},Ee={class:"nav-item"},Ve=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),Ne=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Shop Items",-1),xe={class:"nav-item"},ye=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),ve=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Items",-1),ke={key:2,class:"nav-item"},we=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Ae={key:3,class:"nav-item"},Se=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),Be={key:4,class:"nav-item"},Ce=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),_e={key:10,class:"nav-item"},Pe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),Ie={key:11,class:"nav-item"},De=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Te={key:12,class:"nav-item"},Me=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),ze={key:0,class:"nav-item"},Fe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),Ue={key:14,class:"nav-item"},Le=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"support_agent",-1);function qe(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("sidenav-collapse"),r=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",O,[Object(l["createElementVNode"])("ul",j,[Object(l["createElementVNode"])("li",h,[Object(l["createVNode"])(n,{to:{name:"Dashboard"},"aria-controls":"",collapse:!1,collapseRef:"dashboard",navText:"Dashboard"},{icon:Object(l["withCtx"])(()=>[g]),_:1})]),s.user&&"parent"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createVNode"])(n,{to:{name:"list-childrens"},"aria-controls":"",collapse:!1,collapseRef:"childrens",navText:"My Childrens"},{icon:Object(l["withCtx"])(()=>[f]),_:1}),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,onClick:t=>o.selectChildren(e.student.id),class:"nav-item d-flex student"},[V,Object(l["createElementVNode"])("small",N,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1)],8,E))),128))],64)):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",x,[Object(l["createVNode"])(n,{to:{name:"payment_account"},"aria-controls":"",collapse:!1,collapseRef:"topup",navText:"Topup"},{icon:Object(l["withCtx"])(()=>[y]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",v,[Object(l["createVNode"])(n,{to:{name:"list-organizations"},"aria-controls":"",collapse:!1,collapseRef:"organizations",navText:"Organisations"},{icon:Object(l["withCtx"])(()=>[k]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[o.userPermissions.view_admin?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",w,[Object(l["createVNode"])(n,{to:{name:"list-organization-admins"},"aria-controls":"",collapse:!1,collapseRef:"organization-admins",navText:"Organisation Admins"},{icon:Object(l["withCtx"])(()=>[A]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.userPermissions.view_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",S,[B,Object(l["createElementVNode"])("div",C,[Object(l["createElementVNode"])("ul",_,[Object(l["createElementVNode"])("li",P,[Object(l["createVNode"])(r,{to:{name:"list-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[I,D]),_:1})]),Object(l["createElementVNode"])("li",T,[Object(l["createVNode"])(r,{to:{name:"archived-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[M,z]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),o.userPermissions.roles?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",F,[Object(l["createVNode"])(n,{to:{name:"list-roles"},"aria-controls":"",collapse:!1,collapseRef:"roles",navText:"Roles & Permissions"},{icon:Object(l["withCtx"])(()=>[U]),_:1})])):Object(l["createCommentVNode"])("",!0),o.userPermissions.view_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",L,[q,Object(l["createElementVNode"])("div",R,[Object(l["createElementVNode"])("ul",$,[Object(l["createElementVNode"])("li",Q,[Object(l["createVNode"])(r,{to:{name:"list-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[J,H]),_:1})]),Object(l["createElementVNode"])("li",Y,[Object(l["createVNode"])(r,{to:{name:"archived-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[W,X]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),o.userPermissions.view_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Z,[K,Object(l["createElementVNode"])("div",G,[Object(l["createElementVNode"])("ul",ee,[Object(l["createElementVNode"])("li",te,[Object(l["createVNode"])(r,{to:{name:"list-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ae,le]),_:1})]),Object(l["createElementVNode"])("li",ce,[Object(l["createVNode"])(r,{to:{name:"archived-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[se,oe]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),"staff"!==s.user.role&&"student"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ne,[Object(l["createVNode"])(n,{to:{name:"list-parent"},"aria-controls":"",collapse:!1,collapseRef:"parents",navText:"Parents"},{icon:Object(l["withCtx"])(()=>[re]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"parent"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:9},[o.userPermissions.view_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ie,[de,Object(l["createElementVNode"])("div",me,[Object(l["createElementVNode"])("ul",be,[Object(l["createElementVNode"])("li",pe,[Object(l["createVNode"])(r,{to:{name:"list-courses"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ue,Oe]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),s.user&&"student"!==s.user.role&&s.user&&"staff"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[o.userPermissions.view_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",je,[he,Object(l["createElementVNode"])("div",ge,[Object(l["createElementVNode"])("ul",fe,[Object(l["createElementVNode"])("li",Ee,[Object(l["createVNode"])(r,{to:{name:"shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Ve,Ne]),_:1})]),Object(l["createElementVNode"])("li",xe,[Object(l["createVNode"])(r,{to:{name:"archived-shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ye,ve]),_:1})])])])])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.userPermissions.purchase_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ke,[Object(l["createVNode"])(n,{to:{name:"purchases-admin"},"aria-controls":"",collapse:!1,collapseRef:"purchasesadmin",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[we]),_:1})])):Object(l["createCommentVNode"])("",!0),o.userPermissions.pending_installments?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ae,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Installments"},{icon:Object(l["withCtx"])(()=>[Se]),_:1})])):Object(l["createCommentVNode"])("",!0),o.userPermissions.refunds?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Be,[Object(l["createVNode"])(n,{to:{name:"refund"},"aria-controls":"",collapse:!1,collapseRef:"refunds",navText:"Refunds"},{icon:Object(l["withCtx"])(()=>[Ce]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",_e,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Installments"},{icon:Object(l["withCtx"])(()=>[Pe]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ie,[Object(l["createVNode"])(n,{to:{name:"purchase-history"},"aria-controls":"",collapse:!1,collapseRef:"purchase history",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[De]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||s.user&&"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Te,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Me]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"student"!==s.user.role&&s.user&&"staff"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:13},[o.userPermissions.transaction_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ze,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Fe]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ue,[Object(l["createVNode"])(n,{to:{name:"support"},"aria-controls":"",collapse:!1,collapseRef:"support",navText:"Support"},{icon:Object(l["withCtx"])(()=>[Le]),_:1})])):Object(l["createCommentVNode"])("",!0)])])}function Re(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(n,Object(l["mergeProps"])({"data-bs-toggle":a.collapse?"collapse":"",to:a.collapse?"#"+a.collapseRef:a.collapseRef,"aria-controls":a.collapseRef,"aria-expanded":s.isExpanded,class:["nav-link",o.getRoute()===a.collapseRef?"active bg-gradient-#573078":""]},e.$attrs,{onClick:t[0]||(t[0]=e=>s.isExpanded=!s.isExpanded)}),{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["text-center d-flex align-items-center justify-content-center",e.isRTL?" ms-2":"me-2"])},[Object(l["renderSlot"])(e.$slots,"icon")],2),Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["nav-link-text",e.isRTL?" me-1":"ms-1"])},Object(l["toDisplayString"])(a.navText),3)]),_:3},16,["data-bs-toggle","to","aria-controls","aria-expanded","class"]),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(s.isExpanded?"collapse show":"collapse")},[Object(l["renderSlot"])(e.$slots,"list")],2)],64)}var $e=a("5502"),Qe={name:"SidenavCollapse",props:{collapseRef:{type:String,required:!0},navText:{type:String,required:!0},collapse:{type:Boolean,default:!0}},data(){return{isExpanded:!1}},methods:{getRoute(){const e=this.$route.path.split("/");return e[1]}},computed:{...Object($e["e"])(["isRTL","color"])}},Je=a("6b0d"),He=a.n(Je);const Ye=He()(Qe,[["render",Re]]);var We=Ye,Xe=a("cee4");const Ze=Xe["a"].create({baseURL:"https://stagingapi.student-pay.co.uk/api"});Ze.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),Ze.interceptors.response.use(e=>{const t=e.headers["new-access-token"];return t&&localStorage.setItem("token",t),e},e=>Promise.reject(e));var Ke=Ze,Ge={name:"SidenavList",props:{cardBg:String},mounted(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e)),this.setActiveColor(),this.getChildrens()},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{childrens:"",user:"",title:"StudentPay",controls:"dashboardsExamples",isActive:"active"}},methods:{async getChildrens(){if(this.user&&"parent"==this.user.role){let t=this.user.id;try{const e=await Ke.get("getChildrensOfParent/"+t);this.childrens=e.data}catch(e){console.log(e)}}},async selectChildren(e){if(this.user&&"parent"==this.user.role){let a=this.user.id,l={parent_id:a,student_id:e};try{let e=await Ke.post("/selectChildren",l),t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let c=e.data.primary_color,s=e.data.secondary_color,o=e.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",s),localStorage.setItem("logo",o);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){console.log(t)}}},setActiveColor(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";document.querySelector(".sidenav-header").style.setProperty("--navheader-bg-color",e),document.querySelector(".navbar-nav").style.setProperty("--nav-bg-color",e),document.querySelector("#sidenav-collapse-main").style.setProperty("--nav-bg-color",e),e="#010A21",document.querySelectorAll("thead tr th").forEach((function(t){t.style.setProperty("--nav-bg-color",e)}))},navLegacy(e){this.$router.push({name:e})},isActiveRoute(e){return this.$route.name===e}},components:{SidenavCollapse:We}};a("3e9d");const et=He()(Ge,[["render",qe]]);var tt=et,at=a("264c"),lt=a.n(at),ct={name:"index",components:{SidenavList:tt},mounted(){this.setLogo()},data(){return{logo:lt.a,logoDark:lt.a,StudentPayLogo:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),...Object($e["e"])(["isRTL","sidebarType","isDarkMode"])},methods:{setLogo(){this.StudentPayLogo=this.$env_vars.BASE_URL+this.getBrandingSetting.logo}}};const st=He()(ct,[["render",u]]);var ot=st;const nt={class:"fixed-plugin"};function rt(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",nt)}function it(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-dark, .breadcrumb .text-dark"),s=document.querySelectorAll("strong.text-dark"),o=document.querySelectorAll("a.nav-link.text-dark"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-100"),i=document.querySelectorAll(".btn.btn-link.text-dark, .material-icons.text-dark"),d=document.querySelectorAll(".card.border"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.add("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("dark")&&(t[p].classList.remove("dark"),t[p].classList.add("light"));for(p=0;p<m.length;p++)m[p].classList.contains("blur")&&m[p].classList.remove("blur","shadow-blur");for(p=0;p<a.length;p++)a[p].classList.contains("dark")&&(a[p].classList.remove("dark"),a[p].classList.add("light"));for(p=0;p<l.length;p++)l[p].classList.contains("text-dark")&&(l[p].classList.remove("text-dark"),l[p].classList.add("text-white"));for(p=0;p<c.length;p++)c[p].classList.contains("text-dark")&&(c[p].classList.remove("text-dark"),c[p].classList.add("text-white"));for(p=0;p<s.length;p++)s[p].classList.contains("text-dark")&&(s[p].classList.remove("text-dark"),s[p].classList.add("text-white"));for(p=0;p<o.length;p++)o[p].classList.contains("text-dark")&&(o[p].classList.remove("text-dark"),o[p].classList.add("text-white"));for(p=0;p<n.length;p++)n[p].classList.contains("text-secondary")&&(n[p].classList.remove("text-secondary"),n[p].classList.add("text-white"),n[p].classList.add("opacity-8"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-100")&&(r[p].classList.remove("bg-gray-100"),r[p].classList.add("bg-gray-600"));for(p=0;p<i.length;p++)i[p].classList.remove("text-dark"),i[p].classList.add("text-white");for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#fff");for(p=0;p<d.length;p++)d[p].classList.add("border-dark")}function dt(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-white, .breadcrumb .text-white"),s=document.querySelectorAll("strong.text-white"),o=document.querySelectorAll("a.nav-link.text-white"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-600"),i=document.querySelectorAll(".btn.btn-link.text-white, .material-icons.text-white"),d=document.querySelectorAll(".card.border.border-dark"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.remove("dark-version"),e.classList.remove("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("light")&&(t[p].classList.add("dark"),t[p].classList.remove("light"));for(p=0;p<a.length;p++)a[p].classList.contains("light")&&(a[p].classList.add("dark"),a[p].classList.remove("light"));for(p=0;p<m.length;p++)m[p].classList.add("blur","shadow-blur");for(p=0;p<l.length;p++)l[p].classList.contains("text-white")&&(l[p].classList.remove("text-white"),l[p].classList.add("text-dark"));for(p=0;p<c.length;p++)!c[p].classList.contains("text-white")||c[p].closest(".sidenav")||c[p].closest(".card.bg-gradient-dark")||(c[p].classList.remove("text-white"),c[p].classList.add("text-dark"));for(p=0;p<s.length;p++)s[p].classList.contains("text-white")&&(s[p].classList.remove("text-white"),s[p].classList.add("text-dark"));for(p=0;p<o.length;p++)o[p].classList.contains("text-white")&&!o[p].closest(".sidenav")&&(o[p].classList.remove("text-white"),o[p].classList.add("text-dark"));for(p=0;p<n.length;p++)n[p].classList.contains("text-white")&&(n[p].classList.remove("text-white"),n[p].classList.remove("opacity-8"),n[p].classList.add("text-dark"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-600")&&(r[p].classList.remove("bg-gray-600"),r[p].classList.add("bg-gray-100"));for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#252f40");for(p=0;p<i.length;p++)i[p].closest(".card.bg-gradient-dark")||(i[p].classList.remove("text-white"),i[p].classList.add("text-dark"));for(p=0;p<d.length;p++)d[p].classList.remove("border-dark")}var mt={name:"configurator",props:["toggle"],methods:{...Object($e["d"])(["navbarMinimize","navbarFixed"]),...Object($e["b"])(["setColor"]),sidebarColor(e="success"){document.querySelector("#sidenav-main").setAttribute("data-color",e),this.setColor(e)},sidebar(e){this.$store.state.sidebarType=e},setNavbarFixed(){"Profile"===this.$route.name&&"All Projects"===this.$route.name||(this.$store.state.isNavFixed=!this.$store.state.isNavFixed)},darkMode(){if(this.$store.state.isDarkMode)return this.$store.state.isDarkMode=!1,void dt();this.$store.state.isDarkMode=!0,it()},sidenavTypeOnResize(){let e=document.querySelector("#btn-transparent"),t=document.querySelector("#btn-white");window.innerWidth<1200?(e.classList.add("disabled"),t.classList.add("disabled")):(e.classList.remove("disabled"),t.classList.remove("disabled"))}},computed:{...Object($e["e"])(["isRTL","sidebarType"]),sidenavResponsive(){return this.sidenavTypeOnResize}},beforeMount(){this.$store.state.isTransparent="bg-transparent",window.addEventListener("resize",this.sidenavTypeOnResize),window.addEventListener("load",this.sidenavTypeOnResize)}};const bt=He()(mt,[["render",rt]]);var pt=bt;const ut={class:"px-3 py-1 container-fluid"},Ot={key:0,class:"organization-name mt-2 me-2"},jt={key:1,class:"organization-name mt-2 me-2"},ht=Object(l["createElementVNode"])("h5",null,"Super Admin",-1),gt=[ht],ft={key:0,class:"change-pass-alert"},Et={class:"pass-text"},Vt=Object(l["createTextVNode"])("For security reasons, we kindly ask you to change your password, "),Nt=Object(l["createElementVNode"])("span",{class:"click-link"},"click here",-1),xt=Object(l["createTextVNode"])(" to change the password"),yt={class:"navbar-nav justify-content-end"},vt=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"},"shopping_cart",-1),kt=[vt],wt={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},At={class:"d-flex flex-column"},St={class:"mb-3 text-sm text-dark"},Bt={key:0},Ct=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs text-dark"},null,-1),_t={class:"ms-auto text-end"},Pt={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},It=["onClick"],Dt={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},Tt={class:"d-flex flex-column"},Mt={class:"mb-3 text-sm text-dark"},zt=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs text-dark"},null,-1),Ft={class:"ms-auto text-end"},Ut={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},Lt=["onClick"],qt={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Rt={key:1,class:"list-group-item border-0 d-flex align-items-center justify-content-center p-4 mb-2 bg-warning-100 text-warning border-radius-lg"},$t=Object(l["createElementVNode"])("small",null,"Cart is empty",-1),Qt=[$t],Jt=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"}," account_circle ",-1),Ht=[Jt],Yt={key:0,class:"menu_item mb-2"},Wt={class:"dropdown-item border-radius-md",href:"javascript:;"},Xt={class:"py-1 d-flex"},Zt={class:"d-flex flex-column justify-content-center"},Kt={class:"d-flex align-items-center"},Gt=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),ea={class:"ms-1 pt-2 text-sm font-weight-normal"},ta={class:"font-weight-bold"},aa={class:""},la={key:1,class:"menu_item mb-2"},ca={class:"dropdown-item border-radius-md",href:"javascript:;"},sa={class:"py-1 d-flex"},oa={class:"d-flex flex-column justify-content-center"},na={class:"d-flex align-items-center"},ra=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),ia={class:"ms-1 pt-2 text-sm font-weight-normal"},da={class:"font-weight-bold"},ma={class:""},ba={class:"menu_item mb-2"},pa=Object(l["createElementVNode"])("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},[Object(l["createElementVNode"])("div",{class:"py-1 d-flex"},[Object(l["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center"},[Object(l["createElementVNode"])("span",{class:"d-flex  align-items-center"},[Object(l["createElementVNode"])("i",{class:"fas fa-wallet "}),Object(l["createElementVNode"])("h6",{class:"ms-1 pt-2 text-sm font-weight-normal"},[Object(l["createElementVNode"])("span",{class:"font-weight-bold"},"Wallet")])])])])],-1),ua={class:"menu_item mb-2"},Oa=Object(l["createStaticVNode"])('<div class="py-1 d-flex"><div class="d-flex flex-column justify-content-center"><span class="d-flex align-items-center"><i class="fas fa-power-off pb-0"></i><h6 class="ms-1 pt-2 text-sm font-weight-normal"><span class="font-weight-bold">Logout</span></h6></span></div></div>',1),ja=[Oa],ha={class:"nav-item d-xl-none ps-3 d-flex align-items-center"},ga=Object(l["createElementVNode"])("div",{class:"sidenav-toggler-inner"},[Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"})],-1),fa=[ga];function Ea(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("nav",Object(l["mergeProps"])({class:"shadow-none navbar navbar-main navbar-expand-lg border-radius-xl"},e.$attrs,{id:"navbarBlur","data-scroll":"true",class:e.isAbsolute?"mt-4":"mt-0"}),[Object(l["createElementVNode"])("div",ut,["super_admin"!=s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ot,[Object(l["createElementVNode"])("h5",null,Object(l["toDisplayString"])(s.organization_name),1)])):Object(l["createCommentVNode"])("",!0),"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",jt,gt)):Object(l["createCommentVNode"])("",!0),"Profile"!=o.currentRouteName?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[s.passwordStatus?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ft,[Object(l["createElementVNode"])("small",Et,[Vt,Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[Nt]),_:1}),xt])]))],64)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mt-2 collapse navbar-collapse mt-sm-0 me-md-0 me-sm-4",e.isRTL?"px-0":"me-sm-4"]),id:"navbar"},[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pe-md-3 d-flex align-items-center",e.isRTL?"me-md-auto":"ms-md-auto"])},null,2),Object(l["createElementVNode"])("ul",yt,["staff"==s.user.role||"student"==s.user.role||"parent"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:0,class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{onClick:t[0]||(t[0]=(...e)=>o.getCartItems&&o.getCartItems(...e)),href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",s.showCart?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},kt,2),Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["cart px-2 py-3 cart-dropdown dropdown-menu dropdown-menu-end me-sm-n4",s.showCart?"show":""]),"aria-labelledby":"dropdownMenuButton"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.cartItemsList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",wt,[Object(l["createElementVNode"])("div",At,[Object(l["createElementVNode"])("h6",St,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item?e.shop_item.name:"")+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Bt,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Ct]),Object(l["createElementVNode"])("div",_t,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Pt," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item?e.shop_item.price:0)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,It)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.cartItemsList,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[null!==t.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Dt,[Object(l["createElementVNode"])("div",Tt,[Object(l["createElementVNode"])("h6",Mt,Object(l["toDisplayString"])(t.trip?t.trip.title:"")+" (Trip)",1),zt]),Object(l["createElementVNode"])("div",Ft,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Ut," £"+Object(l["toDisplayString"])(o.formattedPrice(t.trip?t.trip.budget:0)),1),Object(l["createElementVNode"])("i",{onClick:a=>(o.removeItemFromCart(t.id),e.updateRemovedItem("trip")),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,Lt)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),s.cartItemsList.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",qt,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>o.navCheckout()),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-100 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Checkout ")])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Rt,Qt))],2)],2)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",s.showMenu?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:t[2]||(t[2]=e=>s.showProfile=!s.showProfile)},Ht,2),Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["px-2 py-3 dropdown-menu dropdown-menu-end me-sm-n4",s.showMenu?"show":""]),"aria-labelledby":"dropdownMenuButton",onClick:t[4]||(t[4]=e=>s.showMenu=!s.showMenu)},["staff"!==s.user.role&&"student"!==s.user.role&&"parent"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Yt,[Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("a",Wt,[Object(l["createElementVNode"])("div",Xt,[Object(l["createElementVNode"])("div",Zt,[Object(l["createElementVNode"])("span",Kt,[Gt,Object(l["createElementVNode"])("h6",ea,[Object(l["createElementVNode"])("span",ta,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(s.user.first_name)+" "+Object(l["toDisplayString"])(s.user.last_name)+" ",1),Object(l["createElementVNode"])("small",aa,"("+Object(l["toDisplayString"])(o.userRole)+")",1)])])])])])])]),_:1})])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",la,[Object(l["createElementVNode"])("a",ca,[Object(l["createElementVNode"])("div",sa,[Object(l["createElementVNode"])("div",oa,[Object(l["createElementVNode"])("span",na,[ra,Object(l["createElementVNode"])("h6",ia,[Object(l["createElementVNode"])("span",da,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(s.user.first_name)+" "+Object(l["toDisplayString"])(s.user.last_name)+" ",1),Object(l["createElementVNode"])("small",ma,"("+Object(l["toDisplayString"])(o.userRole)+")",1)])])])])])])])),Object(l["createElementVNode"])("li",ba,[Object(l["createVNode"])(n,{to:{name:"balance"}},{default:Object(l["withCtx"])(()=>[pa]),_:1})]),Object(l["createElementVNode"])("li",ua,[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=(...e)=>o.signOut&&o.signOut(...e)),class:"dropdown-item border-radius-md",href:"javascript:;"},ja)])],2)],2),Object(l["createElementVNode"])("li",ha,[Object(l["createElementVNode"])("a",{href:"#",onClick:t[5]||(t[5]=(...e)=>o.toggleSidebar&&o.toggleSidebar(...e)),class:"p-0 nav-link text-body lh-1",id:"iconNavbarSidenav"},fa)])])],2)])],16)}var Va={name:"navbar",data(){return{branding_settings:{primary_color:"",secondary_color:"",logo:""},passwordStatus:"",cartItemsList:"",user:"",organization_name:"",showCart:!1,showMenu:!1,showProfile:!1}},props:["minNav","color"],created(){this.minNav},mounted(){this.getUser(),this.isUpdatedRecently(),this.getOrganizationName(),this.getUserRolePermissions()},methods:{...Object($e["b"])(["updateRemovedItem","updatePermissions"]),...Object($e["d"])(["navbarMinimize","toggleConfigurator"]),toggleSidebar(){this.navbarMinimize()},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},async getUserPermissions(){let e=this.user.id;try{let t=await Ke.get("getUserPermissions/"+e);t=t.data,this.formattPermissions(t)}catch(t){console.log(t)}},async getUserRolePermissions(){let e=this.user.id;try{let t=await Ke.get("getUserRolePermissions/"+e);t=t.data,this.restructurePermissions(t)}catch(t){console.log(t)}},formattPermissions(e){let t=[];e.filter(e=>{t.push(e.permission_name)}),this.updatePermissions(t)},restructurePermissions(e){let t=[];e.filter(e=>{t.push(e.name)}),this.updatePermissions(t)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},isUpdatedRecently(){let e=localStorage.getItem("user");e=JSON.parse(e);const t=new Date(e.created_at),a=new Date(e.updated_at);this.passwordStatus=a>t},async signOut(){try{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("primary_color"),localStorage.removeItem("secondary_color"),localStorage.removeItem("logo"),this.$router.push({name:"SignIn"}),await Ke.post("/logout",localStorage.getItem("token"))}catch(e){console.log(e)}},async getOrganizationName(){if("super_admin"==this.user.role)return;let e={user_id:this.user.id,role:this.user.role};try{const t=await Ke.post("/getOrganizationName",e);this.organization_name=t.data.organization_name}catch(t){console.log(t)}},async getCartItems(){if(this.showCart=!this.showCart,0!=this.showCart)try{const e=await Ke.get("/getUserCartItems");this.cartItemsList=e.data}catch(e){console.log(e)}},async removeItemFromCart(e){this.showCart=!0;let t={item_id:e};try{await Ke.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItemsList.findIndex(t=>t.id===e);this.cartItemsList.splice(t,1),this.snackbarMsg("Item Removed Successfully")},navCheckout(){this.$router.push({name:"cart-checkout"})}},components:{},computed:{...Object($e["e"])(["isRTL","isAbsolute"]),currentRouteName(){return this.$route.name},userRole(){return"super_admin"==this.user.role?"Admin":"school_user"==this.user.role?"School":this.user.role}}};a("bb69");const Na=He()(Va,[["render",Ea]]);var xa=Na;const ya={class:"py-3 footer"};function va(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("footer",ya)}var ka={name:"app-footer"};const wa=He()(ka,[["render",va]]);var Aa=wa,Sa={name:"App",components:{Sidenav:ot,Configurator:pt,Navbar:xa,AppFooter:Aa},methods:{...Object($e["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object($e["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};const Ba=He()(Sa,[["render",s]]);var Ca=Ba,_a=a("c0e2"),Pa=a.n(_a);const Ia={user:localStorage.getItem("user"),accessToken:localStorage.getItem("token"),userPermissions:[]},Da={getPermissions(e){return e.userPermissions}},Ta={setPermissions(e,t){e.userPermissions=t}},Ma={updatePermissions({commit:e},t){e("setPermissions",t)}};var za={state:Ia,mutations:Ta,actions:Ma,getters:Da};const Fa={organizationList:null},Ua={getOrganizationList(e){return e.organizationList}},La={setOrganizationList(e,t){e.organizationList=t}},qa={updateOrganizationList({commit:e},t){e("setOrganizationList",t)}};var Ra={state:Fa,mutations:La,actions:qa,getters:Ua};const $a={removedItem:null},Qa={getRemovedItem(e){return e.removedItem}},Ja={setRemovedItem(e,t){e.removedItem=t}},Ha={updateRemovedItem({commit:e},t){e("setRemovedItem",t)}};var Ya={state:$a,mutations:Ja,actions:Ha,getters:Qa};const Wa={brandingSetting:{primary_color:"null"!=localStorage.getItem("primary_color")?localStorage.getItem("primary_color"):"#010A21",secondary_color:"null"!=localStorage.getItem("secondary_color")?localStorage.getItem("secondary_color"):"#010A21",logo:localStorage.getItem("logo")}},Xa={getBrandingSetting(e){return e.brandingSetting}},Za={setBrandingSetting(e,t){e.brandingSetting=t}},Ka={updateBrandingSetting({commit:e},t){e("setBrandingSetting",t)}};var Ga={state:Wa,mutations:Za,actions:Ka,getters:Xa},el=Object($e["a"])({modules:{auth:za,organization:Ra,cart:Ya,settings:Ga},state:{hideConfigButton:!1,isPinned:!0,showConfig:!1,sidebarType:"bg-gradient-dark",isRTL:!1,color:"success",isNavFixed:!1,isAbsolute:!1,showNavs:!0,showSidenav:!0,showNavbar:!0,showFooter:!0,showMain:!0,isDarkMode:!1,navbarFixed:"position-sticky blur shadow-blur left-auto top-1 z-index-sticky px-0 mx-4",absolute:"position-absolute px-4 mx-0 w-100 z-index-2"},mutations:{toggleConfigurator(e){e.showConfig=!e.showConfig},navbarMinimize(e){const t=document.querySelector(".g-sidenav-show");t.classList.contains("g-sidenav-pinned")?(t.classList.remove("g-sidenav-pinned"),e.isPinned=!0):(t.classList.add("g-sidenav-pinned"),e.isPinned=!1)},navbarFixed(e){!1===e.isNavFixed?e.isNavFixed=!0:e.isNavFixed=!1},toggleEveryDisplay(e){e.showNavbar=!e.showNavbar,e.showSidenav=!e.showSidenav,e.showFooter=!e.showFooter},toggleHideConfig(e){e.hideConfigButton=!e.hideConfigButton},color(e,t){e.color=t}},actions:{setColor({commit:e},t){e("color",t)},test({commit:e},t){alert("TestHello"),e("color",t)}},getters:{}}),tl=a("6c02"),al=a("bbe0"),ll=a.n(al);const cl={class:"py-4 container-fluid"},sl={class:"row mb-4"},ol={class:"col-lg-12 position-relative z-index-2"},nl={class:"row"},rl={class:"col-lg-3 col-md-6 col-sm-6"},il={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},dl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},ml={class:"col-lg-3 col-md-6 col-sm-6"},bl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},pl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},ul={key:2,class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Ol={key:0,class:"row mt-4"},jl=Object(l["createElementVNode"])("div",{class:"col-lg-12 col-md-12 col-sm-12"},[Object(l["createElementVNode"])("img",{src:ll.a,style:{width:"100%",height:"95%","border-radius":"20px","box-shadow":"0px 0px 2px #CCCCCC"}})],-1),hl=[jl];function gl(e,t,a,c,s,o){var n,r,i;const d=Object(l["resolveComponent"])("mini-statistics-card"),m=Object(l["resolveComponent"])("UserShop");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",cl,[Object(l["createElementVNode"])("div",sl,[Object(l["createElementVNode"])("div",ol,[Object(l["createElementVNode"])("div",nl,["student"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createElementVNode"])("div",rl,[Object(l["createVNode"])(d,{title:{text:"Current Balance",value:"£"+o.formattedPrice(null!==(n=s.studentHistory.current_balance)&&void 0!==n?n:0)},detail:"Current Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title"])]),Object(l["createElementVNode"])("div",il,[Object(l["createVNode"])(d,{title:{text:"Monthly Transactions",value:"£"+o.formattedPrice(null!==(r=s.studentHistory.last_month)&&void 0!==r?r:0)},detail:"This Month Transactions",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",dl,[Object(l["createVNode"])(d,{title:{text:"Weekly Transactions",value:"£"+o.formattedPrice(null!==(i=s.studentHistory.last_week)&&void 0!==i?i:0)},detail:"This Week Transactions",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"super_admin"==s.user.role||"organization_admin"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("div",ml,[Object(l["createVNode"])(d,{title:{text:o.isAdmin?"Total Figures":"Total Balance",value:"£"+o.formattedPrice(s.userBallance?s.userBallance:0)},detail:o.isAdmin?"Total Figures":"Total Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title","detail"])]),Object(l["createElementVNode"])("div",bl,[Object(l["createVNode"])(d,{title:{text:"Total Sites",value:s.totalSchool?s.totalSchool:0},detail:"Total Sites",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",pl,[Object(l["createVNode"])(d,{title:{text:"Total Students",value:s.totalStudents?s.totalStudents:0},detail:"Total Students",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"super_admin"==s.user.role||"organization_admin"==s.user.role||"staff"==s.user.role||"student"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ul,[Object(l["createVNode"])(d,{title:{text:"Transactions",value:"£"+o.formattedPrice(s.totalTransactions?s.totalTransactions:0)},detail:"Total Transactions",icon:{name:"weekend",color:"text-white",background:"info"}},null,8,["title"])])):Object(l["createCommentVNode"])("",!0)]),"student"!==s.user.role&&"staff"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ol,hl)):Object(l["createCommentVNode"])("",!0),"staff"==s.user.role||"student"==s.user.role?(Object(l["openBlock"])(),Object(l["createBlock"])(m,{key:1})):Object(l["createCommentVNode"])("",!0)])])])}const fl={class:"card-header p-3 pt-2"},El={class:"text-sm mb-0 text-capitalize"},Vl={class:"mb-0"},Nl=Object(l["createElementVNode"])("hr",{class:"dark horizontal my-0"},null,-1),xl=["innerHTML"];function yl(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["card mb-2",a.directionReverse?s.reverseDirection:""])},[Object(l["createElementVNode"])("div",fl,[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["icon icon-lg icon-shape shadow text-center border-radius-xl mt-n4 position-absolute",`bg-gradient-${a.icon.background} shadow-${a.icon.background}`])},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(["material-icons opacity-10",a.icon.color]),"aria-hidden":"true"},Object(l["toDisplayString"])(a.icon.name),3)],2),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pt-1",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",El,Object(l["toDisplayString"])(a.title.text),1),Object(l["createElementVNode"])("h4",Vl,Object(l["toDisplayString"])(a.title.value),1)],2)]),Nl,Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["card-footer p-3",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",{class:"mb-0",innerHTML:a.detail},null,8,xl)],2)],2)}var vl={name:"MiniStatisticsCard",data(){return{reverseDirection:"flex-row-reverse justify-content-between"}},props:{title:{type:Object,required:!0,text:String,value:[Number,String]},detail:{type:String,default:""},icon:{type:Object,required:!0,name:String,color:String,background:String,default:()=>({color:"text-white",background:"success"})},directionReverse:{type:Boolean,default:!1}},computed:{...Object($e["e"])(["isRTL"])}};const kl=He()(vl,[["render",yl]]);var wl=kl,Al=a("b8de"),Sl=a.n(Al),Bl=a("37f7"),Cl=a.n(Bl),_l=a("b107"),Pl=a.n(_l),Il=a("2e77"),Dl=a.n(Il),Tl=a("3dfe"),Ml=a.n(Tl),zl=a("281f"),Fl=a.n(zl),Ul=a("350a"),Ll=a.n(Ul),ql=a("8202"),Rl=a.n(ql),$l=a("c7c0"),Ql=a.n($l),Jl=a("f35e"),Hl=a.n(Jl);const Yl={class:" py-4"},Wl={class:"row"},Xl={class:"col-12"},Zl={class:"card my-4"},Kl={class:"card-body px-0 pb-2"},Gl={class:"table-responsive p-0"},ec=Object(l["createElementVNode"])("span",{class:""},[Object(l["createElementVNode"])("h6",{class:"ms-4 text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"ms-4 page-description"},[Object(l["createTextVNode"])(" In the Shop Item section, you can search and add items to your cart. Once you're ready, you can proceed to checkout and complete your purchase by "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("making a payment. This seamless process ensures a smooth shopping experience from selection to payment. ")])],-1),tc={class:"filter-container ms-4 mb-2"},ac={style:{display:"flex"}},lc=["value"],cc={class:"card-body pt-1 p-3"},sc={class:"container-fluid mt-1"},oc={class:"col-md-8"},nc={class:"d-flex flex-column"},rc={class:"d-flex"},ic={class:"mb-3 text-sm"},dc={key:0,style:{"font-size":"12px !important"},class:" text-sm ms-2"},mc=["src"],bc={class:"trip-description mt-2"},pc={class:"col-md-4"},uc={class:"ms-auto text-start"},Oc={class:"me-3 trip-dates"},jc=Object(l["createElementVNode"])("br",null,null,-1),hc={class:"d-flex  align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},gc=Object(l["createElementVNode"])("br",null,null,-1),fc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},Ec={key:0,class:"text-success"},Vc={key:1,class:"text-danger"},Nc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},xc=Object(l["createElementVNode"])("span",{class:"text-warning"},"Active Payment Plan",-1),yc=Object(l["createTextVNode"])(" ( "),vc={key:0},kc={key:1},wc={key:2},Ac=Object(l["createTextVNode"])(" ) "),Sc=Object(l["createElementVNode"])("br",null,null,-1),Bc=Object(l["createElementVNode"])("br",null,null,-1),Cc=Object(l["createElementVNode"])("br",null,null,-1),_c=Object(l["createElementVNode"])("br",null,null,-1),Pc={key:0,class:"mt-0"},Ic=["onClick"],Dc=Object(l["createElementVNode"])("br",null,null,-1),Tc={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Mc=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),zc=[Mc],Fc={class:"row"},Uc={class:"col-md-12 col-lg-12"},Lc={class:"pagination-container"},qc={class:"entries-dropdown"},Rc=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),$c=["value"],Qc={class:"pagination-wrapper"},Jc={class:"pagination"},Hc=["onClick"];function Yc(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Yl,[Object(l["createElementVNode"])("div",Wl,[Object(l["createElementVNode"])("div",Xl,[Object(l["createElementVNode"])("div",Zl,[Object(l["createElementVNode"])("div",Kl,[Object(l["createElementVNode"])("div",Gl,[Object(l["createElementVNode"])("div",null,[ec,Object(l["createElementVNode"])("div",tc,[Object(l["createElementVNode"])("span",ac,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterShopItems&&o.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterShopItems&&o.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,lc))),128))],544),[[l["vModelSelect"],s.filterBy]])])])]),Object(l["createElementVNode"])("div",cc,[Object(l["createElementVNode"])("div",sc,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",oc,[Object(l["createElementVNode"])("div",nc,[Object(l["createElementVNode"])("span",rc,[Object(l["createElementVNode"])("h6",ic,Object(l["toDisplayString"])(t.name),1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dc,"("+Object(l["toDisplayString"])(t.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,8,mc),Object(l["createElementVNode"])("small",bc,Object(l["toDisplayString"])(t.detail),1)])]),Object(l["createElementVNode"])("div",pc,[Object(l["createElementVNode"])("div",uc,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Oc,"From "+Object(l["toDisplayString"])(o.formatDateString(t.valid_from))+" To "+Object(l["toDisplayString"])(o.formatDateString(t.valid_to)),1)]),jc,Object(l["createElementVNode"])("div",hc," Price - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price)),1),gc,Object(l["createElementVNode"])("div",fc,[t.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Ec,"Available")):Object(l["createCommentVNode"])("",!0),0==t.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Vc,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Nc,[xc,yc,"full_payment"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",vc,"Full Payment")):Object(l["createCommentVNode"])("",!0),"installments"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",kc,"Installments")):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",wc,"Installments And Deposit")):Object(l["createCommentVNode"])("",!0),Ac,Sc,"installments"==t.payment_plan||"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[Object(l["createElementVNode"])("span",null,"Total Installments: "+Object(l["toDisplayString"])(t.payment.total_installments),1),Bc,Object(l["createElementVNode"])("span",null,"Amount Per Installment: £"+Object(l["toDisplayString"])(o.formattedAmount(t.payment.amount_per_installment)),1),Cc,Object(l["createElementVNode"])("span",null,"Initial Deposit: £"+Object(l["toDisplayString"])(o.formattedAmount(t.payment.initial_deposit_installments?t.payment.initial_deposit_installments:0)),1)],64)):Object(l["createCommentVNode"])("",!0)]),_c,t.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Pc,[Object(l["createElementVNode"])("button",{onClick:e=>o.addToCart(t.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,Ic)])):Object(l["createCommentVNode"])("",!0),Dc])])]))),128))],64))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Tc,zc)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Fc,[Object(l["createElementVNode"])("div",Uc,[Object(l["createElementVNode"])("div",Lc,[Object(l["createElementVNode"])("div",qc,[Rc,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.itemsPerPage=e),onChange:t[5]||(t[5]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,$c))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",Qc,[Object(l["createElementVNode"])("ul",Jc,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,Hc)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var Wc=a("3d20"),Xc=a.n(Wc),Zc=a("c1df"),Kc=a.n(Zc),Gc={name:"tables",mounted(){this.getUser(),this.getShopItems()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Name",allFields:["Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await Ke.post("/getShopItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await Ke.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await Ke.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await Ke.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=Kc()(e),a=t.format("DD MMMM YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("72a0");const es=He()(Gc,[["render",Yc]]);var ts=es,as={name:"dashboard-default",data(){return{studentHistory:"",totalTransactions:"",totalSchool:"",totalStudents:"",user:"",userBallance:"",logoXD:Sl.a,team1:Ll.a,team2:Rl.a,team3:Ql.a,team4:Hl.a,logoAtlassian:Cl.a,logoSlack:Pl.a,logoSpotify:Dl.a,logoJira:Ml.a,logoInvision:Fl.a}},mounted(){this.getUser(),this.getStudentBalance(),this.getTotalSchools(),this.getTotalStudents(),this.getTotalTransactions(),this.getStudentHistory()},computed:{isAdmin(){return"organization_admin"===this.user.role||"super_admin"===this.user.role}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getStudentBalance(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e;try{let t=await Ke.get("/getStudentBalance/"+e.id);t=t.data,this.userBallance=t}catch(t){console.log(t)}},async getStudentHistory(){if("student"==this.user.role)try{let e=await Ke.get("/studentDashboard");e=e.data,this.studentHistory=e}catch(e){console.log(e)}},async getTotalSchools(){try{let e=await Ke.get("/totalSchools");e=e.data,this.totalSchool=e}catch(e){console.log(e)}},async getTotalStudents(){try{let e=await Ke.get("/getTotalStudents");e=e.data,this.totalStudents=e}catch(e){console.log(e)}},async getTotalTransactions(){try{let e=await Ke.get("/getTotalTransactions");e=e.data,this.totalTransactions=e}catch(e){console.log(e)}}},components:{MiniStatisticsCard:wl,UserShop:ts}};const ls=He()(as,[["render",gl]]);var cs=ls,ss=a("40bd"),os=a.n(ss);const ns={class:"container-fluid"},rs=Object(l["createElementVNode"])("div",{class:"page-header min-height-300 border-radius-xl mt-4",style:{"background-image":"url('https://images.unsplash.com/photo-1531512073830-ba890ca4eba2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80')"}},[Object(l["createElementVNode"])("span",{class:"mask bg-gradient-success opacity-6"})],-1),is={class:"card card-body mx-3 mx-md-4 mt-n6"},ds={class:"row gx-4"},ms=Object(l["createElementVNode"])("div",{class:"col-auto"},[Object(l["createElementVNode"])("div",{class:"avatar avatar-xl position-relative"},[Object(l["createElementVNode"])("img",{src:os.a,alt:"profile_image",class:"shadow-sm w-100 border-radius-lg"})])],-1),bs={class:"col-auto my-auto"},ps={class:"h-100"},us={class:"mb-1"},Os={class:"d-flex"},js={class:"mb-0 font-weight-normal text-sm"},hs={class:"d-flex"},gs={class:"text-xs"},fs=Object(l["createElementVNode"])("div",{class:"mx-auto mt-3 col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0"},[Object(l["createElementVNode"])("div",{class:"nav-wrapper position-relative end-0"})],-1),Es={class:"row"},Vs={class:"mt-3 row"},Ns={class:"col-12 col-md-6 col-xl-6 position-relative"},xs={class:"card card-plain h-100"},ys=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Profile Settings")],-1),vs={class:"p-3 card-body"},ks={class:"list-group"},ws={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},As={class:"col-md-5 mx-auto bg-white new-pass p-2"},Ss=Object(l["createElementVNode"])("label",null,"First Name",-1),Bs={key:0,class:"err-txt text-danger error-txt"},Cs=Object(l["createElementVNode"])("br",null,null,-1),_s=Object(l["createElementVNode"])("label",null,"Last Name",-1),Ps={key:1,class:"err-txt text-danger error-txt"},Is=Object(l["createElementVNode"])("br",null,null,-1),Ds=Object(l["createElementVNode"])("label",null,"Email",-1),Ts={key:2,class:"err-txt text-danger error-txt"},Ms=Object(l["createElementVNode"])("br",null,null,-1),zs=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),Fs={class:"mt-4 col-12 col-xl-6 mt-xl-0"},Us={class:"card card-plain h-100"},Ls=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Change Password")],-1),qs={class:"p-3 card-body"},Rs={class:"list-group"},$s={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Qs={class:"col-md-5 mx-auto bg-white new-pass p-2"},Js=Object(l["createElementVNode"])("label",null,"Old Password",-1),Hs={key:0,class:"err-txt text-danger error-txt"},Ys=Object(l["createElementVNode"])("br",null,null,-1),Ws=Object(l["createElementVNode"])("label",null,"New Password",-1),Xs={key:1,class:"err-txt text-danger error-txt"},Zs=Object(l["createElementVNode"])("br",null,null,-1),Ks=Object(l["createElementVNode"])("label",null,"Confirm New Password",-1),Gs={key:2,class:"err-txt text-danger error-txt"},eo=Object(l["createElementVNode"])("br",null,null,-1);function to(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ns,[rs,Object(l["createElementVNode"])("div",is,[Object(l["createElementVNode"])("div",ds,[ms,Object(l["createElementVNode"])("div",bs,[Object(l["createElementVNode"])("div",ps,[Object(l["createElementVNode"])("h5",us,Object(l["toDisplayString"])(s.user.first_name)+" "+Object(l["toDisplayString"])(s.user.last_name),1),Object(l["createElementVNode"])("span",Os,[Object(l["createElementVNode"])("p",js,"Role: "+Object(l["toDisplayString"])(s.user.role),1)]),Object(l["createElementVNode"])("span",hs,[Object(l["createElementVNode"])("small",gs,"Email: "+Object(l["toDisplayString"])(s.user.email?s.user.email:"-"),1)])])]),fs]),Object(l["createElementVNode"])("div",Es,[Object(l["createElementVNode"])("div",Vs,[Object(l["createElementVNode"])("div",Ns,[Object(l["createElementVNode"])("div",xs,[ys,Object(l["createElementVNode"])("div",vs,[Object(l["createElementVNode"])("ul",ks,[Object(l["createElementVNode"])("li",ws,[Object(l["createElementVNode"])("div",As,[Ss,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.updateData.first_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.updateData.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Bs,"First Name is required")):Object(l["createCommentVNode"])("",!0),Cs,_s,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.updateData.last_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.updateData.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ps,"Last Name is required")):Object(l["createCommentVNode"])("",!0),Is,Ds,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.updateData.email=e),id:"card-holder-name",type:"email",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.updateData.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ts,"Email is required")):Object(l["createCommentVNode"])("",!0),Ms,Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>o.updateSettings()),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),zs]),Object(l["createElementVNode"])("div",Fs,[Object(l["createElementVNode"])("div",Us,[Ls,Object(l["createElementVNode"])("div",qs,[Object(l["createElementVNode"])("ul",Rs,[Object(l["createElementVNode"])("li",$s,[Object(l["createElementVNode"])("div",Qs,[Js,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.changePassword.old_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.changePassword.old_password]]),""!==s.passwordValidationForm&&""!==s.passwordValidationForm["old_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Hs,"Old Password is required")):Object(l["createCommentVNode"])("",!0),Ys,Ws,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.changePassword.new_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.changePassword.new_password]]),""!==s.passwordValidationForm&&""!==s.passwordValidationForm["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xs,"New Password is required")):Object(l["createCommentVNode"])("",!0),Zs,Ks,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.changePassword.new_password_confirmation=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.changePassword.new_password_confirmation]]),""!==s.passwordValidationForm&&""!==s.passwordValidationForm["new_password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gs,"Confirm Password is required")):Object(l["createCommentVNode"])("",!0),eo,Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>o.changeUserPassword&&o.changeUserPassword(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Save ")])])])])])])])])])])}var ao=a("2d39"),lo=a.n(ao),co=a("af17"),so=a.n(co),oo=a("6150"),no=a.n(oo),ro=a("b34a"),io=a.n(ro),mo=a("4753"),bo=a.n(mo),po=a("532f"),uo=a.n(po);function Oo(){var e=document.querySelectorAll(".nav-pills");function t(){e.forEach((function(e,t){var l=document.createElement("div"),c=e.querySelector("li:first-child .nav-link"),s=c.cloneNode();s.innerHTML="-",l.classList.add("moving-tab","position-absolute","nav-link"),l.appendChild(s),e.appendChild(l);e.getElementsByTagName("li").length;l.style.padding="0px",l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px, 0px, 0px)",l.style.transition=".5s ease",e.onmouseover=function(t){let c=a(t),s=c.closest("li");if(s){let t=Array.from(s.closest("ul").children),a=t.indexOf(s)+1;e.querySelector("li:nth-child("+a+") .nav-link").onclick=function(){l=e.querySelector(".moving-tab");let c=0;if(e.classList.contains("flex-column")){for(var o=1;o<=t.indexOf(s);o++)c+=e.querySelector("li:nth-child("+o+")").offsetHeight;l.style.transform="translate3d(0px,"+c+"px, 0px)",l.style.height=e.querySelector("li:nth-child("+o+")").offsetHeight}else{for(o=1;o<=t.indexOf(s);o++)c+=e.querySelector("li:nth-child("+o+")").offsetWidth;l.style.transform="translate3d("+c+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+a+")").offsetWidth+"px"}}}}}))}function a(e){return e=e||window.event,e.target||e.srcElement}setTimeout((function(){t()}),100),window.addEventListener("resize",(function(t){e.forEach((function(e,t){e.querySelector(".moving-tab").remove();var a=document.createElement("div"),l=e.querySelector(".nav-link.active").cloneNode();l.innerHTML="-",a.classList.add("moving-tab","position-absolute","nav-link"),a.appendChild(l),e.appendChild(a),a.style.padding="0px",a.style.transition=".5s ease";let c=e.querySelector(".nav-link.active").parentElement;if(c){let t=Array.from(c.closest("ul").children),l=t.indexOf(c)+1,o=0;if(e.classList.contains("flex-column")){for(var s=1;s<=t.indexOf(c);s++)o+=e.querySelector("li:nth-child("+s+")").offsetHeight;a.style.transform="translate3d(0px,"+o+"px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px",a.style.height=e.querySelector("li:nth-child("+s+")").offsetHeight}else{for(s=1;s<=t.indexOf(c);s++)o+=e.querySelector("li:nth-child("+s+")").offsetWidth;a.style.transform="translate3d("+o+"px, 0px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px"}}})),window.innerWidth<991?e.forEach((function(e,t){if(!e.classList.contains("flex-column")){e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),s=(c.indexOf(t),0);for(var a=1;a<=c.indexOf(t);a++)s+=e.querySelector("li:nth-child("+a+")").offsetHeight;var l=document.querySelector(".moving-tab");l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px,"+s+"px, 0px)"}})):e.forEach((function(e,t){if(e.classList.contains("on-resize")){e.classList.remove("flex-column","on-resize"),e.classList.add("flex-row");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),s=c.indexOf(t)+1,o=0;for(var a=1;a<=c.indexOf(t);a++)o+=e.querySelector("li:nth-child("+a+")").offsetWidth;var l=document.querySelector(".moving-tab");l.style.transform="translate3d("+o+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+s+")").offsetWidth+"px"}}))})),window.innerWidth<991&&e.forEach((function(e,t){e.classList.contains("flex-row")&&(e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize"))}))}var jo=a("4989"),ho=a.n(jo);function go(){var e=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));e.map((function(e){return new ho.a.Tooltip(e)}))}var fo=a("0644"),Eo=a.n(fo),Vo={name:"profile-overview",data(){return{updateData:"",passwordValidationForm:"",formValidation:"",user:"",changePassword:{old_password:"",new_password:"",new_password_confirmation:""},showMenu:!1,sophie:lo.a,marie:so.a,ivana:no.a,peterson:Hl.a,nick:Ql.a,img1:io.a,team1:Ll.a,team2:Rl.a,team3:Ql.a,team4:Hl.a,img2:bo.a,img3:uo.a}},components:{},mounted(){this.$store.state.isAbsolute=!0,Oo(),go(),this.getUser()},beforeUnmount(){this.$store.state.isAbsolute=!1},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,this.updateData=Eo()(this.user),"student"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||this.$router.go(-1)},async changeUserPassword(){if(this.validatePasswordForm())return;let e=localStorage.getItem("user");e=JSON.parse(e);let t={user_id:e.id,old_password:this.changePassword.old_password,new_password:this.changePassword.new_password,new_password_confirmation:this.changePassword.new_password_confirmation};if(t.new_password!=t.old_password)try{const e=await Ke.post("/changePassword",t);this.snackbarMsg("Password changed successfully!"),localStorage.removeItem("user"),localStorage.removeItem("token"),this.$router.push({name:"SignIn"}),console.log(e)}catch(a){console.log(a)}else this.snackbarMsg("New password can not be the same as old password!","error")},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},validateForm(){let e=!1,t="";t=Eo()(this.updateData);for(let a in this.updateData)""!==this.updateData[a]&&void 0!==this.updateData[a]||"first_name"!=a&&"last_name"!=a&&"email"!=a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async updateSettings(){if(this.validateForm())return;let e={first_name:this.updateData.first_name,last_name:this.updateData.last_name,email:this.updateData.email};try{const t=await Ke.post("/profileSettings",e);this.snackbarMsg("Profile Updated successfully!"),this.updateUserData(e),console.log(t)}catch(t){console.log(t)}},updateUserData(e){this.user.first_name=e.first_name,this.user.last_name=e.last_name,this.user.email=e.email;let t=localStorage.getItem("user"),a=JSON.parse(t);a.first_name=e.first_name,a.last_name=e.last_name,a.email=e.email,localStorage.setItem("user",JSON.stringify(a)),window.location.reload()},validatePasswordForm(){let e=!1,t="";t=Eo()(this.changePassword);for(let a in this.changePassword)""===this.changePassword[a]||void 0===this.changePassword[a]?(t[a]="is required",e=!0):t[a]="";return this.passwordValidationForm=t,e}}};a("40fa");const No=He()(Vo,[["render",to]]);var xo=No,yo=a("26be"),vo=a.n(yo);Object(l["pushScopeId"])("data-v-24d9741b");const ko=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),wo={class:"container my-auto"},Ao={class:"row"},So={class:"col-lg-4 col-md-8 col-12 mx-auto"},Bo={class:"card z-index-0 fadeIn3 fadeInBottom"},Co=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),_o={class:"card-body"},Po={key:0,class:"text-danger"},Io={class:"mb-3"},Do={key:0,class:"text-danger error-txt"},To={class:"d-flex"},Mo=["type"],zo={key:1,class:"text-danger error-txt"},Fo={class:"text-center"},Uo=Object(l["createTextVNode"])("Sign in"),Lo={class:"mt-4 text-sm text-success text-center"},qo=Object(l["createTextVNode"])("Forgot Password ?"),Ro=Object(l["createElementVNode"])("br",null,null,-1),$o=Object(l["createElementVNode"])("br",null,null,-1),Qo=Object(l["createElementVNode"])("img",{class:"me-2",style:{width:"12px",height:"12px"},src:vo.a},null,-1),Jo=Object(l["createElementVNode"])("small",{class:"mslogin"},"SignIn with Microsoft",-1),Ho=[Qo,Jo];function Yo(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[ko,Object(l["createElementVNode"])("div",wo,[Object(l["createElementVNode"])("div",Ao,[Object(l["createElementVNode"])("div",So,[Object(l["createElementVNode"])("div",Bo,[Co,Object(l["createElementVNode"])("div",_o,[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Po,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Io,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],o.credentials.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Do,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",To,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.credentials.password=e),placeholder:"Password",type:o.showPassword?"text":"password",label:"Password",name:"password"},null,8,Mo),[[l["vModelDynamic"],o.credentials.password]]),Object(l["createElementVNode"])("span",{onClick:t[2]||(t[2]=(...e)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...e)),class:"eye-icon",style:{"margin-left":"-25px","margin-top":"7px"}},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(o.showPassword?"fas fa-eye":"fas fa-eye-slash")},null,2)])]),""!==o.formValidation&&""!==o.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zo,"Password is required")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Fo,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.signIn,style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[Uo]),_:1},8,["onClick"])]),Object(l["createElementVNode"])("p",Lo,[Object(l["createVNode"])(d,{to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[qo]),_:1}),Ro,$o,Object(l["createElementVNode"])("span",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin-link mt-3"},Ho)])])])])])])],4)],64)}Object(l["popScopeId"])();var Wo=a("1b7b");function Xo(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("nav",{class:Object(l["normalizeClass"])(["top-0 navbar navbar-expand-lg position-absolute z-index-3",a.isBlur?a.isBlur:"shadow-none my-2 navbar-transparent w-100"])},null,2)])}var Zo=a("190c"),Ko=a.n(Zo),Go=a("52d6"),en=a.n(Go),tn={name:"navbar",data(){return{downArrWhite:Ko.a,downArrBlack:en.a}},props:{btnBackground:String,isBlur:String,darkMode:{type:Boolean,default:!1}},computed:{darkModes(){return{"text-dark":this.darkMode}}}};const an=He()(tn,[["render",Xo]]);var ln=an;function cn(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{class:Object(l["normalizeClass"])(["btn mb-0",o.getClasses(a.variant,a.color,a.size,a.fullWidth,a.active)])},[Object(l["renderSlot"])(e.$slots,"default")],2)}var sn={name:"MaterialButton",props:{color:{type:String,default:"success"},size:{type:String,default:"md"},variant:{type:String,default:"fill"},fullWidth:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},methods:{getClasses:(e,t,a,l,c)=>{let s,o,n,r;return s="gradient"===e?"bg-gradient-"+t:"outline"===e?"btn-outline-"+t:"btn-"+t,o=a?"btn-"+a:null,n=l?"w-100":null,r=c?"active":null,`${s} ${o} ${n} ${r}`}}};const on=He()(sn,[["render",cn]]);var nn=on,rn={name:"sign-in",components:{Navbar:ln,MaterialButton:nn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},async created(){this.$msalInstance=new Wo["a"](this.msalConfig)},mounted(){const e=this.$msalInstance.getAllAccounts();0!=e.length&&(this.account=e[0],this.$emitter.emit("login",this.account))},data(){return{msalConfig:{auth:{clientId:"84e7c1e4-cd74-42c8-84fe-5ba42ee2049a",authority:"https://login.microsoftonline.com/f8cdef31-a31e-4b4a-93e4-5f571e91255a"},cache:{cacheLocation:"localStorage"}},unauthorized:!1,formValidation:"",showPassword:!1,credentials:{email:"",password:""}}},methods:{...Object($e["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},togglePasswordVisibility(){this.showPassword=!this.showPassword},async SignOut(){await this.$msalInstance.logout({}).then(()=>{this.$emitter.emit("logout","logging out")}).catch(e=>{console.error(e)})},validateForm(){let e=!1,t="";t=Eo()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async signIn(){if(!this.validateForm())try{const e=await Ke.post("/login",this.credentials);let t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let l=e.data.primary_color,c=e.data.secondary_color,s=e.data.logo;localStorage.setItem("primary_color",l),localStorage.setItem("secondary_color",c),localStorage.setItem("logo",s);const o=this.$router.resolve({name:"/"}).href;window.location.href=o}catch(e){401==e.response.status&&(this.unauthorized=!0)}}}};a("98ae");const dn=He()(rn,[["render",Yo],["__scopeId","data-v-24d9741b"]]);var mn=dn;Object(l["pushScopeId"])("data-v-406525b8");const bn=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),pn={class:"container my-auto"},un={class:"row"},On={class:"col-lg-4 col-md-8 col-12 mx-auto"},jn={class:"card z-index-0 fadeIn3 fadeInBottom"},hn=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),gn={class:"card-body"},fn={key:0,class:"text-danger"},En={class:"mb-3"},Vn={key:0,class:"text-danger error-txt"},Nn={class:"mb-3"},xn={key:0,class:"text-danger error-txt"},yn={class:"text-center"},vn=Object(l["createTextVNode"])("Sign in"),kn={class:"mt-4 text-sm text-success text-center"},wn=Object(l["createTextVNode"])("Forgot Password ?"),An=Object(l["createElementVNode"])("br",null,null,-1),Sn=Object(l["createElementVNode"])("br",null,null,-1),Bn=Object(l["createElementVNode"])("small",{class:"mslogin"},"SignIn with Microsoft",-1);function Cn(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[bn,Object(l["createElementVNode"])("div",pn,[Object(l["createElementVNode"])("div",un,[Object(l["createElementVNode"])("div",On,[Object(l["createElementVNode"])("div",jn,[hn,Object(l["createElementVNode"])("div",gn,[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fn,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",En,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],o.credentials.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Vn,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Nn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.credentials.password=e),placeholder:"Password",type:"password",label:"Password",name:"password"},null,512),[[l["vModelText"],o.credentials.password]]),""!==o.formValidation&&""!==o.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xn,"Password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",yn,[Object(l["createVNode"])(i,{class:"my-4 mb-2",style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[vn]),_:1})]),Object(l["createElementVNode"])("p",kn,[Object(l["createVNode"])(d,{to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[wn]),_:1}),An,Sn,Object(l["createElementVNode"])("span",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin-link mt-3"},[Object(l["createElementVNode"])("img",{onClick:t[2]||(t[2]=(...t)=>e.MSSignIn&&e.MSSignIn(...t)),class:"me-2",style:{width:"12px",height:"12px"},src:vo.a}),Bn])])])])])])])],4)],64)}Object(l["popScopeId"])();var _n={name:"sign-in",components:{Navbar:ln,MaterialButton:nn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},mounted(){const e=this.$route.query.code;e&&this.signIn(e)},data(){return{unauthorized:!1,formValidation:"",credentials:{email:"",password:""}}},methods:{...Object($e["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},async SignOut(){await this.$msalInstance.logout({}).then(()=>{this.$emitter.emit("logout","logging out")}).catch(e=>{console.error(e)})},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})},async signIn(e){try{const t=await Ke.post("/auth_callback",{code:e});let a=t.data?t.data.user:null,l=t.data?t.data.access_token:null;localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",l);let c=t.data.primary_color,s=t.data.secondary_color,o=t.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",s),localStorage.setItem("logo",o);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){500==t.response.status&&(this.snackbarMsg("user was not found in StudentPay Portal!"),window.location.href="https://login.microsoftonline.com/cb811789-d752-4ec2-8215-356e22c04d4f/oauth2/v2.0/logout?post_logout_redirect_uri="+encodeURIComponent("https://staging.student-pay.co.uk/sign-in"))}}}};a("c1d2");const Pn=He()(_n,[["render",Cn],["__scopeId","data-v-406525b8"]]);var In=Pn;const Dn=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),Tn={class:"container my-auto"},Mn={class:"row"},zn={class:"col-lg-4 col-md-8 col-12 mx-auto"},Fn={class:"card z-index-0 fadeIn3 fadeInBottom"},Un=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:"border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Forgot Password")])],-1),Ln={class:"card-body"},qn={key:0,class:"text-danger"},Rn={key:0,class:"text-danger error-txt"},$n={key:1,class:"mb-3"},Qn={key:0,class:"text-danger error-txt"},Jn={class:"text-center"},Hn=Object(l["createTextVNode"])("Next"),Yn=Object(l["createElementVNode"])("p",{class:"mt-4 text-sm text-success text-center"},null,-1);function Wn(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[Dn,Object(l["createElementVNode"])("div",Tn,[Object(l["createElementVNode"])("div",Mn,[Object(l["createElementVNode"])("div",zn,[Object(l["createElementVNode"])("div",Fn,[Un,Object(l["createElementVNode"])("div",Ln,[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",qn,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mb-3",{"mb-5 mt-5":!1===o.isOTP}])},[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],o.credentials.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Rn,"email is required")):Object(l["createCommentVNode"])("",!0)],2),o.isOTP?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",$n,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.otp=e),id:"otp",placeholder:"otp",type:"otp",label:"OTP",name:"otp"},null,512),[[l["vModelText"],o.otp]]),""!==o.formValidation&&""!==o.formValidation["otp"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qn,"otp is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Jn,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.requestOtp,style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[Hn]),_:1},8,["onClick"])]),Yn])])])])])],4)],64)}var Xn={name:"sign-in",components:{Navbar:ln,MaterialButton:nn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{unauthorized:!1,isOTP:!1,formValidation:"",otp:"",credentials:{email:""}}},methods:{...Object($e["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Eo()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async requestOtp(){if(this.isOTP)this.verifyOtp();else if(!this.validateForm())try{const e=await Ke.post("/forgot_password",this.credentials);this.isOTP=!0,console.log(e)}catch(e){console.log(e)}},async verifyOtp(){if(this.validateForm())return;let e={email:"",otp:""};e.email=this.credentials.email,e.otp=this.otp;try{return await Ke.post("/forgot_password_verify_otp",e),void this.$router.push({name:"ResetPassword",params:{email:this.credentials.email,otp:this.otp}})}catch(t){console.log(t)}}}};const Zn=He()(Xn,[["render",Wn]]);var Kn=Zn;const Gn=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),er={class:"container my-auto"},tr={class:"row"},ar={class:"col-lg-4 col-md-8 col-12 mx-auto"},lr={class:"card z-index-0 fadeIn3 fadeInBottom"},cr=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Reset Password")])],-1),sr={class:"card-body"},or={key:0,class:"text-danger"},nr={class:"mb-3"},rr={key:0,class:"text-danger error-txt"},ir={class:"mb-3"},dr={key:0,class:"text-danger error-txt"},mr={class:"text-center"},br=Object(l["createTextVNode"])("Reset"),pr={class:"mt-4 text-sm text-success text-center"},ur=Object(l["createElementVNode"])("small",{class:"text-success text-gradient font-weight-bold"},"Go back to ",-1),Or=Object(l["createTextVNode"])("SignIn");function jr(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[Gn,Object(l["createElementVNode"])("div",er,[Object(l["createElementVNode"])("div",tr,[Object(l["createElementVNode"])("div",ar,[Object(l["createElementVNode"])("div",lr,[cr,Object(l["createElementVNode"])("div",sr,[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",or,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",nr,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.new_password=e),placeholder:"password",type:"password",label:"Password",name:"pass"},null,512),[[l["vModelText"],o.credentials.new_password]]),""!==o.formValidation&&""!==o.formValidation["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rr,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ir,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"otp","onUpdate:modelValue":t[1]||(t[1]=e=>o.credentials.new_password_confirmation=e),placeholder:"confirm password",type:"password",label:"Confirm Password",name:"password"},null,512),[[l["vModelText"],o.credentials.new_password_confirmation]]),""!==o.formValidation&&""!==o.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dr,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",mr,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.setNewPassword,variant:"gradient",color:"success",fullWidth:""},{default:Object(l["withCtx"])(()=>[br]),_:1},8,["onClick"])]),Object(l["createElementVNode"])("p",pr,[ur,Object(l["createVNode"])(d,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold",style:{"background-color":"#573078"}},{default:Object(l["withCtx"])(()=>[Or]),_:1})])])])])])])],4)],64)}var hr={components:{Navbar:ln,MaterialButton:nn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{email:"",unauthorized:!1,formValidation:"",isOTP:!1,credentials:{email:"",otp:"",new_password:"",new_password_confirmation:""}}},methods:{...Object($e["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Eo()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async setNewPassword(){if(this.validateForm())return;this.credentials.email=this.$route.params.email,this.credentials.otp=this.$route.params.otp;let e=this.credentials;try{await Ke.post("/set_new_password",e),this.$router.push({name:"SignIn"})}catch(t){console.log(t)}}}};const gr=He()(hr,[["render",jr]]);var fr=gr;const Er={class:"bg-white"},Vr=Object(l["createElementVNode"])("div",{class:"container top-0 position-sticky z-index-sticky"},[Object(l["createElementVNode"])("div",{class:"row"},[Object(l["createElementVNode"])("div",{class:"col-12"})])],-1),Nr={class:"mt-0 main-content"},xr={class:"page-header min-vh-100"},yr={class:"container"},vr={class:"row"},kr={class:"col-6 d-lg-flex d-none h-100 my-auto pe-0 ps-0 position-absolute top-0 start-0 text-center justify-content-center flex-column"},wr={class:"col-xl-4 col-lg-5 col-md-7 d-flex flex-column ms-auto me-auto ms-lg-auto me-lg-5"},Ar={class:"card card-plain"},Sr=Object(l["createElementVNode"])("div",{class:"pb-0 card-header bg-transparent mb-4"},[Object(l["createElementVNode"])("h4",{class:"font-weight-bolder"},"Sign Up"),Object(l["createElementVNode"])("p",{class:"mb-0"}," Enter your email and password to register ")],-1),Br={class:"card-body"},Cr={role:"form"},_r={class:"mb-3"},Pr={class:"mb-3"},Ir={class:"mb-3"},Dr=Object(l["createTextVNode"])(" I agree the "),Tr=Object(l["createElementVNode"])("a",{href:"../../../pages/privacy.html",class:"text-dark font-weight-bolder"},"Terms and Conditions",-1),Mr={class:"text-center"},zr=Object(l["createTextVNode"])("Sign Up"),Fr={class:"px-1 pt-0 text-center card-footer px-lg-2"},Ur={class:"mx-auto mb-4 text-sm"},Lr=Object(l["createTextVNode"])(" Don't have an account? "),qr=Object(l["createTextVNode"])("Sign In");function Rr(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("material-input"),i=Object(l["resolveComponent"])("material-checkbox"),d=Object(l["resolveComponent"])("material-button"),m=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Er,[Vr,Object(l["createElementVNode"])("main",Nr,[Object(l["createElementVNode"])("section",null,[Object(l["createElementVNode"])("div",xr,[Object(l["createElementVNode"])("div",yr,[Object(l["createElementVNode"])("div",vr,[Object(l["createElementVNode"])("div",kr,[Object(l["createElementVNode"])("div",{class:"position-relative h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center",width:"100%"}])},null,4)]),Object(l["createElementVNode"])("div",wr,[Object(l["createElementVNode"])("div",Ar,[Sr,Object(l["createElementVNode"])("div",Br,[Object(l["createElementVNode"])("form",Cr,[Object(l["createElementVNode"])("div",_r,[Object(l["createVNode"])(r,{id:"name",type:"text",label:"Name",name:"name",size:"lg"})]),Object(l["createElementVNode"])("div",Pr,[Object(l["createVNode"])(r,{id:"email",type:"email",label:"Email",name:"email",size:"lg"})]),Object(l["createElementVNode"])("div",Ir,[Object(l["createVNode"])(r,{id:"password",type:"password",label:"Password",name:"password",size:"lg"})]),Object(l["createVNode"])(i,{id:"flexCheckDefault",class:"font-weight-light",checked:""},{default:Object(l["withCtx"])(()=>[Dr,Tr]),_:1}),Object(l["createElementVNode"])("div",Mr,[Object(l["createVNode"])(d,{class:"mt-4",variant:"gradient",color:"success",fullWidth:"",size:"lg"},{default:Object(l["withCtx"])(()=>[zr]),_:1})])])]),Object(l["createElementVNode"])("div",Fr,[Object(l["createElementVNode"])("p",Ur,[Lr,Object(l["createVNode"])(m,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold"},{default:Object(l["withCtx"])(()=>[qr]),_:1})])])])])])])])])])])}const $r=["id","type","name","value","placeholder","isRequired","disabled"];function Qr(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["input-group",`input-group-${a.variant} ${o.getStatus(a.error,a.success)}`])},[Object(l["createElementVNode"])("label",{class:Object(l["normalizeClass"])("static"===a.variant?"":"form-label")},Object(l["toDisplayString"])(a.label),3),Object(l["createElementVNode"])("input",{id:a.id,type:a.type,class:Object(l["normalizeClass"])(["form-control",o.getClasses(a.size)]),name:a.name,value:a.value,placeholder:a.placeholder,isRequired:a.isRequired,disabled:a.disabled},null,10,$r)],2)}function Jr(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}if(0!=document.querySelectorAll(".input-group").length){var Hr=document.querySelectorAll("input.form-control");Hr.forEach(e=>Jr(e,{onfocus:"focused(this)",onfocusout:"defocused(this)"}))}function Yr(){for(var e=document.querySelectorAll("input"),t=0;t<e.length;t++)e[t].hasAttribute("value")&&e[t].parentElement.classList.add("is-filled"),e[t].addEventListener("focus",(function(e){this.parentElement.classList.add("is-focused")}),!1),e[t].onkeyup=function(e){""!=this.value?this.parentElement.classList.add("is-filled"):this.parentElement.classList.remove("is-filled")},e[t].addEventListener("focusout",(function(e){""!=this.value&&this.parentElement.classList.add("is-filled"),this.parentElement.classList.remove("is-focused")}),!1)}var Wr={name:"MaterialInput",props:{variant:{type:String,default:"outline"},label:{type:String,default:""},size:{type:String,default:"default"},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:""},id:{type:String,required:!0},value:{type:String,default:""},placeholder:{type:String,default:""},type:{type:String,default:"text"},isRequired:{type:Boolean,default:!1}},mounted(){Yr()},methods:{getClasses:e=>{let t;return t=e?"form-control-"+e:null,t},getStatus:(e,t)=>{let a;return a=t?"is-valid":e?"is-invalid":null,a}}};const Xr=He()(Wr,[["render",Qr]]);var Zr=Xr;const Kr={class:"form-check p-0"},Gr=["id","name","checked"],ei=["for"];function ti(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Kr,[Object(l["createElementVNode"])("input",{id:a.id,class:"form-check-input",type:"checkbox",name:a.name,checked:a.checked},null,8,Gr),Object(l["createElementVNode"])("label",{for:a.id,class:"custom-control-label"},[Object(l["renderSlot"])(e.$slots,"default")],8,ei)])}var ai={name:"MaterialCheckbox",props:{name:{type:String,default:""},id:{type:String,default:""},checked:Boolean}};const li=He()(ai,[["render",ti]]);var ci=li;const si=document.getElementsByTagName("body")[0];var oi={name:"sign-up",components:{MaterialInput:Zr,MaterialCheckbox:ci,MaterialButton:nn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig(),si.classList.remove("bg-gray-100")},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig(),si.classList.add("bg-gray-100")},methods:{...Object($e["d"])(["toggleEveryDisplay","toggleHideConfig"])}};const ni=He()(oi,[["render",Rr]]);var ri=ni;const ii={class:"container-fluid"},di={class:"row"},mi={class:"col-12"},bi={class:"card"},pi={class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},ui=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"SITES"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"},[Object(l["createTextVNode"])(" In the Sites section, you can manage school by adding, editing, or deleting them. Additionally, you can track and update the number of teachers and "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("students associated with each site. This functionality ensures accurate and up-to-date information about each site. ")])],-1),Oi=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Site ",-1),ji={class:"card-body px-0 pb-2"},hi={class:"table-responsive p-0"},gi={class:"table align-items-center mb-0"},fi=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Staff "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),Ei={key:0},Vi=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),Ni=[Vi],xi={class:"align-middle text-center text-sm"},yi={class:"text-xs font-weight-bold mb-0"},vi={class:"d-flex"},ki={class:"text-xs font-weight-bold mb-0"},wi=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),Ai={class:"text-xs font-weight-bold mb-0"},Si={class:"text-xs font-weight-bold mb-0"},Bi={class:"align-middle text-center"},Ci={class:"text-secondary text-xs font-weight-bold"},_i={class:"align-middle text-center"},Pi={class:"text-secondary text-xs font-weight-bold"},Ii={class:"align-middle text-center"},Di={class:"text-secondary text-xs font-weight-bold"},Ti={class:"align-middle text-center text-sm"},Mi={class:"badge badge-sm bg-gradient-success"},zi={class:"align-middle text-center"},Fi=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),Ui=["onClick"];function Li(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ii,[Object(l["createElementVNode"])("div",di,[Object(l["createElementVNode"])("div",mi,[Object(l["createElementVNode"])("div",bi,[Object(l["createElementVNode"])("div",pi,[ui,o.userPermissions.create_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-school"}},{default:Object(l["withCtx"])(()=>[Oi]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ji,[Object(l["createElementVNode"])("div",hi,[Object(l["createElementVNode"])("table",gi,[fi,Object(l["createElementVNode"])("tbody",null,[0===s.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Ei,Ni)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",xi,[Object(l["createElementVNode"])("p",yi,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",vi,[Object(l["createElementVNode"])("p",ki,Object(l["toDisplayString"])(e.title),1),wi])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Ai,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Si,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",Bi,[Object(l["createElementVNode"])("span",Ci,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",_i,[Object(l["createElementVNode"])("span",Pi,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",Ii,[Object(l["createElementVNode"])("span",Di,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",Ti,[Object(l["createElementVNode"])("span",Mi,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",zi,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Fi]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,Ui)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var qi={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllSchools()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{allSchools:"",schools:6,user:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await Ke.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await Ke.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("35ea");const Ri=He()(qi,[["render",Li]]);var $i=Ri;const Qi={class:"container-fluid"},Ji={class:"row"},Hi={class:"col-12"},Yi={class:"card"},Wi=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"ARCHIVED SITES"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"},[Object(l["createTextVNode"])(" In the Archived Sites section, you can view and restore archived school locations. The details displayed include the student count and teacher count "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" for each archived site. This allows you to manage and review historical site data effectively. ")])])],-1),Xi={class:"card-body px-0 pb-2"},Zi=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),Ki=Object(l["createTextVNode"])(" Bulk Restore "),Gi=[Zi,Ki],ed={class:"table-responsive p-0"},td={class:"table align-items-center mb-0"},ad={class:""},ld={class:"form-check",style:{"margin-left":"-20px"}},cd=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),sd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID ",-1),od=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name ",-1),nd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),rd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country ",-1),id=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation ",-1),dd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Teachers ",-1),md=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students ",-1),bd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),pd={key:0},ud=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),Od=[ud],jd={class:"align-middle text-center text-sm"},hd={class:"form-check"},gd=["checked","onChange"],fd=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Ed={class:"align-middle text-center text-sm"},Vd={class:"text-xs font-weight-bold mb-0"},Nd={class:"d-flex"},xd={class:"text-xs font-weight-bold mb-0"},yd=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),vd={class:"text-xs font-weight-bold mb-0"},kd={class:"text-xs font-weight-bold mb-0"},wd={class:"align-middle text-center"},Ad={class:"text-secondary text-xs font-weight-bold"},Sd={class:"align-middle text-center"},Bd={class:"text-secondary text-xs font-weight-bold"},Cd={class:"align-middle text-center"},_d={class:"text-secondary text-xs font-weight-bold"},Pd={class:"align-middle text-center text-sm"},Id={class:"badge badge-sm bg-gradient-success"};function Dd(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Qi,[Object(l["createElementVNode"])("div",Ji,[Object(l["createElementVNode"])("div",Hi,[Object(l["createElementVNode"])("div",Yi,[Wi,Object(l["createElementVNode"])("div",Xi,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[0]||(t[0]=e=>o.confirmAction("restore"))},Gi),Object(l["createElementVNode"])("div",ed,[Object(l["createElementVNode"])("table",td,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",ad,[Object(l["createElementVNode"])("div",ld,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[1]||(t[1]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),cd])]),sd,od,nd,rd,id,dd,md,bd])]),Object(l["createElementVNode"])("tbody",null,[0===s.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",pd,Od)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",jd,[Object(l["createElementVNode"])("div",hd,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.id),onChange:t=>o.selectRecord(e.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,gd),fd])]),Object(l["createElementVNode"])("td",Ed,[Object(l["createElementVNode"])("p",Vd,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",Nd,[Object(l["createElementVNode"])("p",xd,Object(l["toDisplayString"])(e.title),1),yd])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",vd,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",kd,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",wd,[Object(l["createElementVNode"])("span",Ad,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",Sd,[Object(l["createElementVNode"])("span",Bd,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",Cd,[Object(l["createElementVNode"])("span",_d,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",Pd,[Object(l["createElementVNode"])("span",Id,Object(l["toDisplayString"])(e.status),1)])]))),128))])])])])])])])])}var Td={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getAllSchools(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{selectall:!1,selectedRecords:[],allSchools:"",schools:6,user:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{confirmAction(e){Xc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&"restore"==e&&this.bulkRestore()})},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await Ke.post("/bulkRestoreSchools",e);this.snackbarMsg(t.data.message),this.getAllSchools()}else this.snackbarMsg("Error: data not selected")},selectAll(){this.selectedRecords=[],this.allSchools.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/archivedSchools";"organization_admin"==this.user.role&&(e="/archivedSchools/"+this.user.id);const t=await Ke.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await Ke.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("d84d");const Md=He()(Td,[["render",Dd]]);var zd=Md;Object(l["pushScopeId"])("data-v-380dc9f4");const Fd={class:"container-fluid py-4"},Ud={class:"row"},Ld={class:"col-12"},qd={class:"card my-4"},Rd={class:"d-flex justify-content-between  border-radius-lg pt-4 "},$d=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Site",-1),Qd=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 px-4 py-2 border-radius-lg"}," Back ",-1),Jd={class:"card-body px-0 pb-2"},Hd={class:"table-responsive p-0"},Yd={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Wd={key:0,class:"mb-3 change-pass-alert"},Xd=Object(l["createElementVNode"])("br",null,null,-1),Zd={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},Kd={class:"form-bg container p-4 ms-2"},Gd={class:"card card-plain"},em={class:"card-body"},tm={role:"form"},am={class:"mb-1"},lm=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),cm={key:0,class:"text-danger error-txt"},sm={class:"mb-1"},om=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),nm={key:0,class:"text-danger error-txt"},rm={class:"mb-1"},im=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),dm={key:0,class:"text-danger error-txt"},mm={class:"mb-1"},bm=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),pm={key:0,class:"text-danger error-txt"},um={class:"mb-1"},Om=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),jm={key:0,class:"text-danger error-txt"},hm={key:0,class:"mb-1"},gm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),fm=Object(l["createElementVNode"])("br",null,null,-1),Em=["value"],Vm={key:0,class:"text-danger error-txt"},Nm={class:"mb-1"},xm=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),ym=Object(l["createElementVNode"])("br",null,null,-1),vm=["value"],km={key:0,class:"text-danger error-txt"},wm={class:"mb-1"},Am=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),Sm={key:0,class:"text-danger error-txt"},Bm={class:"mb-1"},Cm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),_m={key:0,class:"text-danger error-txt"},Pm={class:"mb-1"},Im=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),Dm=Object(l["createElementVNode"])("br",null,null,-1),Tm=["value"],Mm={key:0,class:"text-danger error-txt"},zm={class:"mt-4"};function Fm(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Fd,[Object(l["createElementVNode"])("div",Ud,[Object(l["createElementVNode"])("div",Ld,[Object(l["createElementVNode"])("div",qd,[Object(l["createElementVNode"])("div",Rd,[$d,Object(l["createVNode"])(n,{to:{name:"list-schools"}},{default:Object(l["withCtx"])(()=>[Qd]),_:1})]),Object(l["createElementVNode"])("div",Jd,[Object(l["createElementVNode"])("div",Hd,[Object(l["createElementVNode"])("div",Yd,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Wd,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Xd]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Zd,[Object(l["createElementVNode"])("div",Kd,[Object(l["createElementVNode"])("div",Gd,[Object(l["createElementVNode"])("div",em,[Object(l["createElementVNode"])("form",tm,[Object(l["createElementVNode"])("div",am,[lm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],s.newSchool.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cm,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sm,[om,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],s.newSchool.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nm,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",rm,[im,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newSchool.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dm,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",mm,[bm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],s.newSchool.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pm,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",um,[Om,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newSchool.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jm,"Address is required")):Object(l["createCommentVNode"])("",!0)]),"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hm,[gm,fm,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Em))),128))],512),[[l["vModelSelect"],s.newSchool.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Vm,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Nm,[xm,ym,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,vm))),128))],512),[[l["vModelSelect"],s.newSchool.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",km,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",wm,[Am,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>s.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newSchool.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Sm,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Bm,[Cm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>s.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],s.newSchool.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_m,"ZIP code is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Pm,[Im,Dm,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Tm))),128))],512),[[l["vModelSelect"],s.newSchool.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Mm,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zm,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>o.saveNewSchool&&o.saveNewSchool(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var Um={name:"",components:{},mounted(){this.getUser(),this.getOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("create_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_site");let e=!1,t="";t=Eo()(this.newSchool);for(let a in this.newSchool)""!==this.newSchool[a]&&void 0!==this.newSchool[a]||"organization_id"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewSchool(){if(!this.validateForm())try{let e="/createSchool";"organization_admin"==this.user.role&&(e="/createSchool/"+this.user.id),await Ke.post(e,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Saved Successfuly"),this.isError=!1}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}},async getOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("ae7d");const Lm=He()(Um,[["render",Fm],["__scopeId","data-v-380dc9f4"]]);var qm=Lm;Object(l["pushScopeId"])("data-v-eef239f2");const Rm={class:"container-fluid py-4"},$m={class:"row"},Qm={class:"col-12"},Jm={class:"card my-4"},Hm=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Site")],-1),Ym={class:"card-body px-0 pb-2"},Wm={class:"table-responsive p-0"},Xm={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Zm={key:0,class:"mb-3 change-pass-alert"},Km=Object(l["createElementVNode"])("br",null,null,-1),Gm={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},eb={class:"form-bg container p-4 ms-2"},tb={class:"card card-plain"},ab={class:"card-body"},lb={role:"form"},cb={class:"mb-1"},sb=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),ob={key:0,class:"text-danger error-txt"},nb={class:"mb-1"},rb=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),ib={key:0,class:"text-danger error-txt"},db={class:"mb-1"},mb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),bb={key:0,class:"text-danger error-txt"},pb={class:"mb-1"},ub=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),Ob={key:0,class:"text-danger error-txt"},jb={class:"mb-1"},hb=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),gb={key:0,class:"text-danger error-txt"},fb={key:0,class:"mb-1"},Eb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),Vb=Object(l["createElementVNode"])("br",null,null,-1),Nb=["value"],xb={key:0,class:"text-danger error-txt"},yb={class:"mb-1"},vb=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),kb=Object(l["createElementVNode"])("br",null,null,-1),wb=["value"],Ab={key:0,class:"text-danger error-txt"},Sb={class:"mb-1"},Bb=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),Cb={key:0,class:"text-danger error-txt"},_b={class:"mb-1"},Pb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),Ib={key:0,class:"text-danger error-txt"},Db={class:"mb-1"},Tb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),Mb=Object(l["createElementVNode"])("br",null,null,-1),zb=["value"],Fb={key:0,class:"text-danger error-txt"},Ub={class:"mt-4"};function Lb(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Rm,[Object(l["createElementVNode"])("div",$m,[Object(l["createElementVNode"])("div",Qm,[Object(l["createElementVNode"])("div",Jm,[Hm,Object(l["createElementVNode"])("div",Ym,[Object(l["createElementVNode"])("div",Wm,[Object(l["createElementVNode"])("div",Xm,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Zm,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Km]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Gm,[Object(l["createElementVNode"])("div",eb,[Object(l["createElementVNode"])("div",tb,[Object(l["createElementVNode"])("div",ab,[Object(l["createElementVNode"])("form",lb,[Object(l["createElementVNode"])("div",cb,[sb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],s.newSchool.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ob,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",nb,[rb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],s.newSchool.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ib,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",db,[mb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newSchool.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bb,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pb,[ub,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],s.newSchool.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ob,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",jb,[hb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newSchool.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gb,"Address is required")):Object(l["createCommentVNode"])("",!0)]),"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",fb,[Eb,Vb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Nb))),128))],512),[[l["vModelSelect"],s.newSchool.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xb,"Organization is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",yb,[vb,kb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,wb))),128))],512),[[l["vModelSelect"],s.newSchool.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ab,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Sb,[Bb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>s.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newSchool.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Cb,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_b,[Pb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>s.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],s.newSchool.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ib,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Db,[Tb,Mb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,zb))),128))],512),[[l["vModelSelect"],s.newSchool.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Fb,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Ub,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>o.updateData&&o.updateData(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn ms-3 text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var qb={name:"",components:{},mounted(){this.getUser(),this.editSchool(),this.getOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("edit_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],schoolData:"",newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_site");let e=!1,t="";t=Eo()(this.newSchool);for(let a in this.newSchool)""===this.newSchool[a]||void 0===this.newSchool[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editSchool(){let e=this.$route.params.id;try{const t=await Ke.get("/editSchool/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newSchool.organization_id=t.organization_id,this.newSchool.website=t.website,this.newSchool.title=t.title,this.newSchool.website=t.website,this.newSchool.email=t.email,this.newSchool.phone=t.phone,this.newSchool.country=t.country,this.newSchool.city=t.city,this.newSchool.state=t.state,this.newSchool.zip=t.zip,this.newSchool.address=t.address,this.newSchool.status=t.status,this.newSchool.description=t.description)},async updateData(){if(this.validateForm())return;let e=this.$route.params.id;try{let t="/updateSchool/"+e;"organization_admin"==this.user.role&&(t="/updateSchool/"+e+"/"+this.user.id),await Ke.put(t,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("1317");const Rb=He()(qb,[["render",Lb],["__scopeId","data-v-eef239f2"]]);var $b=Rb,Qb=a("aa68"),Jb=a.n(Qb);Object(l["pushScopeId"])("data-v-5ec1cf83");const Hb={class:"row"},Yb={class:"col-12 col-md-6 col-xl-6 position-relative"},Wb={class:"card card-plain h-100"},Xb=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Branding Settings")],-1),Zb={class:"p-3 card-body"},Kb={class:"list-group"},Gb={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},ep={class:"col-md-5 mx-auto bg-white new-pass p-2"},tp=Object(l["createElementVNode"])("label",null,"Primary Color",-1),ap=Object(l["createElementVNode"])("br",null,null,-1),lp=Object(l["createElementVNode"])("label",null,"Secondary Color",-1),cp=Object(l["createElementVNode"])("br",null,null,-1),sp=Object(l["createElementVNode"])("label",null,"Logo",-1),op=["src"],np=Object(l["createElementVNode"])("br",null,null,-1),rp=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),ip={class:"col-12 col-md-5 col-xl-6 position-relative"},dp={class:"card card-plain h-100"},mp=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Finance Coordinator Email")],-1),bp={class:"p-3 card-body"},pp={class:"list-group"},up={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Op={class:"col-md-5 mx-auto bg-white new-pass p-2"},jp=Object(l["createElementVNode"])("label",null,"Email",-1),hp=Object(l["createElementVNode"])("br",null,null,-1),gp={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},fp={class:"col-md-5 mx-auto bg-white new-pass p-2"},Ep=Object(l["createElementVNode"])("h6",null,"Payment Method",-1),Vp={class:"col-md-12 ms-auto"},Np=["onClick"],xp={key:0,class:"w-10 me-3 mb-0",src:Jb.a,alt:"logo"},yp={key:1,class:"w-10 me-3 mb-0",src:lt.a,alt:"logo"},vp={class:"mb-0"},kp=["onClick"],wp=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1),Ap=Object(l["createElementVNode"])("br",null,null,-1);function Sp(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",Hb,[Object(l["createElementVNode"])("div",Yb,[Object(l["createElementVNode"])("div",Wb,[Xb,Object(l["createElementVNode"])("div",Zb,[Object(l["createElementVNode"])("ul",Kb,[Object(l["createElementVNode"])("li",Gb,[Object(l["createElementVNode"])("div",ep,[tp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.branding.primaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.branding.primaryColor]]),ap,lp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.branding.SecondaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.branding.SecondaryColor]]),cp,sp,Object(l["createElementVNode"])("input",{onChange:t[2]||(t[2]=(...e)=>o.onFileChange&&o.onFileChange(...e)),id:"card-holder-name",type:"file",class:"bg-white w-100  mb-2"},null,32),s.imageUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:s.imageUrl,height:"60",width:"60",alt:"Selected Image"},null,8,op)):Object(l["createCommentVNode"])("",!0),np,Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>o.updateBranding()),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),rp]),Object(l["createElementVNode"])("div",ip,[Object(l["createElementVNode"])("div",dp,[mp,Object(l["createElementVNode"])("div",bp,[Object(l["createElementVNode"])("ul",pp,[Object(l["createElementVNode"])("li",up,[Object(l["createElementVNode"])("div",Op,[jp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.finance_coordinator_email=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.finance_coordinator_email]]),hp,Object(l["createElementVNode"])("button",{onClick:t[5]||(t[5]=e=>o.updateFinanceCoordiantorEmail()),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Save ")])]),Object(l["createElementVNode"])("li",gp,[Object(l["createElementVNode"])("div",fp,[Ep,Object(l["createElementVNode"])("div",Vp,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:Object(l["normalizeClass"])([{selected:e.isSelected===a}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:t=>e.toggleSelection(a,t)},["visa"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",xp)):Object(l["createCommentVNode"])("",!0),"mastercard"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",yp)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",vp," **** **** **** "+Object(l["toDisplayString"])(t.card.last4),1),Object(l["createElementVNode"])("i",{onClick:e=>o.confirmDelete(t.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,kp),wp],10,Np))),128))]),s.dataLoaded&&""==s.userCards?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:0,onClick:t[6]||(t[6]=e=>o.addCard()),class:"add-payment-method"},"Add Payment Method →")):Object(l["createCommentVNode"])("",!0),Ap])])])])])])])])}Object(l["popScopeId"])();var Bp={mounted(){this.getSettings(),this.getCustomerPaymentMethods()},computed:{...Object($e["c"])(["getBrandingSetting"])},data(){return{dataLoaded:!1,userCards:"",imageUrl:null,selectedFile:null,finance_coordinator_email:null,branding:{primaryColor:"",SecondaryColor:"",logo:""}}},methods:{addCard(){let e=this.$route.params.id;this.$router.push({name:"card-school",params:{id:e}})},onFileChange(e){const t=e.target.files[0];t&&(this.imageUrl=URL.createObjectURL(t),this.selectedFile=t)},async getSettings(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e);try{let e=await Ke.post("/getSettings",t);this.branding.primaryColor=Eo()(e.data.primary_color),this.branding.SecondaryColor=Eo()(e.data.secondary_color),this.imageUrl=this.$env_vars.BASE_URL+e.data.logo,this.finance_coordinator_email=e.data.finance_coordinator_email}catch(a){console.log(a)}},async updateBranding(){let e=this.$route.params.id;const t=new FormData;t.append("logo",this.selectedFile),t.append("primary_color",this.branding.primaryColor),t.append("secondary_color",this.branding.SecondaryColor),t.append("school_id",e);try{await Ke.post("/storebranding",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async updateFinanceCoordiantorEmail(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e),t.append("finance_coordinator_email",this.finance_coordinator_email);try{await Ke.post("/updateFinanceCoordiantorEmail",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t,type:"school"};try{const e=await Ke.post("/getPaymentMethods",a);this.userCards=e.data.data,this.dataLoaded=!0}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await Ke.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})}}};a("ba3f");const Cp=He()(Bp,[["render",Sp],["__scopeId","data-v-5ec1cf83"]]);var _p=Cp;const Pp={class:"card"},Ip=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),Dp={class:"card-body"},Tp=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2"></div></div>',3),Mp={class:"row d-flex justify-content-center"};function zp(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",Pp,[Ip,Object(l["createElementVNode"])("div",Dp,[Tp,Object(l["createElementVNode"])("div",Mp,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>o.submitPaymentMethod&&o.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"me-3 w-20 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var Fp={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),s=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),s.parentNode.insertBefore(c,s)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=this.$route.params.id,a={card_token:e,school_id:t};try{await Ke.post("/createSchoolCard",a),this.$router.push({name:"settings-school",params:{id:t}})}catch(l){console.log(l),this.snackbarMsg("Something Went Wrong")}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("9e19");const Up=He()(Fp,[["render",zp]]);var Lp=Up;const qp={class:"container-fluid"},Rp={class:"row"},$p={class:"col-12"},Qp={class:"card px-3"},Jp={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},Hp=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STUDENTS"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Here, you can oversee student accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each student.")])],-1),Yp=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Student ",-1),Wp=Object(l["createElementVNode"])("h2",null,"Modal Content",-1),Xp=Object(l["createElementVNode"])("p",null,"This is the content of the modal.",-1),Zp={class:"filter-container"},Kp={style:{display:"flex"}},Gp=["value"],eu=Object(l["createElementVNode"])("i",{class:"fas fa-credit-card payment-icon me-1"},null,-1),tu=Object(l["createTextVNode"])(" Bulk Topup "),au=[eu,tu],lu=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),cu=Object(l["createTextVNode"])(" Export To XLS "),su=[lu,cu],ou={class:"card-body px-0 pb-2"},nu={class:"table-responsive p-0 student-table"},ru={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"-2px !important"}},iu={class:"thead"},du={class:"pe-5"},mu={class:"form-check",style:{"margin-left":"0px !important"}},bu=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),pu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),uu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),Ou=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),ju=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),hu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," FSM ",-1),gu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Balance ",-1),fu={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},Eu={key:1,class:"text-center text-uppercase text-xxs font-weight-bolder"},Vu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),Nu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),xu={key:0},yu=Object(l["createElementVNode"])("td",{colspan:"11",class:"text-center"}," No data available. ",-1),vu=[yu],ku={class:"text-sm"},wu={class:"form-check",style:{"margin-left":"17px !important"}},Au=["checked","onChange"],Su=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Bu={class:"align-middle text-center text-sm"},Cu={class:"text-xs font-weight-bold mb-0"},_u={class:"text-xs font-weight-bold mb-0"},Pu={class:"text-xs font-weight-bold mb-0"},Iu={class:"text-xs mb-0",style:{"font-size":"8px"}},Du={class:"align-middle text-center"},Tu={class:"text-secondary text-xs font-weight-bold"},Mu={class:"align-middle text-center"},zu={class:"align-middle text-center"},Fu={class:"text-secondary text-xs font-weight-bold"},Uu={key:0,class:"align-middle text-center"},Lu=Object(l["createElementVNode"])("i",{class:"fas fa-donate fs-5 me-2"},null,-1),qu={key:1,class:"align-middle text-center"},Ru=["onClick"],$u={class:"align-middle text-center text-sm"},Qu={class:"badge badge-sm bg-gradient-success"},Ju={class:"align-middle text-center"},Hu=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),Yu=["onClick"],Wu={class:"row"},Xu={class:"col-md-12 col-lg-12"},Zu={class:"pagination-container"},Ku={class:"entries-dropdown"},Gu=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),eO=["value"],tO={class:"pagination-wrapper"},aO={class:"pagination"},lO=["onClick"];function cO(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("BulkTopup");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qp,[Object(l["createElementVNode"])("div",Rp,[Object(l["createElementVNode"])("div",$p,[Object(l["createElementVNode"])("div",Qp,[Object(l["createElementVNode"])("div",Jp,[Hp,o.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-student"}},{default:Object(l["withCtx"])(()=>[Yp]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",null,[Object(l["createVNode"])(r,{show:s.showModal,task:e.task,onClose:t[0]||(t[0]=e=>s.showModal=!1),onUpdateTask:o.updateAmount},{default:Object(l["withCtx"])(()=>[Wp,Xp]),_:1},8,["show","task","onUpdateTask"]),Object(l["createElementVNode"])("div",Zp,[Object(l["createElementVNode"])("span",Kp,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[1]||(t[1]=(...e)=>o.filterStudents&&o.filterStudents(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[3]||(t[3]=(...e)=>o.filterStudents&&o.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[4]||(t[4]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Gp))),128))],544),[[l["vModelSelect"],s.filterBy]]),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.showModal=!0)},au)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.exportTableToXLS())},su)])])]),Object(l["createElementVNode"])("div",ou,[Object(l["createElementVNode"])("div",nu,[Object(l["createElementVNode"])("table",ru,[Object(l["createElementVNode"])("thead",iu,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",du,[Object(l["createElementVNode"])("div",mu,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),bu])]),pu,uu,Ou,ju,hu,gu,o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",fu," Wallet ")):Object(l["createCommentVNode"])("",!0),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",Eu," Topup ")):Object(l["createCommentVNode"])("",!0),Vu,Nu])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",xu,vu)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",ku,[Object(l["createElementVNode"])("div",wu,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.user.id),onChange:t=>o.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,Au),Su])]),Object(l["createElementVNode"])("td",Bu,[Object(l["createElementVNode"])("p",Cu,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",_u,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Pu,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",Iu,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",Du,[Object(l["createElementVNode"])("span",Tu,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",Mu,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["text-secondary text-xs font-weight-bold",null===e.fsm_amount?"text-danger":"text-success"])},Object(l["toDisplayString"])(null!==e.fsm_amount?"£"+o.formattedPrice(e.fsm_amount):"No FSM"),3)]),Object(l["createElementVNode"])("td",zu,[Object(l["createElementVNode"])("span",Fu,"£"+Object(l["toDisplayString"])(o.formattedPrice(e.user.balance?e.user.balance.ballance:0)),1)]),o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",Uu,[Object(l["createVNode"])(n,{to:{name:"balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[Lu]),_:2},1032,["to"])])):Object(l["createCommentVNode"])("",!0),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",qu,[Object(l["createElementVNode"])("i",{onClick:t=>o.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,Ru)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",$u,[Object(l["createElementVNode"])("span",Qu,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",Ju,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-student",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Hu]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,Yu)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",Wu,[Object(l["createElementVNode"])("div",Xu,[Object(l["createElementVNode"])("div",Zu,[Object(l["createElementVNode"])("div",Ku,[Gu,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,eO))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",tO,[Object(l["createElementVNode"])("ul",aO,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,lO)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])}Object(l["pushScopeId"])("data-v-4912dc64");const sO={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},oO={class:"modal-dialog"},nO={class:"modal-content"},rO={class:"modal-header"},iO=Object(l["createElementVNode"])("h5",{class:"h5 modal-title"},"Bulk Topup",-1),dO=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),mO=[dO],bO={class:"pt-4 modal-body"},pO=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),uO={class:"mb-4 input-group"},OO=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),jO={key:0,class:"alert alert-success"},hO={class:"text-end"};function gO(e,t,a,c,s,o){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",sO,[Object(l["createElementVNode"])("div",oO,[Object(l["createElementVNode"])("div",nO,[Object(l["createElementVNode"])("div",rO,[iO,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),"aria-label":"Close"},mO)]),Object(l["createElementVNode"])("div",bO,[pO,Object(l["createElementVNode"])("div",uO,[OO,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>o.formattedBalance=e),class:"form-control",placeholder:"Topup amount",type:"text"},null,512),[[l["vModelText"],o.formattedBalance]])]),s.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",jO,Object(l["toDisplayString"])(s.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",hO,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>o.saveChanges&&o.saveChanges(...e)),class:"m-1 btn btn-primary"}," Topup "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var fO={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},computed:{formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},data(){return{addedBalance:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},saveChanges(){this.$emit("update-task",this.addedBalance),this.closeModal()}}};a("5e72");const EO=He()(fO,[["render",gO],["__scopeId","data-v-4912dc64"]]);var VO=EO,NO=a("25ca"),xO={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStudents()},updated(){this.$permissions.redirectIfNotAllowed("view_student")},components:{BulkTopup:VO},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Name",seachString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"students_table.xlsx")},async updateAmount(e){this.topUpAmount=e;let t=[];this.selectedRecords.filter(e=>{e.value&&t.push(e.id)});let a={topup_amount:this.topUpAmount,students:t};if(t.length&&null!=this.topUpAmount)try{const e=await Ke.post("/bulkTopUp",a);this.snackbarMsg(e.data.message),this.getAllStudents()}catch(l){console.log(l)}else this.snackbarMsg("Please select the students and enter amount!")},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e={type:this.filterBy,value:this.seachString,status:"active"};try{const t=await Ke.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await Ke.post("getAllStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await Ke.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("3b43");const yO=He()(xO,[["render",cO]]);var vO=yO;const kO={class:"container-fluid"},wO={class:"row"},AO={class:"col-12"},SO={class:"card px-3"},BO=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-2"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED-STUDENTS"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Every archived student can be found in this table. Here, you can manage archived student accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),CO={class:"card-body px-0 pb-2"},_O={class:"filter-container mb-1",style:{"margin-top":"-11px"}},PO={style:{display:"flex"}},IO=["value"],DO=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),TO=Object(l["createTextVNode"])(" Export To XLS "),MO=[DO,TO],zO=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),FO=Object(l["createTextVNode"])(" Bulk Restore "),UO=[zO,FO],LO=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),qO=Object(l["createTextVNode"])(" Bulk Delete "),RO=[LO,qO],$O={class:"table-responsive p-0 student-table"},QO={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"-2px !important"}},JO={class:""},HO={class:"form-check",style:{"margin-left":"-20px"}},YO=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),WO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),XO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),ZO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),KO=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),GO=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),ej={key:0},tj=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),aj=[tj],lj={class:"align-middle text-center text-sm"},cj={class:"form-check"},sj=["checked","onChange"],oj=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),nj={class:"align-middle text-center text-sm"},rj={class:"text-xs font-weight-bold mb-0"},ij={class:"text-xs font-weight-bold mb-0"},dj={class:"text-xs font-weight-bold mb-0"},mj={class:"text-xs mb-0",style:{"font-size":"8px"}},bj={class:"align-middle text-center"},pj={class:"text-secondary text-xs font-weight-bold"},uj={class:"align-middle text-center text-sm"},Oj={class:"badge badge-sm bg-gradient-success"},jj={class:"row"},hj={class:"col-md-12 col-lg-12"},gj={class:"pagination-container"},fj={class:"entries-dropdown"},Ej=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),Vj=["value"],Nj={class:"pagination-wrapper"},xj={class:"pagination"},yj=["onClick"];function vj(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kO,[Object(l["createElementVNode"])("div",wO,[Object(l["createElementVNode"])("div",AO,[Object(l["createElementVNode"])("div",SO,[BO,Object(l["createElementVNode"])("div",CO,[Object(l["createElementVNode"])("div",_O,[Object(l["createElementVNode"])("span",PO,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterStudents&&o.filterStudents(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterStudents&&o.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,IO))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},MO),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.confirmAction("restore"))},UO),o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.confirmAction("delete"))},RO)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",$O,[Object(l["createElementVNode"])("table",QO,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",JO,[Object(l["createElementVNode"])("div",HO,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),YO])]),WO,XO,ZO,KO,GO])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",ej,aj)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",lj,[Object(l["createElementVNode"])("div",cj,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.user.id),onChange:t=>o.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,sj),oj])]),Object(l["createElementVNode"])("td",nj,[Object(l["createElementVNode"])("p",rj,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",ij,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",dj,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",mj,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",bj,[Object(l["createElementVNode"])("span",pj,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",uj,[Object(l["createElementVNode"])("span",Oj,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",jj,[Object(l["createElementVNode"])("div",hj,[Object(l["createElementVNode"])("div",gj,[Object(l["createElementVNode"])("div",fj,[Ej,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,Vj))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",Nj,[Object(l["createElementVNode"])("ul",xj,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,yj)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])}var kj={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStudents(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_student")},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,selectall:!1,selectedRecords:[],filterBy:"Name",seachString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"archived_students.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await Ke.post("/bulkDeleteStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await Ke.post("/bulkRestoreStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){Xc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await Ke.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await Ke.post("archivedStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await Ke.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("4ce1");const wj=He()(kj,[["render",vj]]);var Aj=wj;Object(l["pushScopeId"])("data-v-81dc0322");const Sj={class:"container-fluid py-4"},Bj={class:"row"},Cj={class:"col-12"},_j={class:"card my-4"},Pj={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},Ij=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Student",-1),Dj=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),Tj={class:"card-body px-0 pb-2"},Mj={class:"table-responsive p-0"},zj={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Fj={key:0,class:"mb-3 change-pass-alert"},Uj=Object(l["createElementVNode"])("br",null,null,-1),Lj={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},qj={class:"form-bg container p-4"},Rj=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),$j={class:"card card-plain"},Qj={class:"card-body"},Jj={role:"form"},Hj={class:"mb-1"},Yj=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Wj={key:0,class:"text-danger error-txt"},Xj={class:"mb-1"},Zj=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Kj={key:0,class:"text-danger error-txt"},Gj={class:"mb-1"},eh=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),th={key:0,class:"text-danger error-txt"},ah={class:"mb-1"},lh=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),ch={key:0,class:"text-danger error-txt"},sh={class:"mb-1"},oh=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),nh={key:0,class:"text-danger error-txt"},rh={class:"mb-1"},ih=Object(l["createElementVNode"])("label",{class:"input-label",for:"date_of_birth"},"Date Of Birth",-1),dh={class:"mb-1"},mh=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),bh=Object(l["createElementVNode"])("br",null,null,-1),ph=["value"],uh={key:0,class:"text-danger error-txt"},Oh={class:"mb-1"},jh=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),hh=Object(l["createElementVNode"])("br",null,null,-1),gh=["value"],fh={key:0,class:"text-danger error-txt"},Eh={class:"mb-1"},Vh=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance",-1),Nh={class:"mb-1"},xh=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),yh=Object(l["createElementVNode"])("br",null,null,-1),vh=["value"],kh={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},wh={class:""};function Ah(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Sj,[Object(l["createElementVNode"])("div",Bj,[Object(l["createElementVNode"])("div",Cj,[Object(l["createElementVNode"])("div",_j,[Object(l["createElementVNode"])("div",Pj,[Ij,Object(l["createVNode"])(n,{to:{name:"list-students"}},{default:Object(l["withCtx"])(()=>[Dj]),_:1})]),Object(l["createElementVNode"])("div",Tj,[Object(l["createElementVNode"])("div",Mj,[Object(l["createElementVNode"])("div",zj,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Fj,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Uj]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Lj,[Object(l["createElementVNode"])("div",qj,[Rj,Object(l["createElementVNode"])("div",$j,[Object(l["createElementVNode"])("div",Qj,[Object(l["createElementVNode"])("form",Jj,[Object(l["createElementVNode"])("div",Hj,[Yj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStudent.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Wj,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Xj,[Zj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStudent.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Kj,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Gj,[eh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStudent.student_id=e),type:"text",placeholder:"Student ID",name:"student_id"},null,512),[[l["vModelText"],s.newStudent.student_id]]),""!==s.formValidation&&""!==s.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",th,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ah,[lh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStudent.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],s.newStudent.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ch,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sh,[oh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStudent.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nh,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",rh,[ih,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"date_of_birth","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStudent.date_of_birth=e),type:"date",placeholder:"date of birth",name:"date_of_birth"},null,512),[[l["vModelText"],s.newStudent.date_of_birth]])]),Object(l["createElementVNode"])("div",dh,[mh,bh,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,ph))),128))],512),[[l["vModelSelect"],s.newStudent.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uh,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Oh,[jh,hh,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,gh))),128))],512),[[l["vModelSelect"],s.newStudent.fsm]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fh,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Eh,[Vh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[8]||(t[8]=e=>o.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],o.formattedBalance]])]),Object(l["createElementVNode"])("div",Nh,[xh,yh,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,vh))),128))],512),[[l["vModelSelect"],s.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",kh,[Object(l["createElementVNode"])("div",wh,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=(...e)=>o.saveNewStudent&&o.saveNewStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Student")])])])])])])])])])}Object(l["popScopeId"])();var Sh={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("create_student")},computed:{formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{selected:null,fsm:[!1,!0],allAttributes:"",availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",multiValue:"",newStudent:{mifare_id:"",school_id:"",student_id:"",attribute_id:"",attributes:[],first_name:"",last_name:"",email:"",date_of_birth:"",status:"",fsm:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_student");let e=!1,t="";t=Eo()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&void 0!==this.newStudent[a]||"attribute_id"===a||"balance"===a||"date_of_birth"===a||"add_amount"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStudent(){if(!this.validateForm())try{let e=await Ke.post("/createStudent",this.newStudent);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async getAllAttributes(){try{const e=await Ke.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},async createCustomer(e){let t=this.newStudent.first_name+" "+this.newStudent.last_name,a={user_id:e,name:t,email:this.newStudent.email};try{await Ke.post("/createCustomer",a)}catch(l){console.log(l)}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await Ke.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("8e18");const Bh=He()(Sh,[["render",Ah],["__scopeId","data-v-81dc0322"]]);var Ch=Bh;Object(l["pushScopeId"])("data-v-03664da6");const _h={class:"container-fluid py-4"},Ph={class:"row"},Ih={class:"col-12"},Dh={class:"card my-4"},Th=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Student")],-1),Mh={class:"card-body px-0 pb-2"},zh={class:"table-responsive p-0"},Fh={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},Uh={key:0,class:"mb-3 change-pass-alert"},Lh=Object(l["createElementVNode"])("br",null,null,-1),qh={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Rh={class:"form-bg container p-4"},$h=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),Qh={class:"card card-plain"},Jh={class:"card-body"},Hh={role:"form"},Yh={class:"mb-1"},Wh=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Xh={key:0,class:"text-danger error-txt"},Zh={class:"mb-1"},Kh=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Gh={key:0,class:"text-danger error-txt"},eg={class:"mb-1"},tg=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),ag={key:0,class:"text-danger error-txt"},lg={class:"mb-1"},cg=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),sg={key:0,class:"text-danger error-txt"},og={class:"mb-1"},ng=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),rg={key:0,class:"text-danger error-txt"},ig={class:"mb-1"},dg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),mg=Object(l["createElementVNode"])("br",null,null,-1),bg=["value"],pg={key:0,class:"text-danger error-txt"},ug={class:"mb-1"},Og=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),jg=Object(l["createElementVNode"])("br",null,null,-1),hg=["value"],gg={key:0,class:"text-danger error-txt"},fg={class:"mb-1"},Eg=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance",-1),Vg={class:"mb-1"},Ng=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),xg={class:"mb-1"},yg=Object(l["createElementVNode"])("label",{class:"input-label",for:"date_of_birth"},"Date Of Birth",-1),vg={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},kg={class:"form-bg container p-4"},wg=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),Ag={class:"card card-plain"},Sg={class:"card-body"},Bg={role:"form"},Cg={class:"mb-1"},_g=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Pg=Object(l["createElementVNode"])("br",null,null,-1),Ig=["value"],Dg={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},Tg={class:"form-bg container p-4"},Mg=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),zg=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),Fg={class:"card card-plain"},Ug={class:"card-body"},Lg={role:"form"},qg={class:"mb-1"},Rg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),$g={class:"mb-1"},Qg=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),Jg={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Hg={class:""};function Yg(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_h,[Object(l["createElementVNode"])("div",Ph,[Object(l["createElementVNode"])("div",Ih,[Object(l["createElementVNode"])("div",Dh,[Th,Object(l["createElementVNode"])("div",Mh,[Object(l["createElementVNode"])("div",zh,[Object(l["createElementVNode"])("div",Fh,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Uh,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Lh]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",qh,[Object(l["createElementVNode"])("div",Rh,[$h,Object(l["createElementVNode"])("div",Qh,[Object(l["createElementVNode"])("div",Jh,[Object(l["createElementVNode"])("form",Hh,[Object(l["createElementVNode"])("div",Yh,[Wh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStudent.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xh,"first name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Zh,[Kh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStudent.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gh,"last name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eg,[tg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStudent.mifare_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStudent.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ag," MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lg,[cg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStudent.student_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStudent.student_id]]),""!==s.formValidation&&""!==s.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",sg," student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",og,[ng,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStudent.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rg,"email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ig,[dg,mg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,bg))),128))],512),[[l["vModelSelect"],s.newStudent.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pg,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ug,[Og,jg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,hg))),128))],512),[[l["vModelSelect"],s.newStudent.fsm]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gg,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",fg,[Eg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[7]||(t[7]=e=>o.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],o.formattedBalance]])]),Object(l["createElementVNode"])("div",Vg,[Ng,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[8]||(t[8]=e=>o.formattedAmount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],o.formattedAmount]])]),Object(l["createElementVNode"])("div",xg,[yg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"date_of_birth","onUpdate:modelValue":t[9]||(t[9]=e=>s.newStudent.date_of_birth=e),type:"date",placeholder:"date of birth",name:"date_of_birth"},null,512),[[l["vModelText"],s.newStudent.date_of_birth]])])])])])])]),Object(l["createElementVNode"])("div",vg,[Object(l["createElementVNode"])("div",kg,[wg,Object(l["createElementVNode"])("div",Ag,[Object(l["createElementVNode"])("div",Sg,[Object(l["createElementVNode"])("form",Bg,[Object(l["createElementVNode"])("div",Cg,[_g,Pg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>s.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Ig))),128))],512),[[l["vModelSelect"],s.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",Dg,[Object(l["createElementVNode"])("div",Tg,[Mg,zg,Object(l["createElementVNode"])("div",Fg,[Object(l["createElementVNode"])("div",Ug,[Object(l["createElementVNode"])("form",Lg,[Object(l["createElementVNode"])("div",qg,[Rg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[11]||(t[11]=e=>s.newStudent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newStudent.password]])]),Object(l["createElementVNode"])("div",$g,[Qg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[12]||(t[12]=e=>s.newStudent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newStudent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",Jg,[Object(l["createElementVNode"])("div",Hg,[Object(l["createElementVNode"])("button",{onClick:t[13]||(t[13]=(...e)=>o.updateStudent&&o.updateStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var Wg={name:"",components:{},mounted(){this.getUser(),this.editStudent(),this.getSchools(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("edit_student")},computed:{formattedAmount:{get(){return parseFloat(this.newStudent.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.add_amount=t}},formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{allAttributes:"",availableCountries:["UK","USA","Canada"],user:"",formValidation:"",isError:!1,validationErrors:"",fsm:[!1,!0],selectedAttrs:[],newStudent:{school_id:"",student_id:"",add_amount:"",mifare_id:"",attribute_id:"",attributes:[],first_name:"",last_name:"",email:"",date_of_birth:"",status:"",password:"",password_confirmation:"",fsm:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_student");let e=!1,t="";t=Eo()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&null!==this.newStudent[a]||"attribute_id"===a||"date_of_birth"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStudent(){let e=this.$route.params.id;try{const t=await Ke.get("/editStudent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStudent.school_id=t.school_id,this.newStudent.student_id=t.student_id,this.newStudent.mifare_id=t.mifare_id,this.newStudent.first_name=t.user.first_name,this.newStudent.last_name=t.user.last_name,this.newStudent.email=t.user.email,this.newStudent.date_of_birth=t.dob,this.newStudent.status=t.user.status,this.newStudent.fsm=0!=t.fsm_activated,this.newStudent.attribute_id=t.attribute_id,this.newStudent.balance=this.formattedPrice(t.balance),this.newStudent.attributes=t.attributes)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async updateStudent(){if(this.validateForm())return;let e=this.$route.params.id;try{await Ke.put("/updateStudent/"+e,this.newStudent),this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await Ke.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async getAllAttributes(){try{const e=await Ke.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}this.allAttributes.map(e=>{this.newStudent.attributes.includes(e.id)&&this.selectedAttrs.push(e)})},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})}}};a("f19e");const Xg=He()(Wg,[["render",Yg],["__scopeId","data-v-03664da6"]]);var Zg=Xg;const Kg={class:"container-fluid py-4"},Gg={class:"row"},ef={class:"col-12"},tf={class:"card my-4"},af={class:"card-body px-0 pb-2"},lf={class:"table-responsive p-0"},cf={class:"filter-container"},sf=Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,-1),of=Object(l["createElementVNode"])("option",{value:"",disabled:"",selected:""},"Filter",-1),nf=["value"],rf=Object(l["createElementVNode"])("i",{class:"fas fa-filter filter-icon me-1"},null,-1),df={class:"table align-items-center mb-0"},mf=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Type "),Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Amount "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Date "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Action ")])],-1),bf={class:"align-middle text-center"},pf={class:"text-xs text-secondary mb-0"},uf={class:"align-middle text-center"},Of={class:"d-flex justify-content-center"},jf={key:0,class:"fas fa-plus fa-xs text-success me-2","aria-hidden":"true"},hf={key:1,class:"fas fa-minus fa-xs text-danger me-2","aria-hidden":"true"},gf={class:"text-xs text-secondary mb-0"},ff={class:"align-middle text-center"},Ef={class:"text-secondary text-xs "},Vf={class:"align-middle text-center text-sm"},Nf=["onClick"];function xf(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Kg,[Object(l["createElementVNode"])("div",Gg,[Object(l["createElementVNode"])("div",ef,[Object(l["createElementVNode"])("div",tf,[Object(l["createElementVNode"])("div",af,[Object(l["createElementVNode"])("div",lf,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",cf,[sf,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box filter-type-btn","onUpdate:modelValue":t[0]||(t[0]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[of,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,nf))),128))],512),[[l["vModelSelect"],s.filterBy]]),rf])]),Object(l["createElementVNode"])("table",df,[mf,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",bf,[Object(l["createElementVNode"])("p",pf,Object(l["toDisplayString"])(e.type),1)]),Object(l["createElementVNode"])("td",uf,[Object(l["createElementVNode"])("span",Of,["top_up"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",jf)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",hf)),Object(l["createElementVNode"])("p",gf,"£"+Object(l["toDisplayString"])(o.formattedPrice(e.amount)),1)])]),Object(l["createElementVNode"])("td",ff,[Object(l["createElementVNode"])("span",Ef,Object(l["toDisplayString"])(e.created_at.toString().split("T")[0]),1)]),Object(l["createElementVNode"])("td",Vf,[Object(l["createElementVNode"])("i",{onClick:t=>o.deleteTransactionHistory(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,Nf)])]))),128))])])])])])])])])}var yf={name:"tables",mounted(){this.getTransactionHistory()},data(){return{transactionHistoryList:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getTransactionHistory(){let e,t;this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id);let a={user_id:t,admin_id:null};try{const e=await Ke.post("/getTransactionHistory",a);this.transactionHistoryList=e.data}catch(l){console.log(l)}},async deleteTransactionHistory(e){try{await Ke.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)}}};a("90b4");const vf=He()(yf,[["render",xf]]);var kf=vf;const wf={class:"card"},Af={class:"card-body pt-4 p-3"},Sf={class:"row"},Bf={class:"col-md-12 col-sm-12"},Cf={class:"list-group"},_f={style:{"background-color":"#573078 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Pf={class:"d-flex flex-column"},If={class:"mb-3 text-sm text-white"},Df={class:"wallet-info text-white mb-1 text-xs font-weight-bold"},Tf=Object(l["createTextVNode"])(" Current Balance: "),Mf={class:"wallet-info text-white font-weight-bold ms-sm-2"},zf={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},Ff=Object(l["createTextVNode"])(" FSM Balance: "),Uf={class:"wallet-info text-white font-weight-bold ms-sm-2"},Lf={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},qf=Object(l["createTextVNode"])(" Phone: "),Rf={class:"wallet-info text-white ms-sm-2 font-weight-bold"},$f={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},Qf=Object(l["createTextVNode"])(" Email Address: "),Jf={class:"wallet-info text-white ms-sm-2 font-weight-bold"},Hf={class:"col-md-12 col-sm-12"},Yf={class:"list-group"},Wf={class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Xf={class:"d-flex flex-column"},Zf=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm"},"Recent Transaction",-1),Kf={class:"text-dark ms-sm-2 font-weight-bold"},Gf=Object(l["createElementVNode"])("br",null,null,-1),eE=Object(l["createElementVNode"])("br",null,null,-1),tE={class:"text-dark font-weight-bold me-3"},aE={key:0,class:"recent-transactions mb-1 text-xs"},lE=Object(l["createElementVNode"])("span",{class:"text-warning ms-sm-2 font-weight-bold"},"No recent transactions.",-1),cE=[lE];function sE(e,t,a,c,s,o){var n,r,i,d,m,b;return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",wf,[Object(l["createElementVNode"])("div",Af,[Object(l["createElementVNode"])("div",Sf,[Object(l["createElementVNode"])("div",Bf,[Object(l["createElementVNode"])("ul",Cf,[Object(l["createElementVNode"])("li",_f,[Object(l["createElementVNode"])("div",Pf,[Object(l["createElementVNode"])("h6",If,Object(l["toDisplayString"])(`${(null===(n=o.walletData.user)||void 0===n?void 0:n.first_name)||"-"} ${(null===(r=o.walletData.user)||void 0===r?void 0:r.last_name)||"-"}`),1),Object(l["createElementVNode"])("span",Df,[Tf,Object(l["createElementVNode"])("span",Mf," £"+Object(l["toDisplayString"])(o.formattedPrice((null===(i=o.walletData)||void 0===i?void 0:i.ballance)||"0")),1)]),Object(l["createElementVNode"])("span",zf,[Ff,Object(l["createElementVNode"])("span",Uf," £"+Object(l["toDisplayString"])(o.formattedPrice((null===(d=s.fsmAmount)||void 0===d?void 0:d.fsm_amount)||"0")),1)]),Object(l["createElementVNode"])("span",Lf,[qf,Object(l["createElementVNode"])("span",Rf,Object(l["toDisplayString"])((null===(m=o.walletData.user)||void 0===m?void 0:m.phone)||"-"),1)]),Object(l["createElementVNode"])("span",$f,[Qf,Object(l["createElementVNode"])("span",Jf,Object(l["toDisplayString"])((null===(b=o.walletData.user)||void 0===b?void 0:b.email)||"-"),1)])])])])]),Object(l["createElementVNode"])("div",Hf,[Object(l["createElementVNode"])("ul",Yf,[Object(l["createElementVNode"])("li",Wf,[Object(l["createElementVNode"])("div",Xf,[Zf,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.transactions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"recent-transactions mb-1 text-xs"},[Object(l["createElementVNode"])("span",Kf,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(o.transactionType(e.type))+" ",1),Gf,Object(l["createElementVNode"])("small",null,Object(l["toDisplayString"])(o.formatDate(e.created_at)),1)]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["font-weight-bold me-3",{"text-success":"top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type,"text-danger":!("top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type)}])},Object(l["toDisplayString"])("top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"+":"-")+" £"+Object(l["toDisplayString"])(o.formattedPrice(e.amount)),3),eE,Object(l["createElementVNode"])("small",tE,Object(l["toDisplayString"])("top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"Received":"Spent"),1)])]))),128)),0==s.transactions.length&&s.isTransactions?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",aE,cE)):Object(l["createCommentVNode"])("",!0)])])])])])])])}var oE={name:"billing-card",mounted(){this.getUserId(),this.getWallet(),this.getFSMamount(),this.getRecentTransactions()},data(){return{fsmAmount:"",isTransactions:!1,transactions:"",user_id:"",user:"",wallet:""}},computed:{walletData(){return this.wallet}},methods:{transactionType(e){let t="";return"top_up"==e?t="Top Up":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUserId(){let e=localStorage.getItem("user");e=JSON.parse(e),this.$route.params.id?this.user_id=this.$route.params.id:this.user_id=e.id},async getWallet(){try{const e=await Ke.get("/getWallet/"+this.user_id);this.wallet=e.data}catch(e){console.log(e)}},async getFSMamount(){try{const e=await Ke.get("/getAmountFSM/"+this.user_id);this.fsmAmount=e.data}catch(e){console.log(e)}},async getRecentTransactions(){let e={user_id:this.user_id,admin_id:null};try{const t=await Ke.post("/getTransactionHistory",e);this.transactions=t.data.data.data,this.isTransactions=!0}catch(t){console.log(t)}},formatDate(e){const t=Kc()(e);return t.format("MMM D, YYYY,   HH:mm:ss")}}};a("21f7");const nE=He()(oE,[["render",sE]]);var rE=nE;const iE={class:"container-fluid"},dE={class:"row"},mE={class:"col-12"},bE={class:"card px-3"},pE={class:"d-flex justify-content-between border-radius-lg pt-4 "},uE=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ORGANISATIONS",-1),OE=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 justify-content-between text-white fw-5 border-0 py-2 px-3 border-radius-lg"}," Add Organisation ",-1),jE=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},"Here, you can add organizations such as ETC. Each organization can have multiple sites associated with it, all belonging to the same organization.")],-1),hE={class:"card-body px-0 pb-2"},gE={class:"table-responsive p-0"},fE={class:"table align-items-center mb-0"},EE=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Organisation Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"},"Action")])],-1),VE={key:0},NE=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),xE=[NE],yE={class:"align-middle text-center text-sm"},vE={class:"text-xs font-weight-bold mb-0"},kE={class:"d-flex px-2"},wE={class:"d-flex flex-column justify-content-center"},AE={class:"text-xs text-secondary mb-0"},SE={class:"d-flex px-2 "},BE={class:"d-flex flex-column justify-content-center"},CE={class:"text-xs text-secondary mb-0 "},_E={class:"d-flex px-2"},PE={class:"d-flex flex-column justify-content-center"},IE={class:"text-xs text-secondary  mb-0"},DE={class:"align-middle text-center text-sm"},TE={class:"badge badge-sm bg-gradient-success"},ME={class:"align-middle text-center"},zE=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),FE=["onClick"];function UE(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iE,[Object(l["createElementVNode"])("div",dE,[Object(l["createElementVNode"])("div",mE,[Object(l["createElementVNode"])("div",bE,[Object(l["createElementVNode"])("div",pE,[uE,Object(l["createVNode"])(n,{to:{name:"add-organizations"}},{default:Object(l["withCtx"])(()=>[OE]),_:1})]),jE,Object(l["createElementVNode"])("div",hE,[Object(l["createElementVNode"])("div",gE,[Object(l["createElementVNode"])("table",fE,[EE,Object(l["createElementVNode"])("tbody",null,[0===s.organizationsData.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",VE,xE)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.organizationsData,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",yE,[Object(l["createElementVNode"])("p",vE,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",kE,[Object(l["createElementVNode"])("div",wE,[Object(l["createElementVNode"])("h6",AE,Object(l["toDisplayString"])(e.name),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",SE,[Object(l["createElementVNode"])("div",BE,[Object(l["createElementVNode"])("h6",CE,Object(l["toDisplayString"])(e.email),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",_E,[Object(l["createElementVNode"])("div",PE,[Object(l["createElementVNode"])("h6",IE,Object(l["toDisplayString"])(e.country),1)])])]),Object(l["createElementVNode"])("td",DE,[Object(l["createElementVNode"])("span",TE,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",ME,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[zE]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,FE)])])]))),128))])])])])])])])])}var LE={name:"organizations",metaInfo:{title:"Organizations"},mounted(){this.setColor(),this.getOrganizations()},computed:{...Object($e["c"])(["getBrandingSetting"])},data(){return{organizationsData:"",schools:6}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganization(e)})},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},setListData(){this.updateOrganizationList(this.organizationsData)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.organizationsData=e.data}catch(e){console.log(e)}},async deleteOrganization(e){try{await Ke.delete("/deleteOrganization/"+e),this.removeOrganizationFromList(e),this.snackbarMsg("Organization Deleted")}catch(t){console.log(t)}},removeOrganizationFromList(e){const t=this.organizationsData.findIndex(t=>t.id===e);this.organizationsData.splice(t,1)}}};a("ddbe");const qE=He()(LE,[["render",UE]]);var RE=qE;Object(l["pushScopeId"])("data-v-6431e4fe");const $E={class:"container-fluid py-4"},QE={class:"row"},JE={class:"col-12"},HE={class:"card my-4"},YE={class:"d-flex justify-content-between border-radius-lg pt-4"},WE=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Organisation",-1),XE=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),ZE={class:"card-body px-0 pb-2"},KE={class:"table-responsive p-0"},GE={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},eV={key:0,class:"mb-3 change-pass-alert"},tV=Object(l["createElementVNode"])("br",null,null,-1),aV={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},lV={class:"form-bg container p-4 ms-2"},cV={class:"card card-plain"},sV={class:"card-body"},oV={class:"mb-1"},nV=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),rV={key:0,class:"text-danger error-txt"},iV={class:"mb-1"},dV=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),mV={key:0,class:"text-danger error-txt"},bV={class:"mb-1"},pV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),uV={key:0,class:"text-danger error-txt"},OV={class:"mb-1"},jV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),hV={key:0,class:"text-danger error-txt"},gV={class:"mb-1"},fV=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),EV=Object(l["createElementVNode"])("br",null,null,-1),VV=["value"],NV={key:0,class:"text-danger error-txt"},xV={class:"mb-1"},yV=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),vV={key:0,class:"text-danger error-txt"},kV={class:"mb-1"},wV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),AV={key:0,class:"text-danger error-txt"},SV={class:"mb-1"},BV=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),CV={key:0,class:"text-danger error-txt"},_V={class:"d-flex align-items-right"};function PV(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",$E,[Object(l["createElementVNode"])("div",QE,[Object(l["createElementVNode"])("div",JE,[Object(l["createElementVNode"])("div",HE,[Object(l["createElementVNode"])("div",YE,[WE,Object(l["createVNode"])(n,{to:{name:"list-organizations"}},{default:Object(l["withCtx"])(()=>[XE]),_:1})]),Object(l["createElementVNode"])("div",ZE,[Object(l["createElementVNode"])("div",KE,[Object(l["createElementVNode"])("div",GE,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",eV,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),tV]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",aV,[Object(l["createElementVNode"])("div",lV,[Object(l["createElementVNode"])("div",cV,[Object(l["createElementVNode"])("div",sV,[Object(l["createElementVNode"])("div",oV,[nV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>s.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newOrganization.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rV,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",iV,[dV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],s.newOrganization.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mV,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",bV,[pV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newOrganization.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uV,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",OV,[jV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],s.newOrganization.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hV,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",gV,[fV,EV,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>s.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,VV))),128))],512),[[l["vModelSelect"],s.newOrganization.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NV,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xV,[yV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"city","onUpdate:modelValue":t[5]||(t[5]=e=>s.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newOrganization.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vV,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kV,[wV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],s.newOrganization.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",AV,"Postocode/Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",SV,[BV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>s.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newOrganization.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",CV,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_V,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.saveNewOrganization&&o.saveNewOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var IV={name:"",components:{},mounted(){},computed:{...Object($e["c"])(["getOrganizationList"])},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Eo()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async saveNewOrganization(){if(!this.validateForm())try{await Ke.post("/createOrganization",this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Saved"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("254a");const DV=He()(IV,[["render",PV],["__scopeId","data-v-6431e4fe"]]);var TV=DV;Object(l["pushScopeId"])("data-v-59aec5ef");const MV={class:"container-fluid py-4"},zV={class:"row"},FV={class:"col-12"},UV={class:"card my-4"},LV=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Organisation")],-1),qV={class:"card-body px-0 pb-2"},RV={class:"table-responsive p-0"},$V={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},QV={key:0,class:"mb-3 change-pass-alert"},JV=Object(l["createElementVNode"])("br",null,null,-1),HV={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},YV={class:"form-bg container p-4 ms-2"},WV={class:"card card-plain"},XV={class:"card-body"},ZV={class:"mb-1"},KV=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),GV={key:0,class:"text-danger error-txt"},eN={class:"mb-1"},tN=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),aN={key:0,class:"text-danger error-txt"},lN={class:"mb-1"},cN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),sN={key:0,class:"text-danger error-txt"},oN={class:"mb-1"},nN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),rN={key:0,class:"text-danger error-txt"},iN={class:"mb-1"},dN=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),mN=Object(l["createElementVNode"])("br",null,null,-1),bN=["value"],pN={key:0,class:"text-danger error-txt"},uN={class:"mb-1"},ON=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),jN={key:0,class:"text-danger error-txt"},hN={class:"mb-1"},gN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),fN={key:0,class:"text-danger error-txt"},EN={class:"mb-1"},VN=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),NN={key:0,class:"text-danger error-txt"},xN={class:"d-flex align-items-right"};function yN(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",MV,[Object(l["createElementVNode"])("div",zV,[Object(l["createElementVNode"])("div",FV,[Object(l["createElementVNode"])("div",UV,[LV,Object(l["createElementVNode"])("div",qV,[Object(l["createElementVNode"])("div",RV,[Object(l["createElementVNode"])("div",$V,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QV,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),JV]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",HV,[Object(l["createElementVNode"])("div",YV,[Object(l["createElementVNode"])("div",WV,[Object(l["createElementVNode"])("div",XV,[Object(l["createElementVNode"])("div",ZV,[KV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>s.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newOrganization.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",GV,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eN,[tN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],s.newOrganization.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",aN,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lN,[cN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newOrganization.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",sN,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",oN,[nN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],s.newOrganization.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rN,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",iN,[dN,mN,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>s.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,bN))),128))],512),[[l["vModelSelect"],s.newOrganization.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pN,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",uN,[ON,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>s.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newOrganization.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jN,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hN,[gN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],s.newOrganization.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fN,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EN,[VN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>s.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newOrganization.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NN,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xN,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.updateOrganization&&o.updateOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var vN={name:"",props:["data"],components:{},mounted(){this.editOrganization()},computed:{},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Eo()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async editOrganization(){let e=this.$route.params.id;try{const t=await Ke.get("/editOrganization/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newOrganization.name=t.name,this.newOrganization.website=t.website,this.newOrganization.email=t.email,this.newOrganization.phone=t.phone,this.newOrganization.country=t.country,this.newOrganization.city=t.city,this.newOrganization.state=t.state,this.newOrganization.zip=t.zip,this.newOrganization.address=t.address,this.newOrganization.founded_date=t.founded_date,this.newOrganization.description=t.description)},async updateOrganization(){if(this.validateForm())return;let e=this.$route.params.id;try{await Ke.put("/updateOrganization/"+e,this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("8627");const kN=He()(vN,[["render",yN],["__scopeId","data-v-59aec5ef"]]);var wN=kN,AN=a("d15c"),SN=a.n(AN);const BN={class:"card"},CN={class:"card-header pb-0 px-3"},_N={class:"d-flex justify-content-between"},PN=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Trips",-1),IN={class:"card-body pt-1 p-3"},DN={class:"container-fluid mt-1"},TN={class:"col-md-8"},MN={class:"d-flex flex-column"},zN={class:"mb-3 text-sm"},FN=Object(l["createElementVNode"])("img",{src:SN.a,alt:"profile_image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,-1),UN={class:"trip-description mt-2"},LN={class:"col-md-4"},qN={class:"ms-auto text-start"},RN={class:"me-3 trip-dates"},$N=Object(l["createElementVNode"])("br",null,null,-1),QN={class:"me-3 trip-dates"},JN={class:"me-3 trip-dates"},HN=Object(l["createElementVNode"])("br",null,null,-1),YN=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Age Group - 16-20")],-1),WN=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Booking Open")],-1),XN=Object(l["createElementVNode"])("br",null,null,-1),ZN={class:"me-3 trip-dates"},KN=Object(l["createElementVNode"])("br",null,null,-1),GN={key:0},ex={class:"me-3 trip-dates"},tx={class:"d-flex  align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},ax=Object(l["createElementVNode"])("br",null,null,-1),lx=["onClick"],cx=Object(l["createTextVNode"])(" Participants "),sx=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"arrow_forward",-1),ox=[cx,sx],nx=Object(l["createElementVNode"])("br",null,null,-1),rx={class:"mt-0"},ix=["onClick"],dx=["onClick"],mx={key:2,class:"mt-0"},bx=Object(l["createElementVNode"])("div",{class:"cart-status"},"Added To Cart",-1),px=[bx],ux={key:3,class:"mt-0"},Ox=["onClick"],jx=Object(l["createElementVNode"])("br",null,null,-1),hx={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},gx=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No trips found!",-1),fx=[gx];function Ex(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",BN,[Object(l["createElementVNode"])("div",CN,[Object(l["createElementVNode"])("div",_N,[PN,o.userPermissions.create_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},["super_admin"==s.user.role||"organization_admin"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=(...e)=>o.redirectToAddTrips&&o.redirectToAddTrips(...e)),to:{name:"add-trips"},style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-10  text-white fw-5 p-2 border-radius-lg"},"Add Trips")):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",IN,[Object(l["createElementVNode"])("div",DN,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allTrips,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",TN,[Object(l["createElementVNode"])("div",MN,[Object(l["createElementVNode"])("h6",zN,Object(l["toDisplayString"])(e.title),1),FN,Object(l["createElementVNode"])("small",UN,Object(l["toDisplayString"])(e.description),1)])]),Object(l["createElementVNode"])("div",LN,[Object(l["createElementVNode"])("div",qN,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",RN,"From "+Object(l["toDisplayString"])(o.formatDateString(e.start_date))+" To "+Object(l["toDisplayString"])(o.formatDateString(e.end_date)),1)]),$N,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",QN,"Total Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",JN,"Available Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),HN,YN,WN,XN,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",ZN,Object(l["toDisplayString"])(e.accomodation_details?e.accomodation_details:"-"),1)]),KN,"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",GN,[Object(l["createElementVNode"])("small",ex,"Organization: "+Object(l["toDisplayString"])(e.organization?e.organization.name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",tx," Trip Cost - £"+Object(l["toDisplayString"])(o.formattedAmount(e.budget)),1),ax,"super_admin"==s.user.role||"organization_admin"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("button",{onClick:t=>o.navLegacy("participants-trips",{id:e.id}),style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"d-flex justify-content-around align-items-center me-3 trips-btn w-50  text-white fw-5 p-2 border-radius-lg"},ox,8,lx),nx,Object(l["createElementVNode"])("div",rx,[o.userPermissions.edit_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t=>o.editTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Edit ",8,ix)):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t=>o.deleteTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Delete ",8,dx)):Object(l["createCommentVNode"])("",!0)])],64)):Object(l["createCommentVNode"])("",!0),null!==e.cart&&"student"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",mx,px)):Object(l["createCommentVNode"])("",!0),null==e.cart&&"student"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ux,[Object(l["createElementVNode"])("button",{onClick:t=>o.addTripToCart(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,Ox)])):Object(l["createCommentVNode"])("",!0),jx])])]))),128)),0==s.allTrips.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hx,fx)):Object(l["createCommentVNode"])("",!0)])])])}var Vx={name:"billing-card",data(){return{user:"",allTrips:""}},mounted(){this.getUser(),this.getAllTrips()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_trip")},watch:{getRemovedItem(e,t){console.log(t),"trip"==e&&this.getAllTrips()}},computed:{...Object($e["c"])(["getRemovedItem","getPermissions"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{...Object($e["b"])(["updateRemovedItem"]),snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},navLegacy(e,t){this.$router.push({name:e,params:t})},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t},async addTripToCart(e){let t={trip_id:e};try{await Ke.post("/addTripToCart",t),await this.getAllTrips(),this.snackbarMsg("Successfuly Added Trip To Cart")}catch(a){console.log(a)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},redirectToAddTrips(){this.$router.push({name:"add-trips"})},async getAllTrips(){try{const e=await Ke.get("/getAllTrips");this.allTrips=e.data,this.updateRemovedItem(null)}catch(e){console.log(e)}},async deleteTrip(e){try{await Ke.delete("/deleteTrip/"+e),this.removeTripFromList(e),this.snackbarMsg("Trip Deleted Successfuly")}catch(t){console.log(t)}},removeTripFromList(e){const t=this.allTrips.findIndex(t=>t.id===e);this.allTrips.splice(t,1)},formatDateString(e){const t=Kc()(e),a=t.format("DD MMMM YYYY");return a},editTrip(e){this.$router.push("/edit-trips/"+e)}}};a("b0e7");const Nx=He()(Vx,[["render",Ex]]);var xx=Nx;Object(l["pushScopeId"])("data-v-2a8f2351");const yx={class:"container-fluid py-4"},vx={class:"row "},kx={class:"col-12"},wx={class:"card my-4"},Ax={class:"d-flex justify-content-between  border-radius-lg pt-4 "},Sx=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Trips",-1),Bx=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),Cx={class:"card-body px-0 pb-2"},_x={class:"table-responsive p-0"},Px={class:"row py-2 bg-white form-data border-radius-lg"},Ix={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},Dx={class:"form-bg container p-4 ms-2"},Tx={class:"card card-plain"},Mx={class:"card-body"},zx={role:"form"},Fx={class:"row mb-1"},Ux={class:"mb-1"},Lx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Image",-1),qx={class:"mb-1"},Rx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),$x={key:0,class:"text-danger error-txt"},Qx={class:"mb-1"},Jx=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),Hx=Object(l["createElementVNode"])("br",null,null,-1),Yx={key:0,class:"text-danger error-txt"},Wx={class:"row p-2"},Xx={class:"col-xl-4 col-lg-4 col-md-4"},Zx={class:"mb-1"},Kx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),Gx={key:0,class:"text-danger error-txt"},ey={class:"col-xl-4 col-lg-4 col-md-4"},ty={class:"mb-1"},ay=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),ly=Object(l["createElementVNode"])("br",null,null,-1),cy=["value"],sy={key:0,class:"text-danger error-txt"},oy={class:"col-xl-4 col-lg-4 col-md-4"},ny={class:"mb-1"},ry=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),iy={key:0,class:"text-danger error-txt"},dy={class:"col-xl-4 col-lg-4 col-md-4"},my={class:"mb-1"},by=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),py={key:0,class:"text-danger error-txt"},uy={class:"col-xl-4 col-lg-4 col-md-4"},Oy={class:"mb-1"},jy=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),hy={key:0,class:"text-danger error-txt"},gy={class:"col-xl-4 col-lg-4 col-md-4"},fy={class:"mb-1"},Ey=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),Vy={key:0,class:"text-danger error-txt"},Ny={class:"row p-2"},xy=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),yy={class:"col-xl-4 col-lg-4 col-md-4"},vy={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},ky=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),wy={class:"checkbox-container mt-2 me-5"},Ay=["checked"],Sy=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),By={class:"col-xl-4 col-lg-4 col-md-4"},Cy={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},_y=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit",-1),Py={class:"checkbox-container mt-2 me-5"},Iy=["checked"],Dy=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),Ty={class:"col-xl-4 col-lg-4 col-md-4"},My={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},zy=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Manual Payment",-1),Fy={class:"checkbox-container mt-2 me-5"},Uy=["checked"],Ly=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),qy={key:0,class:"row p-2"},Ry={class:"col-xl-4 col-lg-4 col-md-4"},$y={class:"mb-1"},Qy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),Jy={key:0,class:"text-danger error-txt"},Hy={class:"col-xl-4 col-lg-4 col-md-4"},Yy={class:"mb-1"},Wy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),Xy={key:0,class:"text-danger error-txt"},Zy={class:"col-xl-4 col-lg-4 col-md-4"},Ky={class:"mb-1"},Gy=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),ev={key:0,class:"text-danger error-txt"},tv={class:"col-xl-4 col-lg-4 col-md-4"},av={class:"mb-1"},lv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),cv={key:0,class:"text-danger error-txt"},sv={class:"mb-1"},ov={class:"input-label",for:"enrollment_date"},nv=["onUpdate:modelValue"],rv={key:0,class:"text-danger error-txt"},iv={key:1,class:"row p-2"},dv={class:"col-xl-4 col-lg-4 col-md-4"},mv={class:"mb-1"},bv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Deposit",-1),pv={key:0,class:"text-danger error-txt"},uv={class:"col-xl-4 col-lg-4 col-md-4"},Ov={class:"mb-1"},jv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Deposit",-1),hv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,-1),gv={key:0,class:"text-danger error-txt"},fv={class:"col-xl-4 col-lg-4 col-md-4"},Ev={class:"mb-1"},Vv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Deposit",-1),Nv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Deposit",name:"name"},null,-1),xv={key:0,class:"text-danger error-txt"},yv={class:"col-xl-4 col-lg-4 col-md-4"},vv={class:"mb-1"},kv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),wv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),Av={key:0,class:"text-danger error-txt"},Sv={class:"col-xl-4 col-lg-4 col-md-4"},Bv={class:"mb-1"},Cv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Deposit",-1),_v=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),Pv={key:0,class:"text-danger error-txt"},Iv={key:2,class:"row p-2"},Dv={class:"col-xl-4 col-lg-4 col-md-4"},Tv={class:"mb-1"},Mv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Amount",-1),zv={key:0,class:"text-danger error-txt"},Fv={class:"col-xl-4 col-lg-4 col-md-4"},Uv={class:"mb-1"},Lv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Amount",-1),qv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Amount",name:"name"},null,-1),Rv={key:0,class:"text-danger error-txt"},$v={class:"col-xl-4 col-lg-4 col-md-4"},Qv={class:"mb-1"},Jv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Amount",-1),Hv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Amount",name:"name"},null,-1),Yv={key:0,class:"text-danger error-txt"},Wv={class:"col-xl-4 col-lg-4 col-md-4"},Xv={class:"mb-1"},Zv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Amount",-1),Kv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),Gv={key:0,class:"text-danger error-txt"},ek={class:"col-xl-4 col-lg-4 col-md-4"},tk={class:"mb-1"},ak=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Amount",-1),lk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),ck={key:0,class:"text-danger error-txt"},sk={class:"col-xl-4 col-lg-4 col-md-4"},ok={class:"mb-1"},nk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Comments",-1),rk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"cash and card payments are accepted",name:"name"},null,-1),ik={key:0,class:"text-danger error-txt"},dk={class:"mb-1"},mk=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),bk=Object(l["createElementVNode"])("br",null,null,-1),pk={class:"mt-4"};function uk(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("DropZone"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yx,[Object(l["createElementVNode"])("div",vx,[Object(l["createElementVNode"])("div",kx,[Object(l["createElementVNode"])("div",wx,[Object(l["createElementVNode"])("div",Ax,[Sx,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[Bx]),_:1})]),Object(l["createElementVNode"])("div",Cx,[Object(l["createElementVNode"])("div",_x,[Object(l["createElementVNode"])("div",Px,[Object(l["createElementVNode"])("div",Ix,[Object(l["createElementVNode"])("div",Dx,[Object(l["createElementVNode"])("div",Tx,[Object(l["createElementVNode"])("div",Mx,[Object(l["createElementVNode"])("form",zx,[Object(l["createElementVNode"])("div",Fx,[Object(l["createElementVNode"])("div",Ux,[Lx,Object(l["createVNode"])(r,{maxFiles:Number(1),url:"http://localhost:8080",uploadOnDrop:!0,multipleUpload:!1,parallelUpload:1},null,8,["maxFiles"])]),Object(l["createElementVNode"])("div",qx,[Rx,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],s.newTrip.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$x,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Qx,[Jx,Hx,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],s.newTrip.description]]),""!==s.formValidation&&""!==s.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Yx,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Wx,[Object(l["createElementVNode"])("div",Xx,[Object(l["createElementVNode"])("div",Zx,[Kx,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],s.newTrip.total_seats]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gx,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",ey,[Object(l["createElementVNode"])("div",ty,[ay,ly,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,cy))),128))],512),[[l["vModelSelect"],s.newTrip.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",sy,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",oy,[Object(l["createElementVNode"])("div",ny,[ry,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],s.newTrip.accomodation_details]]),""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",iy,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",dy,[Object(l["createElementVNode"])("div",my,[by,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.start_date]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",py,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",uy,[Object(l["createElementVNode"])("div",Oy,[jy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.end_date]]),""!==s.formValidation&&""!==s.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hy,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",gy,[Object(l["createElementVNode"])("div",fy,[Ey,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Vy,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",Ny,[xy,Object(l["createElementVNode"])("div",yy,[Object(l["createElementVNode"])("span",vy,[ky,Object(l["createElementVNode"])("div",wy,[Object(l["createElementVNode"])("input",{checked:"installments"==s.paymentPlan,onChange:t[8]||(t[8]=e=>o.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,Ay),Sy])])]),Object(l["createElementVNode"])("div",By,[Object(l["createElementVNode"])("span",Cy,[_y,Object(l["createElementVNode"])("div",Py,[Object(l["createElementVNode"])("input",{checked:"deposit"==s.paymentPlan,onChange:t[9]||(t[9]=e=>o.changePaymentPlan("deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,Iy),Dy])])]),Object(l["createElementVNode"])("div",Ty,[Object(l["createElementVNode"])("span",My,[zy,Object(l["createElementVNode"])("div",Fy,[Object(l["createElementVNode"])("input",{checked:"manual"==s.paymentPlan,onChange:t[10]||(t[10]=e=>o.changePaymentPlan("manual")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,Uy),Ly])])])]),"installments"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qy,[Object(l["createElementVNode"])("div",Ry,[Object(l["createElementVNode"])("div",$y,[Qy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>s.installmentsPlan.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.total_installments]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jy,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Hy,[Object(l["createElementVNode"])("div",Yy,[Wy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>s.installmentsPlan.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.amount_per_installment]]),""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xy,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Zy,[Object(l["createElementVNode"])("div",Ky,[Gy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>s.installmentsPlan.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.initial_deposit]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ev,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",tv,[Object(l["createElementVNode"])("div",av,[lv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.installmentsPlan.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.initial_deposit_due_date]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),s.installmentsPlan.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsPlan.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",sv,[Object(l["createElementVNode"])("label",ov,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>s.installmentsPlan.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,nv),[[l["vModelText"],s.installmentsPlan.other_installments_due_date[t]]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"deposit"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iv,[Object(l["createElementVNode"])("div",dv,[Object(l["createElementVNode"])("div",mv,[bv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Deposit",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pv,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",uv,[Object(l["createElementVNode"])("div",Ov,[jv,hv,""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gv,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",fv,[Object(l["createElementVNode"])("div",Ev,[Vv,Nv,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",yv,[Object(l["createElementVNode"])("div",vv,[kv,wv,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Av,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Sv,[Object(l["createElementVNode"])("div",Bv,[Cv,_v,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Pv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),"manual"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Iv,[Object(l["createElementVNode"])("div",Dv,[Object(l["createElementVNode"])("div",Tv,[Mv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Amount",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zv,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Fv,[Object(l["createElementVNode"])("div",Uv,[Lv,qv,""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Rv,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",$v,[Object(l["createElementVNode"])("div",Qv,[Jv,Hv,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Yv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Wv,[Object(l["createElementVNode"])("div",Xv,[Zv,Kv,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",ek,[Object(l["createElementVNode"])("div",tk,[ak,lk,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ck,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",sk,[Object(l["createElementVNode"])("div",ok,[nk,rk,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ik,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",dk,[mk,bk,Object(l["createVNode"])(i,{label:"Attributes",options:s.allAttributes,onInput:o.handleAttributes,placeholder:"Attributes"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",pk,[Object(l["createElementVNode"])("button",{onClick:t[17]||(t[17]=Object(l["withModifiers"])((...e)=>o.saveNewTrip&&o.saveNewTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])(),Object(l["pushScopeId"])("data-v-58ff6324");const Ok=["onClick"],jk=["placeholder"],hk={key:0,class:"dropdown"},gk=["onClick"];function fk(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.selectedOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"tag"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name)+" ",1),Object(l["createElementVNode"])("span",{onClick:e=>o.removeTag(t),class:"remove-tag"},"×",8,Ok)]))),128)),Object(l["createElementVNode"])("div",null,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.inputValue=e),onInput:t[1]||(t[1]=(...e)=>o.filterOptions&&o.filterOptions(...e)),onKeydown:t[2]||(t[2]=Object(l["withKeys"])(Object(l["withModifiers"])((...e)=>o.addTag&&o.addTag(...e),["prevent"]),["enter"])),onFocus:t[3]||(t[3]=(...e)=>o.showOptions&&o.showOptions(...e)),placeholder:a.placeholder,onBlur:t[4]||(t[4]=(...e)=>o.hideDropdown&&o.hideDropdown(...e))},null,40,jk),[[l["vModelText"],s.inputValue]]),s.showDropdown?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hk,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.filteredOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,onClick:t=>o.selectOption(e),class:"option-width"},Object(l["toDisplayString"])(e.name),9,gk))),128))])):Object(l["createCommentVNode"])("",!0)])])}Object(l["popScopeId"])();var Ek={props:{label:{type:String,required:!0},options:{type:Array,required:!0},placeholder:{type:String,default:"Pelase select"},value:{type:Array,default:()=>[]}},data(){return{selectedOptions:this.value,inputValue:"",showDropdown:!1}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.inputValue.toLowerCase())&&!this.isSelected(e))}},watch:{value(e){this.selectedOptions=e}},methods:{addTag(e){const t=e;console.log(t),t&&!this.isSelected(t)&&(this.selectedOptions.push(t),this.$emit("input",this.selectedOptions),this.inputValue="")},removeTag(e){this.selectedOptions.splice(e,1),this.$emit("input",this.selectedOptions)},filterOptions(){this.showDropdown=!0},showOptions(){this.showDropdown=!0},hideDropdown(){setTimeout(()=>{this.showDropdown=!1},800)},selectOption(e){console.log(e),this.addTag(e),this.showDropdown=!1},isSelected(e){return this.selectedOptions.some(t=>t.name===e.name)}}};a("ed52");const Vk=He()(Ek,[["render",fk],["__scopeId","data-v-58ff6324"]]);var Nk=Vk,xk=a("cd1f"),yk=a.n(xk),vk={name:"",components:{MultiSelect:Nk,DropZone:xk["DropZone"]},mounted(){this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("create_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{paymentPlan:"",installmentsPlan:{total_installments:"",amount_per_installment:"",initial_deposit:"",initial_deposit_due_date:"",other_installments_due_date:[]},depositPlan:{total:"",final_deposit:"",initial_deposit:""},manualPlan:{total:"",final_deposit:"",initial_deposit:""},allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await Ke.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},validateForm(){this.$permissions.redirectIfNotAllowed("create_trip");let e=!1,t="";t=Eo()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},async saveNewTrip(){if(!this.validateForm()){await this.addPaymentPlan();try{await Ke.post("/createTrip",this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Saved Successfuly")}catch(e){console.log(e)}}},addPaymentPlan(){"installments"==this.paymentPlan&&(this.newTrip.payment_plan="installments",this.newTrip={...this.newTrip,...this.installmentsPlan})},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("cad8");const kk=He()(vk,[["render",uk],["__scopeId","data-v-2a8f2351"]]);var wk=kk;Object(l["pushScopeId"])("data-v-109a06c8");const Ak={class:"container-fluid py-4"},Sk={class:"row "},Bk={class:"col-12"},Ck={class:"card my-4"},_k={class:"d-flex justify-content-between  border-radius-lg pt-4 "},Pk=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Trip",-1),Ik=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),Dk={class:"card-body px-0 pb-2"},Tk={class:"table-responsive p-0"},Mk={class:"row py-2 bg-white form-data border-radius-lg"},zk={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},Fk={class:"form-bg container p-4 ms-2"},Uk={class:"card card-plain"},Lk={class:"card-body"},qk={role:"form"},Rk={class:"row mb-1"},$k={class:"mb-1"},Qk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),Jk={key:0,class:"text-danger error-txt"},Hk={class:"mb-1"},Yk=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),Wk=Object(l["createElementVNode"])("br",null,null,-1),Xk={key:0,class:"text-danger error-txt"},Zk={class:"row p-2"},Kk={class:"col-xl-4 col-lg-4 col-md-4"},Gk={class:"mb-1"},ew=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),tw={key:0,class:"text-danger error-txt"},aw={class:"col-xl-4 col-lg-4 col-md-4"},lw={class:"mb-1"},cw=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),sw=Object(l["createElementVNode"])("br",null,null,-1),ow=["value"],nw={key:0,class:"text-danger error-txt"},rw={class:"col-xl-4 col-lg-4 col-md-4"},iw={class:"mb-1"},dw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),mw={key:0,class:"text-danger error-txt"},bw={class:"col-xl-4 col-lg-4 col-md-4"},pw={class:"mb-1"},uw=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),Ow={key:0,class:"text-danger error-txt"},jw={class:"col-xl-4 col-lg-4 col-md-4"},hw={class:"mb-1"},gw=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),fw={key:0,class:"text-danger error-txt"},Ew={class:"col-xl-4 col-lg-4 col-md-4"},Vw={class:"mb-1"},Nw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),xw={key:0,class:"text-danger error-txt"},yw={class:"mb-1"},vw=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),kw=Object(l["createElementVNode"])("br",null,null,-1),ww={class:"mt-4"};function Aw(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ak,[Object(l["createElementVNode"])("div",Sk,[Object(l["createElementVNode"])("div",Bk,[Object(l["createElementVNode"])("div",Ck,[Object(l["createElementVNode"])("div",_k,[Pk,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[Ik]),_:1})]),Object(l["createElementVNode"])("div",Dk,[Object(l["createElementVNode"])("div",Tk,[Object(l["createElementVNode"])("div",Mk,[Object(l["createElementVNode"])("div",zk,[Object(l["createElementVNode"])("div",Fk,[Object(l["createElementVNode"])("div",Uk,[Object(l["createElementVNode"])("div",Lk,[Object(l["createElementVNode"])("form",qk,[Object(l["createElementVNode"])("div",Rk,[Object(l["createElementVNode"])("div",$k,[Qk,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],s.newTrip.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jk,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Hk,[Yk,Wk,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],s.newTrip.description]]),""!==s.formValidation&&""!==s.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xk,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Zk,[Object(l["createElementVNode"])("div",Kk,[Object(l["createElementVNode"])("div",Gk,[ew,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],s.newTrip.total_seats]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",tw,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",aw,[Object(l["createElementVNode"])("div",lw,[cw,sw,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,ow))),128))],512),[[l["vModelSelect"],s.newTrip.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nw,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",rw,[Object(l["createElementVNode"])("div",iw,[dw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],s.newTrip.accomodation_details]]),""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mw,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",bw,[Object(l["createElementVNode"])("div",pw,[uw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.start_date]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ow,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",jw,[Object(l["createElementVNode"])("div",hw,[gw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.end_date]]),""!==s.formValidation&&""!==s.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fw,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ew,[Object(l["createElementVNode"])("div",Vw,[Nw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xw,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",yw,[vw,kw,Object(l["createVNode"])(r,{label:"Attributes",value:s.selectedAttrs,options:s.allAttributes,onInput:o.handleAttributes,placeholder:"Attributes"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",ww,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=Object(l["withModifiers"])((...e)=>o.updateTrip&&o.updateTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var Sw={name:"",components:{MultiSelect:Nk},mounted(){this.editTrip(),this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("edit_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",selectedAttrs:[],newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await Ke.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}this.allAttributes.map(e=>{this.newTrip.attributes.includes(e.id)&&this.selectedAttrs.push(e)})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_trip");let e=!1,t="";t=Eo()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async updateTrip(){if(this.validateForm())return;let e=this.$route.params.id;try{await Ke.put("/updateTrip/"+e,this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Updated Successfuly")}catch(t){console.log(t)}},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}},async editTrip(){let e=this.$route.params.id;try{let t=await Ke.get("/findTrip/"+e);t=t.data,this.setTrip(t)}catch(t){console.log(t)}},setTrip(e){this.newTrip.title=e.title,this.newTrip.description=e.description,this.newTrip.total_seats=e.total_booking,this.newTrip.accomodation_details=e.accomodation_details,this.newTrip.start_date=this.formatDateString(e.start_date),this.newTrip.end_date=this.formatDateString(e.end_date),this.newTrip.total_funds=e.budget,this.newTrip.organization_id=e.organization_id,this.newTrip.attributes=e.attributes},formatDateString(e){const t=Kc()(e),a=t.format("YYYY-MM-DD");return a}}};a("9bb4");const Bw=He()(Sw,[["render",Aw],["__scopeId","data-v-109a06c8"]]);var Cw=Bw;const _w={class:"container-fluid py-4"},Pw={class:"row"},Iw={class:"col-12"},Dw={class:"card my-4"},Tw={class:"card-body px-0 pb-2"},Mw={class:"table-responsive p-0"},zw=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"}),Object(l["createElementVNode"])("small",{style:{"font-size":"12px","font-weight":"bold"},class:" me-3 text-dark fw-5 border-0 py-2 px-4 border-radius-lg"}," Trip Participants ")])],-1),Fw={class:"table align-items-center mb-0"},Uw=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Participation Status ")])],-1),Lw={class:"align-middle text-center"},qw={class:"text-secondary text-xs font-weight-bold"},Rw={class:"align-middle text-center"},$w={class:"text-secondary text-xs "},Qw={class:"align-middle text-center"},Jw={class:"text-secondary text-xs "},Hw={class:"align-middle text-center"},Yw={class:"text-secondary text-xs "},Ww={class:"align-middle text-center text-sm"},Xw={class:"badge badge-sm bg-gradient-success"},Zw={class:"align-middle text-center text-sm"},Kw={class:"badge badge-sm bg-gradient-success"};function Gw(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_w,[Object(l["createElementVNode"])("div",Pw,[Object(l["createElementVNode"])("div",Iw,[Object(l["createElementVNode"])("div",Dw,[Object(l["createElementVNode"])("div",Tw,[Object(l["createElementVNode"])("div",Mw,[zw,Object(l["createElementVNode"])("table",Fw,[Uw,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allParticipants,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Lw,[Object(l["createElementVNode"])("span",qw,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",Rw,[Object(l["createElementVNode"])("span",$w,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",Qw,[Object(l["createElementVNode"])("span",Jw,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",Hw,[Object(l["createElementVNode"])("span",Yw,Object(l["toDisplayString"])(e.school),1)]),Object(l["createElementVNode"])("td",Ww,[Object(l["createElementVNode"])("span",Xw,Object(l["toDisplayString"])(e.payment_status),1)]),Object(l["createElementVNode"])("td",Zw,[Object(l["createElementVNode"])("span",Kw,Object(l["toDisplayString"])(e.participation_status),1)])]))),128))])])])])])])])])}var eA={name:"tables",mounted(){this.getUser(),this.getTripParticipants()},data(){return{allParticipants:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getTripParticipants(){let e=this.$route.params.id;try{const t=await Ke.get("/getTripParticipants/"+e);this.allParticipants=t.data}catch(t){console.log(t)}}}};a("506d");const tA=He()(eA,[["render",Gw]]);var aA=tA;const lA={class:"container-fluid"},cA={class:"row"},sA={class:"col-12"},oA={class:"card px-3"},nA=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"TRANSACTION HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("The Transaction History section displays key details of each transaction, including the User, Type, Amount, and Date. This allows you to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" track all financial activities efficiently, providing a clear overview of each user's transactions over time.")])])],-1),rA={class:"card-body px-0 pb-2"},iA={class:"table-responsive p-0"},dA={class:"filter-container ms-2 mb-2"},mA={style:{display:"flex"}},bA=["placeholder"],pA=["value"],uA=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),OA=Object(l["createTextVNode"])(" Export To XLS "),jA=[uA,OA],hA={ref:"table",class:"table align-items-center mb-0"},gA={key:0,class:"text-uppercase text-xxs font-weight-bolder"},fA=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Type ",-1),EA=Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-xxs font-weight-bolder ps-2"}," Amount ",-1),VA=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date ",-1),NA={key:0},xA=Object(l["createElementVNode"])("td",{colspan:"4",class:"text-center"}," No data available. ",-1),yA=[xA],vA={key:0},kA={class:"d-flex px-2 py-1"},wA=Object(l["createElementVNode"])("div",null,null,-1),AA={class:"d-flex flex-column justify-content-center"},SA={class:"text-xs text-secondary mb-0"},BA={class:"align-middle text-center"},CA={class:"text-xs text-secondary mb-0"},_A={class:"align-middle text-center"},PA={class:"d-flex justify-content-center"},IA={key:0,class:"fas fa-plus fa-xs text-success me-2","aria-hidden":"true"},DA={key:1,class:"fas fa-minus fa-xs text-danger me-2","aria-hidden":"true"},TA={class:"text-xs text-secondary mb-0"},MA={class:"align-middle text-center"},zA={class:"text-secondary text-xs "},FA={class:"row"},UA={class:"col-md-12 col-lg-12"},LA={class:"pagination-container"},qA={class:"entries-dropdown"},RA=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),$A=["value"],QA={class:"pagination-wrapper"},JA={class:"pagination"},HA=["onClick"];function YA(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lA,[Object(l["createElementVNode"])("div",cA,[Object(l["createElementVNode"])("div",sA,[Object(l["createElementVNode"])("div",oA,[nA,Object(l["createElementVNode"])("div",rA,[Object(l["createElementVNode"])("div",iA,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",dA,[Object(l["createElementVNode"])("span",mA,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterTransactionHistory&&o.filterTransactionHistory(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:o.computedPlaceholder,name:"address"},null,40,bA),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterTransactionHistory&&o.filterTransactionHistory(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,pA))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},jA)])])]),Object(l["createElementVNode"])("table",hA,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,["student"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",gA," User ")):Object(l["createCommentVNode"])("",!0),fA,EA,VA])]),Object(l["createElementVNode"])("tbody",null,[0===s.transactionHistoryList.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",NA,yA)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},["student"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",vA,[Object(l["createElementVNode"])("div",kA,[wA,Object(l["createElementVNode"])("div",AA,[Object(l["createElementVNode"])("p",SA,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",BA,[Object(l["createElementVNode"])("p",CA,Object(l["toDisplayString"])(o.transactionType(e.type)),1)]),Object(l["createElementVNode"])("td",_A,[Object(l["createElementVNode"])("span",PA,["top_up"==e.type||"pos_refund"==e.type||"school_shop_refund"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",IA)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",DA)),Object(l["createElementVNode"])("p",TA,"£"+Object(l["toDisplayString"])(o.formattedPrice(e.amount)),1)])]),Object(l["createElementVNode"])("td",MA,[Object(l["createElementVNode"])("span",zA,Object(l["toDisplayString"])(o.formatDate(e.created_at)),1)])]))),128))])],512)]),Object(l["createElementVNode"])("div",FA,[Object(l["createElementVNode"])("div",UA,[Object(l["createElementVNode"])("div",LA,[Object(l["createElementVNode"])("div",qA,[RA,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getTransactionHistory(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,$A))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",QA,[Object(l["createElementVNode"])("ul",JA,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getTransactionHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getTransactionHistory(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getTransactionHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,HA)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getTransactionHistory(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getTransactionHistory(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var WA={name:"tables",mounted(){this.setColor(),this.getUser(),this.getTransactionHistory()},updated(){"student"!==this.user.role&&"satff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("transaction_history")},computed:{...Object($e["c"])(["getBrandingSetting"]),limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e},computedPlaceholder(){return"Date"===this.filterBy?"Sep 18, 2024":"Type to Search..."}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,user:"",transactionHistoryList:"",seachString:"",filterBy:"User",allFields:["User","Amount","Date"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"transaction_history.xlsx")},transactionType(e){let t="";return"top_up"==e?t="Top Up":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");this.user=JSON.parse(e)},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},async getTransactionHistory(e=null){let t=localStorage.getItem("user");t=JSON.parse(t);let a=null;"student"==t.role&&(a=t.id);let l={user_id:null,admin_id:null,role:null,page:e,entries_per_page:this.itemsPerPage};l.user_id=a,"organization_admin"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||(l.admin_id=this.user.id,l.role=this.user.role);try{const e=await Ke.post("getTransactionHistory",l);this.transactionHistoryList=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(c){console.log(c)}},async filterTransactionHistory(){(""==this.filterBy&&""==this.seachString||""!=this.filterBy&&""==this.seachString)&&this.getTransactionHistory();let e={type:this.filterBy,value:this.seachString};try{const t=await Ke.post("/filterTransactionHistory",e);this.transactionHistoryList=t.data}catch(t){console.log(t)}},async deleteTransactionHistory(e){try{await Ke.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)},formatDate(e){const t=Kc()(e);return t.format("MMM D, YYYY,   HH:mm:ss")}}};a("88f1");const XA=He()(WA,[["render",YA]]);var ZA=XA;Object(l["pushScopeId"])("data-v-cd65b4d4");const KA={class:" py-4"},GA={class:"row"},eS={class:"col-12"},tS={class:"card my-4"},aS={class:"card-body px-0 pb-2"},lS={class:"table-responsive p-0"},cS=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"},[Object(l["createTextVNode"])("Purchase History section not only provides a clear overview of completed purchases but also allows users to initiate refund requests directly from the purchase history,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" streamlining the process for resolving payment issues.")])])])],-1),sS={class:"card-body pt-1 p-3"},oS={class:"container-fluid mt-1"},nS={class:"listNavigation__lists"},rS={class:"listNavigation__list"},iS={class:"list__item"},dS={href:"#",class:"item__link"},mS={class:"item__icon"},bS=["src"],pS={class:"item__content"},uS={class:"label text-sm"},OS={class:"label text-success"},jS={key:0,class:"text-success text-sm"},hS={key:1,class:"text-success text-sm"},gS={key:2,class:"ms-5 bg-success text-white text-sm rounded-pill p-1"},fS=Object(l["createElementVNode"])("small",null,"Card Payment",-1),ES=[fS],VS={key:3,class:"ms-5 bg-warning text-white text-sm rounded-pill p-1"},NS=Object(l["createElementVNode"])("small",null,"Wallet Payment",-1),xS=[NS],yS={key:4,class:"ms-5 text-warning text-sm"},vS=Object(l["createElementVNode"])("small",null,"(Refund Requested)",-1),kS=[vS],wS={key:5,class:"ms-5 text-warning text-sm"},AS=Object(l["createElementVNode"])("small",null,"(Refunded)",-1),SS=[AS],BS={class:"description"},CS={class:"me-3 trip-dates text-warning"},_S=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),PS={key:0,class:"mt-0"},IS={key:1},DS=["onClick"],TS={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},MS=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),zS=[MS];function FS(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",KA,[Object(l["createElementVNode"])("div",GA,[Object(l["createElementVNode"])("div",eS,[Object(l["createElementVNode"])("div",tS,[Object(l["createElementVNode"])("div",aS,[Object(l["createElementVNode"])("div",lS,[cS,Object(l["createElementVNode"])("div",sS,[Object(l["createElementVNode"])("div",oS,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",nS,[Object(l["createElementVNode"])("ul",rS,[Object(l["createElementVNode"])("li",iS,[Object(l["createElementVNode"])("a",dS,[Object(l["createElementVNode"])("div",mS,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,bS)]),Object(l["createElementVNode"])("div",pS,[Object(l["createElementVNode"])("h4",uS,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1),Object(l["createElementVNode"])("p",OS,"Price - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price)),1),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",jS,[Object(l["createElementVNode"])("small",null," Fully Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",hS,[Object(l["createElementVNode"])("small",null,"Partially Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",gS,ES)):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",VS,xS)):Object(l["createCommentVNode"])("",!0),"refund_requested"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yS,kS)):Object(l["createCommentVNode"])("",!0),"refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",wS,SS)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",BS,"Detail: "+Object(l["toDisplayString"])(t.detail),1),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",CS,"Date "+Object(l["toDisplayString"])(o.formatDateString(t.created_at)),1)])]),_S]),"refunded"==t.refund_status||"refund_requested"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",PS)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",IS,[Object(l["createElementVNode"])("button",{onClick:e=>o.confirmDelete(t.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-98  text-white fw-5 p-2 border-radius-lg"}," Request Refund "+Object(l["toDisplayString"])(t.refund_status),9,DS)]))])])])]))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",TS,zS)):Object(l["createCommentVNode"])("",!0)])])])])])])])])}Object(l["popScopeId"])();var US={name:"tables",mounted(){this.getUser(),this.getShopItems()},updated(){},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{shopItems:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Your refund request will be submitted to the admin for further review.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, submit!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.refundRequest(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await Ke.post("/getMyPurchases",t);this.shopItems=e.data.data}catch(a){console.log(a)}},async deleteShopItem(e){try{await Ke.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async refundRequest(e){let t={purchase_id:e};try{let e=await Ke.post("/refundRequest",t);this.getShopItems(),this.snackbarMsg(e.data.message)}catch(a){console.log(a)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await Ke.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=Kc()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("6e70");const LS=He()(US,[["render",FS],["__scopeId","data-v-cd65b4d4"]]);var qS=LS;const RS={class:"container-fluid"},$S={class:"row"},QS={class:"col-12"},JS={class:"card px-3"},HS=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("The Purchase History section provides detailed records of each purchase, including the Item Name, Buyer Name, Price, Amount Paid,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" Payment Status, and Date of Purchase. This feature helps track all transactions, offering a clear and organized overview of past purchases.")])])],-1),YS={class:"card-body px-0 pb-2"},WS={class:"table-responsive p-0"},XS={class:"filter-container ms-2 mb-2"},ZS={style:{display:"flex"}},KS=["value"],GS=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),eB=Object(l["createTextVNode"])(" Export To XLS "),tB=[GS,eB],aB={ref:"table",class:"table align-items-center mb-0"},lB=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Buyer "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Amount Paid "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Payment Method "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date ")])],-1),cB={key:0},sB=Object(l["createElementVNode"])("td",{colspan:"8",class:"text-center"}," No data available. ",-1),oB=[sB],nB={class:"align-middle text-center"},rB={class:"text-secondary text-xs font-weight-bold"},iB={class:"align-middle text-center d-flex flex-column"},dB={class:"text-secondary text-xs"},mB={class:"text-secondary text-xs"},bB={class:"align-middle text-center"},pB=["src"],uB={class:"text-secondary text-xs "},OB={class:"align-middle text-center"},jB={class:"text-secondary text-xs"},hB={class:"align-middle text-center"},gB={class:"text-secondary text-xs"},fB={class:"align-middle text-center"},EB={key:0,class:"text-success text-xs"},VB={key:1,class:"text-warning text-xs"},NB={class:"align-middle text-center text-sm"},xB={key:0,class:"badge badge-sm bg-gradient-danger"},yB={key:1,class:"badge badge-sm bg-gradient-success"},vB={class:"align-middle text-center text-sm"},kB={class:"row"},wB={class:"col-md-12 col-lg-12"},AB={class:"pagination-container"},SB={class:"entries-dropdown"},BB=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),CB=["value"],_B={class:"pagination-wrapper"},PB={class:"pagination"},IB=["onClick"];function DB(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",RS,[Object(l["createElementVNode"])("div",$S,[Object(l["createElementVNode"])("div",QS,[Object(l["createElementVNode"])("div",JS,[HS,Object(l["createElementVNode"])("div",YS,[Object(l["createElementVNode"])("div",WS,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",XS,[Object(l["createElementVNode"])("span",ZS,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterPurchaseHistory&&o.filterPurchaseHistory(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterPurchaseHistory&&o.filterPurchaseHistory(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,KS))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},tB)])])]),Object(l["createElementVNode"])("table",aB,[lB,Object(l["createElementVNode"])("tbody",null,[0===s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",cB,oB)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",nB,[Object(l["createElementVNode"])("span",rB,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",iB,[Object(l["createElementVNode"])("span",dB,Object(l["toDisplayString"])(t.buyer_name)+" ,",1),Object(l["createElementVNode"])("small",mB,Object(l["toDisplayString"])(t.buyer_email),1)]),Object(l["createElementVNode"])("td",bB,[t.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+t.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,pB)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",uB,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",OB,[Object(l["createElementVNode"])("span",jB,"£"+Object(l["toDisplayString"])(o.formattedPrice(t.price)),1)]),Object(l["createElementVNode"])("td",hB,[Object(l["createElementVNode"])("span",gB,"£"+Object(l["toDisplayString"])(o.formattedPrice(t.amount_paid)),1)]),Object(l["createElementVNode"])("td",fB,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",EB,"Card Payment")):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",VB,"Wallet Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",NB,["partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",xB,"Partially Paid")):Object(l["createCommentVNode"])("",!0),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yB,"Fully Paid")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",vB,Object(l["toDisplayString"])(o.formatDateString(t.created_at)),1)]))),128))])],512)]),Object(l["createElementVNode"])("div",kB,[Object(l["createElementVNode"])("div",wB,[Object(l["createElementVNode"])("div",AB,[Object(l["createElementVNode"])("div",SB,[BB,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,CB))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",_B,[Object(l["createElementVNode"])("ul",PB,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,IB)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var TB={name:"tables",mounted(){this.setColor(),this.getUser(),this.getShopItems()},updated(){this.$permissions.redirectIfNotAllowed("purchase_history")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Item Name",allFields:["Buyer","Item Name","Price","Amount Paid","Payment Status"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"purchase_history.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await Ke.post("/getMyPurchases",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterPurchaseHistory(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString};try{const t=await Ke.post("/filterPurchaseHistory",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await Ke.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=Kc()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await Ke.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("f594");const MB=He()(TB,[["render",DB]]);var zB=MB;const FB={class:""},UB={class:"row"},LB={class:"col-12"},qB={class:"card"},RB={class:"card-body px-0 pb-2"},$B={class:"table-responsive p-0"},QB={class:"filter-container mb-3"},JB=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PENDING INSTALLMENTS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"}," In the Pending Installments section, you can track and manage pending payments for students. This section allows you to view details of pending installments. ")],-1),HB={class:"filter-container me-4 mb-2"},YB={style:{display:"flex"}},WB=["value"],XB={class:"card-body pt-1 p-3"},ZB={class:"container-fluid mt-1"},KB={class:"listNavigation__lists"},GB={class:"listNavigation__list"},eC={class:"list__item"},tC={href:"#",class:"item__link"},aC={class:"item__icon"},lC=["src"],cC={class:"item__content"},sC={class:"label text-sm"},oC={class:"label text-success"},nC={class:"description"},rC=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),iC=["onClick"],dC={key:1,class:""},mC=Object(l["createElementVNode"])("h4",{class:"label text-sm text-warning"},"Buyer",-1),bC={class:"label text-sm"},pC={class:"label text-success"},uC={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},OC=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),jC=[OC],hC={class:"row"},gC={class:"col-md-12 col-lg-12"},fC={class:"pagination-container"},EC={class:"entries-dropdown"},VC=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),NC=["value"],xC={class:"pagination-wrapper"},yC={class:"pagination"},vC=["onClick"];function kC(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",FB,[Object(l["createElementVNode"])("div",UB,[Object(l["createElementVNode"])("div",LB,[Object(l["createElementVNode"])("div",qB,[Object(l["createElementVNode"])("div",RB,[Object(l["createElementVNode"])("div",$B,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",QB,[JB,Object(l["createElementVNode"])("div",HB,[Object(l["createElementVNode"])("span",YB,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterInstallments&&o.filterInstallments(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterInstallments&&o.filterInstallments(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,WB))),128))],544),[[l["vModelSelect"],s.filterBy]])])])])]),Object(l["createElementVNode"])("div",XB,[Object(l["createElementVNode"])("div",ZB,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",KB,[Object(l["createElementVNode"])("ul",GB,[Object(l["createElementVNode"])("li",eC,[Object(l["createElementVNode"])("a",tC,[Object(l["createElementVNode"])("div",aC,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,lC)]),Object(l["createElementVNode"])("div",cC,[Object(l["createElementVNode"])("h4",sC,"Installment No."+Object(l["toDisplayString"])(t.installment_no),1),Object(l["createElementVNode"])("p",oC,"Installment Amount - £"+Object(l["toDisplayString"])(o.formattedAmount(t.installment_amount)),1),Object(l["createElementVNode"])("div",nC,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1)]),rC]),"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:e=>o.payNow(t.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-15  text-white fw-5 p-2 border-radius-lg"}," Pay now",8,iC)):Object(l["createCommentVNode"])("",!0),"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",dC,[mC,Object(l["createElementVNode"])("h4",bC,Object(l["toDisplayString"])(t.buyer_name),1),Object(l["createElementVNode"])("p",pC,Object(l["toDisplayString"])(t.buyer_email),1)])):Object(l["createCommentVNode"])("",!0)])])])]))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",uC,jC)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",hC,[Object(l["createElementVNode"])("div",gC,[Object(l["createElementVNode"])("div",fC,[Object(l["createElementVNode"])("div",EC,[VC,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.itemsPerPage=e),onChange:t[5]||(t[5]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,NC))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",xC,[Object(l["createElementVNode"])("ul",yC,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,vC)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var wC={name:"tables",mounted(){this.getUser(),this.getShopItems()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("pending_installments")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Buyer",allFields:["Buyer","Item Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await Ke.post("/getMyInstallments",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterInstallments(){(""==this.filterBy&&""==this.seachString||""!=this.filterBy&&""==this.seachString)&&this.getShopItems();let e={type:this.filterBy,value:this.seachString};try{const t=await Ke.post("/filterInstallments",e);this.shopItems=t.data}catch(t){console.log(t)}},async deleteShopItem(e){try{await Ke.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},payNow(e){this.$router.push({name:"pay-installment",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await Ke.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=Kc()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("b2ca");const AC=He()(wC,[["render",kC]]);var SC=AC;const BC={class:"row"},CC={class:"col-xl-12 col-lg-12 col-md-12"},_C={class:"card"},PC=Object(l["createElementVNode"])("div",{class:"card-header pb-0 px-3 d-flex justify-content-between"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Pay Installment")],-1),IC={class:"card-body pt-4 p-3"},DC={class:"row"},TC={class:"list-group col-xl-6 col-lg-6 col-md-6"},MC={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},zC={class:"d-flex flex-column"},FC={class:"mb-3 text-sm"},UC={key:0},LC=Object(l["createElementVNode"])("br",null,null,-1),qC={key:1,class:"text-success"},RC={key:2,class:"text-success"},$C=Object(l["createTextVNode"])(" Installments And Deposit "),QC=Object(l["createElementVNode"])("br",null,null,-1),JC=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},null,-1),HC={class:"ms-auto text-end"},YC=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),WC=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),XC={class:"ms-auto text-end"},ZC={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},KC=["onClick"],GC=Object(l["createElementVNode"])("br",null,null,-1),e_={key:0,class:"text-success me-3"},t_={key:1,class:"text-success me-3"},a_=Object(l["createElementVNode"])("br",null,null,-1),l_={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},c_={class:"d-flex flex-column"},s_={class:"mb-3 text-sm"},o_=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs"},null,-1),n_={class:"ms-auto text-end"},r_=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),i_=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),d_={class:"ms-auto text-end"},m_={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},b_=["onClick"],p_={class:"col-md-5 ms-auto"},u_=["onClick"],O_={key:0,class:"w-10 me-3 mb-0",src:Jb.a,alt:"logo"},j_={key:1,class:"w-10 me-3 mb-0",src:lt.a,alt:"logo"},h_={class:"mb-0"},g_={key:0,class:"text-sm text-warning mt-1"};function f_(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",BC,[Object(l["createElementVNode"])("div",CC,[Object(l["createElementVNode"])("div",_C,[PC,Object(l["createElementVNode"])("div",IC,[Object(l["createElementVNode"])("div",DC,[Object(l["createElementVNode"])("ul",TC,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",MC,[Object(l["createElementVNode"])("div",zC,[Object(l["createElementVNode"])("h6",FC,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",UC,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),LC,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",qC," Installments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",RC,[$C,QC,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Installments) ",1)])):Object(l["createCommentVNode"])("",!0)]),JC]),Object(l["createElementVNode"])("div",HC,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[YC,WC],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",XC,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",ZC," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,KC),GC,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",e_," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",t_,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.initial_deposit_installments))+" Deposit ",1),a_,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",l_,[Object(l["createElementVNode"])("div",c_,[Object(l["createElementVNode"])("h6",s_,Object(l["toDisplayString"])(e.trip.title)+" (Trip)",1),o_]),Object(l["createElementVNode"])("div",n_,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"school_user"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[r_,i_],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",d_,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",m_," £"+Object(l["toDisplayString"])(o.formattedPrice(e.trip.budget)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,b_)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",p_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:s.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>o.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",O_)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",j_)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",h_," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,u_))),128)),Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=e=>o.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment "),Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>o.checkout("wallet_and_card")),style:{"font-size":"12px","background-color":"#573078"},class:"mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet & Card Payment "),s.dataLoaded?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",g_,"In a Wallet & Card Payment, the wallet is charged first, and any remaining amount is charged to the card.")):Object(l["createCommentVNode"])("",!0)])])])])])])}var E_={name:"billing-card",data(){return{userCards:"",dataLoaded:!1,user:"",isSelected:0}},mounted(){this.getUser(),this.getCustomerPaymentMethods()},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit_installments:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price))}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await Ke.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"",a=this.$route.params.id,l={payment_method:t,type:e,installment_id:a};try{await Ke.post("/payInstallment",l),this.snackbarMsg("Payment Successful"),this.$router.push({name:"installments"})}catch(c){console.log(c)}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await Ke.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};const V_=He()(E_,[["render",f_]]);var N_=V_;const x_={class:""},y_={class:"row"},v_={class:"col-12"},k_={class:"card"},w_={class:"card-body px-0 pb-2"},A_={class:"table-responsive p-0"},S_={class:"filter-container mb-3"},B_=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"REFUND REQUESTS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"}," In the Refund Requests section, you can manage and process requests for refunds submitted by students and approve or reject the request as needed. ")],-1),C_={class:"filter-container me-4 mb-2"},__={style:{display:"flex"}},P_=["value"],I_={class:"card-body pt-1 p-3"},D_={class:"container-fluid mt-1"},T_={class:"col-md-8"},M_={class:"d-flex flex-column"},z_={class:"d-flex"},F_={class:"mb-3 text-sm"},U_={key:0,style:{"font-size":"12px !important"},class:" text-sm ms-2"},L_=["src"],q_={class:"col-md-4"},R_={class:"ms-auto text-start"},$_={class:"me-3 trip-dates text-warning"},Q_=Object(l["createElementVNode"])("br",null,null,-1),J_={class:"d-flex align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},H_={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2 mb-1"},Y_={key:0,class:"text-success text-sm rounded-pill p-1"},W_=Object(l["createElementVNode"])("small",null,"Card Payment",-1),X_=[W_],Z_={key:1,class:"text-warning text-sm rounded-pill p-1"},K_=Object(l["createElementVNode"])("small",null,"Wallet Payment",-1),G_=[K_],eP={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},tP={key:0,class:"text-success"},aP={key:1,class:"text-success"},lP={key:0,class:"mt-0 d-flex mt-2"},cP=["onClick"],sP=["onClick"],oP={key:1,style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},nP={key:0,class:"text-success"},rP={key:1,class:"text-success"},iP=Object(l["createElementVNode"])("br",null,null,-1),dP={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},mP=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),bP=[mP],pP={class:"row"},uP={class:"col-md-12 col-lg-12"},OP={class:"pagination-container"},jP={class:"entries-dropdown"},hP=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),gP=["value"],fP={class:"pagination-wrapper"},EP={class:"pagination"},VP=["onClick"];function NP(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",x_,[Object(l["createElementVNode"])("div",y_,[Object(l["createElementVNode"])("div",v_,[Object(l["createElementVNode"])("div",k_,[Object(l["createElementVNode"])("div",w_,[Object(l["createElementVNode"])("div",A_,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",S_,[B_,Object(l["createElementVNode"])("div",C_,[Object(l["createElementVNode"])("span",__,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterRefunds&&o.filterRefunds(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterRefunds&&o.filterRefunds(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,P_))),128))],544),[[l["vModelSelect"],s.filterBy]])])])])]),Object(l["createElementVNode"])("div",I_,[Object(l["createElementVNode"])("div",D_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[Object(l["createElementVNode"])("div",T_,[Object(l["createElementVNode"])("div",M_,[Object(l["createElementVNode"])("span",z_,[Object(l["createElementVNode"])("h6",F_,Object(l["toDisplayString"])(t.name),1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",U_," ("+Object(l["toDisplayString"])(t.product_type)+") ",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-20 h-10 border-radius-lg"},null,8,L_)])]),Object(l["createElementVNode"])("div",q_,[Object(l["createElementVNode"])("div",R_,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",$_,"Date "+Object(l["toDisplayString"])(o.formatDateString(t.created_at)),1)]),Q_,Object(l["createElementVNode"])("div",J_," Price - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price)),1),Object(l["createElementVNode"])("div",H_,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Y_,X_)):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Z_,G_)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eP,["fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",tP,"Fully Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",aP,"Partially Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0)]),o.userPermissions.refunds?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},["refund_requested"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lP,[Object(l["createElementVNode"])("button",{onClick:e=>o.confirmAction(t.id,"refunded"),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45  bg-success text-white fw-5 p-2 border-radius-lg"}," Approve Refund ",8,cP),Object(l["createElementVNode"])("button",{onClick:e=>o.confirmAction(t.id,"refund_rejected"),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45 bg-warning text-white fw-5 p-2 border-radius-lg"}," Decline Refund ",8,sP)])):Object(l["createCommentVNode"])("",!0)],64)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oP,["not_refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",nP,"Refund Rejected")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",rP,Object(l["toDisplayString"])(t.refund_status),1))])),iP])])],64))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",dP,bP)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",pP,[Object(l["createElementVNode"])("div",uP,[Object(l["createElementVNode"])("div",OP,[Object(l["createElementVNode"])("div",jP,[hP,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.itemsPerPage=e),onChange:t[5]||(t[5]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,gP))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",fP,[Object(l["createElementVNode"])("ul",EP,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,VP)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var xP={name:"tables",mounted(){this.getUser(),this.getShopItems()},updated(){this.$permissions.redirectIfNotAllowed("refunds")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",filterBy:"Buyer",allFields:["Buyer"],seachString:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmAction(e,t){Xc.a.fire({title:"Are you sure?",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Proceed!",customClass:{popup:"custom-swal"}}).then(a=>{a.isConfirmed&&this.refundActions(e,t)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await Ke.post("/getRefundRequest",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterRefunds(){(""==this.filterBy&&""==this.seachString||""!=this.filterBy&&""==this.seachString)&&this.getShopItems();let e={type:this.filterBy,value:this.seachString};try{const t=await Ke.post("/filterRefunds",e);this.shopItems=t.data}catch(t){console.log(t)}},async refundActions(e,t){let a={refund_status:t,refund_id:e};try{await Ke.post("/refundStatus",a),this.getShopItems(),this.snackbarMsg("Successfuly Refunded!")}catch(l){console.log(l),this.snackbarMsg("Something went wrong!")}},async deleteShopItem(e){try{await Ke.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await Ke.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=Kc()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("b904");const yP=He()(xP,[["render",NP]]);var vP=yP;Object(l["pushScopeId"])("data-v-1b02d301");const kP={class:"row"},wP={class:"col-md-12 col-sm-12"},AP={class:"support-form-container"},SP=Object(l["createElementVNode"])("h5",null,"Contact Support",-1),BP={class:"col-md-6 col-sm-12"},CP={key:0,class:"row mb-1 validation-errors bg-warning rounded p-1"},_P={class:"form-group"},PP=Object(l["createElementVNode"])("label",{for:"fullName",class:"input-label"},"Full Name",-1),IP={class:"form-group"},DP=Object(l["createElementVNode"])("label",{for:"email"},"Email",-1),TP={class:"form-group"},MP=Object(l["createElementVNode"])("label",{for:"subject"},"Subject",-1),zP={class:"form-group"},FP=Object(l["createElementVNode"])("label",{for:"message"},"Message",-1),UP=Object(l["createElementVNode"])("button",{type:"submit",class:"submit-button p-1 text-sm"},"Submit",-1);function LP(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kP,[Object(l["createElementVNode"])("div",wP,[Object(l["createElementVNode"])("div",AP,[Object(l["createElementVNode"])("form",{class:"support-form",onSubmit:t[4]||(t[4]=Object(l["withModifiers"])((...e)=>o.handleSubmit&&o.handleSubmit(...e),["prevent"]))},[SP,Object(l["createElementVNode"])("div",BP,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",CP,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",_P,[PP,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.form.fullName=e),type:"text",class:"input-box",id:"fullName",name:"fullName",required:""},null,512),[[l["vModelText"],s.form.fullName]])]),Object(l["createElementVNode"])("div",IP,[DP,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.form.email=e),type:"email",class:"input-box",id:"email",name:"email",required:""},null,512),[[l["vModelText"],s.form.email]])]),Object(l["createElementVNode"])("div",TP,[MP,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.form.subject=e),type:"text",class:"input-box",id:"subject",name:"subject",required:""},null,512),[[l["vModelText"],s.form.subject]])]),Object(l["createElementVNode"])("div",zP,[FP,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.message=e),id:"message",class:"input-area",name:"message",rows:"5",required:""},null,512),[[l["vModelText"],s.form.message]])])]),UP],32)])])])}Object(l["popScopeId"])();var qP={data(){return{isError:!1,validationErrors:"",user:"",form:{fullName:"",email:"",subject:"",message:""}}},mounted(){this.getUser()},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,"student"==e.role||"staff"==e.role?console.log(""):this.$router.go(-1)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async handleSubmit(){try{await Ke.post("/sendSupportEmail",this.form),this.snackbarMsg("Message Sent Successfully!"),this.isError=!1,Object.keys(this.form).forEach(e=>this.form[e]="")}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("12f7");const RP=He()(qP,[["render",LP],["__scopeId","data-v-1b02d301"]]);var $P=RP;const QP={class:"container-fluid"},JP={class:"row"},HP={class:"col-12"},YP={class:"card ps-3"},WP={class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},XP=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])(" Here, you can oversee Shop Items. You can add new items, delete or edit existing items, and update their quantity, status, "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" and price. This functionality ensures effective management of the shop items. ")])],-1),ZP=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Item ",-1),KP={class:"card-body px-0 pb-2"},GP={class:"table-responsive p-0"},eI={class:"filter-container ms-2 mb-2"},tI={style:{display:"flex"}},aI=["value"],lI=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),cI=Object(l["createTextVNode"])(" Export To XLS "),sI=[lI,cI],oI={ref:"table",class:"table align-items-center mb-0"},nI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),rI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),iI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),dI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Sold Quantity ",-1),mI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Expiration Date ",-1),bI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),pI={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},uI=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),OI=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),jI={key:0},hI=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),gI=[hI],fI={class:"align-middle text-center"},EI={class:"text-secondary text-xs font-weight-bold"},VI={class:"align-middle text-center"},NI=["src"],xI={class:"text-secondary text-xs "},yI={class:"align-middle text-center"},vI={class:"text-secondary text-xs "},kI={class:"align-middle text-center"},wI={class:"text-secondary text-xs "},AI={class:"align-middle text-center"},SI={class:"text-secondary text-xs "},BI={class:"align-middle text-center"},CI={class:"text-secondary text-xs "},_I={key:0,class:"align-middle text-center"},PI={class:"text-secondary text-xs "},II={class:"align-middle text-center text-sm"},DI={key:0,class:"badge badge-sm bg-gradient-success"},TI={key:1,class:"badge badge-sm bg-gradient-danger"},MI={class:"align-middle text-center text-sm"},zI={key:0},FI=["onClick"],UI=["onClick"],LI={class:"row"},qI={class:"col-md-12 col-lg-12"},RI={class:"pagination-container"},$I={class:"entries-dropdown"},QI=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),JI=["value"],HI={class:"pagination-wrapper"},YI={class:"pagination"},WI=["onClick"];function XI(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QP,[Object(l["createElementVNode"])("div",JP,[Object(l["createElementVNode"])("div",HP,[Object(l["createElementVNode"])("div",YP,[Object(l["createElementVNode"])("div",WP,[XP,o.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-items"}},{default:Object(l["withCtx"])(()=>[ZP]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",KP,[Object(l["createElementVNode"])("div",GP,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",eI,[Object(l["createElementVNode"])("span",tI,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterShopItems&&o.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterShopItems&&o.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,aI))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},sI)])])]),Object(l["createElementVNode"])("table",oI,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[nI,rI,iI,dI,mI,bI,s.user&&"super_admin"==s.user.role||s.user&&"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",pI," Shop ")):Object(l["createCommentVNode"])("",!0),uI,OI])]),Object(l["createElementVNode"])("tbody",null,[0===s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",jI,gI)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(a,c)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:c},[Object(l["createElementVNode"])("td",fI,[Object(l["createElementVNode"])("span",EI,Object(l["toDisplayString"])(a.id),1)]),Object(l["createElementVNode"])("td",VI,[a.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+a.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,NI)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",xI,Object(l["toDisplayString"])(a.name),1)]),Object(l["createElementVNode"])("td",yI,[Object(l["createElementVNode"])("span",vI,Object(l["toDisplayString"])(a.quantity),1)]),Object(l["createElementVNode"])("td",kI,[Object(l["createElementVNode"])("span",wI,Object(l["toDisplayString"])(a.quantity_sold),1)]),Object(l["createElementVNode"])("td",AI,[Object(l["createElementVNode"])("span",SI,Object(l["toDisplayString"])(a.expiration_date),1)]),Object(l["createElementVNode"])("td",BI,[Object(l["createElementVNode"])("span",CI,"£"+Object(l["toDisplayString"])(o.formattedPrice(a.price)),1)]),s.user&&"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",_I,[Object(l["createElementVNode"])("span",PI,Object(l["toDisplayString"])(t.shop_name?t.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",II,[a.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",DI,"Available")):Object(l["createCommentVNode"])("",!0),0==a.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",TI,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",MI,[s.user&&"super_admin"==s.user.role||"organization_admin"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",zI,[o.userPermissions.edit_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:e=>o.editShopItem(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,FI)):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:e=>o.confirmDelete(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,UI)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0)])]))),128))],64))),128))])],512)]),Object(l["createElementVNode"])("div",LI,[Object(l["createElementVNode"])("div",qI,[Object(l["createElementVNode"])("div",RI,[Object(l["createElementVNode"])("div",$I,[QI,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,JI))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",HI,[Object(l["createElementVNode"])("ul",YI,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,WI)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var ZI={name:"tables",mounted(){this.setColor(),this.getUser(),this.getShopItems()},updated(){this.$permissions.redirectIfNotAllowed("view_shop")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",shopItems:"",user:"",filterBy:"Name",allFields:["Name","Quantity","Price"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"shop_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await Ke.post("/getShopItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await Ke.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await Ke.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await Ke.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("a0fe");const KI=He()(ZI,[["render",XI]]);var GI=KI;const eD={class:"container-fluid"},tD={class:"row"},aD={class:"col-12"},lD={class:"card px-3"},cD=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"page-description"}," Every archived Item can be found in this table. Here, you can manage archived Shop Items. You can permanently delete them in bulk, restore them, or export the data to an Excel sheet ")])],-1),sD={class:"card-body px-0 pb-2"},oD={class:"table-responsive p-0"},nD={class:"filter-container ms-2 mb-2"},rD={style:{display:"flex"}},iD=["value"],dD=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),mD=Object(l["createTextVNode"])(" Export To XLS "),bD=[dD,mD],pD=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),uD=Object(l["createTextVNode"])(" Bulk Restore "),OD=[pD,uD],jD=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),hD=Object(l["createTextVNode"])(" Bulk Delete "),gD=[jD,hD],fD={ref:"table",class:"table align-items-center mb-0"},ED={class:""},VD={class:"form-check",style:{"margin-left":"-20px"}},ND=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),xD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),yD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),vD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),kD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),wD={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},AD=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),SD={key:0},BD=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),CD=[BD],_D={class:"align-middle text-center text-sm"},PD={class:"form-check"},ID=["checked","onChange"],DD=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),TD={class:"align-middle text-center"},MD={class:"text-secondary text-xs font-weight-bold"},zD={class:"align-middle text-center"},FD={class:"text-secondary text-xs "},UD={class:"align-middle text-center"},LD={class:"text-secondary text-xs "},qD={class:"align-middle text-center"},RD={class:"text-secondary text-xs "},$D={key:0,class:"align-middle text-center"},QD={class:"text-secondary text-xs "},JD={class:"align-middle text-center text-sm"},HD={class:"badge badge-sm bg-gradient-success"},YD={class:"row"},WD={class:"col-md-12 col-lg-12"},XD={class:"pagination-container"},ZD={class:"entries-dropdown"},KD=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),GD=["value"],eT={class:"pagination-wrapper"},tT={class:"pagination"},aT=["onClick"];function lT(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",eD,[Object(l["createElementVNode"])("div",tD,[Object(l["createElementVNode"])("div",aD,[Object(l["createElementVNode"])("div",lD,[cD,Object(l["createElementVNode"])("div",sD,[Object(l["createElementVNode"])("div",oD,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",nD,[Object(l["createElementVNode"])("span",rD,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterShopItems&&o.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterShopItems&&o.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,iD))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},bD),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.confirmAction("restore"))},OD),o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.confirmAction("delete"))},gD)):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("table",fD,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",ED,[Object(l["createElementVNode"])("div",VD,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),ND])]),xD,yD,vD,kD,s.user&&"super_admin"==s.user.role||s.user&&"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",wD," Shop ")):Object(l["createCommentVNode"])("",!0),AD])]),Object(l["createElementVNode"])("tbody",null,[0===s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",SD,CD)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",_D,[Object(l["createElementVNode"])("div",PD,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(t.id),onChange:e=>o.selectRecord(t.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,ID),DD])]),Object(l["createElementVNode"])("td",TD,[Object(l["createElementVNode"])("span",MD,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",zD,[Object(l["createElementVNode"])("span",FD,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",UD,[Object(l["createElementVNode"])("span",LD,Object(l["toDisplayString"])(t.quantity),1)]),Object(l["createElementVNode"])("td",qD,[Object(l["createElementVNode"])("span",RD,"£"+Object(l["toDisplayString"])(o.formattedPrice(t.price)),1)]),s.user&&"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",$D,[Object(l["createElementVNode"])("span",QD,Object(l["toDisplayString"])(e.shop_name?e.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",JD,[Object(l["createElementVNode"])("span",HD,Object(l["toDisplayString"])(t.status),1)])]))),128))],64))),128))])],512)]),Object(l["createElementVNode"])("div",YD,[Object(l["createElementVNode"])("div",WD,[Object(l["createElementVNode"])("div",XD,[Object(l["createElementVNode"])("div",ZD,[KD,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,GD))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",eT,[Object(l["createElementVNode"])("ul",tT,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,aT)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var cT={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getShopItems(),await this.selectAll()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["Name","Quantity","Price"],seachString:"",selectall:!1,selectedRecords:[],shopItems:"",user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"archived_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await Ke.post("/getArchivedItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await Ke.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await Ke.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},selectAll(){this.selectedRecords=[],this.shopItems[0].shop_items.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkRestore(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await Ke.post("/bulkRestoreItems",e),this.snackbarMsg("Successfully restored"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},async bulkDelete(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await Ke.post("/bulkDeleteItems",e),this.snackbarMsg("Successfully deleted"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await Ke.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},confirmAction(e){Xc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})}}};a("2bc4");const sT=He()(cT,[["render",lT]]);var oT=sT;Object(l["pushScopeId"])("data-v-f533f80c");const nT={class:"container-fluid py-4"},rT={class:"row"},iT={class:"col-12"},dT={class:"card my-4"},mT=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Shop Item")],-1),bT={class:"card-body px-0 pb-2"},pT={class:"table-responsive p-0"},uT={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},OT={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},jT={class:"form-bg container p-4"},hT={class:"card card-plain"},gT={class:"card-body"},fT={role:"form"},ET={key:0,class:"row mb-1 validation-errors"},VT={class:"text-white"},NT={class:"row mb-1"},xT={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},yT=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),vT={key:0,class:"text-danger error-txt"},kT={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},wT=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),AT={key:0,class:"text-danger error-txt"},ST={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},BT=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),CT={key:0,class:"text-danger error-txt"},_T={class:"mb-1"},PT=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),IT={key:0,class:"text-danger error-txt"},DT={class:"row mb-1"},TT={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},MT=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),zT={key:0,class:"text-danger error-txt"},FT={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},UT=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),LT={key:0,class:"text-danger error-txt"},qT={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},RT=Object(l["createElementVNode"])("label",{class:"input-label",for:"expiration_date"},"Expiration Date",-1),$T={key:0,class:"text-danger error-txt"},QT={class:"row mb-1"},JT={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},HT=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),YT=Object(l["createElementVNode"])("br",null,null,-1),WT=["value"],XT={key:0,class:"text-danger error-txt"},ZT={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},KT=Object(l["createElementVNode"])("label",{class:"input-label",for:"quantity_sold"},"Sold Items",-1),GT={key:0,class:"text-danger error-txt"},eM={class:"row mb-1"},tM={class:"col-xl-12 col-lg-12 col-md-12 mb-1"},aM=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Visibility Options",-1),lM=Object(l["createElementVNode"])("br",null,null,-1),cM={class:"row mb-1"},sM={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},oM=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Colleges",-1),nM=Object(l["createElementVNode"])("br",null,null,-1),rM={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},iM=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Courses",-1),dM=Object(l["createElementVNode"])("br",null,null,-1),mM={class:"row p-2"},bM=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),pM={class:"col-xl-4 col-lg-4 col-md-4"},uM={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},OM=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),jM={class:"checkbox-container mt-2 me-5"},hM=["checked"],gM=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),fM={class:"col-xl-4 col-lg-4 col-md-4"},EM={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},VM=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Installments",-1),NM={class:"checkbox-container mt-2 me-5"},xM=["checked"],yM=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),vM={class:"col-xl-4 col-lg-4 col-md-4"},kM={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},wM=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),AM={class:"checkbox-container mt-2 me-5"},SM=["checked"],BM=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),CM={key:1,class:"row p-2"},_M={class:"col-xl-4 col-lg-4 col-md-4"},PM={class:"mb-1"},IM=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),DM={class:"col-xl-4 col-lg-4 col-md-4"},TM={class:"mb-1"},MM=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),zM={class:"mb-1"},FM={class:"input-label",for:"enrollment_date"},UM=["onUpdate:modelValue"],LM={key:2,class:"row p-2"},qM={class:"col-xl-4 col-lg-4 col-md-4"},RM={class:"mb-1"},$M=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),QM={class:"col-xl-4 col-lg-4 col-md-4"},JM={class:"mb-1"},HM=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),YM={class:"col-xl-4 col-lg-4 col-md-4"},WM={class:"mb-1"},XM=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),ZM={class:"col-xl-4 col-lg-4 col-md-4"},KM={class:"mb-1"},GM=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),ez={class:"mb-1"},tz={class:"input-label",for:"enrollment_date"},az=["onUpdate:modelValue"],lz={key:3,class:"mb-1"},cz=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Shop",-1),sz=Object(l["createElementVNode"])("br",null,null,-1),oz=["value"],nz={key:0,class:"text-danger error-txt"},rz={class:"mb-1"},iz={class:"upload-container"},dz={key:0,class:"image-preview"},mz=["src"],bz=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),pz={for:"file-input",class:"file-input-label"},uz={key:0},Oz={key:1},jz=Object(l["createElementVNode"])("br",null,null,-1),hz={key:0,class:"text-danger error-txt"},gz={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},fz={class:""};function Ez(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",nT,[Object(l["createElementVNode"])("div",rT,[Object(l["createElementVNode"])("div",iT,[Object(l["createElementVNode"])("div",dT,[mT,Object(l["createElementVNode"])("div",bT,[Object(l["createElementVNode"])("div",pT,[Object(l["createElementVNode"])("div",uT,[Object(l["createElementVNode"])("div",OT,[Object(l["createElementVNode"])("div",jT,[Object(l["createElementVNode"])("div",hT,[Object(l["createElementVNode"])("div",gT,[Object(l["createElementVNode"])("form",fT,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ET,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationError,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",VT,Object(l["toDisplayString"])(e),1))),256))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",NT,[Object(l["createElementVNode"])("div",xT,[yT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newItem.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vT,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kT,[wT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>s.newItem.price=e),type:"number",step:"0.01",min:"0",placeholder:"price",name:"price"},null,512),[[l["vModelText"],s.newItem.price]]),""!==s.formValidation&&""!==s.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",AT,"Price is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ST,[BT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[2]||(t[2]=e=>s.newItem.quantity=e),min:"0",type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],s.newItem.quantity]]),""!==s.formValidation&&""!==s.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",CT,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",_T,[PT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],s.newItem.detail]]),""!==s.formValidation&&""!==s.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",IT,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",DT,[Object(l["createElementVNode"])("div",TT,[MT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_from","onUpdate:modelValue":t[4]||(t[4]=e=>s.newItem.valid_from=e),type:"date",placeholder:"Valid From",name:"valid_from"},null,512),[[l["vModelText"],s.newItem.valid_from]]),""!==s.formValidation&&""!==s.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zT,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",FT,[UT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_to","onUpdate:modelValue":t[5]||(t[5]=e=>s.newItem.valid_to=e),type:"date",placeholder:"Valid To",name:"valid_to"},null,512),[[l["vModelText"],s.newItem.valid_to]]),""!==s.formValidation&&""!==s.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",LT,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qT,[RT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"expiration_date","onUpdate:modelValue":t[6]||(t[6]=e=>s.newItem.expiration_date=e),type:"date",placeholder:"Expiration Date",name:"expiration_date"},null,512),[[l["vModelText"],s.newItem.expiration_date]]),""!==s.formValidation&&""!==s.formValidation["expiration_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$T,"Expiration Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",QT,[Object(l["createElementVNode"])("div",JT,[HT,YT,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.productTypes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,WT))),128))],512),[[l["vModelSelect"],s.newItem.product_type]]),""!==s.formValidation&&""!==s.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",XT,"Shop is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ZT,[KT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity_sold","onUpdate:modelValue":t[8]||(t[8]=e=>s.newItem.quantity_sold=e),min:"0",type:"number",placeholder:"Quantity Sold",name:"quantity_sold"},null,512),[[l["vModelText"],s.newItem.quantity_sold]]),""!==s.formValidation&&""!==s.formValidation["quantity_sold"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",GT,"Quantity Sold is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",eM,[Object(l["createElementVNode"])("div",tM,[aM,lM,Object(l["createVNode"])(n,{label:"Visibility Options",options:s.visibilityOptions,onInput:o.handleVisibility,placeholder:"Visibility Options"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",cM,[Object(l["createElementVNode"])("div",sM,[oM,nM,Object(l["createVNode"])(n,{label:"Payment Options",options:s.schoolsList,onInput:o.handleColleges,placeholder:"Limit Colleges"},null,8,["options","onInput"])]),Object(l["createElementVNode"])("div",rM,[iM,dM,Object(l["createVNode"])(n,{label:"Visibility Options",options:s.coursesList,onInput:o.handleCourses,placeholder:"Limit Courses"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",mM,[bM,Object(l["createElementVNode"])("div",pM,[Object(l["createElementVNode"])("span",uM,[OM,Object(l["createElementVNode"])("div",jM,[Object(l["createElementVNode"])("input",{checked:"installments"==s.paymentPlan,onChange:t[9]||(t[9]=e=>o.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,hM),gM])])]),Object(l["createElementVNode"])("div",fM,[Object(l["createElementVNode"])("span",EM,[VM,Object(l["createElementVNode"])("div",NM,[Object(l["createElementVNode"])("input",{checked:"deposit"==s.paymentPlan,onChange:t[10]||(t[10]=e=>o.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,xM),yM])])]),Object(l["createElementVNode"])("div",vM,[Object(l["createElementVNode"])("span",kM,[wM,Object(l["createElementVNode"])("div",AM,[Object(l["createElementVNode"])("input",{checked:"manual"==s.paymentPlan,onChange:t[11]||(t[11]=e=>o.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,SM),BM])])])]),"installments"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",CM,[Object(l["createElementVNode"])("div",_M,[Object(l["createElementVNode"])("div",PM,[IM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>s.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",DM,[Object(l["createElementVNode"])("div",TM,[MM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",zM,[Object(l["createElementVNode"])("label",FM,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,UM),[[l["vModelText"],s.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LM,[Object(l["createElementVNode"])("div",qM,[Object(l["createElementVNode"])("div",RM,[$M,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",QM,[Object(l["createElementVNode"])("div",JM,[HM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",YM,[Object(l["createElementVNode"])("div",WM,[XM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>s.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",ZM,[Object(l["createElementVNode"])("div",KM,[GM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>s.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.initial_deposit_due_date]])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",ez,[Object(l["createElementVNode"])("label",tz,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,az),[[l["vModelText"],s.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lz,[cz,sz,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[18]||(t[18]=e=>s.newItem.shop_id=e),id:"shop",type:"select",placeholder:"shop",name:"shop"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allShops,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.shop_name),9,oz))),128))],512),[[l["vModelSelect"],s.newItem.shop_id]]),""!==s.formValidation&&""!==s.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nz,"Shop is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",rz,[Object(l["createElementVNode"])("div",iz,[s.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",dz,[Object(l["createElementVNode"])("img",{src:s.imageFileUrl,alt:"Image Preview"},null,8,mz)])):Object(l["createCommentVNode"])("",!0),bz,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[19]||(t[19]=(...e)=>o.handleImageUpload&&o.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",pz,[e.mageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Oz,Object(l["toDisplayString"])(s.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",uz,"Choose a file"))])]),jz,""!==s.formValidation&&""!==s.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hz,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",gz,[Object(l["createElementVNode"])("div",fz,[Object(l["createElementVNode"])("button",{onClick:t[20]||(t[20]=(...e)=>o.saveNewItem&&o.saveNewItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var Vz={name:"",components:{MultiSelect:Nk},mounted(){this.getUser(),this.getAllShops(),this.getSchools(),this.getAllCourses()},updated(){this.$permissions.redirectIfNotAllowed("create_shop")},computed:{},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))},"newItem.quantity_sold"(e){e<0?this.newItem.quantity_sold=0:Number.isInteger(e)||(this.newItem.quantity_sold=Math.floor(e))},"newItem.price"(e){this.newItem.price=parseFloat(e).toFixed(2)}},data(){return{paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:null,other_installments_due_date:[]},schoolsList:null,coursesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:null,formValidation:"",allAttributes:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",allShops:"",productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],user:"",validationError:"",isError:!1,newItem:{name:"",price:"",quantity:"",product_type:"",detail:"",shop_id:"",image:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitColleges:null,limitCourses:null,quantity_sold:"",expiration_date:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await Ke.get(e);this.coursesList=t.data}catch(e){console.log(e)}},async getSchools(){try{let e=await Ke.get("/getAllSchoolsCourses");this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},validateForm(){this.$permissions.redirectIfNotAllowed("create_shop");let e=!1,t="";t=Eo()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewItem(){this.newItem.payment_plan=this.paymentPlan,this.newItem.installmentsAndDeposit=this.installmentsAndDeposit,this.newItem.image=this.selectedImageFile,console.log(this.selectedImageFile);const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.paymentPlan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),e.append("quantity",this.newItem.quantity),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from),e.append("valid_to",this.newItem.valid_to),e.append("expiration_date",this.newItem.expiration_date),e.append("quantity_sold",this.newItem.quantity_sold),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));try{await Ke.post("/addItem",e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Saved Successfuly"),this.isError=!1}catch(t){this.validationError=t.response.data.errors,this.isError=!0}},handleAttributes(e){this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},async getAllAttributes(){try{const e=await Ke.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){console.log(e),this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await Ke.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("dc8f");const Nz=He()(Vz,[["render",Ez],["__scopeId","data-v-f533f80c"]]);var xz=Nz;Object(l["pushScopeId"])("data-v-572da7a4");const yz={class:"container-fluid py-4"},vz={class:"row"},kz={class:"col-12"},wz={class:"card my-4"},Az=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Shop Item")],-1),Sz={class:"card-body px-0 pb-2"},Bz={class:"table-responsive p-0"},Cz={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},_z={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Pz={class:"form-bg container p-4"},Iz={class:"card card-plain"},Dz={class:"card-body"},Tz={role:"form"},Mz={key:0,class:"row mb-1 validation-errors"},zz={class:"row mb-1"},Fz={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},Uz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),Lz={key:0,class:"text-danger error-txt"},qz={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},Rz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),$z={key:0,class:"text-danger error-txt"},Qz={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},Jz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),Hz={key:0,class:"text-danger error-txt"},Yz={class:"mb-1"},Wz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),Xz={key:0,class:"text-danger error-txt"},Zz={class:"row mb-1"},Kz={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},Gz=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),eF={key:0,class:"text-danger error-txt"},tF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},aF=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),lF={key:0,class:"text-danger error-txt"},cF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},sF=Object(l["createElementVNode"])("label",{class:"input-label",for:"expiration_date"},"Expiration Date",-1),oF={key:0,class:"text-danger error-txt"},nF={class:"row mb-1"},rF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},iF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),dF=Object(l["createElementVNode"])("br",null,null,-1),mF=["value"],bF={key:0,class:"text-danger error-txt"},pF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},uF=Object(l["createElementVNode"])("label",{class:"input-label",for:"quantity_sold"},"Sold Items",-1),OF={key:0,class:"text-danger error-txt"},jF={class:"row mb-1"},hF={class:"col-xl-12 col-lg-12 col-md-12 mb-1"},gF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Visibility Options",-1),fF=Object(l["createElementVNode"])("br",null,null,-1),EF={class:"row mb-1"},VF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},NF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Colleges",-1),xF=Object(l["createElementVNode"])("br",null,null,-1),yF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},vF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Courses",-1),kF=Object(l["createElementVNode"])("br",null,null,-1),wF={class:"row p-2"},AF=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),SF={class:"col-xl-4 col-lg-4 col-md-4"},BF={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},CF=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),_F={class:"checkbox-container mt-2 me-5"},PF=["checked"],IF=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),DF={class:"col-xl-4 col-lg-4 col-md-4"},TF={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},MF=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Installments",-1),zF={class:"checkbox-container mt-2 me-5"},FF=["checked"],UF=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),LF={class:"col-xl-4 col-lg-4 col-md-4"},qF={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},RF=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),$F={class:"checkbox-container mt-2 me-5"},QF=["checked"],JF=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),HF={key:1,class:"row p-2"},YF={class:"col-xl-4 col-lg-4 col-md-4"},WF={class:"mb-1"},XF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),ZF={class:"col-xl-4 col-lg-4 col-md-4"},KF={class:"mb-1"},GF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),eU={class:"mb-1"},tU={class:"input-label",for:"enrollment_date"},aU=["onUpdate:modelValue"],lU={key:2,class:"row p-2"},cU={class:"col-xl-4 col-lg-4 col-md-4"},sU={class:"mb-1"},oU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),nU={class:"col-xl-4 col-lg-4 col-md-4"},rU={class:"mb-1"},iU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),dU={class:"col-xl-4 col-lg-4 col-md-4"},mU={class:"mb-1"},bU=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),pU={class:"col-xl-4 col-lg-4 col-md-4"},uU={class:"mb-1"},OU=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),jU={class:"mb-1"},hU={class:"input-label",for:"enrollment_date"},gU=["onUpdate:modelValue"],fU={key:3,class:"mb-1"},EU=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Shop",-1),VU=Object(l["createElementVNode"])("br",null,null,-1),NU=["value"],xU={key:0,class:"text-danger error-txt"},yU={class:"mb-1"},vU={class:"upload-container"},kU={key:0,class:"image-preview"},wU=["src"],AU=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),SU={for:"file-input",class:"file-input-label"},BU={key:0},CU={key:1},_U=Object(l["createElementVNode"])("br",null,null,-1),PU={key:0,class:"text-danger error-txt"},IU={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},DU={class:""};function TU(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yz,[Object(l["createElementVNode"])("div",vz,[Object(l["createElementVNode"])("div",kz,[Object(l["createElementVNode"])("div",wz,[Az,Object(l["createElementVNode"])("div",Sz,[Object(l["createElementVNode"])("div",Bz,[Object(l["createElementVNode"])("div",Cz,[Object(l["createElementVNode"])("div",_z,[Object(l["createElementVNode"])("div",Pz,[Object(l["createElementVNode"])("div",Iz,[Object(l["createElementVNode"])("div",Dz,[Object(l["createElementVNode"])("form",Tz,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Mz,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationError,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",zz,[Object(l["createElementVNode"])("div",Fz,[Uz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newItem.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Lz,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qz,[Rz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>s.newItem.price=e),type:"number",placeholder:"price",name:"price"},null,512),[[l["vModelText"],s.newItem.price]]),""!==s.formValidation&&""!==s.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$z,"Price is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Qz,[Jz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[2]||(t[2]=e=>s.newItem.quantity=e),type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],s.newItem.quantity]]),""!==s.formValidation&&""!==s.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Hz,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Yz,[Wz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],s.newItem.detail]]),""!==s.formValidation&&""!==s.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xz,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Zz,[Object(l["createElementVNode"])("div",Kz,[Gz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_from","onUpdate:modelValue":t[4]||(t[4]=e=>s.newItem.valid_from=e),type:"date",placeholder:"Valid From",name:"valid_from"},null,512),[[l["vModelText"],s.newItem.valid_from]]),""!==s.formValidation&&""!==s.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",eF,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",tF,[aF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_to","onUpdate:modelValue":t[5]||(t[5]=e=>s.newItem.valid_to=e),type:"date",placeholder:"Valid To",name:"valid_to"},null,512),[[l["vModelText"],s.newItem.valid_to]]),""!==s.formValidation&&""!==s.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",lF,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",cF,[sF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"expiration_date","onUpdate:modelValue":t[6]||(t[6]=e=>s.newItem.expiration_date=e),type:"date",placeholder:"Expiration Date",name:"expiration_date"},null,512),[[l["vModelText"],s.newItem.expiration_date]]),""!==s.formValidation&&""!==s.formValidation["expiration_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",oF,"Expiration Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",nF,[Object(l["createElementVNode"])("div",rF,[iF,dF,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.productTypes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,mF))),128))],512),[[l["vModelSelect"],s.newItem.product_type]]),""!==s.formValidation&&""!==s.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bF,"Shop is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pF,[uF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity_sold","onUpdate:modelValue":t[8]||(t[8]=e=>s.newItem.quantity_sold=e),type:"number",placeholder:"Quantity Sold",name:"quantity_sold"},null,512),[[l["vModelText"],s.newItem.quantity_sold]]),""!==s.formValidation&&""!==s.formValidation["quantity_sold"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",OF,"Quantity Sold is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",jF,[Object(l["createElementVNode"])("div",hF,[gF,fF,Object(l["createVNode"])(n,{label:"Visibility Options",value:s.newItem.visibility_options,options:s.visibilityOptions,onInput:o.handleVisibility,placeholder:"Visibility Options"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",EF,[Object(l["createElementVNode"])("div",VF,[NF,xF,Object(l["createVNode"])(n,{label:"Payment Options",value:s.newItem.limitColleges,options:s.schoolsList,onInput:o.handleColleges,placeholder:"Limit Colleges"},null,8,["value","options","onInput"])]),Object(l["createElementVNode"])("div",yF,[vF,kF,Object(l["createVNode"])(n,{label:"Visibility Options",value:s.newItem.limitCourses,options:s.coursesList,onInput:o.handleCourses,placeholder:"Limit Courses"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",wF,[AF,Object(l["createElementVNode"])("div",SF,[Object(l["createElementVNode"])("span",BF,[CF,Object(l["createElementVNode"])("div",_F,[Object(l["createElementVNode"])("input",{checked:"installments"==s.newItem.payment_plan,onChange:t[9]||(t[9]=e=>o.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,PF),IF])])]),Object(l["createElementVNode"])("div",DF,[Object(l["createElementVNode"])("span",TF,[MF,Object(l["createElementVNode"])("div",zF,[Object(l["createElementVNode"])("input",{checked:"installments_and_deposit"==s.newItem.payment_plan,onChange:t[10]||(t[10]=e=>o.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,FF),UF])])]),Object(l["createElementVNode"])("div",LF,[Object(l["createElementVNode"])("span",qF,[RF,Object(l["createElementVNode"])("div",$F,[Object(l["createElementVNode"])("input",{checked:"full_payment"==s.newItem.payment_plan,onChange:t[11]||(t[11]=e=>o.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,QF),JF])])])]),"installments"==s.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",HF,[Object(l["createElementVNode"])("div",YF,[Object(l["createElementVNode"])("div",WF,[XF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>s.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",ZF,[Object(l["createElementVNode"])("div",KF,[GF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",eU,[Object(l["createElementVNode"])("label",tU,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,aU),[[l["vModelText"],s.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==s.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lU,[Object(l["createElementVNode"])("div",cU,[Object(l["createElementVNode"])("div",sU,[oU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",nU,[Object(l["createElementVNode"])("div",rU,[iU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",dU,[Object(l["createElementVNode"])("div",mU,[bU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>s.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",pU,[Object(l["createElementVNode"])("div",uU,[OU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>s.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.initial_deposit_due_date]])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",jU,[Object(l["createElementVNode"])("label",hU,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,gU),[[l["vModelText"],s.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",fU,[EU,VU,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[18]||(t[18]=e=>s.newItem.shop_id=e),id:"shop",type:"select",placeholder:"shop",name:"shop"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allShops,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.shop_name),9,NU))),128))],512),[[l["vModelSelect"],s.newItem.shop_id]]),""!==s.formValidation&&""!==s.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xU,"Shop is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",yU,[Object(l["createElementVNode"])("div",vU,[s.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kU,[Object(l["createElementVNode"])("img",{src:s.imageFileUrl,alt:"Image Preview"},null,8,wU)])):Object(l["createCommentVNode"])("",!0),AU,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[19]||(t[19]=(...e)=>o.handleImageUpload&&o.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",SU,[s.imageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",CU,Object(l["toDisplayString"])(s.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",BU,"Choose a file"))])]),_U,""!==s.formValidation&&""!==s.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",PU,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",IU,[Object(l["createElementVNode"])("div",DU,[Object(l["createElementVNode"])("button",{onClick:t[20]||(t[20]=(...e)=>o.updateItem&&o.updateItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var MU={name:"",components:{MultiSelect:Nk},mounted(){this.getUser(),this.editItem(),this.getAllShops(),this.getAllCourses(),this.getSchools()},updated(){this.$permissions.redirectIfNotAllowed("edit_shop")},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))},"newItem.quantity_sold"(e){e<0?this.newItem.quantity_sold=0:Number.isInteger(e)||(this.newItem.quantity_sold=Math.floor(e))},"newItem.price"(e){this.newItem.price=parseFloat(e).toFixed(2)}},data(){return{paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:null,other_installments_due_date:[]},validationError:"",isError:!1,productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],schoolsList:null,coursesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:"",formValidation:"",allAttributes:"",allShops:"",selectedAttrs:[],user:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitColleges:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",newItem:{name:"",product_type:"",price:"",quantity:"",detail:"",image:"",shop_id:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitCourses:null,limitColleges:null,expiration_date:"",quantity_sold:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_shop");let e=!1,t="";t=Eo()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async updateItem(){const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.newItem.payment_plan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),e.append("quantity",this.newItem.quantity),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from),e.append("valid_to",this.newItem.valid_to),e.append("expiration_date",this.newItem.expiration_date),e.append("quantity_sold",this.newItem.quantity_sold),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));let t=this.$route.params.id;try{const a=`/updateShopItem/${t}?_method=PUT`;await Ke.post(a,e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Updated Successfuly"),this.isError=!1}catch(a){this.validationError=a.response.data.errors,this.isError=!0}},async editItem(){let e=this.$route.params.id;try{let t=await Ke.get("/editShopItem/"+e);t=t.data,this.setShopItem(t)}catch(t){console.log(t)}},setShopItem(e){this.newItem.name=e.name,this.newItem.price=e.price,this.newItem.quantity=e.quantity,this.newItem.product_type=e.product_type,this.newItem.shop_id=e.shop_id,this.newItem.attribute_id=e.attribute_id,this.newItem.detail=e.detail,this.newItem.attributes=e.attributes,this.newItem.valid_from=e.valid_from,this.newItem.valid_to=e.valid_to,this.newItem.expiration_date=e.expiration_date,this.newItem.quantity_sold=e.quantity_sold,this.newItem.visibility_options=e.visibility_options?e.visibility_options:[],this.newItem.limitColleges=e.limit_colleges?e.limit_colleges:[],this.newItem.limitCourses=e.limit_courses?e.limit_courses:[],this.newItem.payment_plan=e.payment_plan,this.imageFileUrl=this.$env_vars.BASE_URL+e.image,e.payment&&(this.installmentsAndDeposit.total_installments=e.payment.total_installments,this.installmentsAndDeposit.amount_per_installment=e.payment.amount_per_installment,this.installmentsAndDeposit.other_installments_due_date=e.payment.other_installments_deadline_installments)},handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await Ke.get(e);this.coursesList=t.data}catch(e){console.log(e)}},changePaymentPlan(e){this.newItem.payment_plan==e?this.newItem.payment_plan="":this.newItem.payment_plan=e},async getSchools(){try{let e=await Ke.get("/getAllSchoolsCourses");console.log(e),this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},handleAttributes(e){console.log("attrs",e),this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await Ke.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("8e14");const zU=He()(MU,[["render",TU],["__scopeId","data-v-572da7a4"]]);var FU=zU;Object(l["pushScopeId"])("data-v-4cbae259");const UU={class:"row"},LU={class:"col-xl-12 col-lg-12 col-md-12"},qU={class:"card"},RU=Object(l["createElementVNode"])("div",{class:"card-header pb-0 px-3 d-flex justify-content-between"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Checkout")],-1),$U={class:"card-body pt-4 p-3"},QU={class:"row"},JU={class:"list-group col-xl-6 col-lg-6 col-md-6"},HU={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},YU={class:"d-flex flex-column"},WU={class:"mb-3 text-sm"},XU={key:0},ZU=Object(l["createElementVNode"])("br",null,null,-1),KU={key:1,class:"text-success"},GU={key:2,class:"text-success"},eL=Object(l["createTextVNode"])(" Installments And Deposit "),tL=Object(l["createElementVNode"])("br",null,null,-1),aL=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},null,-1),lL={class:"ms-auto text-end"},cL=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),sL=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),oL={class:"ms-auto text-end"},nL={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},rL=["onClick"],iL=Object(l["createElementVNode"])("br",null,null,-1),dL={key:0,class:"text-success me-3"},mL={key:1,class:"text-success me-3"},bL=Object(l["createElementVNode"])("br",null,null,-1),pL={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},uL={class:"d-flex flex-column"},OL={class:"mb-3 text-sm"},jL=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs"},null,-1),hL={class:"ms-auto text-end"},gL=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),fL=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),EL={class:"ms-auto text-end"},VL={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},NL=["onClick"],xL={class:"col-md-5 ms-auto"},yL={key:0,class:"text-danger text-sm"},vL=["onClick"],kL={key:0,class:"w-10 me-3 mb-0",src:Jb.a,alt:"logo"},wL={key:1,class:"w-10 me-3 mb-0",src:lt.a,alt:"logo"},AL={class:"mb-0"},SL={key:1,class:"d-flex align-items-center list-group-item border-0 d-flex p-2 bg-gray-100 border-radius-lg"},BL=Object(l["createElementVNode"])("div",{class:"d-flex flex-column"},[Object(l["createElementVNode"])("h6",{class:"d-flex align-items-center text-sm "},"Total Amount")],-1),CL={class:"ms-auto text-end"},_L={class:"d-flex me-3 align-items-center",style:{"justify-content":"flex-end"}},PL={class:"d-flex align-items-center text-success fw-bold text-sm "},IL={key:2,class:"d-flex justify-content-center align-items-center list-group-item border-0 d-flex p-4 bg-gray-100 border-radius-lg"},DL=Object(l["createElementVNode"])("h6",{class:"text-sm text-warning"},"You can't checkout while Cart is empty!",-1),TL=[DL];function ML(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",UU,[Object(l["createElementVNode"])("div",LU,[Object(l["createElementVNode"])("div",qU,[RU,Object(l["createElementVNode"])("div",$U,[Object(l["createElementVNode"])("div",QU,[Object(l["createElementVNode"])("ul",JU,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",HU,[Object(l["createElementVNode"])("div",YU,[Object(l["createElementVNode"])("h6",WU,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",XU,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),ZU,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",KU," Installments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",GU,[eL,tL,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Installments) ",1)])):Object(l["createCommentVNode"])("",!0)]),aL]),Object(l["createElementVNode"])("div",lL,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[cL,sL],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",oL,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",nL," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,rL),iL,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",dL," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",mL,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.initial_deposit_installments))+" Deposit ",1),bL,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",pL,[Object(l["createElementVNode"])("div",uL,[Object(l["createElementVNode"])("h6",OL,Object(l["toDisplayString"])(e.trip.title)+" (Trip)",1),jL]),Object(l["createElementVNode"])("div",hL,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"school_user"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[gL,fL],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EL,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",VL," £"+Object(l["toDisplayString"])(o.formattedPrice(e.trip.budget)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,NL)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",xL,[s.isPaymentMethod?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yL,"Payment Method Not Found! please add the payment method first.")),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:s.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>o.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",kL)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",wL)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",AL," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,vL))),128)),s.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",SL,[BL,Object(l["createElementVNode"])("div",CL,[Object(l["createElementVNode"])("div",_L,[Object(l["createElementVNode"])("h6",PL,"£"+Object(l["toDisplayString"])(o.totalAmount()),1)])])])):s.dataLoaded?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",IL,TL)):Object(l["createCommentVNode"])("",!0),s.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:3,onClick:t[0]||(t[0]=e=>o.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment ")):Object(l["createCommentVNode"])("",!0),s.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:4,onClick:t[1]||(t[1]=e=>o.checkout("wallet")),style:{"font-size":"12px","background-color":"#573078"},class:"mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet")):Object(l["createCommentVNode"])("",!0)])])])])])])}Object(l["popScopeId"])();var zL={name:"billing-card",data(){return{isPaymentMethod:!0,userCards:"",dataLoaded:!1,user:"",cartItems:"",isSelected:0}},mounted(){this.getUser(),this.getCartItems(),this.getCustomerPaymentMethods()},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getCartItems(){try{let e=await Ke.get("/getUserCartItems");e=e.data,this.cartItems=e,this.dataLoaded=!0}catch(e){console.log(e)}},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit_installments:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price))}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await Ke.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(!t&&"card"==e)return this.isPaymentMethod=!0,void(this.isPaymentMethod=!1);t="wallet"==e?null:t;let a={payment_method:t,type:e};try{await Ke.post("/checkout",a),this.snackbarMsg("Checkout Successful"),this.$router.push({name:"Dashboard"}),this.isPaymentMethod=!0}catch(l){console.log(l)}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await Ke.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};a("ca9b");const FL=He()(zL,[["render",ML],["__scopeId","data-v-4cbae259"]]);var UL=FL;const LL={class:"row"},qL={class:"col-xl-8 col-lg-8 col-md-8"},RL={class:"card"},$L={class:"card-header pb-0 px-3 d-flex justify-content-between"},QL=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Menu",-1),JL=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#f513ca"},class:"me-3 text-white fw-5 border-0 p-2 border-radius-lg"}," Add Menu ",-1),HL=Object(l["createStaticVNode"])('<div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">ATA Rice</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li></ul></div>',1),YL=Object(l["createStaticVNode"])('<div class="col-xl-4 col-lg-4 col-md-4"><div class="card"><div class="card-header pb-0 px-3"><h6 class="mb-0">Favourite</h6></div><div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li></ul></div></div></div>',1);function WL(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LL,[Object(l["createElementVNode"])("div",qL,[Object(l["createElementVNode"])("div",RL,[Object(l["createElementVNode"])("div",$L,[QL,Object(l["createVNode"])(n,{to:"/add-menu"},{default:Object(l["withCtx"])(()=>[JL]),_:1})]),HL])]),YL])}var XL={name:"billing-card"};const ZL=He()(XL,[["render",WL]]);var KL=ZL;Object(l["pushScopeId"])("data-v-d27ede50");const GL={class:"container-fluid py-4"},eq=Object(l["createElementVNode"])("div",{class:"row "},[Object(l["createElementVNode"])("div",{class:"col-12"},[Object(l["createElementVNode"])("div",{class:"card my-4"},[Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 "},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Menu")]),Object(l["createElementVNode"])("div",{class:"card-body px-0 pb-2"},[Object(l["createElementVNode"])("div",{class:"table-responsive p-0"},[Object(l["createElementVNode"])("div",{class:"row py-2 bg-white form-data border-radius-lg"},[Object(l["createElementVNode"])("div",{class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("div",{class:"card card-plain"},[Object(l["createElementVNode"])("div",{class:"card-body"},[Object(l["createElementVNode"])("form",{role:"form"},[Object(l["createElementVNode"])("div",{class:"row mb-1"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Item Name"),Object(l["createElementVNode"])("input",{class:"input-box title-input",id:"name",type:"text",placeholder:"name",name:"name"})]),Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description"),Object(l["createElementVNode"])("br"),Object(l["createElementVNode"])("textarea",{class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"})])]),Object(l["createElementVNode"])("div",{class:"row p-2"},[Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"price",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Available Seats"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Available Seats",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Funds"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"funds",name:"name"})])])])])])])])])])])])])],-1),tq=[eq];function aq(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",GL,tq)}Object(l["popScopeId"])();var lq={name:"",components:{},mounted(){},data(){return{}},methods:{}};a("19b8");const cq=He()(lq,[["render",aq],["__scopeId","data-v-d27ede50"]]);var sq=cq;const oq={class:"card mt-4 card-height"},nq={class:"card-header pb-3 p-3"},rq={class:"row"},iq=Object(l["createElementVNode"])("div",{class:"col-6 d-flex align-items-center"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"TOP-UP"),Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"}," In this section, you can top-up the user's wallet by adding a specified amount to their balance. Additionally, you can add a new payment method, such as a credit or debit card, to the user's account for future transactions. This functionality ensures that users have convenient payment options and sufficient funds available for seamless purchases.")])],-1),dq={key:0,class:"col-6 text-end"},mq=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"add-card-btn mb-3 trips-btn w-35  text-white fw-5 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus me-2"}),Object(l["createTextVNode"])(" Add New Card ")],-1),bq={class:"card-body p-3"},pq={class:"row"},uq={class:"col-md-6 mb-md-0 mb-4"},Oq={class:"amount-radio"},jq={class:"top-up-row"},hq={class:"mb-1",style:{display:"flex"}},gq=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount25"},"£25.00",-1),fq={class:"top-up-row"},Eq={class:"mb-1",style:{display:"flex"}},Vq=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount50"},"£50.00",-1),Nq={class:"top-up-row"},xq={class:"mb-1",style:{display:"flex"}},yq=Object(l["createElementVNode"])("label",{class:"",style:{"margin-top":"-3px"},for:"amount100"},"£100.00",-1),vq={class:"mb-1 amount-container",style:{display:"flex"}},kq={key:0,class:"col-md-5 ms-auto"},wq=["onClick"],Aq={key:0,class:"w-10 me-3 mb-0",src:Jb.a,alt:"logo"},Sq={key:1,class:"w-10 me-3 mb-0",src:lt.a,alt:"logo"},Bq={class:"mb-0"},Cq=["onClick"],_q=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1),Pq={class:"conteiner"};function Iq(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oq,[Object(l["createElementVNode"])("div",nq,[Object(l["createElementVNode"])("div",rq,[iq,"student"==s.user.role||"staff"==s.user.role||"organization_admin"==s.user.role||"super_admin"==s.user.role||"parent"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",dq,[Object(l["createVNode"])(n,{to:{name:"add_card"}},{default:Object(l["withCtx"])(()=>[mq]),_:1})])):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",bq,[Object(l["createElementVNode"])("div",pq,[Object(l["createElementVNode"])("div",uq,[Object(l["createElementVNode"])("div",Oq,[Object(l["createElementVNode"])("div",jq,[Object(l["createElementVNode"])("span",hq,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount25",class:"me-1",type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>s.selected_amount=e),name:"amount",value:"25"},null,512),[[l["vModelRadio"],s.selected_amount]]),gq])]),Object(l["createElementVNode"])("div",fq,[Object(l["createElementVNode"])("span",Eq,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount50",class:"me-1",type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>s.selected_amount=e),name:"amount",value:"50"},null,512),[[l["vModelRadio"],s.selected_amount]]),Vq])]),Object(l["createElementVNode"])("div",Nq,[Object(l["createElementVNode"])("span",xq,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount100",class:"me-1",type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>s.selected_amount=e),name:"amount",value:"100"},null,512),[[l["vModelRadio"],s.selected_amount]]),yq])]),Object(l["createElementVNode"])("span",vq,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onKeyup:t[3]||(t[3]=e=>s.selected_amount=null),"onUpdate:modelValue":t[4]||(t[4]=e=>o.formattedBalance=e),class:"me-1 amount-input",type:"text",name:"gender",placeholder:"1.00"},null,544),[[l["vModelText"],o.formattedBalance]])])])]),"student"==s.user.role||"staff"==s.user.role||"organization_admin"==s.user.role||"super_admin"==s.user.role||"parent"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kq,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:s.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>o.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",Aq)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",Sq)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",Bq," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1),Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,Cq),_q],10,wq))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Pq,[Object(l["createElementVNode"])("button",{onClick:t[5]||(t[5]=(...e)=>o.addBalance&&o.addBalance(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"top-up-btn p-3 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Add Balance ")])])])])}var Dq={name:"payment-card",components:{},mounted(){let e=localStorage.getItem("user");this.user=JSON.parse(e),this.getCustomerPaymentMethods()},computed:{formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},data(){return{user:"",selected_amount:"",externalAccounts:"",addedBalance:"",userCards:"",isSelected:0,img1:lt.a,img2:Jb.a,showModal:!1}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},async addBalance(){let e,t="";e=this.$route.params.id?this.$route.params.id:this.user.id;let a=null==this.selected_amount?this.addedBalance:this.selected_amount,l=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(""==a)return void this.snackbarMsg("Please select the amount","error");if("super_admin"==this.user.role||"organization_admin"==this.user.role||"staff"==this.user.role)if("staff"==this.user.role&&this.user.id==e){if(t="/payment/initiate",!l)return void this.snackbarMsg("Payment Method Not Found","error")}else t="/adminTopUp",l=null;else if(t="/payment/initiate",!l)return void this.snackbarMsg("Payment Method Not Found","error");let c={user_id:e,amount:a,payment_method:l,type:"top_up"};try{await Ke.post(t,c),this.snackbarMsg("Balance Added Successfully")}catch(s){console.log(s)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await Ke.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await Ke.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")}}};a("bb4e");const Tq=He()(Dq,[["render",Iq]]);var Mq=Tq;Object(l["pushScopeId"])("data-v-f699bd2a");const zq={class:"card"},Fq=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),Uq={class:"card-body row"},Lq={class:"col-md-5"},qq=Object(l["createStaticVNode"])('<div class="row d-flex" data-v-f699bd2a><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex" data-v-f699bd2a><p class="text-dark" data-v-f699bd2a>Your Payment Information</p></div></div><div id="card-element" class="StripeElement" data-v-f699bd2a></div><div class="row d-flex mt-1" data-v-f699bd2a><div class="col-md-5 bg-white name-row p-2 holder_name" data-v-f699bd2a><label data-v-f699bd2a>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2" data-v-f699bd2a></div></div>',3),Rq={class:"row d-flex"},$q={class:"col-md-5 ms-auto"},Qq=["onClick"],Jq={key:0,class:"w-10 me-3 mb-0",src:Jb.a,alt:"logo"},Hq={key:1,class:"w-10 me-3 mb-0",src:lt.a,alt:"logo"},Yq={class:"mb-0"},Wq=["onClick"],Xq=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1);function Zq(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",zq,[Fq,Object(l["createElementVNode"])("div",Uq,[Object(l["createElementVNode"])("div",Lq,[qq,Object(l["createElementVNode"])("div",Rq,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>o.submitPaymentMethod&&o.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"save_btn mx-auto me-3 w-50 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])]),Object(l["createElementVNode"])("div",$q,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:Object(l["normalizeClass"])([{selected:e.isSelected===a}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:t=>e.toggleSelection(a,t)},["visa"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",Jq)):Object(l["createCommentVNode"])("",!0),"mastercard"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",Hq)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",Yq," **** **** **** "+Object(l["toDisplayString"])(t.card.last4),1),Object(l["createElementVNode"])("i",{onClick:e=>o.confirmDelete(t.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,Wq),Xq],10,Qq))),128))])])])])}Object(l["popScopeId"])();var Kq={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.getCustomerPaymentMethods()},data(){return{userCards:"",user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},includeStripe(e,t){let a=document,l="script",c=a.createElement(l),s=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),s.parentNode.insertBefore(c,s)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await Ke.post("/createCard",l),this.getCustomerPaymentMethods()}catch(c){console.log(c)}},async removePaymentMethod(e){let t={user_id:this.user.id,payment_method:e};try{await Ke.post("/removePaymentMethod",t),this.removeFromList(e)}catch(a){console.log(a)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await Ke.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("ab27");const Gq=He()(Kq,[["render",Zq],["__scopeId","data-v-f699bd2a"]]);var eR=Gq;const tR={class:"card"},aR=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),lR={class:"card-body"},cR=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2"></div></div>',3),sR={class:"row d-flex justify-content-center"};function oR(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",tR,[aR,Object(l["createElementVNode"])("div",lR,[cR,Object(l["createElementVNode"])("div",sR,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>o.submitPaymentMethod&&o.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"me-3 w-20 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var nR={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),s=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),s.parentNode.insertBefore(c,s)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await Ke.post("/createCard",l),this.$router.push({name:"payment_account"})}catch(c){console.log(c)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("6df5");const rR=He()(nR,[["render",oR]]);var iR=rR;const dR={class:"container-fluid"},mR={class:"row"},bR={class:"col-12"},pR={class:"card"},uR={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},OR=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"COURSES"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"},[Object(l["createTextVNode"])(" In the Courses section, you can manage course information by adding, editing, or deleting courses. Additionally, you can view and update the "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" list of students enrolled in each course. This functionality helps management of courses and enrolled students. ")])],-1),jR=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Course ",-1),hR={class:"filter-container ms-2"},gR={style:{display:"flex"}},fR=["value"],ER=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),VR=Object(l["createTextVNode"])(" Export To XLS "),NR=[ER,VR],xR={class:"card-body px-0 pb-2"},yR={class:"table-responsive p-0 student-table"},vR={ref:"table",class:"table align-items-center mb-0"},kR=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Code "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Level "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Action ")])],-1),wR={key:0},AR=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),SR=[AR],BR={class:"text-xs  text-center font-weight-bold mb-0"},CR={class:"d-flex"},_R={class:"text-xs font-weight-bold mb-0"},PR=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),IR={class:"text-xs font-weight-bold mb-0"},DR={class:"text-xs font-weight-bold mb-0"},TR={class:"align-middle text-center text-sm"},MR={class:"badge badge-sm bg-gradient-success"},zR={class:"align-middle text-center"},FR=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),UR=["onClick"],LR={class:"row"},qR={class:"col-md-12 col-lg-12"},RR={class:"pagination-container"},$R={class:"entries-dropdown"},QR=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),JR=["value"],HR={class:"pagination-wrapper"},YR={class:"pagination"},WR=["onClick"];function XR(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",dR,[Object(l["createElementVNode"])("div",mR,[Object(l["createElementVNode"])("div",bR,[Object(l["createElementVNode"])("div",pR,[Object(l["createElementVNode"])("div",uR,[OR,o.userPermissions.create?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-course"}},{default:Object(l["withCtx"])(()=>[jR]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hR,[Object(l["createElementVNode"])("span",gR,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterCourses&&o.filterCourses(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterCourses&&o.filterCourses(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,fR))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},NR)])]),Object(l["createElementVNode"])("div",xR,[Object(l["createElementVNode"])("div",yR,[Object(l["createElementVNode"])("table",vR,[kR,Object(l["createElementVNode"])("tbody",null,[0===s.allCourse.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",wR,SR)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allCourse,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",BR,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"enrolled-students",params:{id:e.CourseCode}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",CR,[Object(l["createElementVNode"])("p",_R,Object(l["toDisplayString"])(e.CourseCode),1),PR])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",IR,Object(l["toDisplayString"])(e.CourseDescription),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",DR,Object(l["toDisplayString"])(e.CourseLevel),1)]),Object(l["createElementVNode"])("td",TR,[Object(l["createElementVNode"])("span",MR,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",zR,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_course?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-course",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[FR]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,UR)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",LR,[Object(l["createElementVNode"])("div",qR,[Object(l["createElementVNode"])("div",RR,[Object(l["createElementVNode"])("div",$R,[QR,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getAllCourses(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,JR))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",HR,[Object(l["createElementVNode"])("ul",YR,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getAllCourses(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getAllCourses(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllCourses(e),href:"#"},Object(l["toDisplayString"])(e),9,WR)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getAllCourses(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getAllCourses(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var ZR={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllCourses()},updated(){this.$permissions.redirectIfNotAllowed("view_course")},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",filterBy:"Course Code",allFields:["Course Name","Course Code","Course Level"],allCourse:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteCourse(e)})},exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"courses.xlsx")},async filterCourses(){if(""==this.filterBy&&""==this.seachString)return void this.getAllCourses();if(""!=this.filterBy&&""==this.seachString)return void this.getAllCourses();let e={type:this.filterBy,value:this.seachString,status:"Active"};try{const t=await Ke.post("/filterCourses",e);this.allCourse=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllCourses(e=null){try{let t={page:"",entries_per_page:this.itemsPerPage};t.page=e;let a="/getAllCourses";const l=await Ke.post(a,t);this.allCourse=l.data.data.data,this.totalRows=l.data.pagination.total,this.currentPage=l.data.pagination.current_page,this.perPage=l.data.pagination.per_page,this.totalPages=l.data.pagination.last_page}catch(t){console.log(t)}},async deleteCourse(e){try{await Ke.delete("/deleteCourse/"+e),this.removeCourseFromList(e),this.snackbarMsg("Course Successfully Deleted")}catch(t){console.log(t)}},removeCourseFromList(e){const t=this.allCourse.findIndex(t=>t.id===e);this.allCourse.splice(t,1)},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)}}};a("37de");const KR=He()(ZR,[["render",XR]]);var GR=KR;Object(l["pushScopeId"])("data-v-fb1748bc");const e$={class:"container-fluid py-4"},t$={class:"row"},a$={class:"col-12"},l$={class:"card my-4"},c$={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},s$=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Course",-1),o$=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),n$={class:"card-body px-0 pb-2"},r$={key:0,class:"mb-3 change-pass-alert"},i$=Object(l["createElementVNode"])("br",null,null,-1),d$={class:"table-responsive p-0"},m$={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},b$={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},p$={class:"form-bg container p-4"},u$=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),O$={class:"card card-plain"},j$={class:"card-body"},h$={role:"form"},g$={class:"mb-1"},f$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),E$={class:"mb-1"},V$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),N$={class:"mb-1"},x$=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Description",-1),y$={class:"mb-1"},v$=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),k$=Object(l["createElementVNode"])("br",null,null,-1),w$=["value"],A$={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},S$={class:""};function B$(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",e$,[Object(l["createElementVNode"])("div",t$,[Object(l["createElementVNode"])("div",a$,[Object(l["createElementVNode"])("div",l$,[Object(l["createElementVNode"])("div",c$,[s$,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[o$]),_:1})]),Object(l["createElementVNode"])("div",n$,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",r$,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),i$]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",d$,[Object(l["createElementVNode"])("div",m$,[Object(l["createElementVNode"])("div",b$,[Object(l["createElementVNode"])("div",p$,[u$,Object(l["createElementVNode"])("div",O$,[Object(l["createElementVNode"])("div",j$,[Object(l["createElementVNode"])("form",h$,[Object(l["createElementVNode"])("div",g$,[f$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],s.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",E$,[V$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],s.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",N$,[x$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newCourse.CourseDescription=e),type:"email",placeholder:"Course Description",name:"CourseDescription"},null,512),[[l["vModelText"],s.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",y$,[v$,k$,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,w$))),128))],512),[[l["vModelSelect"],s.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",A$,[Object(l["createElementVNode"])("div",S$,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>o.saveNewCourse&&o.saveNewCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Course ")])])])])])])])])])}Object(l["popScopeId"])();var C$={name:"",components:{},mounted(){this.getUser()},updated(){this.$permissions.redirectIfNotAllowed("create_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Eo()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewCourse(){this.isError=!1;try{await Ke.post("/createCourse",this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("adf2");const _$=He()(C$,[["render",B$],["__scopeId","data-v-fb1748bc"]]);var P$=_$;Object(l["pushScopeId"])("data-v-28e11bb4");const I$={class:"container-fluid py-4"},D$={class:"row"},T$={class:"col-12"},M$={class:"card my-4"},z$={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},F$=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Course",-1),U$=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),L$={class:"card-body px-0 pb-2"},q$={key:0,class:"mb-3 change-pass-alert"},R$=Object(l["createElementVNode"])("br",null,null,-1),$$={class:"table-responsive p-0"},Q$={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},J$={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},H$={class:"form-bg container p-4"},Y$=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),W$={class:"card card-plain"},X$={class:"card-body"},Z$={role:"form"},K$={class:"mb-1"},G$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),eQ={class:"mb-1"},tQ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),aQ={class:"mb-1"},lQ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Description",-1),cQ={class:"mb-1"},sQ=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),oQ=Object(l["createElementVNode"])("br",null,null,-1),nQ=["value"],rQ={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},iQ={class:""};function dQ(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",I$,[Object(l["createElementVNode"])("div",D$,[Object(l["createElementVNode"])("div",T$,[Object(l["createElementVNode"])("div",M$,[Object(l["createElementVNode"])("div",z$,[F$,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[U$]),_:1})]),Object(l["createElementVNode"])("div",L$,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",q$,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),R$]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",$$,[Object(l["createElementVNode"])("div",Q$,[Object(l["createElementVNode"])("div",J$,[Object(l["createElementVNode"])("div",H$,[Y$,Object(l["createElementVNode"])("div",W$,[Object(l["createElementVNode"])("div",X$,[Object(l["createElementVNode"])("form",Z$,[Object(l["createElementVNode"])("div",K$,[G$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],s.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",eQ,[tQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],s.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",aQ,[lQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newCourse.CourseDescription=e),type:"email",placeholder:"Course Description",name:"CourseDescription"},null,512),[[l["vModelText"],s.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",cQ,[sQ,oQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,nQ))),128))],512),[[l["vModelSelect"],s.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",rQ,[Object(l["createElementVNode"])("div",iQ,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>o.updateCourse&&o.updateCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Course ")])])])])])])])])])}Object(l["popScopeId"])();var mQ={name:"",components:{},mounted(){this.getUser(),this.editCourse()},updated(){this.$permissions.redirectIfNotAllowed("edit_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},isError:!1,validationErrors:"",formValidation:"",availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Eo()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editCourse(){let e=this.$route.params.id;try{const t=await Ke.get("/editCourse/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newCourse.CourseCode=t.CourseCode,this.newCourse.CourseLevel=t.CourseLevel,this.newCourse.CourseDescription=t.CourseDescription,this.newCourse.status=t.status)},async updateCourse(){let e=this.$route.params.id;try{await Ke.put("/updateCourse/"+e,this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("0cb5");const bQ=He()(mQ,[["render",dQ],["__scopeId","data-v-28e11bb4"]]);var pQ=bQ;const uQ={class:"container-fluid"},OQ={class:"row"},jQ={class:"col-12"},hQ={class:"card"},gQ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},fQ=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ENROLLED STUDENTS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"},[Object(l["createTextVNode"])(" In the Enrolled Students section, you can view a list of students currently enrolled in a course. You have the ability to manage course enrollments "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" by adding new students or removing existing ones. ")])],-1),EQ={class:"filter-container ms-2"},VQ={style:{display:"flex"}},NQ=["value"],xQ=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),yQ=Object(l["createTextVNode"])(" Export To XLS "),vQ=[xQ,yQ],kQ=Object(l["createElementVNode"])("div",null,null,-1),wQ={class:"card-body px-0 pb-2"},AQ={class:"table-responsive p-0 student-table"},SQ={ref:"table",class:"table align-items-center mb-0"},BQ=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),CQ={class:"align-middle text-center text-sm"},_Q={class:"text-xs font-weight-bold mb-0"},PQ={class:"text-xs font-weight-bold mb-0"},IQ={class:"text-xs mb-0",style:{"font-size":"8px"}},DQ={class:"align-middle text-center"},TQ={class:"text-secondary text-xs font-weight-bold"},MQ={class:"align-middle text-center"},zQ=["onClick"],FQ={class:"row"},UQ={class:"col-md-12 col-lg-12"},LQ={class:"pagination-container"},qQ={class:"entries-dropdown"},RQ=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),$Q=["value"],QQ={class:"pagination-wrapper"},JQ={class:"pagination"},HQ=["onClick"];function YQ(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("Enroll");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",uQ,[Object(l["createElementVNode"])("div",OQ,[Object(l["createElementVNode"])("div",jQ,[Object(l["createElementVNode"])("div",hQ,[Object(l["createElementVNode"])("div",gQ,[fQ,o.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=e=>s.showModal=!0),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Enroll Student ")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EQ,[Object(l["createElementVNode"])("span",VQ,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[1]||(t[1]=(...e)=>o.filterStudents&&o.filterStudents(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[3]||(t[3]=(...e)=>o.filterStudents&&o.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[4]||(t[4]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,NQ))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.exportTableToXLS())},vQ)])]),kQ,Object(l["createElementVNode"])("div",wQ,[Object(l["createElementVNode"])("div",AQ,[Object(l["createElementVNode"])("table",SQ,[BQ,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",CQ,[Object(l["createElementVNode"])("p",_Q,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",PQ,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),Object(l["createElementVNode"])("p",IQ,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",DQ,[Object(l["createElementVNode"])("span",TQ,Object(l["toDisplayString"])(e.schoolName),1)]),Object(l["createElementVNode"])("td",MQ,[Object(l["createElementVNode"])("span",null,[o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:t=>o.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,zQ)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",FQ,[Object(l["createElementVNode"])("div",UQ,[Object(l["createElementVNode"])("div",LQ,[Object(l["createElementVNode"])("div",qQ,[RQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.itemsPerPage=e),onChange:t[7]||(t[7]=e=>o.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,$Q))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",QQ,[Object(l["createElementVNode"])("ul",JQ,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,HQ)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])]),Object(l["createVNode"])(n,{show:s.showModal,task:e.task,onClose:t[12]||(t[12]=e=>s.showModal=!1),onUpdateStudents:o.getAllStudents},null,8,["show","task","onUpdateStudents"])])}Object(l["pushScopeId"])("data-v-54b53f0c");const WQ={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},XQ={class:"modal-dialog"},ZQ={class:"modal-content"},KQ={class:"modal-header"},GQ=Object(l["createElementVNode"])("h6",{class:"h5 text-sm modal-title"},"Enroll Student to this Course",-1),eJ=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),tJ=[eJ],aJ={class:"pt-4 modal-body"},lJ=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),cJ={class:"mb-4 input-group"},sJ=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),oJ={key:0,class:"alert alert-success"},nJ={class:"text-end"};function rJ(e,t,a,c,s,o){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",WQ,[Object(l["createElementVNode"])("div",XQ,[Object(l["createElementVNode"])("div",ZQ,[Object(l["createElementVNode"])("div",KQ,[GQ,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),"aria-label":"Close"},tJ)]),Object(l["createElementVNode"])("div",aJ,[lJ,Object(l["createElementVNode"])("div",cJ,[sJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>s.StudentID=e),class:"form-control",placeholder:"Enter Student ID",type:"text"},null,512),[[l["vModelText"],s.StudentID]])]),s.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oJ,Object(l["toDisplayString"])(s.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",nJ,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>o.saveChanges&&o.saveChanges(...e)),class:"m-1 btn btn-primary"}," Save "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var iJ={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},computed:{},data(){return{StudentID:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},closeModal(){this.$emit("close")},async saveChanges(){this.isError=!1;let e={StudentID:this.StudentID,CourseCode:this.$route.params.id};try{await Ke.post("/enrollStudent",e),this.snackbarMsg("Student Enrolled Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors;for(let e=0;e<this.validationErrors.length;e++)this.snackbarMsg(this.validationErrors[e])}this.closeModal(),this.$emit("update-students")}}};a("9d66");const dJ=He()(iJ,[["render",rJ],["__scopeId","data-v-54b53f0c"]]);var mJ=dJ,bJ={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStudents()},updated(){this.$permissions.redirectIfNotAllowed("view_student")},components:{Enroll:mJ},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Student Id",seachString:"",allFields:["Student Id"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"students_table.xlsx")},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Student will be dropped from course and you won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e=this.$route.params.id,t={type:this.filterBy,value:this.seachString,course_code:e};try{const e=await Ke.post("/filterCourseStudents",t);this.allStudents=e.data,this.totalRows=e.data.total,this.currentPage=e.data.current_page,this.perPage=e.per_page,this.totalPages=e.data.last_page}catch(a){console.log(a)}},async getAllStudents(e=null){try{let t={CourseCode:this.$route.params.id,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await Ke.post("/getCourseStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(t){console.log(t)}},async deleteStudent(e){let t={StudentID:e,CourseCode:this.$route.params.id};try{await Ke.post("/removeEnrolledStudent",t),this.getAllStudents(),this.snackbarMsg("Student Removed Successfully")}catch(a){let e=a.response.data.errors;for(let t=0;t<e.length;t++)this.snackbarMsg(e[t])}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("6904");const pJ=He()(bJ,[["render",YQ]]);var uJ=pJ;const OJ={class:"container-fluid"},jJ={class:"row"},hJ={class:"col-12"},gJ={class:"card"},fJ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},EJ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ADMINS",-1),VJ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Admin ",-1),NJ=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Here, you can add organization admins who can manage the entire portal. Multiple admins can be assigned, each with different"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" roles and permissions.")])],-1),xJ={class:"card-body px-0 pb-2"},yJ={class:"table-responsive p-0"},vJ={class:"table align-items-center mb-0"},kJ=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Role "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),wJ={key:0},AJ=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),SJ=[AJ],BJ={class:"align-middle text-center text-sm"},CJ={class:"text-xs font-weight-bold mb-0"},_J={class:"text-xs font-weight-bold mb-0"},PJ={class:"text-xs font-weight-bold mb-0"},IJ={class:"align-middle text-center"},DJ={class:"text-xs font-weight-bold mb-0"},TJ={class:"align-middle text-center"},MJ={class:"text-secondary text-xs font-weight-bold"},zJ={class:"align-middle text-center text-sm"},FJ={class:"badge badge-sm bg-gradient-success"},UJ={class:"align-middle text-center"},LJ=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),qJ=["onClick"];function RJ(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",OJ,[Object(l["createElementVNode"])("div",jJ,[Object(l["createElementVNode"])("div",hJ,[Object(l["createElementVNode"])("div",gJ,[Object(l["createElementVNode"])("div",fJ,[EJ,Object(l["createVNode"])(n,{to:{name:"add-organization-admins"}},{default:Object(l["withCtx"])(()=>[VJ]),_:1})]),NJ,Object(l["createElementVNode"])("div",xJ,[Object(l["createElementVNode"])("div",yJ,[Object(l["createElementVNode"])("table",vJ,[kJ,Object(l["createElementVNode"])("tbody",null,[0===s.allAdmins.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",wJ,SJ)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allAdmins,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",BJ,[Object(l["createElementVNode"])("p",CJ,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",_J,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",PJ,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",IJ,[Object(l["createElementVNode"])("p",DJ,Object(l["toDisplayString"])(e.user_role.role.name),1)]),Object(l["createElementVNode"])("td",TJ,[Object(l["createElementVNode"])("span",MJ,Object(l["toDisplayString"])(e.organization_admin&&e.organization_admin.organization?e.organization_admin.organization.name:"-"),1)]),Object(l["createElementVNode"])("td",zJ,[Object(l["createElementVNode"])("span",FJ,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",UJ,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization-admin",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[LJ]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,qJ)])])]))),128))])])])])])])])])}var $J={name:"tables",mounted(){this.setColor(),this.getAllAdmins()},updated(){this.$permissions.redirectIfNotAllowed("view_admin")},data(){return{allAdmins:"",schools:6}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganizationAdmin(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},async getAllAdmins(){try{const e=await Ke.get("/getAllOrganizationAdmins");this.allAdmins=e.data}catch(e){console.log(e)}},async deleteOrganizationAdmin(e){try{await Ke.delete("/deleteOrganizationAdmin/"+e),this.removeOrganizationAdminFromList(e),this.snackbarMsg("Successfully Deleted")}catch(t){console.log(t)}},removeOrganizationAdminFromList(e){const t=this.allAdmins.findIndex(t=>t.id===e);this.allAdmins.splice(t,1)}}};a("24b7");const QJ=He()($J,[["render",RJ]]);var JJ=QJ;Object(l["pushScopeId"])("data-v-ae158f4a");const HJ={class:"container-fluid py-4"},YJ={class:"row"},WJ={class:"col-12"},XJ={class:"card my-4"},ZJ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},KJ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Create Admin",-1),GJ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),eH={class:"card-body px-0 pb-2"},tH={class:"table-responsive p-0"},aH={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},lH={key:0,class:"mb-3 change-pass-alert"},cH=Object(l["createElementVNode"])("br",null,null,-1),sH={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},oH={class:"form-bg container p-4"},nH=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),rH={class:"card card-plain"},iH={class:"card-body"},dH={role:"form"},mH={class:"mb-1"},bH=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),pH={key:0,class:"text-danger error-txt"},uH={class:"mb-1"},OH=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),jH={key:0,class:"text-danger error-txt"},hH={class:"mb-1"},gH=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),fH={key:0,class:"text-danger error-txt"},EH={class:"mb-1"},VH=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),NH={key:0,class:"text-danger error-txt"},xH={class:"mb-1"},yH=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),vH={key:0,class:"text-danger error-txt"},kH={class:"mb-1"},wH=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),AH=Object(l["createElementVNode"])("br",null,null,-1),SH=["value"],BH={key:0,class:"text-danger error-txt"},CH={class:"mb-1"},_H=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),PH=Object(l["createElementVNode"])("br",null,null,-1),IH=["value"],DH={key:0,class:"text-danger error-txt"},TH={class:"mb-1"},MH=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),zH=Object(l["createElementVNode"])("br",null,null,-1),FH=["value"],UH={key:0,class:"text-danger error-txt"},LH={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},qH={class:""};function RH(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",HJ,[Object(l["createElementVNode"])("div",YJ,[Object(l["createElementVNode"])("div",WJ,[Object(l["createElementVNode"])("div",XJ,[Object(l["createElementVNode"])("div",ZJ,[KJ,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[GJ]),_:1})]),Object(l["createElementVNode"])("div",eH,[Object(l["createElementVNode"])("div",tH,[Object(l["createElementVNode"])("div",aH,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lH,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),cH]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",sH,[Object(l["createElementVNode"])("div",oH,[nH,Object(l["createElementVNode"])("div",rH,[Object(l["createElementVNode"])("div",iH,[Object(l["createElementVNode"])("form",dH,[Object(l["createElementVNode"])("div",mH,[bH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newAdmin.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pH,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",uH,[OH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newAdmin.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jH,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hH,[gH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newAdmin.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fH,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EH,[VH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newAdmin.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],s.newAdmin.password]]),""!==s.formValidation&&""!==s.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NH,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xH,[yH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],s.newAdmin.password_confirmation]]),""!==s.formValidation&&""!==s.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vH,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kH,[wH,AH,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,SH))),128))],512),[[l["vModelSelect"],s.newAdmin.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",BH,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",CH,[_H,PH,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,IH)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],s.newAdmin.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",DH,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",TH,[MH,zH,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,FH))),128))],512),[[l["vModelSelect"],s.newAdmin.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",UH,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",LH,[Object(l["createElementVNode"])("div",qH,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.saveNewAdmin&&o.saveNewAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var $H={name:"",components:{},mounted(){this.getAllOrganizations(),this.getAllRoles()},updated(){this.$permissions.redirectIfNotAllowed("create_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:"",role:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_admin");let e=!1,t="";t=Eo()(this.newAdmin);for(let a in this.newAdmin)""===this.newAdmin[a]||void 0===this.newAdmin[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await Ke.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async saveNewAdmin(){if(!this.validateForm())try{let e=await Ke.post("/createOrganizationAdmin",this.newAdmin);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await Ke.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("4db4");const QH=He()($H,[["render",RH],["__scopeId","data-v-ae158f4a"]]);var JH=QH;Object(l["pushScopeId"])("data-v-08c8431a");const HH={class:"container-fluid py-4"},YH={class:"row"},WH={class:"col-12"},XH={class:"card my-4"},ZH={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},KH=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Admin",-1),GH=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),eY={class:"card-body px-0 pb-2"},tY={class:"table-responsive p-0"},aY={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},lY={key:0,class:"mb-3 change-pass-alert"},cY=Object(l["createElementVNode"])("br",null,null,-1),sY={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},oY={class:"form-bg container p-4"},nY=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),rY={class:"card card-plain"},iY={class:"card-body"},dY={role:"form"},mY={class:"mb-1"},bY=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),pY={key:0,class:"text-danger error-txt"},uY={class:"mb-1"},OY=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),jY={key:0,class:"text-danger error-txt"},hY={class:"mb-1"},gY=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),fY={key:0,class:"text-danger error-txt"},EY={class:"mb-1"},VY=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),NY=Object(l["createElementVNode"])("br",null,null,-1),xY=["value"],yY={key:0,class:"text-danger error-txt"},vY={class:"mb-1"},kY=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),wY=Object(l["createElementVNode"])("br",null,null,-1),AY=["value"],SY={key:0,class:"text-danger error-txt"},BY={class:"mb-1"},CY=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),_Y=Object(l["createElementVNode"])("br",null,null,-1),PY=["value"],IY={key:0,class:"text-danger error-txt"},DY={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},TY={class:"form-bg container p-4"},MY=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),zY=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),FY={class:"card card-plain"},UY={class:"card-body"},LY={role:"form"},qY={class:"mb-1"},RY=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),$Y={class:"mb-1"},QY=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),JY={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},HY={class:""};function YY(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",HH,[Object(l["createElementVNode"])("div",YH,[Object(l["createElementVNode"])("div",WH,[Object(l["createElementVNode"])("div",XH,[Object(l["createElementVNode"])("div",ZH,[KH,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[GH]),_:1})]),Object(l["createElementVNode"])("div",eY,[Object(l["createElementVNode"])("div",tY,[Object(l["createElementVNode"])("div",aY,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lY,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),cY]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",sY,[Object(l["createElementVNode"])("div",oY,[nY,Object(l["createElementVNode"])("div",rY,[Object(l["createElementVNode"])("div",iY,[Object(l["createElementVNode"])("form",dY,[Object(l["createElementVNode"])("div",mY,[bY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newAdmin.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pY,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",uY,[OY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newAdmin.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jY,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hY,[gY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newAdmin.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fY,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EY,[VY,NY,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>s.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,xY))),128))],512),[[l["vModelSelect"],s.newAdmin.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yY,"Organisation is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",vY,[kY,wY,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>s.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,AY)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],s.newAdmin.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",SY,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",BY,[CY,_Y,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,PY))),128))],512),[[l["vModelSelect"],s.newAdmin.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",IY,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",DY,[Object(l["createElementVNode"])("div",TY,[MY,zY,Object(l["createElementVNode"])("div",FY,[Object(l["createElementVNode"])("div",UY,[Object(l["createElementVNode"])("form",LY,[Object(l["createElementVNode"])("div",qY,[RY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newAdmin.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newAdmin.password]])]),Object(l["createElementVNode"])("div",$Y,[QY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>s.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newAdmin.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",JY,[Object(l["createElementVNode"])("div",HY,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.updateAdmin&&o.updateAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var WY={name:"",components:{},mounted(){this.getAllRoles(),this.getAllOrganizations(),this.editOrganizationAdmin()},updated(){this.$permissions.redirectIfNotAllowed("edit_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",status:"",role:"",password:"",password_confirmation:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_admin");let e=!1,t="";t=Eo()(this.newAdmin);for(let a in this.newAdmin)""!==this.newAdmin[a]&&void 0!==this.newAdmin[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await Ke.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async editOrganizationAdmin(){let e=this.$route.params.id;try{const t=await Ke.get("/editOrganizationAdmin/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAdmin.organization_id=t.organization_admin.organization_id,this.newAdmin.first_name=t.first_name,this.newAdmin.last_name=t.last_name,this.newAdmin.email=t.email,this.newAdmin.status=t.status,this.newAdmin.role=t.user_role.role.name)},async updateAdmin(){if(this.validateForm())console.log(this.formValidation);else try{let e=this.$route.params.id;await Ke.put("/updateOrganizationAdmin/"+e,this.newAdmin),this.isError=!1,this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Updated Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await Ke.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("2f8f");const XY=He()(WY,[["render",YY],["__scopeId","data-v-08c8431a"]]);var ZY=XY;const KY={class:"container-fluid"},GY={class:"row"},eW={class:"col-12"},tW={class:"card px-3"},aW={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},lW=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STAFF"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Here, you can oversee staff accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each staff.")])],-1),cW=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Staff ",-1),sW={class:"filter-container ms-2"},oW={style:{display:"flex"}},nW=["value"],rW=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),iW=Object(l["createTextVNode"])(" Export To XLS "),dW=[rW,iW],mW={class:"card-body px-0 pb-2"},bW={class:"table-responsive p-0"},pW={ref:"table",class:"table align-items-center mb-0"},uW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),OW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),jW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),hW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),gW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," Balance ",-1),fW={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},EW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," TopUp ",-1),VW=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),NW=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),xW={key:0},yW=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),vW=[yW],kW={class:"text-xs  text-center font-weight-bold mb-0"},wW={class:"text-xs font-weight-bold mb-0"},AW={class:"text-xs font-weight-bold mb-0"},SW={class:"text-xs text-center font-weight-bold mb-0"},BW={class:"ms-4 text-secondary text-xs font-weight-bold"},CW={key:0,class:"align-middle text-center"},_W=Object(l["createElementVNode"])("i",{class:"fas fa-donate fs-5 me-2"},null,-1),PW={key:1,class:"align-middle text-center"},IW=["onClick"],DW={class:"align-middle text-center text-sm"},TW={class:"badge badge-sm bg-gradient-success"},MW={class:"align-middle text-center"},zW=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),FW=["onClick"],UW={class:"row"},LW={class:"col-md-12 col-lg-12"},qW={class:"pagination-container"},RW={class:"entries-dropdown"},$W=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),QW=["value"],JW={class:"pagination-wrapper"},HW={class:"pagination"},YW=["onClick"];function WW(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",KY,[Object(l["createElementVNode"])("div",GY,[Object(l["createElementVNode"])("div",eW,[Object(l["createElementVNode"])("div",tW,[Object(l["createElementVNode"])("div",aW,[lW,o.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-staff"}},{default:Object(l["withCtx"])(()=>[cW]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sW,[Object(l["createElementVNode"])("span",oW,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterStaff&&o.filterStaff(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterStaff&&o.filterStaff(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,nW))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},dW)])]),Object(l["createElementVNode"])("div",mW,[Object(l["createElementVNode"])("div",bW,[Object(l["createElementVNode"])("table",pW,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[uW,OW,jW,hW,gW,o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",fW," Wallet ")):Object(l["createCommentVNode"])("",!0),EW,VW,NW])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",xW,vW)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",kW,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",wW,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",AW,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",SW,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("span",BW,"£"+Object(l["toDisplayString"])(o.formattedPrice(e.balance?e.balance:0)),1)]),o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",CW,[Object(l["createVNode"])(n,{to:{name:"balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[_W]),_:2},1032,["to"])])):Object(l["createCommentVNode"])("",!0),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",PW,[Object(l["createElementVNode"])("i",{onClick:t=>o.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,IW)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",DW,[Object(l["createElementVNode"])("span",TW,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",MW,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-staff",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[zW]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,FW)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",UW,[Object(l["createElementVNode"])("div",LW,[Object(l["createElementVNode"])("div",qW,[Object(l["createElementVNode"])("div",RW,[$W,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getAllStaff(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,QW))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",JW,[Object(l["createElementVNode"])("ul",HW,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getAllStaff(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,YW)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getAllStaff(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getAllStaff(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var XW={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStaff()},updated(){this.$permissions.redirectIfNotAllowed("view_staff")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],seachString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"staff_table.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStaff(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await Ke.post("/getAllStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await Ke.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.user.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.seachString)return void this.getAllStaff();let e={type:this.filterBy,value:this.seachString,status:"active"};try{const t=await Ke.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("26fd");const ZW=He()(XW,[["render",WW]]);var KW=ZW;const GW={class:"container-fluid"},eX={class:"row"},tX={class:"col-12"},aX={class:"card px-3"},lX=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED STAFF"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Every archived staff can be found in this table. Here, you can manage archived staff accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),cX={class:"card-body px-0 pb-2"},sX={class:"filter-container mb-1 ms-2",style:{"margin-top":"-11px"}},oX={style:{display:"flex"}},nX=["value"],rX=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),iX=Object(l["createTextVNode"])(" Export To XLS "),dX=[rX,iX],mX=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),bX=Object(l["createTextVNode"])(" Bulk Restore "),pX=[mX,bX],uX=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),OX=Object(l["createTextVNode"])(" Bulk Delete "),jX=[uX,OX],hX={class:"table-responsive p-0"},gX={ref:"table",class:"table align-items-center mb-0"},fX={class:""},EX={class:"form-check",style:{"margin-left":"-20px"}},VX=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),NX=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),xX=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),yX=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),vX=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),kX=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),wX={key:0},AX=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),SX=[AX],BX={class:"align-middle text-center text-sm"},CX={class:"form-check"},_X=["checked","onChange"],PX=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),IX={class:"text-xs  text-center font-weight-bold mb-0"},DX={class:"text-xs font-weight-bold mb-0"},TX={class:"text-xs font-weight-bold mb-0"},MX={class:"text-xs text-center font-weight-bold mb-0"},zX={class:"align-middle text-center text-sm"},FX={class:"badge badge-sm bg-gradient-success"},UX={class:"row"},LX={class:"col-md-12 col-lg-12"},qX={class:"pagination-container"},RX={class:"entries-dropdown"},$X=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),QX=["value"],JX={class:"pagination-wrapper"},HX={class:"pagination"},YX=["onClick"];function WX(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",GW,[Object(l["createElementVNode"])("div",eX,[Object(l["createElementVNode"])("div",tX,[Object(l["createElementVNode"])("div",aX,[lX,Object(l["createElementVNode"])("div",cX,[Object(l["createElementVNode"])("div",sX,[Object(l["createElementVNode"])("span",oX,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>o.filterStaff&&o.filterStaff(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>o.filterStaff&&o.filterStaff(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,nX))),128))],544),[[l["vModelSelect"],s.filterBy]]),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},dX),Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.confirmAction("restore"))},pX),o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.confirmAction("delete"))},jX)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",hX,[Object(l["createElementVNode"])("table",gX,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",fX,[Object(l["createElementVNode"])("div",EX,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),VX])]),NX,xX,yX,vX,kX])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",wX,SX)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",BX,[Object(l["createElementVNode"])("div",CX,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.user.id),onChange:t=>o.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,_X),PX])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",IX,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",DX,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",TX,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",MX,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",zX,[Object(l["createElementVNode"])("span",FX,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)]),Object(l["createElementVNode"])("div",UX,[Object(l["createElementVNode"])("div",LX,[Object(l["createElementVNode"])("div",qX,[Object(l["createElementVNode"])("div",RX,[$X,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getAllStaff(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,QX))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",JX,[Object(l["createElementVNode"])("ul",HX,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getAllStaff(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,YX)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getAllStaff(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getAllStaff(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var XX={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStaff(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_staff")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],selectall:!1,selectedRecords:[],seachString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{exportTableToXLS(){const e=this.$refs.table,t=NO["a"].table_to_sheet(e),a=NO["a"].book_new();NO["a"].book_append_sheet(a,t,"Sheet1"),NO["b"](a,"archived_staff.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStaff.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await Ke.post("/bulkDeleteStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await Ke.post("/bulkRestoreStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){Xc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the staff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await Ke.post("/archivedStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await Ke.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.seachString)return void this.getAllStaff();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await Ke.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("89d1");const ZX=He()(XX,[["render",WX]]);var KX=ZX;Object(l["pushScopeId"])("data-v-8da3cf88");const GX={class:"container-fluid py-4"},eZ={class:"row"},tZ={class:"col-12"},aZ={class:"card my-4"},lZ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},cZ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Staff",-1),sZ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),oZ={class:"card-body px-0 pb-2"},nZ={class:"table-responsive p-0"},rZ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},iZ={key:0,class:"mb-3 change-pass-alert"},dZ=Object(l["createElementVNode"])("br",null,null,-1),mZ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},bZ={class:"form-bg container p-4"},pZ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),uZ={class:"card card-plain"},OZ={class:"card-body"},jZ={role:"form"},hZ={class:"mb-1"},gZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),fZ={key:0,class:"text-danger error-txt"},EZ={class:"mb-1"},VZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),NZ={key:0,class:"text-danger error-txt"},xZ={class:"mb-1"},yZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),vZ={key:0,class:"text-danger error-txt"},kZ={class:"mb-1"},wZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),AZ={key:0,class:"text-danger error-txt"},SZ={class:"mb-1"},BZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),CZ={key:0,class:"text-danger error-txt"},_Z={class:"mb-1"},PZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),IZ=Object(l["createElementVNode"])("br",null,null,-1),DZ=["value"],TZ={key:0,class:"text-danger error-txt"},MZ={class:"mb-1"},zZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance ",-1),FZ={class:"mb-1"},UZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),LZ=Object(l["createElementVNode"])("br",null,null,-1),qZ=["value"],RZ={key:0,class:"text-danger error-txt"},$Z={class:"mb-1"},QZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),JZ=Object(l["createElementVNode"])("br",null,null,-1),HZ=["value"],YZ={key:0,class:"text-danger error-txt"},WZ={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},XZ={class:""};function ZZ(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",GX,[Object(l["createElementVNode"])("div",eZ,[Object(l["createElementVNode"])("div",tZ,[Object(l["createElementVNode"])("div",aZ,[Object(l["createElementVNode"])("div",lZ,[cZ,Object(l["createVNode"])(n,{to:{name:"list-staff"}},{default:Object(l["withCtx"])(()=>[sZ]),_:1})]),Object(l["createElementVNode"])("div",oZ,[Object(l["createElementVNode"])("div",nZ,[Object(l["createElementVNode"])("div",rZ,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iZ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),dZ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",mZ,[Object(l["createElementVNode"])("div",bZ,[pZ,Object(l["createElementVNode"])("div",uZ,[Object(l["createElementVNode"])("div",OZ,[Object(l["createElementVNode"])("form",jZ,[Object(l["createElementVNode"])("div",hZ,[gZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStaff.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fZ,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EZ,[VZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStaff.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NZ,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xZ,[yZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStaff.staff_id]]),""!==s.formValidation&&""!==s.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vZ,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kZ,[wZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],s.newStaff.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",AZ,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",SZ,[BZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStaff.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",CZ,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_Z,[PZ,IZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,DZ))),128))],512),[[l["vModelSelect"],s.newStaff.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",TZ,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",MZ,[zZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[6]||(t[6]=e=>o.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],o.formattedBalance]])]),Object(l["createElementVNode"])("div",FZ,[UZ,LZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Admin"!==e.name&&"Associate Admin"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,qZ)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],s.newStaff.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",RZ,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$Z,[QZ,JZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,HZ))),128))],512),[[l["vModelSelect"],s.newStaff.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",YZ,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",WZ,[Object(l["createElementVNode"])("div",XZ,[Object(l["createElementVNode"])("button",{onClick:t[9]||(t[9]=(...e)=>o.saveNewStaff&&o.saveNewStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Staff ")])])])])])])])])])}Object(l["popScopeId"])();var KZ={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.getAllRoles()},updated(){this.$permissions.redirectIfNotAllowed("create_staff")},computed:{formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",last_name:"",email:"",status:"",role:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_staff");let e=!1,t="";t=Eo()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&void 0!==this.newStaff[a]||"balance"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await Ke.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStaff(){if(!this.validateForm())try{await Ke.post("/createStaff",this.newStaff),this.isError=!1,this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newStaff.first_name+" "+this.newStaff.last_name,a={user_id:e,name:t,email:this.newStaff.email};try{await Ke.post("/createCustomer",a)}catch(l){console.log(l)}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await Ke.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("613d");const GZ=He()(KZ,[["render",ZZ],["__scopeId","data-v-8da3cf88"]]);var eK=GZ;Object(l["pushScopeId"])("data-v-9f1ec88a");const tK={class:"container-fluid py-4"},aK={class:"row"},lK={class:"col-12"},cK={class:"card my-4"},sK=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Staff")],-1),oK={class:"card-body px-0 pb-2"},nK={class:"table-responsive p-0"},rK={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},iK={key:0,class:"mb-3 change-pass-alert"},dK=Object(l["createElementVNode"])("br",null,null,-1),mK={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},bK={class:"form-bg container p-4"},pK=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),uK={class:"card card-plain"},OK={class:"card-body"},jK={role:"form"},hK={class:"mb-1"},gK=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),fK={key:0,class:"text-danger error-txt"},EK={class:"mb-1"},VK=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),NK={key:0,class:"text-danger error-txt"},xK={class:"mb-1"},yK=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),vK={key:0,class:"text-danger error-txt"},kK={class:"mb-1"},wK=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),AK={key:0,class:"text-danger error-txt"},SK={class:"mb-1"},BK=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),CK={key:0,class:"text-danger error-txt"},_K={class:"mb-1"},PK=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),IK=Object(l["createElementVNode"])("br",null,null,-1),DK=["value"],TK={key:0,class:"text-danger error-txt"},MK={class:"mb-1"},zK=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),FK=Object(l["createElementVNode"])("br",null,null,-1),UK=["value"],LK={key:0,class:"text-danger error-txt"},qK={class:"mb-1"},RK=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance ",-1),$K={class:"mb-1"},QK=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),JK={class:"mb-1"},HK=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),YK=Object(l["createElementVNode"])("br",null,null,-1),WK=["value"],XK={key:0,class:"text-danger error-txt"},ZK={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},KK={class:"form-bg container p-4"},GK=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),eG=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),tG={class:"card card-plain"},aG={class:"card-body"},lG={role:"form"},cG={class:"mb-1"},sG=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),oG={class:"mb-1"},nG=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),rG={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},iG={class:""};function dG(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",tK,[Object(l["createElementVNode"])("div",aK,[Object(l["createElementVNode"])("div",lK,[Object(l["createElementVNode"])("div",cK,[sK,Object(l["createElementVNode"])("div",oK,[Object(l["createElementVNode"])("div",nK,[Object(l["createElementVNode"])("div",rK,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iK,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),dK]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",mK,[Object(l["createElementVNode"])("div",bK,[pK,Object(l["createElementVNode"])("div",uK,[Object(l["createElementVNode"])("div",OK,[Object(l["createElementVNode"])("form",jK,[Object(l["createElementVNode"])("div",hK,[gK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStaff.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fK,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EK,[VK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStaff.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NK,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xK,[yK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStaff.staff_id]]),""!==s.formValidation&&""!==s.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vK,"Staff ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kK,[wK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],s.newStaff.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",AK,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",SK,[BK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStaff.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",CK,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_K,[PK,IK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,DK))),128))],512),[[l["vModelSelect"],s.newStaff.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",TK,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",MK,[zK,FK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Admin"!==e.name&&"Associate Admin"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,UK)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],s.newStaff.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",LK,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qK,[RK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[7]||(t[7]=e=>o.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],o.formattedBalance]])]),Object(l["createElementVNode"])("div",$K,[QK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[8]||(t[8]=e=>o.formattedAmount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],o.formattedAmount]])]),Object(l["createElementVNode"])("div",JK,[HK,YK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,WK))),128))],512),[[l["vModelSelect"],s.newStaff.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",XK,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",ZK,[Object(l["createElementVNode"])("div",KK,[GK,eG,Object(l["createElementVNode"])("div",tG,[Object(l["createElementVNode"])("div",aG,[Object(l["createElementVNode"])("form",lG,[Object(l["createElementVNode"])("div",cG,[sG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[10]||(t[10]=e=>s.newStaff.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newStaff.password]])]),Object(l["createElementVNode"])("div",oG,[nG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[11]||(t[11]=e=>s.newStaff.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newStaff.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",rG,[Object(l["createElementVNode"])("div",iG,[Object(l["createElementVNode"])("button",{onClick:t[12]||(t[12]=(...e)=>o.updateStaff&&o.updateStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Staff ")])])])])])])])])])}Object(l["popScopeId"])();var mG={name:"",components:{},mounted(){this.getUser(),this.editStaff(),this.getSchools(),this.getAllRoles()},updated(){this.$permissions.redirectIfNotAllowed("edit_staff")},computed:{formattedAmount:{get(){return parseFloat(this.newStaff.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.add_amount=t}},formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",user:"",availableCountries:["UK","USA","Canada"],newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",balance:"",add_amount:"",last_name:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:"",password:"",password_confirmation:"",role:""},validationErrors:"",isError:!1,formValidation:"",availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_staff");let e=!1,t="";t=Eo()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&null!==this.newStaff[a]||"phone"===a||"country"===a||"city"===a||"address"===a||"zip"===a||"balance"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await Ke.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStaff(){let e=this.$route.params.id;try{const t=await Ke.get("/editStaff/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStaff.school_id=t.school_id,this.newStaff.staff_id=t.staff_id,this.newStaff.mifare_id=t.mifare_id,this.newStaff.first_name=t.user.first_name,this.newStaff.last_name=t.user.last_name,this.newStaff.email=t.user.email,this.newStaff.phone=t.user.phone,this.newStaff.country=t.user.country,this.newStaff.city=t.user.city,this.newStaff.zip=t.user.zip,this.newStaff.address=t.user.address,this.newStaff.status=t.user.status,this.newStaff.role=t.user.user_role.role.name,this.newStaff.balance=this.formattedPrice(t.balance.ballance))},async updateStaff(){if(this.validateForm())return;let e=this.$route.params.id;try{await Ke.put("/updateStaff/"+e,this.newStaff),this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await Ke.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("2b19");const bG=He()(mG,[["render",dG],["__scopeId","data-v-9f1ec88a"]]);var pG=bG;const uG={class:"card"},OG={class:"card-body pt-4 p-3"},jG={class:"list-group"},hG={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},gG={class:"info-width d-flex flex-column"},fG={class:"row"},EG=Object(l["createStaticVNode"])('<div class="col-md-8 col-sm-8"><div><h6 class="mb-3 text-sm text-dark"> Muhammad Anees </h6><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Phone:</span><span class="text-dark ms-2 font-weight-bold"> +92347193809 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Email:</span><span class="text-dark ms-2 font-weight-bold"> anees@example.com </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Staff ID:</span><span class="text-dark ms-2 font-weight-bold"> satff349328 </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Site:</span><span class="text-dark ms-2 font-weight-bold"> XEPAY Site </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Country:</span><span class="text-dark ms-2 font-weight-bold"> United Kingdom (UK) </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">City:</span><span class="text-dark ms-2 font-weight-bold"> Birmingham </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Post Code/Zip Code:</span><span class="text-dark ms-2 font-weight-bold"> 3231223 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Address:</span><span class="text-dark ms-2 font-weight-bold"> 3673 Edington Drive </span></span></div></div>',1),VG={class:"col-md-4 col-sm-4"},NG=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," PERMISSIONS ",-1),xG=Object(l["createElementVNode"])("small",{class:"text-xs"},"Muhammad Anees has following permissions",-1),yG={class:"permissions mt-3"},vG={class:"switch-container mt-2 me-5"},kG=["onChange","checked","id"],wG=["for"],AG={class:"permission-name text-uppercase"};function SG(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",uG,[Object(l["createElementVNode"])("div",OG,[Object(l["createElementVNode"])("div",jG,[Object(l["createElementVNode"])("div",hG,[Object(l["createElementVNode"])("div",gG,[Object(l["createElementVNode"])("div",fG,[EG,Object(l["createElementVNode"])("div",VG,[NG,xG,Object(l["createElementVNode"])("div",yG,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},[Object(l["createElementVNode"])("div",vG,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>o.updatePermission(e.id),checked:o.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,kG),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,wG)]),Object(l["createElementVNode"])("span",AG,Object(l["toDisplayString"])(e.name),1)]))),128))])])])])])])])])}var BG={name:"billing-card",mounted(){this.getAllPermissions(),this.getUserPermissions()},data(){return{allPermissions:"",userPermissions:[]}},methods:{async getAllPermissions(){try{const e=await Ke.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await Ke.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.userPermissions.some(t=>t.permission_id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await Ke.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("fa86");const CG=He()(BG,[["render",SG]]);var _G=CG;const PG={class:"container-fluid"},IG={class:"row"},DG={class:"col-12"},TG={class:"card"},MG={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},zG=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PARENTS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"},[Object(l["createTextVNode"])(" In the Parents section, you can manage parent or carer accounts by adding, editing, or deleting them. Additionally, you can link each parent to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("the students they are responsible for. This functionality helps keep parent information up to date. ")])],-1),FG=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Parent ",-1),UG={class:"card-body px-0 pb-2"},LG={class:"table-responsive p-0"},qG={class:"table align-items-center mb-0"},RG=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),$G={key:0},QG=Object(l["createElementVNode"])("td",{colspan:"5",class:"text-center"}," No data available. ",-1),JG=[QG],HG={class:"text-xs  text-center font-weight-bold mb-0"},YG={class:"d-flex"},WG={class:"text-xs font-weight-bold mb-0"},XG=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),ZG={class:"text-xs font-weight-bold mb-0"},KG={class:"align-middle text-center text-sm"},GG={class:"badge badge-sm bg-gradient-success"},e1={class:"align-middle text-center"},t1=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),a1=["onClick"],l1={class:"row"},c1={class:"col-md-12 col-lg-12"},s1={class:"pagination-container"},o1={class:"entries-dropdown"},n1=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),r1=["value"],i1={class:"pagination-wrapper"},d1={class:"pagination"},m1=["onClick"];function b1(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",PG,[Object(l["createElementVNode"])("div",IG,[Object(l["createElementVNode"])("div",DG,[Object(l["createElementVNode"])("div",TG,[Object(l["createElementVNode"])("div",MG,[zG,o.userPermissions.create?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-parent"}},{default:Object(l["withCtx"])(()=>[FG]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",UG,[Object(l["createElementVNode"])("div",LG,[Object(l["createElementVNode"])("table",qG,[RG,Object(l["createElementVNode"])("tbody",null,[0===s.allParent.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",$G,JG)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allParent,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",HG,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"add-childrens",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",YG,[Object(l["createElementVNode"])("p",WG,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),XG])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",ZG,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",KG,[Object(l["createElementVNode"])("span",GG,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",e1,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-parent",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[t1]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,a1)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])]),Object(l["createElementVNode"])("div",l1,[Object(l["createElementVNode"])("div",c1,[Object(l["createElementVNode"])("div",s1,[Object(l["createElementVNode"])("div",o1,[n1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.itemsPerPage=e),onChange:t[1]||(t[1]=t=>e.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,r1))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",i1,[Object(l["createElementVNode"])("ul",d1,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[2]||(t[2]=t=>e.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=t=>e.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,class:Object(l["normalizeClass"])({active:s.currentPage===t})},[Object(l["createElementVNode"])("a",{onClick:a=>e.getAllStudents(t),href:"#"},Object(l["toDisplayString"])(t),9,m1)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[4]||(t[4]=t=>e.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[5]||(t[5]=t=>e.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var p1={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllParents()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,allParent:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteParent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllParents(e){let t={page:e,entries_per_page:this.itemsPerPage};try{let e="/getAllParents";"organization_admin"==this.user.role&&(e="/getAllParents/"+this.user.id);const a=await Ke.post(e,t);this.allParent=a.data.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(a){console.log(a)}},async deleteParent(e){try{await Ke.delete("/deleteParent/"+e),this.removeParentFromList(e),this.snackbarMsg("Parent Deleted")}catch(t){console.log(t)}},removeParentFromList(e){const t=this.allParent.findIndex(t=>t.id===e);this.allParent.splice(t,1)}}};a("e4a7");const u1=He()(p1,[["render",b1]]);var O1=u1;Object(l["pushScopeId"])("data-v-5fbee19a");const j1={class:"container-fluid py-4"},h1={class:"row"},g1={class:"col-12"},f1={class:"card my-4"},E1={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},V1=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Parent",-1),N1=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),x1={class:"card-body px-0 pb-2"},y1={class:"table-responsive p-0"},v1={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},k1={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},w1={class:"form-bg container p-4"},A1=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),S1={class:"card card-plain"},B1={class:"card-body"},C1={role:"form"},_1={class:"mb-1"},P1=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),I1={class:"mb-1"},D1=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),T1={class:"mb-1"},M1=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),z1={class:"mb-1"},F1=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),U1=Object(l["createElementVNode"])("br",null,null,-1),L1=["value"],q1={key:0,class:"text-danger error-txt"},R1={class:"mb-1"},$1=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),Q1=Object(l["createElementVNode"])("br",null,null,-1),J1=["value"],H1={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Y1={class:"form-bg container p-4"},W1=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password Information",-1),X1={class:"card card-plain"},Z1={class:"card-body"},K1={role:"form"},G1={class:"mb-1"},e0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),t0={class:"mb-1"},a0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),l0={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},c0={class:""};function s0(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",j1,[Object(l["createElementVNode"])("div",h1,[Object(l["createElementVNode"])("div",g1,[Object(l["createElementVNode"])("div",f1,[Object(l["createElementVNode"])("div",E1,[V1,Object(l["createVNode"])(n,{to:{name:"list-parent"}},{default:Object(l["withCtx"])(()=>[N1]),_:1})]),Object(l["createElementVNode"])("div",x1,[Object(l["createElementVNode"])("div",y1,[Object(l["createElementVNode"])("div",v1,[Object(l["createElementVNode"])("div",k1,[Object(l["createElementVNode"])("div",w1,[A1,Object(l["createElementVNode"])("div",S1,[Object(l["createElementVNode"])("div",B1,[Object(l["createElementVNode"])("form",C1,[Object(l["createElementVNode"])("div",_1,[P1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newParent.first_name]])]),Object(l["createElementVNode"])("div",I1,[D1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newParent.last_name]])]),Object(l["createElementVNode"])("div",T1,[M1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newParent.email]])]),Object(l["createElementVNode"])("div",z1,[F1,U1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>s.newParent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,L1))),128))],512),[[l["vModelSelect"],s.newParent.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",q1,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",R1,[$1,Q1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,J1))),128))],512),[[l["vModelSelect"],s.newParent.status]])])])])])])]),Object(l["createElementVNode"])("div",H1,[Object(l["createElementVNode"])("div",Y1,[W1,Object(l["createElementVNode"])("div",X1,[Object(l["createElementVNode"])("div",Z1,[Object(l["createElementVNode"])("form",K1,[Object(l["createElementVNode"])("div",G1,[e0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>s.newParent.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],s.newParent.password]])]),Object(l["createElementVNode"])("div",t0,[a0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],s.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",l0,[Object(l["createElementVNode"])("div",c0,[Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>o.saveNewParent&&o.saveNewParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Parent ")])])])])])])])])])}Object(l["popScopeId"])();var o0={name:"",components:{},mounted(){this.getUser(),this.getSchools()},updated(){this.userPermissions.create||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newParent:{student_id:"",first_name:"",last_name:"",email:"",school_id:"",password:"",password_confirmation:"",status:""},availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Eo()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"phone"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewParent(){try{let e=await Ke.post("/createParent",this.newParent);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newStudent.first_name+" "+this.newStudent.last_name,a={user_id:e,name:t,email:this.newStudent.email};try{await Ke.post("/createCustomer",a)}catch(l){console.log(l)}},async getStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await Ke.post("/getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async getSchools(){try{let e="/getAllSchools";e="organization_admin"==this.user.role?"/getAllSchools/"+this.user.id:"/getAllSchools";const t=await Ke.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("3345");const n0=He()(o0,[["render",s0],["__scopeId","data-v-5fbee19a"]]);var r0=n0;Object(l["pushScopeId"])("data-v-48f15014");const i0={class:"container-fluid py-4"},d0={class:"row"},m0={class:"col-12"},b0={class:"card my-4"},p0=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Parent")],-1),u0={class:"card-body px-0 pb-2"},O0={class:"table-responsive p-0"},j0={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},h0={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},g0={class:"form-bg container p-4"},f0=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),E0={class:"card card-plain"},V0={class:"card-body"},N0={role:"form"},x0={class:"mb-1"},y0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),v0={key:0,class:"text-danger error-txt"},k0={class:"mb-1"},w0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),A0={key:0,class:"text-danger error-txt"},S0={class:"mb-1"},B0=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),C0={key:0,class:"text-danger error-txt"},_0={class:"mb-1"},P0=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),I0=Object(l["createElementVNode"])("br",null,null,-1),D0=["value"],T0={key:0,class:"text-danger error-txt"},M0={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},z0={class:"form-bg container p-4"},F0=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),U0=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),L0={class:"card card-plain"},q0={class:"card-body"},R0={role:"form"},$0={class:"mb-1"},Q0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),J0={class:"mb-1"},H0=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),Y0={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},W0={class:""};function X0(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",i0,[Object(l["createElementVNode"])("div",d0,[Object(l["createElementVNode"])("div",m0,[Object(l["createElementVNode"])("div",b0,[p0,Object(l["createElementVNode"])("div",u0,[Object(l["createElementVNode"])("div",O0,[Object(l["createElementVNode"])("div",j0,[Object(l["createElementVNode"])("div",h0,[Object(l["createElementVNode"])("div",g0,[f0,Object(l["createElementVNode"])("div",E0,[Object(l["createElementVNode"])("div",V0,[Object(l["createElementVNode"])("form",N0,[Object(l["createElementVNode"])("div",x0,[y0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newParent.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",v0,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",k0,[w0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newParent.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",A0,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",S0,[B0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newParent.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",C0,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_0,[P0,I0,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,D0))),128))],512),[[l["vModelSelect"],s.newParent.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",T0,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",M0,[Object(l["createElementVNode"])("div",z0,[F0,U0,Object(l["createElementVNode"])("div",L0,[Object(l["createElementVNode"])("div",q0,[Object(l["createElementVNode"])("form",R0,[Object(l["createElementVNode"])("div",$0,[Q0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newParent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newParent.password]])]),Object(l["createElementVNode"])("div",J0,[H0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>s.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",Y0,[Object(l["createElementVNode"])("div",W0,[Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=(...e)=>o.updateParent&&o.updateParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var Z0={name:"",components:{},mounted(){this.getUser(),this.editParent(),this.getStudents()},updated(){this.userPermissions.edit||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newParent:{first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:""},validationErrors:"",formValidation:"",availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Eo()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editParent(){let e=this.$route.params.id;try{const t=await Ke.get("/editParent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newParent.student_id=t.student_id,this.newParent.first_name=t.first_name,this.newParent.last_name=t.last_name,this.newParent.email=t.email,this.newParent.status=t.status)},async updateParent(){let e=this.$route.params.id;try{await Ke.put("/updateParent/"+e,this.newParent),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Updated Successfuly")}catch(t){console.log(t)}},async getStudents(){try{let e="/getAllStudents";"organization_admin"==this.user.role&&(e="/getAllStudents/"+this.user.id);const t=await Ke.get(e);this.allStudents=t.data}catch(e){console.log(e)}}}};a("45d6");const K0=He()(Z0,[["render",X0],["__scopeId","data-v-48f15014"]]);var G0=K0;const e2={class:"card"},t2={class:"card-body pt-4 p-3"},a2={class:"list-group"},l2={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},c2={class:"info-width d-flex flex-column"},s2={class:"row"},o2={class:"col-md-8 col-sm-8"},n2={class:"row"},r2={class:"col-md-9 col-sm-9"},i2={role:"form"},d2={class:"mb-1"},m2=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Student Email",-1),b2={class:"col-md-3 col-sm-3"},p2=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Childrens ",-1),u2=["onClick"],O2={class:"text-sm fw-5"},j2=Object(l["createElementVNode"])("br",null,null,-1),h2={class:"text-sm"},g2={class:"text-dark ms-2 font-weight-bold"},f2=["onClick"];function E2(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",e2,[Object(l["createElementVNode"])("div",t2,[Object(l["createElementVNode"])("div",a2,[Object(l["createElementVNode"])("div",l2,[Object(l["createElementVNode"])("div",c2,[Object(l["createElementVNode"])("div",s2,[Object(l["createElementVNode"])("div",o2,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",n2,[Object(l["createElementVNode"])("div",r2,[Object(l["createElementVNode"])("form",i2,[Object(l["createElementVNode"])("div",d2,[m2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.studentEmail=e),class:"input-box",id:"name",type:"text",placeholder:"Enter Student Email",name:"student_email"},null,512),[[l["vModelText"],s.studentEmail]])])])]),Object(l["createElementVNode"])("div",b2,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.addChildren&&o.addChildren(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Student ")])]),p2,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:Object(l["normalizeClass"])([{"selected-role":s.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>o.toggleSelection(e.id,t)},[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",O2,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1),j2,Object(l["createElementVNode"])("p",h2,Object(l["toDisplayString"])(e.student.email),1)]),Object(l["createElementVNode"])("span",g2,[Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,f2)])],10,u2))),128))])])])])])])])])}var V2={name:"billing-card",mounted(){this.getChildrens()},updated(){},data(){return{childrens:"",permissionsOfRole:"",isSelected:"",isEdit:null,studentEmail:"",roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){Xc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteChildren(e)})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async addChildren(){let e=this.$route.params.id,t={student_email:this.studentEmail,parent_id:e};try{await Ke.post("/addStudentToParent",t),this.getChildrens(),this.snackbarMsg("Children Added Successfully")}catch(a){console.log(a)}},async getChildrens(){let e=this.$route.params.id;try{const t=await Ke.get("getChildrensOfParent/"+e);this.childrens=t.data}catch(t){console.log(t)}},async deleteChildren(e){try{await Ke.get("deleteChildren/"+e),this.getChildrens(),this.snackbarMsg("Children Removed Successfully")}catch(t){console.log(t)}}}};a("9188");const N2=He()(V2,[["render",E2]]);var x2=N2;const y2={class:"container-fluid py-4"},v2={class:"row"},k2={class:"col-12"},w2={class:"card my-4"},A2=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Childrens")],-1),S2={class:"card-body px-0 pb-2"},B2={class:"table-responsive p-0"},C2={class:"table align-items-center mb-0"},_2=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Transactions "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Ballance "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Status ")])],-1),P2={class:"align-middle text-center text-sm"},I2={class:"text-xs font-weight-bold mb-0"},D2={class:"text-xs font-weight-bold mb-0"},T2={class:"text-xs font-weight-bold mb-0"},M2={class:"align-middle text-center"},z2={class:"text-secondary text-xs font-weight-bold"},F2={class:"align-middle text-center"},U2={class:"text-secondary text-xs font-weight-bold"},L2={class:"align-middle text-center"},q2=["onClick"],R2={class:"align-middle text-center"},$2=Object(l["createElementVNode"])("i",{class:"fas fa-donate me-2"},null,-1),Q2={class:"align-middle text-center text-sm"},J2={class:"badge badge-sm bg-gradient-success"};function H2(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",y2,[Object(l["createElementVNode"])("div",v2,[Object(l["createElementVNode"])("div",k2,[Object(l["createElementVNode"])("div",w2,[A2,Object(l["createElementVNode"])("div",S2,[Object(l["createElementVNode"])("div",B2,[Object(l["createElementVNode"])("table",C2,[_2,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",P2,[Object(l["createElementVNode"])("p",I2,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",D2,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",T2,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",M2,[Object(l["createElementVNode"])("span",z2,Object(l["toDisplayString"])(e.school.title),1)]),Object(l["createElementVNode"])("td",F2,[Object(l["createElementVNode"])("span",U2,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",L2,[Object(l["createElementVNode"])("i",{onClick:t=>o.transactionHistoryNav(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"swap_horizontal_circle",8,q2)]),Object(l["createElementVNode"])("td",R2,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"student-balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[$2]),_:2},1032,["to"])])]),Object(l["createElementVNode"])("td",Q2,[Object(l["createElementVNode"])("span",J2,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])])])])])])])])}var Y2={name:"tables",mounted(){this.getUser(),this.getAllStudents()},data(){return{allStudents:"",schools:6,user:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await Ke.post("getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async deleteStudent(e){try{await Ke.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("2409");const W2=He()(Y2,[["render",H2]]);var X2=W2;const Z2={class:"container-fluid py-4"},K2={class:"row"},G2={class:"col-12"},e4={class:"card my-4"},t4={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},a4=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Attributes",-1),l4=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Attribute ",-1),c4={class:"card-body px-0 pb-2"},s4={class:"table-responsive p-0"},o4={class:"table align-items-center mb-0"},n4=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase  text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),r4={class:"text-xs  text-center font-weight-bold mb-0"},i4={class:"text-xs font-weight-bold mb-0"},d4={class:"align-middle text-center"},m4=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),b4=["onClick"];function p4(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Z2,[Object(l["createElementVNode"])("div",K2,[Object(l["createElementVNode"])("div",G2,[Object(l["createElementVNode"])("div",e4,[Object(l["createElementVNode"])("div",t4,[a4,o.userPermissions.create_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-attribute"}},{default:Object(l["withCtx"])(()=>[l4]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",c4,[Object(l["createElementVNode"])("div",s4,[Object(l["createElementVNode"])("table",o4,[n4,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allAttributes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",r4,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",i4,Object(l["toDisplayString"])(e.name),1)]),Object(l["createElementVNode"])("td",d4,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-attribute",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[m4]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_attribute?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.deleteAttribute(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,b4)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var u4={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("view_attribute")},computed:{...Object($e["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{allAttributes:"",schools:6,user:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllAttributes(){try{const e=await Ke.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},async deleteAttribute(e){try{await Ke.delete("/deleteAttribute/"+e),this.removeAttributeFromList(e),this.snackbarMsg("Attribute Deleted Successfully")}catch(t){console.log(t)}},removeAttributeFromList(e){const t=this.allAttributes.findIndex(t=>t.id===e);this.allAttributes.splice(t,1)}}};a("e33f");const O4=He()(u4,[["render",p4]]);var j4=O4;Object(l["pushScopeId"])("data-v-bfa38f8e");const h4={class:"container-fluid py-4"},g4={class:"row"},f4={class:"col-12"},E4={class:"card my-4"},V4={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},N4=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Attribute",-1),x4=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),y4={class:"card-body px-0 pb-2"},v4={class:"table-responsive p-0"},k4={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},w4={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},A4={class:"form-bg container p-4"},S4={class:"card card-plain"},B4={class:"card-body"},C4={role:"form"},_4={class:"mb-1"},P4=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),I4={key:0,class:"text-danger error-txt"},D4={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},T4={class:""};function M4(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h4,[Object(l["createElementVNode"])("div",g4,[Object(l["createElementVNode"])("div",f4,[Object(l["createElementVNode"])("div",E4,[Object(l["createElementVNode"])("div",V4,[N4,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[x4]),_:1})]),Object(l["createElementVNode"])("div",y4,[Object(l["createElementVNode"])("div",v4,[Object(l["createElementVNode"])("div",k4,[Object(l["createElementVNode"])("div",w4,[Object(l["createElementVNode"])("div",A4,[Object(l["createElementVNode"])("div",S4,[Object(l["createElementVNode"])("div",B4,[Object(l["createElementVNode"])("form",C4,[Object(l["createElementVNode"])("div",_4,[P4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newAttribute.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",I4,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",D4,[Object(l["createElementVNode"])("div",T4,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.saveNewAttribute&&o.saveNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var z4={name:"",components:{},mounted(){this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("create_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_attribute");let e=!1,t="";t=Eo()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewAttribute(){if(!this.validateForm()){this.newAttribute.user_role=this.user.role;try{await Ke.post("/createAttribute",this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}},async getAllOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("94d7");const F4=He()(z4,[["render",M4],["__scopeId","data-v-bfa38f8e"]]);var U4=F4;Object(l["pushScopeId"])("data-v-5310274d");const L4={class:"container-fluid py-4"},q4={class:"row"},R4={class:"col-12"},$4={class:"card my-4"},Q4={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},J4=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Attribute",-1),H4=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),Y4={class:"card-body px-0 pb-2"},W4={class:"table-responsive p-0"},X4={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Z4={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},K4={class:"form-bg container p-4"},G4={class:"card card-plain"},e5={class:"card-body"},t5={role:"form"},a5={class:"mb-1"},l5=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),c5={key:0,class:"text-danger error-txt"},s5={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},o5={class:""};function n5(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",L4,[Object(l["createElementVNode"])("div",q4,[Object(l["createElementVNode"])("div",R4,[Object(l["createElementVNode"])("div",$4,[Object(l["createElementVNode"])("div",Q4,[J4,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[H4]),_:1})]),Object(l["createElementVNode"])("div",Y4,[Object(l["createElementVNode"])("div",W4,[Object(l["createElementVNode"])("div",X4,[Object(l["createElementVNode"])("div",Z4,[Object(l["createElementVNode"])("div",K4,[Object(l["createElementVNode"])("div",G4,[Object(l["createElementVNode"])("div",e5,[Object(l["createElementVNode"])("form",t5,[Object(l["createElementVNode"])("div",a5,[l5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newAttribute.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",c5,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",s5,[Object(l["createElementVNode"])("div",o5,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.updateNewAttribute&&o.updateNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var r5={name:"",components:{},mounted(){this.editAttribute(),this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("edit_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_attribute");let e=!1,t="";t=Eo()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async updateNewAttribute(){if(this.validateForm())return;this.newAttribute.user_role=this.user.role;let e=this.$route.params.id;try{await Ke.put("/updateAttribute/"+e,this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors}},async editAttribute(){let e=this.$route.params.id;try{const t=await Ke.get("/editAttribute/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAttribute.organization_id=t.organization_id,this.newAttribute.name=t.name)},async getAllOrganizations(){try{const e=await Ke.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("8a36");const i5=He()(r5,[["render",n5],["__scopeId","data-v-5310274d"]]);var d5=i5;const m5={class:"card"},b5={class:"card-body pt-4 p-3"},p5={class:"list-group"},u5={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},O5={class:"info-width d-flex flex-column"},j5={class:"row"},h5={class:"col-md-8 col-sm-8"},g5={class:"row"},f5={class:"col-md-10 col-sm-10"},E5=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"MANAGE ROLES & PERMISSIONS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"}," In the Roles and Permissions section, you can manage user roles and can assign specific permissions to each role. This functionality ensures that users have the appropriate access levels based on their role, improving security and operational efficiency. ")],-1),V5={role:"form"},N5={class:"mb-1"},x5=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Role Name",-1),y5={class:"col-md-2 col-sm-2"},v5=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Roles List ",-1),k5=["onClick"],w5={class:"text-sm fw-5"},A5={key:0,class:"text-dark ms-2 font-weight-bold"},S5=["onClick"],B5=["onClick"],C5={class:"col-md-4 col-sm-4"},_5=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," ROLE PERMISSIONS ",-1),P5=Object(l["createElementVNode"])("small",{class:"text-xs"},"This Role has following permissions",-1),I5={class:"permissions-container mt-3"},D5={key:0,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},T5={class:"switch-container mt-2 me-5"},M5=["onChange","checked","id"],z5=["for"],F5={class:"permissions text-uppercase"};function U5(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",m5,[Object(l["createElementVNode"])("div",b5,[Object(l["createElementVNode"])("div",p5,[Object(l["createElementVNode"])("div",u5,[Object(l["createElementVNode"])("div",O5,[Object(l["createElementVNode"])("div",j5,[Object(l["createElementVNode"])("div",h5,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",g5,[Object(l["createElementVNode"])("div",f5,[E5,Object(l["createElementVNode"])("form",V5,[Object(l["createElementVNode"])("div",N5,[x5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.roleName=e),class:"input-box",id:"name",type:"text",placeholder:"Role Name",name:"name"},null,512),[[l["vModelText"],s.roleName]])])])]),Object(l["createElementVNode"])("div",y5,[null!=s.isEdit&&""!=s.roleName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=(...e)=>o.updateRole&&o.updateRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Update ")):Object(l["createCommentVNode"])("",!0),""==s.roleName||null==s.isEdit?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[2]||(t[2]=(...e)=>o.createRole&&o.createRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Role ")):Object(l["createCommentVNode"])("",!0)])]),v5,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:Object(l["normalizeClass"])([{"selected-role":s.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>(o.toggleSelection(e.id,t),o.getPermissionsOfRole(e.id))},[Object(l["createElementVNode"])("span",w5,Object(l["toDisplayString"])(e.name),1),"super_admin"==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",A5,[Object(l["createElementVNode"])("i",{onClick:t=>o.editRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,S5),Object(l["createElementVNode"])("i",{onClick:t=>o.deleteRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,B5)])):Object(l["createCommentVNode"])("",!0)],10,k5)):Object(l["createCommentVNode"])("",!0)],64))),128))])]),Object(l["createElementVNode"])("div",C5,[_5,P5,Object(l["createElementVNode"])("div",I5,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[o.checkIfAdmin(e)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",D5,[Object(l["createElementVNode"])("div",T5,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>o.givePermission(e.name),checked:o.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,M5),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,z5)]),Object(l["createElementVNode"])("span",F5,Object(l["toDisplayString"])(e.name),1)])):Object(l["createCommentVNode"])("",!0)],64))),128))])])])])])])])])}var L5={name:"billing-card",mounted(){this.getAllRoles(),this.getAllPermissions(),this.getUserPermissions()},updated(){this.$permissions.redirectIfNotAllowed("roles")},data(){return{permissionsOfRole:"",isSelected:"",isEdit:null,roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},watch:{allRoles(e,t){console.log(e,t),this.isSelected=e[0]?e[0].id:"",this.getPermissionsOfRole()}},computed:{checkPermissionsOfRole(){return this.permissionsOfRole}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},checkIfAdmin(e){let t=!1,a=["create_admin","view_admin","edit_admin","delete_admin","roles"],l=[];return this.allRoles.filter(c=>{c.id==this.isSelected&&(t="Admin"==c.name||("Associate Admin"==c.name?!a.includes(e.name):!a.includes(e.name)&&!l.includes(e.name)))}),t},async getAllRoles(){try{const e=await Ke.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async createRole(){let e={name:this.roleName};try{await Ke.post("createRole",e),this.snackbarMsg("Role Created"),this.getAllRoles()}catch(t){console.log(t)}},async editRole(e){this.allRoles.filter(t=>{t.id==e&&(this.roleName=t.name,this.isEdit=e)})},async updateRole(){let e={name:this.roleName};try{await Ke.put("updateRole/"+this.isEdit,e),this.snackbarMsg("Role Updated"),this.getAllRoles(),this.isEdit=null,this.roleName=""}catch(t){console.log(t)}},async deleteRole(e){try{await Ke.delete("deleteRole/"+e),this.getAllRoles(),this.snackbarMsg("Role Deleted")}catch(t){console.log(t)}},async getAllPermissions(){try{const e=await Ke.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getPermissionsOfRole(e=null){null==e&&(e=this.isSelected);try{const t=await Ke.get("getPermissionsOfaRole/"+e);this.permissionsOfRole=t.data;let a=Eo()(this.allPermissions);this.allPermissions=null,this.allPermissions=a}catch(t){console.log(t)}},async givePermission(e){let t={permission:e};try{await Ke.post("givePermission/"+this.isSelected,t)}catch(a){console.log(a)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await Ke.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.checkPermissionsOfRole.some(t=>t.id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await Ke.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("7f8b");const q5=He()(L5,[["render",U5]]);var R5=q5;const $5={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function Q5(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-view");return Object(l["openBlock"])(),Object(l["createElementBlock"])("main",$5,[Object(l["createVNode"])(n)])}var J5={name:"DefaultLayout",components:{},methods:{...Object($e["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object($e["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};a("566d");const H5=He()(J5,[["render",Q5]]);var Y5=H5;const W5=[{path:"/auth/callback",name:"AuthCallback",component:In},{path:"/",name:"/",redirect:"/dashboard",meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:cs,meta:{title:"Dashboard",requiresAuth:!0}},{path:"/organizations",name:"organizations",component:Y5,meta:{title:"Organizations",requiresAuth:!0},children:[{path:"/organizations",name:"list-organizations",component:RE},{path:"/organizations/add",name:"add-organizations",component:TV},{path:"/organizations/:id",name:"edit-organization",component:wN}]},{path:"/organizations-admins",name:"organizations-admins",component:Y5,meta:{title:"Organizations Admins",requiresAuth:!0},children:[{path:"/organizations-admins",name:"list-organization-admins",component:JJ},{path:"/add-organizations-admins",name:"add-organization-admins",component:JH},{path:"/edit-organizations-admin/:id",name:"edit-organization-admin",component:ZY}]},{path:"/schools",name:"schools",component:Y5,meta:{title:"Schools",requiresAuth:!0},children:[{path:"/schools",name:"list-schools",component:$i},{path:"/schools/add",name:"add-school",component:qm},{path:"/schools/edit-schools/:id",name:"edit-school",component:$b},{path:"/archived/schools",name:"archived-schools",component:zd},{path:"/schools/settings/:id",name:"settings-school",component:_p},{path:"/school/addCard/:id",name:"card-school",component:Lp}]},{path:"/students",name:"students",component:Y5,meta:{title:"Students",requiresAuth:!0},children:[{path:"/students",name:"list-students",component:vO},{path:"/student/add",name:"add-student",component:Ch},{path:"/student/:id",name:"edit-student",component:Zg},{path:"/students/archived",name:"archived-students",component:Aj},{path:"/student-billing/:id",name:"student-billing",component:kf}]},{path:"/balance/:id?",name:"balance",component:rE},{path:"/attributes",name:"attributes",component:Y5,meta:{title:"Student Attributes",requiresAuth:!0},children:[{path:"/attributes",name:"list-attributes",component:j4},{path:"/attributes/add",name:"add-attribute",component:U4},{path:"/attributes/edit/:id",name:"edit-attribute",component:d5}]},{path:"/staff",name:"staff",component:Y5,meta:{title:"Staff",requiresAuth:!0},children:[{path:"/staff",name:"list-staff",component:KW},{path:"/staff/add",name:"add-staff",component:eK},{path:"/staff/edit/:id",name:"edit-staff",component:pG},{path:"/staff/archived",name:"archived-staff",component:KX},{path:"/staff/details/:id",name:"detail-staff",component:_G}]},{path:"/parent",name:"parent",component:Y5,meta:{title:"Parent",requiresAuth:!0},children:[{path:"/parents",name:"list-parent",component:O1},{path:"/parents/add",name:"add-parent",component:r0},{path:"/parents/edit/:id",name:"edit-parent",component:G0},{path:"/childrens/:id",name:"add-childrens",component:x2}]},{path:"/course",name:"course",component:Y5,meta:{title:"Course",requiresAuth:!0},children:[{path:"/courses",name:"list-courses",component:GR},{path:"/course/add",name:"add-course",component:P$},{path:"/course/edit/:id",name:"edit-course",component:pQ},{path:"/course/enrolled-students/:id",name:"enrolled-students",component:uJ}]},{path:"/payment",name:"payment",component:Y5,meta:{title:"Payment Account",requiresAuth:!0},children:[{path:"/payment_method/:id?",name:"payment_method",component:eR},{path:"/payment_account/:id?",name:"payment_account",component:Mq},{path:"/add_card",name:"add_card",component:iR}]},{path:"/transactions-history",name:"transactions",component:Y5,meta:{title:"Purchase",requiresAuth:!0},children:[{path:"/transaction-history",name:"transaction-history",component:ZA},{path:"/purchase-history",name:"purchase-history",component:qS},{path:"/purchases",name:"purchases-admin",component:zB},{path:"/refunds",name:"refund",component:vP},{path:"/installments",name:"installments",component:SC},{path:"/pay-installment/:id",name:"pay-installment",component:N_}]},{path:"/support",component:Y5,meta:{title:"Support",requiresAuth:!0},children:[{path:"",name:"support",component:$P}]},{path:"/shop-items",name:"shop",component:Y5,meta:{title:"Shop",requiresAuth:!0},children:[{path:"/shop-items",name:"shop-items",component:GI},{path:"/shop-items/add",name:"add-items",component:xz},{path:"/shop-items/edit/:id",name:"edit-shop-items",component:FU},{path:"/shop-items/archived",name:"archived-shop-items",component:oT}]},{path:"/checkout",name:"checkout",component:Y5,meta:{title:"Checkout",requiresAuth:!0},children:[{path:"/cart-checkout",name:"cart-checkout",component:UL}]},{path:"/trips",name:"trips",component:Y5,meta:{title:"Trips",requiresAuth:!0},children:[{path:"/trips",name:"list-trips",component:xx},{path:"/add-trips",name:"add-trips",component:wk},{path:"/edit-trips/:id",name:"edit-trips",component:Cw},{path:"/participants-trips/:id",name:"participants-trips",component:aA}]},{path:"/roles",name:"roles",component:Y5,meta:{title:"Roles",requiresAuth:!0},children:[{path:"/roles",name:"list-roles",component:R5}]},{path:"/meals",name:"meals",component:Y5,meta:{title:"Meals",requiresAuth:!0},children:[{path:"/meals",name:"list-meals",component:KL},{path:"/add-menu",name:"add-menu",component:sq}]},{path:"/childrens",name:"childrens",component:Y5,meta:{title:"Childrens",requiresAuth:!0},children:[{path:"/childrens",name:"list-childrens",component:X2}]},{path:"/payments",name:"payments",component:Y5,meta:{title:"Payments",requiresAuth:!0},children:[{path:"/active-payments",name:"list-active-payments",component:""},{path:"/historical-payments",name:"list-historical-payments",component:""}]},{path:"/profile",name:"Profile",component:xo,meta:{requiresAuth:!0}},{path:"/sign-in",name:"SignIn",component:mn},{path:"/forgot-password",name:"ForgotPassword",component:Kn},{path:"/reset-password/:email/:otp",name:"ResetPassword",component:fr},{path:"/sign-up",name:"SignUp",component:ri}],X5=Object(tl["a"])({history:Object(tl["b"])("/"),routes:W5,linkActiveClass:"active"});X5.beforeEach((e,t,a)=>{document.title=e.meta.title||"StudentPay",e.meta.requiresAuth&&!localStorage.getItem("token")?a({name:"SignIn"}):!localStorage.getItem("token")||"SignIn"!==e.name&&"Register"!==e.name?a():a({name:"Dashboard"})});var Z5=X5,K5=(a("6a5d"),a("46d4"),a("5aea"),a("b945"),a("9e17"),{install(){}}),G5=a("fe63");a("6340"),a("f38d");const e3={install(e){const t=Object(l["ref"])({create:!1,edit:!1,delete:!1,view:!1,create_admin:!1,delete_admin:!1,view_admin:!1,edit_admin:!1,create_site:!0,view_site:!1,edit_site:!0,delete_site:!1,create_student:!1,delete_student:!1,view_student:!1,edit_student:!1,create_staff:!1,delete_staff:!1,view_staff:!1,edit_staff:!1,create_course:!1,view_course:!1,edit_course:!1,delete_course:!1,create_shop:!0,delete_shop:!1,view_shop:!0,edit_shop:!0,transaction_history:!0,purchase_history:!1,pending_installments:!1,refunds:!1,roles:!1,topup:!1,wallet:!1}),a=e=>{const a=JSON.parse(localStorage.getItem("user"));a&&"super_admin"===a.role?Object.keys(t.value).forEach(e=>{t.value[e]=!0}):Object.keys(t.value).forEach(a=>{t.value[a]=e.includes(a)})},c=a=>{const l=e.config.globalProperties.$router;t.value[a]||l.go(-1)};e.config.globalProperties.$permissions={userPermissions:t,checkIfPermission:a,redirectIfNotAllowed:c},e.provide("permissions",e.config.globalProperties.$permissions),Object(l["watch"])(()=>e.config.globalProperties.$store.getters.getPermissions,(t,a)=>{console.log(a),e.config.globalProperties.$permissions.checkIfPermission(t)})}};var t3=e3;const a3={install(e){const t=Object(l["ref"])({BASE_URL:"https://stagingapi.student-pay.co.uk"});e.config.globalProperties.$env_vars=t.value,e.provide("env_vars",e.config.globalProperties.env_vars)}};var l3=a3;const c3=Object(l["createApp"])(Ca);c3.config.globalProperties.$msalInstance={},c3.config.globalProperties.$emitter=new Pa.a,c3.use(el),c3.use(G5["a"]),c3.component("vue3-snackbar",G5["b"]),c3.use(Z5,c3),c3.use(K5),c3.use(yk.a),c3.use(t3),c3.use(l3),c3.mount("#app")},5820:function(e,t,a){},"5aea":function(e,t,a){},"5c79":function(e,t,a){},"5d69":function(e,t,a){},"5df9":function(e,t,a){},"5e72":function(e,t,a){"use strict";a("1ca5")},"613d":function(e,t,a){"use strict";a("68f6")},6150:function(e,t,a){e.exports=a.p+"img/ivana-square.a1900888.jpg"},"68d6":function(e,t,a){},"68f6":function(e,t,a){},6904:function(e,t,a){"use strict";a("d6e2")},"6a07":function(e,t,a){e.exports=a.p+"img/background.19e62050.jpg"},"6a5d":function(e,t,a){},"6df5":function(e,t,a){"use strict";a("c61d")},"6e70":function(e,t,a){"use strict";a("f139")},"70e2":function(e,t,a){},"71d3":function(e,t,a){},"72a0":function(e,t,a){"use strict";a("0147")},7921:function(e,t,a){},"7b9a":function(e,t,a){e.exports=a.p+"img/StudentPay-logo.627241f4.png"},"7ec8":function(e,t,a){},"7f8b":function(e,t,a){"use strict";a("38a8")},8202:function(e,t,a){e.exports=a.p+"img/team-2.90c40d0c.jpg"},8627:function(e,t,a){"use strict";a("5c79")},"88b8":function(e,t,a){},"88f1":function(e,t,a){"use strict";a("b744")},"89d1":function(e,t,a){"use strict";a("88b8")},"8a36":function(e,t,a){"use strict";a("539e")},"8a5e":function(e,t,a){},"8a93":function(e,t,a){},"8bb8":function(e,t,a){},"8e14":function(e,t,a){"use strict";a("7921")},"8e18":function(e,t,a){"use strict";a("f068")},"90b4":function(e,t,a){"use strict";a("e50a")},9188:function(e,t,a){"use strict";a("caa5")},"94d7":function(e,t,a){"use strict";a("a145")},"975b":function(e,t,a){},"98ae":function(e,t,a){"use strict";a("a1a0")},"9bb4":function(e,t,a){"use strict";a("8bb8")},"9d09":function(e,t,a){},"9d66":function(e,t,a){"use strict";a("5820")},"9e17":function(e,t,a){},"9e19":function(e,t,a){"use strict";a("f321")},a0fe:function(e,t,a){"use strict";a("b126")},a145:function(e,t,a){},a1a0:function(e,t,a){},a432:function(e,t,a){},a973:function(e,t,a){},aa68:function(e,t,a){e.exports=a.p+"img/visa.98edc46d.png"},ab27:function(e,t,a){"use strict";a("68d6")},ac37:function(e,t,a){},adf2:function(e,t,a){"use strict";a("4257")},ae7d:function(e,t,a){"use strict";a("5054")},af17:function(e,t,a){e.exports=a.p+"img/marie.a60473a0.jpg"},af54:function(e,t,a){},b0e7:function(e,t,a){"use strict";a("e3f4")},b107:function(e,t,a){e.exports=a.p+"img/logo-slack.07d7b8e1.svg"},b126:function(e,t,a){},b2ca:function(e,t,a){"use strict";a("70e2")},b34a:function(e,t,a){e.exports=a.p+"img/home-decor-1.decbdadf.jpg"},b406:function(e,t,a){},b744:function(e,t,a){},b8de:function(e,t,a){e.exports=a.p+"img/logo-xd.46bbd281.svg"},b904:function(e,t,a){"use strict";a("4994")},b945:function(e,t){window.onload=function(){for(var e=document.querySelectorAll(".btn"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target,a=t.querySelector(".ripple");a=document.createElement("span"),a.classList.add("ripple"),a.style.width=a.style.height=Math.max(t.offsetWidth,t.offsetHeight)+"px",t.appendChild(a),a.style.left=e.offsetX-a.offsetWidth/2+"px",a.style.top=e.offsetY-a.offsetHeight/2+"px",a.classList.add("ripple"),setTimeout((function(){a.parentElement.removeChild(a)}),600)}),!1)}},ba3f:function(e,t,a){"use strict";a("bf35")},bb4e:function(e,t,a){"use strict";a("1b33")},bb69:function(e,t,a){"use strict";a("2b29")},bbe0:function(e,t,a){e.exports=a.p+"img/dashboard2.3de49aaf.jpg"},bdd3:function(e,t,a){},bf35:function(e,t,a){},c1d2:function(e,t,a){"use strict";a("9d09")},c307:function(e,t,a){},c4f5:function(e,t,a){},c5c7:function(e,t,a){},c61d:function(e,t,a){},c7c0:function(e,t,a){e.exports=a.p+"img/team-3.a539dfc6.jpg"},ca9b:function(e,t,a){"use strict";a("c4f5")},caa5:function(e,t,a){},cad8:function(e,t,a){"use strict";a("a973")},d15c:function(e,t,a){e.exports=a.p+"img/trip.85ea72dc.jpg"},d3a1:function(e,t,a){},d6e2:function(e,t,a){},d84d:function(e,t,a){"use strict";a("44e5")},dc8f:function(e,t,a){"use strict";a("f5a3")},ddbe:function(e,t,a){"use strict";a("2827")},de48:function(e,t,a){},e33f:function(e,t,a){"use strict";a("d3a1")},e3f4:function(e,t,a){},e4a7:function(e,t,a){"use strict";a("2e3b")},e50a:function(e,t,a){},e978:function(e,t,a){},ea26:function(e,t,a){},ed52:function(e,t,a){"use strict";a("bdd3")},ee17:function(e,t,a){},ee25:function(e,t,a){},f068:function(e,t,a){},f139:function(e,t,a){},f19e:function(e,t,a){"use strict";a("de48")},f321:function(e,t,a){},f333:function(e,t,a){},f35e:function(e,t,a){e.exports=a.p+"img/team-4.16a9baef.jpg"},f594:function(e,t,a){"use strict";a("30b4")},f5a3:function(e,t,a){},fa86:function(e,t,a){"use strict";a("55ff")}});
//# sourceMappingURL=app.d9e7e80a.js.map