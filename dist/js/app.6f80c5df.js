(function(e){function t(t){for(var l,s,n=t[0],r=t[1],i=t[2],m=0,b=[];m<n.length;m++)s=n[m],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,i||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],l=!0,n=1;n<a.length;n++){var r=a[n];0!==c[r]&&(l=!1)}l&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var l={},c={app:0},o=[];function s(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=l,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)s.d(a,l,function(t){return e[t]}.bind(null,l));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var i=0;i<n.length;i++)t(n[i]);var d=r;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"01c2":function(e,t,a){},"0215":function(e,t,a){"use strict";a("06ab")},"02a2":function(e,t,a){},"04e1":function(e,t,a){},"0515":function(e,t,a){},"06ab":function(e,t,a){},"0b3c":function(e,t,a){"use strict";a("2357")},"0c19":function(e,t,a){},"0c56":function(e,t,a){"use strict";a("1b5c")},"0e03":function(e,t,a){},"11e8":function(e,t,a){},1444:function(e,t,a){},"14f2":function(e,t,a){},1504:function(e,t,a){"use strict";a("44d9")},1559:function(e,t,a){},"15bb":function(e,t,a){},1704:function(e,t,a){"use strict";a("02a2")},"18e4":function(e,t,a){},"190c":function(e,t,a){e.exports=a.p+"img/down-arrow-white.157f6258.svg"},"19b8":function(e,t,a){"use strict";a("a432")},"1a8c6":function(e,t,a){"use strict";a("bfca")},"1acb":function(e,t,a){},"1b5c":function(e,t,a){},"1ccf":function(e,t,a){"use strict";a("bea3")},2357:function(e,t,a){},2409:function(e,t,a){"use strict";a("14f2")},"256f":function(e,t,a){},"264c":function(e,t,a){e.exports=a.p+"img/mastercard.e1efc600.png"},"26be":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAsASURBVHic7d0xb1RnFoDh49FKoKzpY4mKjiJl5A5FiCqSBdT8ApfUG1GgbE3JL6DGCCnVCkXpUMoUdK6QnB6DTOUtxt4FAgQB9gje55GmuTNjn2q+d+7M3G/t8PBwPsTzK5tnZubyzFydmYszs3F0W/+gPwB8dv/8z+O1Vf7/rZ3rH/YCApyE/ZnZO7o9mZkHM/Po4bX7Lz/kyWt/FwDPr2xuzMytmbkxM+c+aVTgsxIAwBuezcy9mbn98Nr9vfc98J0B8PzK5tmZ+Wlmbs7MN597QuDTCQDgHV7MzJ2Z+fnhtfsHb3vA4m0Hn1/Z/HZmfp2Zf43FHwC+NN/Mcg3/dWvn+rdve8BfAuD5lc3vZub3mdk82dkAgBO2OTO/b+1c/+7NO14LgKN3/r/MzPlTGgwAOFnnZ+aXN88E/C8Ajj7z3xmLPwB8bc7PzM7WzvWzxwdePQPw0zjtDwBfq81ZrvUzcxQARz/1u7mqiQCAU3Fza+f6xsz/zwDcGt/2B4Cv3TezXPNncXSFvxurnQcAOCU3tnaun1nM8vK+rvAHAA3nZubyYpbX9gcAOq4uZrmxDwDQcXExyx39AICODQEAAD0bi5lZX/UUAMCpWn/rboAAwNdNAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIWjs8PFz1DADAKXMGAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAoH9cuLt/uOohgI+zu72+ttIBfjvr9QO+UM4AAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQtJiZ/VUPAQCcqv3FzOytegoA4FTtCQAA6NlbzMyTVU8BAJyqJ4uZebDqKQCAU/VgMTOPZubZqicBAE7Fs5l5tNjdXn85M/dWPQ0AcCruzaWDl8fXAbg9My9WOQ0AcOJezHLNX14IaHd7fW9m7qxyIgDgxN2ZSwd7M69fCfDnmXm8mnkAgBP2eJZr/cy8EgC72+sHM3NtZp6uYCgA4OQ8nZlrc+ng4PjAa3sB7G6v/zkzP44IAICvxdOZ+XEuHfz56sG/bAa0u73+x8x8Pz4OAIAv3eOZ+X4uHfzx5h1v3Q3w6EzADzPz7/HrAAD40ryY5Rr+w5vv/I+tHR4evvcvXLi7vzEzt2bmxsyc+9wTAh9vd3t9baUD/Hb2/S8gwGl7Nstr+9w+/rb/u/xtABy7cHf/zMxcnpmrM3NxZjaObuufNCrw0QQApO3PckO/vVnu6/NgZh7NpYOXH/Lk/wKQAq5eW3YI8AAAAABJRU5ErkJggg=="},2805:function(e,t,a){},"281f":function(e,t,a){e.exports=a.p+"img/logo-invision.43586d43.svg"},2990:function(e,t,a){"use strict";a("43dd")},"2aa5":function(e,t,a){},"2adb":function(e,t,a){"use strict";a("9ce0")},"2ae0":function(e,t,a){"use strict";a("4400")},"2b98":function(e,t,a){"use strict";a("f5b4")},"2d39":function(e,t,a){e.exports=a.p+"img/kal-visuals-square.779cce2b.jpg"},"2dbd":function(e,t,a){"use strict";a("62b9")},"2e1b":function(e,t,a){},"2e54":function(e,t,a){},"2e77":function(e,t,a){e.exports=a.p+"img/logo-spotify.4bb67532.svg"},3130:function(e,t,a){"use strict";a("f914")},"33ac":function(e,t,a){},"350a":function(e,t,a){e.exports=a.p+"img/team-1.0e461794.jpg"},3615:function(e,t,a){},"36c5":function(e,t,a){"use strict";a("0e03")},"37f7":function(e,t,a){e.exports=a.p+"img/logo-atlassian.0569965a.svg"},"3d83":function(e,t,a){},"3dfe":function(e,t,a){e.exports=a.p+"img/logo-jira.09288465.svg"},"40bd":function(e,t,a){e.exports=a.p+"img/bruce-mars.0c440467.jpg"},"40fa":function(e,t,a){"use strict";a("0c19")},"43be":function(e,t,a){},"43dd":function(e,t,a){},4400:function(e,t,a){},"44d9":function(e,t,a){},"457f":function(e,t,a){"use strict";a("1444")},4678:function(e,t,a){var l={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=o(e);return a(t)}function o(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}c.keys=function(){return Object.keys(l)},c.resolve=o,e.exports=c,c.id="4678"},"46d4":function(e,t,a){},4753:function(e,t,a){e.exports=a.p+"img/home-decor-2.249f600c.jpg"},"49fa":function(e,t,a){},"4aee":function(e,t,a){"use strict";a("18e4")},"4b51":function(e,t,a){},"4e40":function(e,t,a){"use strict";a("3615")},5014:function(e,t,a){},"506d":function(e,t,a){"use strict";a("15bb")},"507d":function(e,t,a){"use strict";a("b94f")},"52d6":function(e,t,a){e.exports=a.p+"img/down-arrow-dark.601cff39.svg"},"52e2":function(e,t,a){"use strict";a("0515")},"532f":function(e,t,a){e.exports=a.p+"img/home-decor-3.2d98a7aa.jpg"},"539e":function(e,t,a){},"55ff":function(e,t,a){},"566d":function(e,t,a){"use strict";a("e978")},"56d7":function(e,t,a){"use strict";a.r(t);var l=a("7a23");const c={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function o(e,t,a,o,s,n){const r=Object(l["resolveComponent"])("sidenav"),i=Object(l["resolveComponent"])("navbar"),d=Object(l["resolveComponent"])("router-view"),m=Object(l["resolveComponent"])("app-footer"),b=Object(l["resolveComponent"])("configurator"),p=Object(l["resolveComponent"])("vue3-snackbar");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[e.showSidenav?(Object(l["openBlock"])(),Object(l["createBlock"])(r,{key:0,custom_class:e.color,class:Object(l["normalizeClass"])([e.isRTL?"fixed-end":"fixed-start"])},null,8,["custom_class","class"])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("main",c,[e.showNavbar?(Object(l["openBlock"])(),Object(l["createBlock"])(i,{key:0,class:Object(l["normalizeClass"])([e.isNavFixed?e.navbarFixed:"",e.isAbsolute?e.absolute:""]),color:e.isAbsolute?"text-white opacity-8":"",minNav:e.navbarMinimize},null,8,["class","color","minNav"])):Object(l["createCommentVNode"])("",!0),Object(l["createVNode"])(d),Object(l["withDirectives"])(Object(l["createVNode"])(m,null,null,512),[[l["vShow"],e.showFooter]]),Object(l["createVNode"])(b,{toggle:e.toggleConfigurator,class:Object(l["normalizeClass"])([e.showConfig?"show":"",e.hideConfigButton?"d-none":""])},null,8,["toggle","class"])]),Object(l["createVNode"])(p,{top:"",right:"",duration:3e3})],64)}var s=a("7b9a"),n=a.n(s);const r={class:"sidenav-header"},i=Object(l["createElementVNode"])("i",{class:"top-0 p-3 cursor-pointer fas fa-times text-secondary opacity-5 position-absolute end-0 d-none d-xl-none","aria-hidden":"true",id:"iconSidenav"},null,-1),d={class:"m-0 navbar-brand",href:"/"},m={key:0,class:"d-flex flex-column justify-content-center align-items-center",style:{"margin-top":"-21px"}},b=["src"],p=Object(l["createElementVNode"])("p",{class:"ms-2 font-weight-bold text-white",style:{"font-size":"15px","margin-right":"20px","margin-top":"4px"}},"Student-Pay Portal",-1),u=Object(l["createElementVNode"])("br",null,null,-1),O={key:1,src:n.a,class:"navbar-brand-img h-100",alt:"main_logo"};function h(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("sidenav-list");return Object(l["openBlock"])(),Object(l["createElementBlock"])("aside",{id:"sidenav-main",class:Object(l["normalizeClass"])(["sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 ms-3",`${e.isRTL?"me-3 rotate-caret fixed-end":"fixed-start ms-3"} ${e.sidebarType}`])},[Object(l["createElementVNode"])("div",r,[i,Object(l["createElementVNode"])("a",d,["null"!==e.getBrandingSetting.logo?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",m,[Object(l["createElementVNode"])("img",{src:o.StudentPayLogo,class:"navbar-brand-img branding-logo h-50",alt:""},null,8,b),p,u])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",O))])]),Object(l["createVNode"])(n)],2)}const j={class:"w-auto collapse navbar-collapse vh-100",id:"sidenav-collapse-main"},g={class:"navbar-nav"},f={class:"nav-item"},E=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"dashboard",-1),V=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),N=["onClick"],x=Object(l["createElementVNode"])("div",{class:"select"},null,-1),y={class:"text-white ms-1 ps-1"},v={key:1,class:"nav-item"},k=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),w={key:2,class:"nav-item"},A=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),S={key:0,class:"nav-item"},B=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"admin_panel_settings",-1),C={key:4,class:"nav-item"},_=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#schools"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Sites "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),P={id:"schools",class:"collapse"},I={class:"nav nav-sm flex-column"},D={class:"nav-item"},T=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),M=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Sites List",-1),z={class:"nav-item"},F=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),U=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Sites",-1),L={key:5,class:"nav-item"},$=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"security",-1),q={key:6,class:"nav-item"},R=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#projectsExample"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Students "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),H={id:"projectsExample",class:"collapse"},Q={class:"nav nav-sm flex-column"},J={class:"nav-item"},Y=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),W=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Students List",-1),X={class:"nav-item"},Z=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),K=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Students",-1),G={key:7,class:"nav-item"},ee=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#staffNav"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"portrait"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Staff "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),te={id:"staffNav",class:"collapse"},ae={class:"nav nav-sm flex-column"},le={class:"nav-item"},ce=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),oe=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Staff List",-1),se={class:"nav-item"},ne=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),re=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Staff",-1),ie={key:8,class:"nav-item"},de=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people",-1),me={key:0,class:"nav-item"},be=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#courses"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Courses "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),pe={id:"courses",class:"collapse"},ue={class:"nav nav-sm flex-column"},Oe={class:"nav-item"},he=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),je=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"All Courses",-1),ge={key:0,class:"nav-item"},fe=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#shop"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Shop "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),Ee={id:"shop",class:"collapse"},Ve={class:"nav nav-sm flex-column"},Ne={class:"nav-item"},xe=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),ye=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Shop Items",-1),ve={class:"nav-item"},ke=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),we=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Items",-1),Ae={key:2,class:"nav-item"},Se=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Be={key:3,class:"nav-item"},Ce=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),_e={key:4,class:"nav-item"},Pe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Ie={key:10,class:"nav-item"},De=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),Te={key:11,class:"nav-item"},Me=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),ze={key:12,class:"nav-item"},Fe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),Ue={key:0,class:"nav-item"},Le=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),$e={key:14,class:"nav-item"},qe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"support_agent",-1);function Re(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("sidenav-collapse"),r=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",j,[Object(l["createElementVNode"])("ul",g,[Object(l["createElementVNode"])("li",f,[Object(l["createVNode"])(n,{to:{name:"Dashboard"},"aria-controls":"",collapse:!1,collapseRef:"dashboard",navText:"Dashboard"},{icon:Object(l["withCtx"])(()=>[E]),_:1})]),o.user&&"parent"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createVNode"])(n,{to:{name:"list-childrens"},"aria-controls":"",collapse:!1,collapseRef:"childrens",navText:"My Childrens"},{icon:Object(l["withCtx"])(()=>[V]),_:1}),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,onClick:t=>s.selectChildren(e.student.id),class:"nav-item d-flex student"},[x,Object(l["createElementVNode"])("small",y,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1)],8,N))),128))],64)):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",v,[Object(l["createVNode"])(n,{to:{name:"payment_account"},"aria-controls":"",collapse:!1,collapseRef:"topup",navText:"Topup"},{icon:Object(l["withCtx"])(()=>[k]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",w,[Object(l["createVNode"])(n,{to:{name:"list-organizations"},"aria-controls":"",collapse:!1,collapseRef:"organizations",navText:"Organisations"},{icon:Object(l["withCtx"])(()=>[A]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[s.userPermissions.view_admin?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",S,[Object(l["createVNode"])(n,{to:{name:"list-organization-admins"},"aria-controls":"",collapse:!1,collapseRef:"organization-admins",navText:"Organisation Admins"},{icon:Object(l["withCtx"])(()=>[B]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.userPermissions.view_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",C,[_,Object(l["createElementVNode"])("div",P,[Object(l["createElementVNode"])("ul",I,[Object(l["createElementVNode"])("li",D,[Object(l["createVNode"])(r,{to:{name:"list-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[T,M]),_:1})]),Object(l["createElementVNode"])("li",z,[Object(l["createVNode"])(r,{to:{name:"archived-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[F,U]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),s.userPermissions.roles?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",L,[Object(l["createVNode"])(n,{to:{name:"list-roles"},"aria-controls":"",collapse:!1,collapseRef:"roles",navText:"Roles & Permissions"},{icon:Object(l["withCtx"])(()=>[$]),_:1})])):Object(l["createCommentVNode"])("",!0),s.userPermissions.view_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",q,[R,Object(l["createElementVNode"])("div",H,[Object(l["createElementVNode"])("ul",Q,[Object(l["createElementVNode"])("li",J,[Object(l["createVNode"])(r,{to:{name:"list-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Y,W]),_:1})]),Object(l["createElementVNode"])("li",X,[Object(l["createVNode"])(r,{to:{name:"archived-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Z,K]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),s.userPermissions.view_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",G,[ee,Object(l["createElementVNode"])("div",te,[Object(l["createElementVNode"])("ul",ae,[Object(l["createElementVNode"])("li",le,[Object(l["createVNode"])(r,{to:{name:"list-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ce,oe]),_:1})]),Object(l["createElementVNode"])("li",se,[Object(l["createVNode"])(r,{to:{name:"archived-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ne,re]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),"staff"!==o.user.role&&"student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ie,[Object(l["createVNode"])(n,{to:{name:"list-parent"},"aria-controls":"",collapse:!1,collapseRef:"parents",navText:"Parents"},{icon:Object(l["withCtx"])(()=>[de]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"parent"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:9},[s.userPermissions.view_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",me,[be,Object(l["createElementVNode"])("div",pe,[Object(l["createElementVNode"])("ul",ue,[Object(l["createElementVNode"])("li",Oe,[Object(l["createVNode"])(r,{to:{name:"list-courses"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[he,je]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),o.user&&"student"!==o.user.role&&o.user&&"staff"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[s.userPermissions.view_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ge,[fe,Object(l["createElementVNode"])("div",Ee,[Object(l["createElementVNode"])("ul",Ve,[Object(l["createElementVNode"])("li",Ne,[Object(l["createVNode"])(r,{to:{name:"shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[xe,ye]),_:1})]),Object(l["createElementVNode"])("li",ve,[Object(l["createVNode"])(r,{to:{name:"archived-shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ke,we]),_:1})])])])])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.userPermissions.purchase_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ae,[Object(l["createVNode"])(n,{to:{name:"purchases-admin"},"aria-controls":"",collapse:!1,collapseRef:"purchasesadmin",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[Se]),_:1})])):Object(l["createCommentVNode"])("",!0),s.userPermissions.pending_installments?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Be,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Installments"},{icon:Object(l["withCtx"])(()=>[Ce]),_:1})])):Object(l["createCommentVNode"])("",!0),s.userPermissions.refunds?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",_e,[Object(l["createVNode"])(n,{to:{name:"refund"},"aria-controls":"",collapse:!1,collapseRef:"refunds",navText:"Refunds"},{icon:Object(l["withCtx"])(()=>[Pe]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ie,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Installments"},{icon:Object(l["withCtx"])(()=>[De]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Te,[Object(l["createVNode"])(n,{to:{name:"purchase-history"},"aria-controls":"",collapse:!1,collapseRef:"purchase history",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[Me]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||o.user&&"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ze,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Fe]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"student"!==o.user.role&&o.user&&"staff"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:13},[s.userPermissions.transaction_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ue,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Le]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",$e,[Object(l["createVNode"])(n,{to:{name:"support"},"aria-controls":"",collapse:!1,collapseRef:"support",navText:"Support"},{icon:Object(l["withCtx"])(()=>[qe]),_:1})])):Object(l["createCommentVNode"])("",!0)])])}function He(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(n,Object(l["mergeProps"])({"data-bs-toggle":a.collapse?"collapse":"",to:a.collapse?"#"+a.collapseRef:a.collapseRef,"aria-controls":a.collapseRef,"aria-expanded":o.isExpanded,class:["nav-link",s.getRoute()===a.collapseRef?"active bg-gradient-#573078":""]},e.$attrs,{onClick:t[0]||(t[0]=e=>o.isExpanded=!o.isExpanded)}),{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["text-center d-flex align-items-center justify-content-center",e.isRTL?" ms-2":"me-2"])},[Object(l["renderSlot"])(e.$slots,"icon")],2),Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["nav-link-text",e.isRTL?" me-1":"ms-1"])},Object(l["toDisplayString"])(a.navText),3)]),_:3},16,["data-bs-toggle","to","aria-controls","aria-expanded","class"]),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(o.isExpanded?"collapse show":"collapse")},[Object(l["renderSlot"])(e.$slots,"list")],2)],64)}var Qe=a("5502"),Je={name:"SidenavCollapse",props:{collapseRef:{type:String,required:!0},navText:{type:String,required:!0},collapse:{type:Boolean,default:!0}},data(){return{isExpanded:!1}},methods:{getRoute(){const e=this.$route.path.split("/");return e[1]}},computed:{...Object(Qe["e"])(["isRTL","color"])}},Ye=a("6b0d"),We=a.n(Ye);const Xe=We()(Je,[["render",He]]);var Ze=Xe,Ke=a("cee4");const Ge=Ke["a"].create({baseURL:"https://stagingapi.student-pay.co.uk/api"});Ge.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),Ge.interceptors.response.use(e=>{const t=e.headers["new-access-token"];return t&&localStorage.setItem("token",t),e},e=>Promise.reject(e));var et=Ge,tt={name:"SidenavList",props:{cardBg:String},updated(){},mounted(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e)),this.setActiveColor(),this.getChildrens()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{childrens:"",user:"",title:"StudentPay",controls:"dashboardsExamples",isActive:"active"}},methods:{async getChildrens(){if(this.user&&"parent"==this.user.role){let t=this.user.id;try{const e=await et.get("getChildrensOfParent/"+t);this.childrens=e.data}catch(e){console.log(e)}}},async selectChildren(e){if(this.user&&"parent"==this.user.role){let a=this.user.id,l={parent_id:a,student_id:e};try{let e=await et.post("/selectChildren",l),t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let c=e.data.primary_color,o=e.data.secondary_color,s=e.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",o),localStorage.setItem("logo",s);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){console.log(t)}}},setActiveColor(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";document.querySelector(".sidenav-header").style.setProperty("--navheader-bg-color",e),document.querySelector(".navbar-nav").style.setProperty("--nav-bg-color",e),document.querySelector("#sidenav-collapse-main").style.setProperty("--nav-bg-color",e),document.querySelectorAll(".btn").forEach((function(e){e.style.setProperty("--btn-bg-color","red")}))},buttonColor(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";const t=document.querySelectorAll(".btn");console.log("btn",t),t.forEach(t=>{t.style.backgroundColor=e})},navLegacy(e){this.$router.push({name:e})},isActiveRoute(e){return this.$route.name===e}},components:{SidenavCollapse:Ze}};a("ff6f");const at=We()(tt,[["render",Re]]);var lt=at,ct=a("264c"),ot=a.n(ct),st={name:"index",components:{SidenavList:lt},mounted(){this.setLogo()},data(){return{logo:ot.a,logoDark:ot.a,StudentPayLogo:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),...Object(Qe["e"])(["isRTL","sidebarType","isDarkMode"])},methods:{setLogo(){this.StudentPayLogo=this.$env_vars.BASE_URL+this.getBrandingSetting.logo}}};a("a9b7");const nt=We()(st,[["render",h]]);var rt=nt;const it={class:"fixed-plugin"};function dt(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",it)}function mt(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-dark, .breadcrumb .text-dark"),o=document.querySelectorAll("strong.text-dark"),s=document.querySelectorAll("a.nav-link.text-dark"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-100"),i=document.querySelectorAll(".btn.btn-link.text-dark, .material-icons.text-dark"),d=document.querySelectorAll(".card.border"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.add("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("dark")&&(t[p].classList.remove("dark"),t[p].classList.add("light"));for(p=0;p<m.length;p++)m[p].classList.contains("blur")&&m[p].classList.remove("blur","shadow-blur");for(p=0;p<a.length;p++)a[p].classList.contains("dark")&&(a[p].classList.remove("dark"),a[p].classList.add("light"));for(p=0;p<l.length;p++)l[p].classList.contains("text-dark")&&(l[p].classList.remove("text-dark"),l[p].classList.add("text-white"));for(p=0;p<c.length;p++)c[p].classList.contains("text-dark")&&(c[p].classList.remove("text-dark"),c[p].classList.add("text-white"));for(p=0;p<o.length;p++)o[p].classList.contains("text-dark")&&(o[p].classList.remove("text-dark"),o[p].classList.add("text-white"));for(p=0;p<s.length;p++)s[p].classList.contains("text-dark")&&(s[p].classList.remove("text-dark"),s[p].classList.add("text-white"));for(p=0;p<n.length;p++)n[p].classList.contains("text-secondary")&&(n[p].classList.remove("text-secondary"),n[p].classList.add("text-white"),n[p].classList.add("opacity-8"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-100")&&(r[p].classList.remove("bg-gray-100"),r[p].classList.add("bg-gray-600"));for(p=0;p<i.length;p++)i[p].classList.remove("text-dark"),i[p].classList.add("text-white");for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#fff");for(p=0;p<d.length;p++)d[p].classList.add("border-dark")}function bt(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-white, .breadcrumb .text-white"),o=document.querySelectorAll("strong.text-white"),s=document.querySelectorAll("a.nav-link.text-white"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-600"),i=document.querySelectorAll(".btn.btn-link.text-white, .material-icons.text-white"),d=document.querySelectorAll(".card.border.border-dark"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.remove("dark-version"),e.classList.remove("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("light")&&(t[p].classList.add("dark"),t[p].classList.remove("light"));for(p=0;p<a.length;p++)a[p].classList.contains("light")&&(a[p].classList.add("dark"),a[p].classList.remove("light"));for(p=0;p<m.length;p++)m[p].classList.add("blur","shadow-blur");for(p=0;p<l.length;p++)l[p].classList.contains("text-white")&&(l[p].classList.remove("text-white"),l[p].classList.add("text-dark"));for(p=0;p<c.length;p++)!c[p].classList.contains("text-white")||c[p].closest(".sidenav")||c[p].closest(".card.bg-gradient-dark")||(c[p].classList.remove("text-white"),c[p].classList.add("text-dark"));for(p=0;p<o.length;p++)o[p].classList.contains("text-white")&&(o[p].classList.remove("text-white"),o[p].classList.add("text-dark"));for(p=0;p<s.length;p++)s[p].classList.contains("text-white")&&!s[p].closest(".sidenav")&&(s[p].classList.remove("text-white"),s[p].classList.add("text-dark"));for(p=0;p<n.length;p++)n[p].classList.contains("text-white")&&(n[p].classList.remove("text-white"),n[p].classList.remove("opacity-8"),n[p].classList.add("text-dark"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-600")&&(r[p].classList.remove("bg-gray-600"),r[p].classList.add("bg-gray-100"));for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#252f40");for(p=0;p<i.length;p++)i[p].closest(".card.bg-gradient-dark")||(i[p].classList.remove("text-white"),i[p].classList.add("text-dark"));for(p=0;p<d.length;p++)d[p].classList.remove("border-dark")}var pt={name:"configurator",props:["toggle"],methods:{...Object(Qe["d"])(["navbarMinimize","navbarFixed"]),...Object(Qe["b"])(["setColor"]),sidebarColor(e="success"){document.querySelector("#sidenav-main").setAttribute("data-color",e),this.setColor(e)},sidebar(e){this.$store.state.sidebarType=e},setNavbarFixed(){"Profile"===this.$route.name&&"All Projects"===this.$route.name||(this.$store.state.isNavFixed=!this.$store.state.isNavFixed)},darkMode(){if(this.$store.state.isDarkMode)return this.$store.state.isDarkMode=!1,void bt();this.$store.state.isDarkMode=!0,mt()},sidenavTypeOnResize(){let e=document.querySelector("#btn-transparent"),t=document.querySelector("#btn-white");window.innerWidth<1200?(e.classList.add("disabled"),t.classList.add("disabled")):(e.classList.remove("disabled"),t.classList.remove("disabled"))}},computed:{...Object(Qe["e"])(["isRTL","sidebarType"]),sidenavResponsive(){return this.sidenavTypeOnResize}},beforeMount(){this.$store.state.isTransparent="bg-transparent",window.addEventListener("resize",this.sidenavTypeOnResize),window.addEventListener("load",this.sidenavTypeOnResize)}};const ut=We()(pt,[["render",dt]]);var Ot=ut;const ht={class:"px-3 py-1 container-fluid"},jt={key:0,class:"organization-name mt-2 me-2"},gt={key:1,class:"organization-name mt-2 me-2"},ft=Object(l["createElementVNode"])("h5",null,"Super Admin",-1),Et=[ft],Vt={key:0,class:"change-pass-alert pt-1",style:{"padding-right":"5px",display:"flex"}},Nt={class:"pass-text"},xt=Object(l["createTextVNode"])("For security reasons, we kindly ask you to change your password, "),yt=Object(l["createElementVNode"])("span",{class:"click-link ms-2"},"click here",-1),vt=Object(l["createTextVNode"])(" to change the password"),kt={class:"navbar-nav justify-content-end"},wt=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"},"shopping_cart",-1),At=[wt],St={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},Bt={class:"d-flex flex-column"},Ct={class:"mb-3 text-sm text-dark"},_t={key:0},Pt=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs text-dark"},null,-1),It={class:"ms-auto text-end"},Dt={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},Tt=["onClick"],Mt={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},zt={class:"d-flex flex-column"},Ft={class:"mb-3 text-sm text-dark"},Ut=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs text-dark"},null,-1),Lt={class:"ms-auto text-end"},$t={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},qt=["onClick"],Rt={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Ht={key:1,class:"list-group-item border-0 d-flex align-items-center justify-content-center p-4 mb-2 bg-warning-100 text-warning border-radius-lg"},Qt=Object(l["createElementVNode"])("small",null,"Cart is empty",-1),Jt=[Qt],Yt=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"}," account_circle ",-1),Wt=[Yt],Xt={key:0,class:"menu_item mb-2"},Zt={class:"dropdown-item border-radius-md",href:"javascript:;"},Kt={class:"py-1 d-flex"},Gt={class:"d-flex flex-column justify-content-center"},ea={class:"d-flex align-items-center"},ta=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),aa={class:"ms-1 pt-2 text-sm font-weight-normal"},la={class:"font-weight-bold"},ca={class:""},oa={key:1,class:"menu_item mb-2"},sa={class:"dropdown-item border-radius-md",href:"javascript:;"},na={class:"py-1 d-flex"},ra={class:"d-flex flex-column justify-content-center"},ia={class:"d-flex align-items-center"},da=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),ma={class:"ms-1 pt-2 text-sm font-weight-normal"},ba={class:"font-weight-bold"},pa={class:""},ua={class:"menu_item mb-2"},Oa=Object(l["createElementVNode"])("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},[Object(l["createElementVNode"])("div",{class:"py-1 d-flex"},[Object(l["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center"},[Object(l["createElementVNode"])("span",{class:"d-flex  align-items-center"},[Object(l["createElementVNode"])("i",{class:"fas fa-wallet "}),Object(l["createElementVNode"])("h6",{class:"ms-1 pt-2 text-sm font-weight-normal"},[Object(l["createElementVNode"])("span",{class:"font-weight-bold"},"Wallet")])])])])],-1),ha={class:"menu_item mb-2"},ja=Object(l["createStaticVNode"])('<div class="py-1 d-flex"><div class="d-flex flex-column justify-content-center"><span class="d-flex align-items-center"><i class="fas fa-power-off pb-0"></i><h6 class="ms-1 pt-2 text-sm font-weight-normal"><span class="font-weight-bold">Logout</span></h6></span></div></div>',1),ga=[ja],fa={class:"nav-item d-xl-none ps-3 d-flex align-items-center"},Ea=Object(l["createElementVNode"])("div",{class:"sidenav-toggler-inner"},[Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"})],-1),Va=[Ea];function Na(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("nav",Object(l["mergeProps"])({class:"shadow-none navbar navbar-main navbar-expand-lg border-radius-xl"},e.$attrs,{id:"navbarBlur","data-scroll":"true",class:e.isAbsolute?"mt-4":"mt-0"}),[Object(l["createElementVNode"])("div",ht,["super_admin"!=o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",jt,[Object(l["createElementVNode"])("h5",null,Object(l["toDisplayString"])(o.organization_name),1)])):Object(l["createCommentVNode"])("",!0),"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",gt,Et)):Object(l["createCommentVNode"])("",!0),"Profile"!=s.currentRouteName?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[o.passwordStatus?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Vt,[Object(l["createElementVNode"])("small",Nt,[xt,Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[yt]),_:1}),vt])]))],64)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mt-2 collapse navbar-collapse mt-sm-0 me-md-0 me-sm-4",e.isRTL?"px-0":"me-sm-4"]),id:"navbar"},[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pe-md-3 d-flex align-items-center",e.isRTL?"me-md-auto":"ms-md-auto"])},null,2),Object(l["createElementVNode"])("ul",kt,["staff"==o.user.role||"student"==o.user.role||"parent"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:0,class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{onClick:t[0]||(t[0]=(...e)=>s.getCartItems&&s.getCartItems(...e)),href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",o.showCart?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},At,2),Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["cart px-2 py-3 cart-dropdown dropdown-menu dropdown-menu-end me-sm-n4",o.showCart?"show":""]),"aria-labelledby":"dropdownMenuButton"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.cartItemsList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",St,[Object(l["createElementVNode"])("div",Bt,[Object(l["createElementVNode"])("h6",Ct,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item?e.shop_item.name:"")+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",_t,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Pt]),Object(l["createElementVNode"])("div",It,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Dt," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item?e.shop_item.price:0)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,Tt)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.cartItemsList,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[null!==t.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Mt,[Object(l["createElementVNode"])("div",zt,[Object(l["createElementVNode"])("h6",Ft,Object(l["toDisplayString"])(t.trip?t.trip.title:"")+" (Trip)",1),Ut]),Object(l["createElementVNode"])("div",Lt,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",$t," £"+Object(l["toDisplayString"])(s.formattedPrice(t.trip?t.trip.budget:0)),1),Object(l["createElementVNode"])("i",{onClick:a=>(s.removeItemFromCart(t.id),e.updateRemovedItem("trip")),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,qt)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),o.cartItemsList.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Rt,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>s.navCheckout()),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 trips-btn w-100 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Checkout ")])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ht,Jt))],2)],2)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",o.showMenu?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:t[2]||(t[2]=e=>o.showProfile=!o.showProfile)},Wt,2),Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["px-2 py-3 dropdown-menu dropdown-menu-end me-sm-n4",o.showMenu?"show":""]),"aria-labelledby":"dropdownMenuButton",onClick:t[4]||(t[4]=e=>o.showMenu=!o.showMenu)},["staff"!==o.user.role&&"student"!==o.user.role&&"parent"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Xt,[Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("a",Zt,[Object(l["createElementVNode"])("div",Kt,[Object(l["createElementVNode"])("div",Gt,[Object(l["createElementVNode"])("span",ea,[ta,Object(l["createElementVNode"])("h6",aa,[Object(l["createElementVNode"])("span",la,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(o.user.first_name)+" "+Object(l["toDisplayString"])(o.user.last_name)+" ",1),Object(l["createElementVNode"])("small",ca,"("+Object(l["toDisplayString"])(s.userRole)+")",1)])])])])])])]),_:1})])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",oa,[Object(l["createElementVNode"])("a",sa,[Object(l["createElementVNode"])("div",na,[Object(l["createElementVNode"])("div",ra,[Object(l["createElementVNode"])("span",ia,[da,Object(l["createElementVNode"])("h6",ma,[Object(l["createElementVNode"])("span",ba,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(o.user.first_name)+" "+Object(l["toDisplayString"])(o.user.last_name)+" ",1),Object(l["createElementVNode"])("small",pa,"("+Object(l["toDisplayString"])(s.userRole)+")",1)])])])])])])])),Object(l["createElementVNode"])("li",ua,[Object(l["createVNode"])(n,{to:{name:"balance"}},{default:Object(l["withCtx"])(()=>[Oa]),_:1})]),Object(l["createElementVNode"])("li",ha,[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=(...e)=>s.signOut&&s.signOut(...e)),class:"dropdown-item border-radius-md",href:"javascript:;"},ga)])],2)],2),Object(l["createElementVNode"])("li",fa,[Object(l["createElementVNode"])("a",{href:"#",onClick:t[5]||(t[5]=(...e)=>s.toggleSidebar&&s.toggleSidebar(...e)),class:"p-0 nav-link text-body lh-1",id:"iconNavbarSidenav"},Va)])])],2)])],16)}var xa={name:"navbar",data(){return{branding_settings:{primary_color:"",secondary_color:"",logo:""},passwordStatus:"",cartItemsList:"",user:"",organization_name:"",showCart:!1,showMenu:!1,showProfile:!1}},props:["minNav","color"],created(){this.minNav},mounted(){this.getUser(),this.isUpdatedRecently(),this.getOrganizationName(),this.getUserRolePermissions(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},methods:{...Object(Qe["b"])(["updateRemovedItem","updatePermissions"]),...Object(Qe["d"])(["navbarMinimize","toggleConfigurator"]),toggleSidebar(){this.navbarMinimize()},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},async getUserPermissions(){let e=this.user.id;try{let t=await et.get("getUserPermissions/"+e);t=t.data,this.formattPermissions(t)}catch(t){console.log(t)}},async getUserRolePermissions(){let e=this.user.id;try{let t=await et.get("getUserRolePermissions/"+e);t=t.data,this.restructurePermissions(t)}catch(t){console.log(t)}},formattPermissions(e){let t=[];e.filter(e=>{t.push(e.permission_name)}),this.updatePermissions(t)},restructurePermissions(e){let t=[];e.filter(e=>{t.push(e.name)}),this.updatePermissions(t)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},isUpdatedRecently(){let e=localStorage.getItem("user");e=JSON.parse(e);const t=new Date(e.created_at),a=new Date(e.updated_at);this.passwordStatus=a>t},async signOut(){try{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("primary_color"),localStorage.removeItem("secondary_color"),localStorage.removeItem("logo"),this.$router.push({name:"SignIn"}),await et.post("/logout",localStorage.getItem("token"))}catch(e){console.log(e)}},async getOrganizationName(){if("super_admin"==this.user.role)return;let e={user_id:this.user.id,role:this.user.role};try{const t=await et.post("/getOrganizationName",e);this.organization_name=t.data.organization_name}catch(t){console.log(t)}},async getCartItems(){if(this.showCart=!this.showCart,0!=this.showCart)try{const e=await et.get("/getUserCartItems");this.cartItemsList=e.data}catch(e){console.log(e)}},async removeItemFromCart(e){this.showCart=!0;let t={item_id:e};try{await et.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItemsList.findIndex(t=>t.id===e);this.cartItemsList.splice(t,1),this.snackbarMsg("Item Removed Successfully")},navCheckout(){this.$router.push({name:"cart-checkout"})}},components:{},computed:{...Object(Qe["e"])(["isRTL","isAbsolute"]),currentRouteName(){return this.$route.name},userRole(){return"super_admin"==this.user.role?"Admin":"school_user"==this.user.role?"School":this.user.role}}};a("ccd2");const ya=We()(xa,[["render",Na]]);var va=ya;const ka={class:"py-3 footer"};function wa(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("footer",ka)}var Aa={name:"app-footer"};const Sa=We()(Aa,[["render",wa]]);var Ba=Sa,Ca={name:"App",components:{Sidenav:rt,Configurator:Ot,Navbar:va,AppFooter:Ba},methods:{...Object(Qe["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object(Qe["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};const _a=We()(Ca,[["render",o]]);var Pa=_a,Ia=a("c0e2"),Da=a.n(Ia);const Ta={user:localStorage.getItem("user"),accessToken:localStorage.getItem("token"),userPermissions:[]},Ma={getPermissions(e){return e.userPermissions}},za={setPermissions(e,t){e.userPermissions=t}},Fa={updatePermissions({commit:e},t){e("setPermissions",t)}};var Ua={state:Ta,mutations:za,actions:Fa,getters:Ma};const La={organizationList:null},$a={getOrganizationList(e){return e.organizationList}},qa={setOrganizationList(e,t){e.organizationList=t}},Ra={updateOrganizationList({commit:e},t){e("setOrganizationList",t)}};var Ha={state:La,mutations:qa,actions:Ra,getters:$a};const Qa={removedItem:null},Ja={getRemovedItem(e){return e.removedItem}},Ya={setRemovedItem(e,t){e.removedItem=t}},Wa={updateRemovedItem({commit:e},t){e("setRemovedItem",t)}};var Xa={state:Qa,mutations:Ya,actions:Wa,getters:Ja};const Za={brandingSetting:{primary_color:"null"!=localStorage.getItem("primary_color")?localStorage.getItem("primary_color"):"#010A21",secondary_color:"null"!=localStorage.getItem("secondary_color")?localStorage.getItem("secondary_color"):"#010A21",logo:localStorage.getItem("logo")}},Ka={getBrandingSetting(e){return e.brandingSetting}},Ga={setBrandingSetting(e,t){e.brandingSetting=t}},el={updateBrandingSetting({commit:e},t){e("setBrandingSetting",t)}};var tl={state:Za,mutations:Ga,actions:el,getters:Ka},al=Object(Qe["a"])({modules:{auth:Ua,organization:Ha,cart:Xa,settings:tl},state:{hideConfigButton:!1,isPinned:!0,showConfig:!1,sidebarType:"bg-gradient-dark",isRTL:!1,color:"success",isNavFixed:!1,isAbsolute:!1,showNavs:!0,showSidenav:!0,showNavbar:!0,showFooter:!0,showMain:!0,isDarkMode:!1,navbarFixed:"position-sticky blur shadow-blur left-auto top-1 z-index-sticky px-0 mx-4",absolute:"position-absolute px-4 mx-0 w-100 z-index-2"},mutations:{toggleConfigurator(e){e.showConfig=!e.showConfig},navbarMinimize(e){const t=document.querySelector(".g-sidenav-show");t.classList.contains("g-sidenav-pinned")?(t.classList.remove("g-sidenav-pinned"),e.isPinned=!0):(t.classList.add("g-sidenav-pinned"),e.isPinned=!1)},navbarFixed(e){!1===e.isNavFixed?e.isNavFixed=!0:e.isNavFixed=!1},toggleEveryDisplay(e){e.showNavbar=!e.showNavbar,e.showSidenav=!e.showSidenav,e.showFooter=!e.showFooter},toggleHideConfig(e){e.hideConfigButton=!e.hideConfigButton},color(e,t){e.color=t}},actions:{setColor({commit:e},t){e("color",t)},test({commit:e},t){alert("TestHello"),e("color",t)}},getters:{}}),ll=a("6c02"),cl=a("bbe0"),ol=a.n(cl);const sl={class:"py-4 container-fluid"},nl={class:"row mb-4"},rl={class:"col-lg-12 position-relative z-index-2"},il={class:"row"},dl={class:"col-lg-3 col-md-6 col-sm-6"},ml={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},bl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},pl={class:"col-lg-3 col-md-6 col-sm-6"},ul={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Ol={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},hl={key:2,class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},jl={key:0,class:"row mt-4"},gl=Object(l["createElementVNode"])("div",{class:"col-lg-12 col-md-12 col-sm-12"},[Object(l["createElementVNode"])("img",{src:ol.a,style:{width:"100%",height:"95%","border-radius":"20px","box-shadow":"0px 0px 2px #CCCCCC"}})],-1),fl=[gl];function El(e,t,a,c,o,s){var n,r,i;const d=Object(l["resolveComponent"])("mini-statistics-card"),m=Object(l["resolveComponent"])("UserShop");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",sl,[Object(l["createElementVNode"])("div",nl,[Object(l["createElementVNode"])("div",rl,[Object(l["createElementVNode"])("div",il,["student"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createElementVNode"])("div",dl,[Object(l["createVNode"])(d,{title:{text:"Current Balance",value:"£"+s.formattedPrice(null!==(n=o.studentHistory.current_balance)&&void 0!==n?n:0)},detail:"Current Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title"])]),Object(l["createElementVNode"])("div",ml,[Object(l["createVNode"])(d,{title:{text:"Monthly Transactions",value:"£"+s.formattedPrice(null!==(r=o.studentHistory.last_month)&&void 0!==r?r:0)},detail:"This Month Transactions",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",bl,[Object(l["createVNode"])(d,{title:{text:"Weekly Transactions",value:"£"+s.formattedPrice(null!==(i=o.studentHistory.last_week)&&void 0!==i?i:0)},detail:"This Week Transactions",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"parent"!==o.user.role&&"student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("div",pl,[Object(l["createVNode"])(d,{title:{text:s.isAdmin?"Total Figures":"Total Balance",value:"£"+s.formattedPrice(o.userBallance?o.userBallance:0)},detail:s.isAdmin?"Total Figures":"Total Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title","detail"])]),Object(l["createElementVNode"])("div",ul,[Object(l["createVNode"])(d,{title:{text:"Total Sites",value:o.totalSchool?o.totalSchool:0},detail:"Total Sites",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",Ol,[Object(l["createVNode"])(d,{title:{text:"Total Students",value:o.totalStudents?o.totalStudents:0},detail:"Total Students",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"parent"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hl,[Object(l["createVNode"])(d,{title:{text:"Transactions",value:"£"+s.formattedPrice(o.totalTransactions?o.totalTransactions:0)},detail:"Total Transactions",icon:{name:"weekend",color:"text-white",background:"info"}},null,8,["title"])])):Object(l["createCommentVNode"])("",!0)]),"student"!==o.user.role&&"staff"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",jl,fl)):Object(l["createCommentVNode"])("",!0),"staff"==o.user.role||"student"==o.user.role?(Object(l["openBlock"])(),Object(l["createBlock"])(m,{key:1})):Object(l["createCommentVNode"])("",!0)])])])}const Vl={class:"card-header p-3 pt-2"},Nl={class:"text-sm mb-0 text-capitalize"},xl={class:"mb-0"},yl=Object(l["createElementVNode"])("hr",{class:"dark horizontal my-0"},null,-1),vl=["innerHTML"];function kl(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["card mb-2",a.directionReverse?o.reverseDirection:""])},[Object(l["createElementVNode"])("div",Vl,[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["icon icon-lg icon-shape shadow text-center border-radius-xl mt-n4 position-absolute",`bg-gradient-${a.icon.background} shadow-${a.icon.background}`])},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(["material-icons opacity-10",a.icon.color]),"aria-hidden":"true"},Object(l["toDisplayString"])(a.icon.name),3)],2),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pt-1",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",Nl,Object(l["toDisplayString"])(a.title.text),1),Object(l["createElementVNode"])("h4",xl,Object(l["toDisplayString"])(a.title.value),1)],2)]),yl,Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["card-footer p-3",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",{class:"mb-0",innerHTML:a.detail},null,8,vl)],2)],2)}var wl={name:"MiniStatisticsCard",data(){return{reverseDirection:"flex-row-reverse justify-content-between"}},props:{title:{type:Object,required:!0,text:String,value:[Number,String]},detail:{type:String,default:""},icon:{type:Object,required:!0,name:String,color:String,background:String,default:()=>({color:"text-white",background:"success"})},directionReverse:{type:Boolean,default:!1}},computed:{...Object(Qe["e"])(["isRTL"])}};const Al=We()(wl,[["render",kl]]);var Sl=Al,Bl=a("b8de"),Cl=a.n(Bl),_l=a("37f7"),Pl=a.n(_l),Il=a("b107"),Dl=a.n(Il),Tl=a("2e77"),Ml=a.n(Tl),zl=a("3dfe"),Fl=a.n(zl),Ul=a("281f"),Ll=a.n(Ul),$l=a("350a"),ql=a.n($l),Rl=a("8202"),Hl=a.n(Rl),Ql=a("c7c0"),Jl=a.n(Ql),Yl=a("f35e"),Wl=a.n(Yl);const Xl={class:" py-4"},Zl={class:"row"},Kl={class:"col-12"},Gl={class:"card my-4"},ec={class:"card-body px-0 pb-2"},tc={class:"table-responsive p-0"},ac=Object(l["createElementVNode"])("span",{class:""},[Object(l["createElementVNode"])("h6",{class:"ms-4 text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"ms-4 page-description"},[Object(l["createTextVNode"])(" In the Shop Item section, you can search and add items to your cart. Once you're ready, you can proceed to checkout and complete your purchase by "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("making a payment. This seamless process ensures a smooth shopping experience from selection to payment. ")])],-1),lc={class:"filter-container ms-4 mb-2"},cc={style:{display:"flex"}},oc=["value"],sc={class:"card-body pt-1 p-3"},nc={class:"container-fluid mt-1"},rc={class:"col-md-8"},ic={class:"d-flex flex-column"},dc={class:"d-flex"},mc={class:"mb-3 text-sm"},bc={key:0,style:{"font-size":"12px !important"},class:" text-sm ms-2"},pc=["src"],uc={class:"trip-description mt-2"},Oc={class:"col-md-4"},hc={class:"ms-auto text-start"},jc={class:"me-3 trip-dates"},gc=Object(l["createElementVNode"])("br",null,null,-1),fc={class:"d-flex  align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},Ec=Object(l["createElementVNode"])("br",null,null,-1),Vc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},Nc={key:0,class:"text-success"},xc={key:1,class:"text-danger"},yc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},vc=Object(l["createElementVNode"])("span",{class:"text-warning"},"Active Payment Plan",-1),kc=Object(l["createTextVNode"])(" ( "),wc={key:0},Ac={key:1},Sc={key:2},Bc=Object(l["createTextVNode"])(" ) "),Cc=Object(l["createElementVNode"])("br",null,null,-1),_c=Object(l["createElementVNode"])("br",null,null,-1),Pc=Object(l["createElementVNode"])("br",null,null,-1),Ic=Object(l["createElementVNode"])("br",null,null,-1),Dc={key:0,class:"mt-0"},Tc=["onClick"],Mc=Object(l["createElementVNode"])("br",null,null,-1),zc={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Fc=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),Uc=[Fc],Lc={class:"row"},$c={class:"col-md-12 col-lg-12"},qc={class:"pagination-container"},Rc={class:"entries-dropdown"},Hc=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),Qc=["value"],Jc={class:"pagination-wrapper"},Yc={class:"pagination"},Wc=["onClick"];function Xc(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Xl,[Object(l["createElementVNode"])("div",Zl,[Object(l["createElementVNode"])("div",Kl,[Object(l["createElementVNode"])("div",Gl,[Object(l["createElementVNode"])("div",ec,[Object(l["createElementVNode"])("div",tc,[Object(l["createElementVNode"])("div",null,[ac,Object(l["createElementVNode"])("div",lc,[Object(l["createElementVNode"])("span",cc,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,oc))),128))],544),[[l["vModelSelect"],o.filterBy]])])])]),Object(l["createElementVNode"])("div",sc,[Object(l["createElementVNode"])("div",nc,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",rc,[Object(l["createElementVNode"])("div",ic,[Object(l["createElementVNode"])("span",dc,[Object(l["createElementVNode"])("h6",mc,Object(l["toDisplayString"])(t.name),1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bc,"("+Object(l["toDisplayString"])(t.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,8,pc),Object(l["createElementVNode"])("small",uc,Object(l["toDisplayString"])(t.detail),1)])]),Object(l["createElementVNode"])("div",Oc,[Object(l["createElementVNode"])("div",hc,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",jc,"From "+Object(l["toDisplayString"])(s.formatDateString(t.valid_from))+" To "+Object(l["toDisplayString"])(s.formatDateString(t.valid_to)),1)]),gc,Object(l["createElementVNode"])("div",fc," Price - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price)),1),Ec,Object(l["createElementVNode"])("div",Vc,[t.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Nc,"Available")):Object(l["createCommentVNode"])("",!0),0==t.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",xc,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",yc,[vc,kc,"full_payment"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",wc,"Full Payment")):Object(l["createCommentVNode"])("",!0),"installments"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Ac,"Installments")):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Sc,"Installments And Deposit")):Object(l["createCommentVNode"])("",!0),Bc,Cc,"installments"==t.payment_plan||"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[Object(l["createElementVNode"])("span",null,"Total Installments: "+Object(l["toDisplayString"])(t.payment.total_installments),1),_c,Object(l["createElementVNode"])("span",null,"Amount Per Installment: £"+Object(l["toDisplayString"])(s.formattedAmount(t.payment.amount_per_installment)),1),Pc,Object(l["createElementVNode"])("span",null,"Initial Deposit: £"+Object(l["toDisplayString"])(s.formattedAmount(t.payment.initial_deposit_installments?t.payment.initial_deposit_installments:0)),1)],64)):Object(l["createCommentVNode"])("",!0)]),Ic,t.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Dc,[Object(l["createElementVNode"])("button",{onClick:e=>s.addToCart(t.id),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,Tc)])):Object(l["createCommentVNode"])("",!0),Mc])])]))),128))],64))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",zc,Uc)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Lc,[Object(l["createElementVNode"])("div",$c,[Object(l["createElementVNode"])("div",qc,[Object(l["createElementVNode"])("div",Rc,[Hc,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.itemsPerPage=e),onChange:t[5]||(t[5]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,Qc))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",Jc,[Object(l["createElementVNode"])("ul",Yc,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,Wc)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var Zc=a("3d20"),Kc=a.n(Zc),Gc=a("c1df"),eo=a.n(Gc),to={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop"),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Name",allFields:["Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await et.post("/getShopItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await et.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await et.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await et.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=eo()(e),a=t.format("DD MMMM YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("5c86");const ao=We()(to,[["render",Xc]]);var lo=ao,co={name:"dashboard-default",data(){return{studentHistory:"",totalTransactions:"",totalSchool:"",totalStudents:"",user:"",userBallance:"",logoXD:Cl.a,team1:ql.a,team2:Hl.a,team3:Jl.a,team4:Wl.a,logoAtlassian:Pl.a,logoSlack:Dl.a,logoSpotify:Ml.a,logoJira:Fl.a,logoInvision:Ll.a}},mounted(){this.getUser(),this.getStudentBalance(),this.getTotalSchools(),this.getTotalStudents(),this.getTotalTransactions(),this.getStudentHistory()},computed:{isAdmin(){return"staff"!==this.user.role||"student"!==this.user.role}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getStudentBalance(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e;try{let t=await et.get("/getStudentBalance/"+e.id);t=t.data,this.userBallance=t}catch(t){console.log(t)}},async getStudentHistory(){if("student"==this.user.role)try{let e=await et.get("/studentDashboard");e=e.data,this.studentHistory=e}catch(e){console.log(e)}},async getTotalSchools(){try{let e=await et.get("/totalSchools");e=e.data,this.totalSchool=e}catch(e){console.log(e)}},async getTotalStudents(){try{let e=await et.get("/getTotalStudents");e=e.data,this.totalStudents=e}catch(e){console.log(e)}},async getTotalTransactions(){try{let e=await et.get("/getTotalTransactions");e=e.data,this.totalTransactions=e}catch(e){console.log(e)}}},components:{MiniStatisticsCard:Sl,UserShop:lo}};const oo=We()(co,[["render",El]]);var so=oo,no=a("40bd"),ro=a.n(no);const io={class:"container-fluid"},mo=Object(l["createElementVNode"])("div",{class:"page-header min-height-300 border-radius-xl mt-4",style:{"background-image":"url('https://images.unsplash.com/photo-1531512073830-ba890ca4eba2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80')"}},[Object(l["createElementVNode"])("span",{class:"mask bg-gradient-success opacity-6"})],-1),bo={class:"card card-body mx-3 mx-md-4 mt-n6"},po={class:"row gx-4"},uo=Object(l["createElementVNode"])("div",{class:"col-auto"},[Object(l["createElementVNode"])("div",{class:"avatar avatar-xl position-relative"},[Object(l["createElementVNode"])("img",{src:ro.a,alt:"profile_image",class:"shadow-sm w-100 border-radius-lg"})])],-1),Oo={class:"col-auto my-auto"},ho={class:"h-100"},jo={class:"mb-1"},go={class:"d-flex"},fo={class:"mb-0 font-weight-normal text-sm"},Eo={class:"d-flex"},Vo={class:"text-xs"},No=Object(l["createElementVNode"])("div",{class:"mx-auto mt-3 col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0"},[Object(l["createElementVNode"])("div",{class:"nav-wrapper position-relative end-0"})],-1),xo={class:"row"},yo={class:"mt-3 row"},vo={class:"col-12 col-md-6 col-xl-6 position-relative"},ko={class:"card card-plain h-100"},wo=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Profile Settings")],-1),Ao={class:"p-3 card-body"},So={class:"list-group"},Bo={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Co={class:"col-md-5 mx-auto bg-white new-pass p-2"},_o=Object(l["createElementVNode"])("label",null,"First Name",-1),Po={key:0,class:"err-txt text-danger error-txt"},Io=Object(l["createElementVNode"])("br",null,null,-1),Do=Object(l["createElementVNode"])("label",null,"Last Name",-1),To={key:1,class:"err-txt text-danger error-txt"},Mo=Object(l["createElementVNode"])("br",null,null,-1),zo=Object(l["createElementVNode"])("label",null,"Email",-1),Fo={key:2,class:"err-txt text-danger error-txt"},Uo=Object(l["createElementVNode"])("br",null,null,-1),Lo=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),$o={class:"mt-4 col-12 col-xl-6 mt-xl-0"},qo={class:"card card-plain h-100"},Ro=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Change Password")],-1),Ho={class:"p-3 card-body"},Qo={class:"list-group"},Jo={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Yo={class:"col-md-5 mx-auto bg-white new-pass p-2"},Wo=Object(l["createElementVNode"])("label",null,"Old Password",-1),Xo={key:0,class:"err-txt text-danger error-txt"},Zo=Object(l["createElementVNode"])("br",null,null,-1),Ko=Object(l["createElementVNode"])("label",null,"New Password",-1),Go={key:1,class:"err-txt text-danger error-txt"},es=Object(l["createElementVNode"])("br",null,null,-1),ts=Object(l["createElementVNode"])("label",null,"Confirm New Password",-1),as={key:2,class:"err-txt text-danger error-txt"},ls=Object(l["createElementVNode"])("br",null,null,-1);function cs(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",io,[mo,Object(l["createElementVNode"])("div",bo,[Object(l["createElementVNode"])("div",po,[uo,Object(l["createElementVNode"])("div",Oo,[Object(l["createElementVNode"])("div",ho,[Object(l["createElementVNode"])("h5",jo,Object(l["toDisplayString"])(o.user.first_name)+" "+Object(l["toDisplayString"])(o.user.last_name),1),Object(l["createElementVNode"])("span",go,[Object(l["createElementVNode"])("p",fo,"Role: "+Object(l["toDisplayString"])(o.user.role),1)]),Object(l["createElementVNode"])("span",Eo,[Object(l["createElementVNode"])("small",Vo,"Email: "+Object(l["toDisplayString"])(o.user.email?o.user.email:"-"),1)])])]),No]),Object(l["createElementVNode"])("div",xo,[Object(l["createElementVNode"])("div",yo,[Object(l["createElementVNode"])("div",vo,[Object(l["createElementVNode"])("div",ko,[wo,Object(l["createElementVNode"])("div",Ao,[Object(l["createElementVNode"])("ul",So,[Object(l["createElementVNode"])("li",Bo,[Object(l["createElementVNode"])("div",Co,[_o,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.updateData.first_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.updateData.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Po,"First Name is required")):Object(l["createCommentVNode"])("",!0),Io,Do,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.updateData.last_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.updateData.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",To,"Last Name is required")):Object(l["createCommentVNode"])("",!0),Mo,zo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.updateData.email=e),id:"card-holder-name",type:"email",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.updateData.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Fo,"Email is required")):Object(l["createCommentVNode"])("",!0),Uo,Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>s.updateSettings()),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),Lo]),Object(l["createElementVNode"])("div",$o,[Object(l["createElementVNode"])("div",qo,[Ro,Object(l["createElementVNode"])("div",Ho,[Object(l["createElementVNode"])("ul",Qo,[Object(l["createElementVNode"])("li",Jo,[Object(l["createElementVNode"])("div",Yo,[Wo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.changePassword.old_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.changePassword.old_password]]),""!==o.passwordValidationForm&&""!==o.passwordValidationForm["old_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xo,"Old Password is required")):Object(l["createCommentVNode"])("",!0),Zo,Ko,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.changePassword.new_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.changePassword.new_password]]),""!==o.passwordValidationForm&&""!==o.passwordValidationForm["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Go,"New Password is required")):Object(l["createCommentVNode"])("",!0),es,ts,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.changePassword.new_password_confirmation=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.changePassword.new_password_confirmation]]),""!==o.passwordValidationForm&&""!==o.passwordValidationForm["new_password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",as,"Confirm Password is required")):Object(l["createCommentVNode"])("",!0),ls,Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>s.changeUserPassword&&s.changeUserPassword(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Save ")])])])])])])])])])])}var os=a("2d39"),ss=a.n(os),ns=a("af17"),rs=a.n(ns),is=a("6150"),ds=a.n(is),ms=a("b34a"),bs=a.n(ms),ps=a("4753"),us=a.n(ps),Os=a("532f"),hs=a.n(Os);function js(){var e=document.querySelectorAll(".nav-pills");function t(){e.forEach((function(e,t){var l=document.createElement("div"),c=e.querySelector("li:first-child .nav-link"),o=c.cloneNode();o.innerHTML="-",l.classList.add("moving-tab","position-absolute","nav-link"),l.appendChild(o),e.appendChild(l);e.getElementsByTagName("li").length;l.style.padding="0px",l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px, 0px, 0px)",l.style.transition=".5s ease",e.onmouseover=function(t){let c=a(t),o=c.closest("li");if(o){let t=Array.from(o.closest("ul").children),a=t.indexOf(o)+1;e.querySelector("li:nth-child("+a+") .nav-link").onclick=function(){l=e.querySelector(".moving-tab");let c=0;if(e.classList.contains("flex-column")){for(var s=1;s<=t.indexOf(o);s++)c+=e.querySelector("li:nth-child("+s+")").offsetHeight;l.style.transform="translate3d(0px,"+c+"px, 0px)",l.style.height=e.querySelector("li:nth-child("+s+")").offsetHeight}else{for(s=1;s<=t.indexOf(o);s++)c+=e.querySelector("li:nth-child("+s+")").offsetWidth;l.style.transform="translate3d("+c+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+a+")").offsetWidth+"px"}}}}}))}function a(e){return e=e||window.event,e.target||e.srcElement}setTimeout((function(){t()}),100),window.addEventListener("resize",(function(t){e.forEach((function(e,t){e.querySelector(".moving-tab").remove();var a=document.createElement("div"),l=e.querySelector(".nav-link.active").cloneNode();l.innerHTML="-",a.classList.add("moving-tab","position-absolute","nav-link"),a.appendChild(l),e.appendChild(a),a.style.padding="0px",a.style.transition=".5s ease";let c=e.querySelector(".nav-link.active").parentElement;if(c){let t=Array.from(c.closest("ul").children),l=t.indexOf(c)+1,s=0;if(e.classList.contains("flex-column")){for(var o=1;o<=t.indexOf(c);o++)s+=e.querySelector("li:nth-child("+o+")").offsetHeight;a.style.transform="translate3d(0px,"+s+"px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px",a.style.height=e.querySelector("li:nth-child("+o+")").offsetHeight}else{for(o=1;o<=t.indexOf(c);o++)s+=e.querySelector("li:nth-child("+o+")").offsetWidth;a.style.transform="translate3d("+s+"px, 0px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px"}}})),window.innerWidth<991?e.forEach((function(e,t){if(!e.classList.contains("flex-column")){e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),o=(c.indexOf(t),0);for(var a=1;a<=c.indexOf(t);a++)o+=e.querySelector("li:nth-child("+a+")").offsetHeight;var l=document.querySelector(".moving-tab");l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px,"+o+"px, 0px)"}})):e.forEach((function(e,t){if(e.classList.contains("on-resize")){e.classList.remove("flex-column","on-resize"),e.classList.add("flex-row");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),o=c.indexOf(t)+1,s=0;for(var a=1;a<=c.indexOf(t);a++)s+=e.querySelector("li:nth-child("+a+")").offsetWidth;var l=document.querySelector(".moving-tab");l.style.transform="translate3d("+s+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+o+")").offsetWidth+"px"}}))})),window.innerWidth<991&&e.forEach((function(e,t){e.classList.contains("flex-row")&&(e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize"))}))}var gs=a("4989"),fs=a.n(gs);function Es(){var e=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));e.map((function(e){return new fs.a.Tooltip(e)}))}var Vs=a("0644"),Ns=a.n(Vs),xs={name:"profile-overview",data(){return{updateData:"",passwordValidationForm:"",formValidation:"",user:"",changePassword:{old_password:"",new_password:"",new_password_confirmation:""},showMenu:!1,sophie:ss.a,marie:rs.a,ivana:ds.a,peterson:Wl.a,nick:Jl.a,img1:bs.a,team1:ql.a,team2:Hl.a,team3:Jl.a,team4:Wl.a,img2:us.a,img3:hs.a}},components:{},mounted(){this.$store.state.isAbsolute=!0,js(),Es(),this.getUser()},beforeUnmount(){this.$store.state.isAbsolute=!1},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,this.updateData=Ns()(this.user),"student"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||this.$router.go(-1)},async changeUserPassword(){if(this.validatePasswordForm())return;let e=localStorage.getItem("user");e=JSON.parse(e);let t={user_id:e.id,old_password:this.changePassword.old_password,new_password:this.changePassword.new_password,new_password_confirmation:this.changePassword.new_password_confirmation};if(t.new_password!=t.old_password)try{const e=await et.post("/changePassword",t);this.snackbarMsg("Password changed successfully!"),localStorage.removeItem("user"),localStorage.removeItem("token"),this.$router.push({name:"SignIn"}),console.log(e)}catch(a){console.log(a)}else this.snackbarMsg("New password can not be the same as old password!","error")},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},validateForm(){let e=!1,t="";t=Ns()(this.updateData);for(let a in this.updateData)""!==this.updateData[a]&&void 0!==this.updateData[a]||"first_name"!=a&&"last_name"!=a&&"email"!=a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async updateSettings(){if(this.validateForm())return;let e={first_name:this.updateData.first_name,last_name:this.updateData.last_name,email:this.updateData.email};try{const t=await et.post("/profileSettings",e);this.snackbarMsg("Profile Updated successfully!"),this.updateUserData(e),console.log(t)}catch(t){console.log(t)}},updateUserData(e){this.user.first_name=e.first_name,this.user.last_name=e.last_name,this.user.email=e.email;let t=localStorage.getItem("user"),a=JSON.parse(t);a.first_name=e.first_name,a.last_name=e.last_name,a.email=e.email,localStorage.setItem("user",JSON.stringify(a)),window.location.reload()},validatePasswordForm(){let e=!1,t="";t=Ns()(this.changePassword);for(let a in this.changePassword)""===this.changePassword[a]||void 0===this.changePassword[a]?(t[a]="is required",e=!0):t[a]="";return this.passwordValidationForm=t,e}}};a("40fa");const ys=We()(xs,[["render",cs]]);var vs=ys,ks=a("26be"),ws=a.n(ks);Object(l["pushScopeId"])("data-v-24d9741b");const As=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),Ss={class:"container my-auto"},Bs={class:"row"},Cs={class:"col-lg-4 col-md-8 col-12 mx-auto"},_s={class:"card z-index-0 fadeIn3 fadeInBottom"},Ps=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),Is={class:"card-body"},Ds={key:0,class:"text-danger"},Ts={class:"mb-3"},Ms={key:0,class:"text-danger error-txt"},zs={class:"d-flex"},Fs=["type"],Us={key:1,class:"text-danger error-txt"},Ls={class:"text-center"},$s=Object(l["createTextVNode"])("Sign in"),qs={class:"mt-4 text-sm text-success text-center"},Rs=Object(l["createTextVNode"])("Forgot Password ?"),Hs=Object(l["createElementVNode"])("br",null,null,-1),Qs=Object(l["createElementVNode"])("br",null,null,-1),Js=Object(l["createElementVNode"])("img",{class:"me-2",style:{width:"12px",height:"12px"},src:ws.a},null,-1),Ys=Object(l["createElementVNode"])("small",{class:"mslogin"},"SignIn with Microsoft",-1),Ws=[Js,Ys];function Xs(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[As,Object(l["createElementVNode"])("div",Ss,[Object(l["createElementVNode"])("div",Bs,[Object(l["createElementVNode"])("div",Cs,[Object(l["createElementVNode"])("div",_s,[Ps,Object(l["createElementVNode"])("div",Is,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ds,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Ts,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],s.credentials.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ms,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zs,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.password=e),placeholder:"Password",type:s.showPassword?"text":"password",label:"Password",name:"password"},null,8,Fs),[[l["vModelDynamic"],s.credentials.password]]),Object(l["createElementVNode"])("span",{onClick:t[2]||(t[2]=(...e)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...e)),class:"eye-icon",style:{"margin-left":"-25px","margin-top":"7px"}},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(s.showPassword?"fas fa-eye":"fas fa-eye-slash")},null,2)])]),""!==s.formValidation&&""!==s.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Us,"Password is required")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Ls,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.signIn,style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[$s]),_:1},8,["onClick"])]),Object(l["createElementVNode"])("p",qs,[Object(l["createVNode"])(d,{to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[Rs]),_:1}),Hs,Qs,Object(l["createElementVNode"])("span",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin-link mt-3"},Ws)])])])])])])],4)],64)}Object(l["popScopeId"])();var Zs=a("1b7b");function Ks(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("nav",{class:Object(l["normalizeClass"])(["top-0 navbar navbar-expand-lg position-absolute z-index-3",a.isBlur?a.isBlur:"shadow-none my-2 navbar-transparent w-100"])},null,2)])}var Gs=a("190c"),en=a.n(Gs),tn=a("52d6"),an=a.n(tn),ln={name:"navbar",data(){return{downArrWhite:en.a,downArrBlack:an.a}},props:{btnBackground:String,isBlur:String,darkMode:{type:Boolean,default:!1}},computed:{darkModes(){return{"text-dark":this.darkMode}}}};const cn=We()(ln,[["render",Ks]]);var on=cn;function sn(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{class:Object(l["normalizeClass"])(["btn mb-0",s.getClasses(a.variant,a.color,a.size,a.fullWidth,a.active)])},[Object(l["renderSlot"])(e.$slots,"default")],2)}var nn={name:"MaterialButton",props:{color:{type:String,default:"success"},size:{type:String,default:"md"},variant:{type:String,default:"fill"},fullWidth:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},methods:{getClasses:(e,t,a,l,c)=>{let o,s,n,r;return o="gradient"===e?"bg-gradient-"+t:"outline"===e?"btn-outline-"+t:"btn-"+t,s=a?"btn-"+a:null,n=l?"w-100":null,r=c?"active":null,`${o} ${s} ${n} ${r}`}}};const rn=We()(nn,[["render",sn]]);var dn=rn,mn={name:"sign-in",components:{Navbar:on,MaterialButton:dn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},async created(){this.$msalInstance=new Zs["a"](this.msalConfig)},mounted(){const e=this.$msalInstance.getAllAccounts();0!=e.length&&(this.account=e[0],this.$emitter.emit("login",this.account))},data(){return{msalConfig:{auth:{clientId:"84e7c1e4-cd74-42c8-84fe-5ba42ee2049a",authority:"https://login.microsoftonline.com/f8cdef31-a31e-4b4a-93e4-5f571e91255a"},cache:{cacheLocation:"localStorage"}},unauthorized:!1,formValidation:"",showPassword:!1,credentials:{email:"",password:""}}},methods:{...Object(Qe["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},togglePasswordVisibility(){this.showPassword=!this.showPassword},async SignOut(){await this.$msalInstance.logout({}).then(()=>{this.$emitter.emit("logout","logging out")}).catch(e=>{console.error(e)})},validateForm(){let e=!1,t="";t=Ns()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async signIn(){if(!this.validateForm())try{const e=await et.post("/login",this.credentials);let t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let l=e.data.primary_color,c=e.data.secondary_color,o=e.data.logo;localStorage.setItem("primary_color",l),localStorage.setItem("secondary_color",c),localStorage.setItem("logo",o);const s=this.$router.resolve({name:"/"}).href;window.location.href=s}catch(e){401==e.response.status&&(this.unauthorized=!0)}}}};a("98ae");const bn=We()(mn,[["render",Xs],["__scopeId","data-v-24d9741b"]]);var pn=bn;Object(l["pushScopeId"])("data-v-406525b8");const un=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),On={class:"container my-auto"},hn={class:"row"},jn={class:"col-lg-4 col-md-8 col-12 mx-auto"},gn={class:"card z-index-0 fadeIn3 fadeInBottom"},fn=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),En={class:"card-body"},Vn={key:0,class:"text-danger"},Nn={class:"mb-3"},xn={key:0,class:"text-danger error-txt"},yn={class:"mb-3"},vn={key:0,class:"text-danger error-txt"},kn={class:"text-center"},wn=Object(l["createTextVNode"])("Sign in"),An={class:"mt-4 text-sm text-success text-center"},Sn=Object(l["createTextVNode"])("Forgot Password ?"),Bn=Object(l["createElementVNode"])("br",null,null,-1),Cn=Object(l["createElementVNode"])("br",null,null,-1),_n=Object(l["createElementVNode"])("small",{class:"mslogin"},"SignIn with Microsoft",-1);function Pn(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[un,Object(l["createElementVNode"])("div",On,[Object(l["createElementVNode"])("div",hn,[Object(l["createElementVNode"])("div",jn,[Object(l["createElementVNode"])("div",gn,[fn,Object(l["createElementVNode"])("div",En,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Vn,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Nn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],s.credentials.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xn,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",yn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.password=e),placeholder:"Password",type:"password",label:"Password",name:"password"},null,512),[[l["vModelText"],s.credentials.password]]),""!==s.formValidation&&""!==s.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vn,"Password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kn,[Object(l["createVNode"])(i,{class:"my-4 mb-2",style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[wn]),_:1})]),Object(l["createElementVNode"])("p",An,[Object(l["createVNode"])(d,{to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[Sn]),_:1}),Bn,Cn,Object(l["createElementVNode"])("span",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin-link mt-3"},[Object(l["createElementVNode"])("img",{onClick:t[2]||(t[2]=(...t)=>e.MSSignIn&&e.MSSignIn(...t)),class:"me-2",style:{width:"12px",height:"12px"},src:ws.a}),_n])])])])])])])],4)],64)}Object(l["popScopeId"])();var In={name:"sign-in",components:{Navbar:on,MaterialButton:dn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},mounted(){const e=this.$route.query.code;e&&this.signIn(e)},data(){return{unauthorized:!1,formValidation:"",credentials:{email:"",password:""}}},methods:{...Object(Qe["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},async SignOut(){await this.$msalInstance.logout({}).then(()=>{this.$emitter.emit("logout","logging out")}).catch(e=>{console.error(e)})},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})},async signIn(e){try{const t=await et.post("/auth_callback",{code:e});let a=t.data?t.data.user:null,l=t.data?t.data.access_token:null;localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",l);let c=t.data.primary_color,o=t.data.secondary_color,s=t.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",o),localStorage.setItem("logo",s);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){500==t.response.status&&(this.snackbarMsg("user was not found in StudentPay Portal!"),window.location.href="https://login.microsoftonline.com/cb811789-d752-4ec2-8215-356e22c04d4f/oauth2/v2.0/logout?post_logout_redirect_uri="+encodeURIComponent("https://staging.student-pay.co.uk/sign-in"))}}}};a("c1d2");const Dn=We()(In,[["render",Pn],["__scopeId","data-v-406525b8"]]);var Tn=Dn;const Mn=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),zn={class:"container my-auto"},Fn={class:"row"},Un={class:"col-lg-4 col-md-8 col-12 mx-auto"},Ln={class:"card z-index-0 fadeIn3 fadeInBottom"},$n=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:"border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Forgot Password")])],-1),qn={class:"card-body"},Rn={key:0,class:"text-danger"},Hn={key:0,class:"text-danger error-txt"},Qn={key:1,class:"mb-3"},Jn={key:0,class:"text-danger error-txt"},Yn={class:"text-center"},Wn=Object(l["createTextVNode"])("Next"),Xn=Object(l["createElementVNode"])("p",{class:"mt-4 text-sm text-success text-center"},null,-1);function Zn(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[Mn,Object(l["createElementVNode"])("div",zn,[Object(l["createElementVNode"])("div",Fn,[Object(l["createElementVNode"])("div",Un,[Object(l["createElementVNode"])("div",Ln,[$n,Object(l["createElementVNode"])("div",qn,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Rn,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mb-3",{"mb-5 mt-5":!1===s.isOTP}])},[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],s.credentials.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Hn,"email is required")):Object(l["createCommentVNode"])("",!0)],2),s.isOTP?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Qn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.otp=e),id:"otp",placeholder:"otp",type:"otp",label:"OTP",name:"otp"},null,512),[[l["vModelText"],s.otp]]),""!==s.formValidation&&""!==s.formValidation["otp"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jn,"otp is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Yn,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.requestOtp,style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[Wn]),_:1},8,["onClick"])]),Xn])])])])])],4)],64)}var Kn={name:"sign-in",components:{Navbar:on,MaterialButton:dn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{unauthorized:!1,isOTP:!1,formValidation:"",otp:"",credentials:{email:""}}},methods:{...Object(Qe["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Ns()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async requestOtp(){if(this.isOTP)this.verifyOtp();else if(!this.validateForm())try{const e=await et.post("/forgot_password",this.credentials);this.isOTP=!0,console.log(e)}catch(e){console.log(e)}},async verifyOtp(){if(this.validateForm())return;let e={email:"",otp:""};e.email=this.credentials.email,e.otp=this.otp;try{return await et.post("/forgot_password_verify_otp",e),void this.$router.push({name:"ResetPassword",params:{email:this.credentials.email,otp:this.otp}})}catch(t){console.log(t)}}}};const Gn=We()(Kn,[["render",Zn]]);var er=Gn;const tr=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),ar={class:"container my-auto"},lr={class:"row"},cr={class:"col-lg-4 col-md-8 col-12 mx-auto"},or={class:"card z-index-0 fadeIn3 fadeInBottom"},sr=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Reset Password")])],-1),nr={class:"card-body"},rr={key:0,class:"text-danger"},ir={class:"mb-3"},dr={key:0,class:"text-danger error-txt"},mr={class:"mb-3"},br={key:0,class:"text-danger error-txt"},pr={class:"text-center"},ur=Object(l["createTextVNode"])("Reset"),Or={class:"mt-4 text-sm text-success text-center"},hr=Object(l["createElementVNode"])("small",{class:"text-success text-gradient font-weight-bold"},"Go back to ",-1),jr=Object(l["createTextVNode"])("SignIn");function gr(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[tr,Object(l["createElementVNode"])("div",ar,[Object(l["createElementVNode"])("div",lr,[Object(l["createElementVNode"])("div",cr,[Object(l["createElementVNode"])("div",or,[sr,Object(l["createElementVNode"])("div",nr,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rr,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",ir,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.new_password=e),placeholder:"password",type:"password",label:"Password",name:"pass"},null,512),[[l["vModelText"],s.credentials.new_password]]),""!==s.formValidation&&""!==s.formValidation["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dr,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",mr,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"otp","onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.new_password_confirmation=e),placeholder:"confirm password",type:"password",label:"Confirm Password",name:"password"},null,512),[[l["vModelText"],s.credentials.new_password_confirmation]]),""!==s.formValidation&&""!==s.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",br,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pr,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.setNewPassword,variant:"gradient",color:"success",fullWidth:""},{default:Object(l["withCtx"])(()=>[ur]),_:1},8,["onClick"])]),Object(l["createElementVNode"])("p",Or,[hr,Object(l["createVNode"])(d,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold",style:{"background-color":"#573078"}},{default:Object(l["withCtx"])(()=>[jr]),_:1})])])])])])])],4)],64)}var fr={components:{Navbar:on,MaterialButton:dn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{email:"",unauthorized:!1,formValidation:"",isOTP:!1,credentials:{email:"",otp:"",new_password:"",new_password_confirmation:""}}},methods:{...Object(Qe["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Ns()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async setNewPassword(){if(this.validateForm())return;this.credentials.email=this.$route.params.email,this.credentials.otp=this.$route.params.otp;let e=this.credentials;try{await et.post("/set_new_password",e),this.$router.push({name:"SignIn"})}catch(t){console.log(t)}}}};const Er=We()(fr,[["render",gr]]);var Vr=Er;const Nr={class:"bg-white"},xr=Object(l["createElementVNode"])("div",{class:"container top-0 position-sticky z-index-sticky"},[Object(l["createElementVNode"])("div",{class:"row"},[Object(l["createElementVNode"])("div",{class:"col-12"})])],-1),yr={class:"mt-0 main-content"},vr={class:"page-header min-vh-100"},kr={class:"container"},wr={class:"row"},Ar={class:"col-6 d-lg-flex d-none h-100 my-auto pe-0 ps-0 position-absolute top-0 start-0 text-center justify-content-center flex-column"},Sr={class:"col-xl-4 col-lg-5 col-md-7 d-flex flex-column ms-auto me-auto ms-lg-auto me-lg-5"},Br={class:"card card-plain"},Cr=Object(l["createElementVNode"])("div",{class:"pb-0 card-header bg-transparent mb-4"},[Object(l["createElementVNode"])("h4",{class:"font-weight-bolder"},"Sign Up"),Object(l["createElementVNode"])("p",{class:"mb-0"}," Enter your email and password to register ")],-1),_r={class:"card-body"},Pr={role:"form"},Ir={class:"mb-3"},Dr={class:"mb-3"},Tr={class:"mb-3"},Mr=Object(l["createTextVNode"])(" I agree the "),zr=Object(l["createElementVNode"])("a",{href:"../../../pages/privacy.html",class:"text-dark font-weight-bolder"},"Terms and Conditions",-1),Fr={class:"text-center"},Ur=Object(l["createTextVNode"])("Sign Up"),Lr={class:"px-1 pt-0 text-center card-footer px-lg-2"},$r={class:"mx-auto mb-4 text-sm"},qr=Object(l["createTextVNode"])(" Don't have an account? "),Rr=Object(l["createTextVNode"])("Sign In");function Hr(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("material-input"),i=Object(l["resolveComponent"])("material-checkbox"),d=Object(l["resolveComponent"])("material-button"),m=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Nr,[xr,Object(l["createElementVNode"])("main",yr,[Object(l["createElementVNode"])("section",null,[Object(l["createElementVNode"])("div",vr,[Object(l["createElementVNode"])("div",kr,[Object(l["createElementVNode"])("div",wr,[Object(l["createElementVNode"])("div",Ar,[Object(l["createElementVNode"])("div",{class:"position-relative h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center",width:"100%"}])},null,4)]),Object(l["createElementVNode"])("div",Sr,[Object(l["createElementVNode"])("div",Br,[Cr,Object(l["createElementVNode"])("div",_r,[Object(l["createElementVNode"])("form",Pr,[Object(l["createElementVNode"])("div",Ir,[Object(l["createVNode"])(r,{id:"name",type:"text",label:"Name",name:"name",size:"lg"})]),Object(l["createElementVNode"])("div",Dr,[Object(l["createVNode"])(r,{id:"email",type:"email",label:"Email",name:"email",size:"lg"})]),Object(l["createElementVNode"])("div",Tr,[Object(l["createVNode"])(r,{id:"password",type:"password",label:"Password",name:"password",size:"lg"})]),Object(l["createVNode"])(i,{id:"flexCheckDefault",class:"font-weight-light",checked:""},{default:Object(l["withCtx"])(()=>[Mr,zr]),_:1}),Object(l["createElementVNode"])("div",Fr,[Object(l["createVNode"])(d,{class:"mt-4",variant:"gradient",color:"success",fullWidth:"",size:"lg"},{default:Object(l["withCtx"])(()=>[Ur]),_:1})])])]),Object(l["createElementVNode"])("div",Lr,[Object(l["createElementVNode"])("p",$r,[qr,Object(l["createVNode"])(m,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold"},{default:Object(l["withCtx"])(()=>[Rr]),_:1})])])])])])])])])])])}const Qr=["id","type","name","value","placeholder","isRequired","disabled"];function Jr(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["input-group",`input-group-${a.variant} ${s.getStatus(a.error,a.success)}`])},[Object(l["createElementVNode"])("label",{class:Object(l["normalizeClass"])("static"===a.variant?"":"form-label")},Object(l["toDisplayString"])(a.label),3),Object(l["createElementVNode"])("input",{id:a.id,type:a.type,class:Object(l["normalizeClass"])(["form-control",s.getClasses(a.size)]),name:a.name,value:a.value,placeholder:a.placeholder,isRequired:a.isRequired,disabled:a.disabled},null,10,Qr)],2)}function Yr(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}if(0!=document.querySelectorAll(".input-group").length){var Wr=document.querySelectorAll("input.form-control");Wr.forEach(e=>Yr(e,{onfocus:"focused(this)",onfocusout:"defocused(this)"}))}function Xr(){for(var e=document.querySelectorAll("input"),t=0;t<e.length;t++)e[t].hasAttribute("value")&&e[t].parentElement.classList.add("is-filled"),e[t].addEventListener("focus",(function(e){this.parentElement.classList.add("is-focused")}),!1),e[t].onkeyup=function(e){""!=this.value?this.parentElement.classList.add("is-filled"):this.parentElement.classList.remove("is-filled")},e[t].addEventListener("focusout",(function(e){""!=this.value&&this.parentElement.classList.add("is-filled"),this.parentElement.classList.remove("is-focused")}),!1)}var Zr={name:"MaterialInput",props:{variant:{type:String,default:"outline"},label:{type:String,default:""},size:{type:String,default:"default"},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:""},id:{type:String,required:!0},value:{type:String,default:""},placeholder:{type:String,default:""},type:{type:String,default:"text"},isRequired:{type:Boolean,default:!1}},mounted(){Xr()},methods:{getClasses:e=>{let t;return t=e?"form-control-"+e:null,t},getStatus:(e,t)=>{let a;return a=t?"is-valid":e?"is-invalid":null,a}}};const Kr=We()(Zr,[["render",Jr]]);var Gr=Kr;const ei={class:"form-check p-0"},ti=["id","name","checked"],ai=["for"];function li(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ei,[Object(l["createElementVNode"])("input",{id:a.id,class:"form-check-input",type:"checkbox",name:a.name,checked:a.checked},null,8,ti),Object(l["createElementVNode"])("label",{for:a.id,class:"custom-control-label"},[Object(l["renderSlot"])(e.$slots,"default")],8,ai)])}var ci={name:"MaterialCheckbox",props:{name:{type:String,default:""},id:{type:String,default:""},checked:Boolean}};const oi=We()(ci,[["render",li]]);var si=oi;const ni=document.getElementsByTagName("body")[0];var ri={name:"sign-up",components:{MaterialInput:Gr,MaterialCheckbox:si,MaterialButton:dn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig(),ni.classList.remove("bg-gray-100")},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig(),ni.classList.add("bg-gray-100")},methods:{...Object(Qe["d"])(["toggleEveryDisplay","toggleHideConfig"])}};const ii=We()(ri,[["render",Hr]]);var di=ii;const mi={class:"container-fluid"},bi={class:"row"},pi={class:"col-12"},ui={class:"card"},Oi={class:"d-flex justify-content-between border-radius-lg pt-4"},hi=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"SITES",-1),ji=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),gi=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:" me-4 page-description"},[Object(l["createTextVNode"])(" In the Sites section, you can manage school by adding, editing, or deleting them. Additionally, you can track and update "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" the number of teachers and students associated with each site. This functionality ensures accurate and up-to-date information about each site. ")])],-1),fi={class:"card-body px-0 pb-2"},Ei={class:"table-responsive p-0"},Vi={class:"table align-items-center mb-0"},Ni=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Staff "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),xi={key:0},yi=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),vi=[yi],ki={class:"align-middle text-center text-sm"},wi={class:"text-xs font-weight-bold mb-0"},Ai={class:"d-flex"},Si={class:"text-xs font-weight-bold mb-0"},Bi=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),Ci={class:"text-xs font-weight-bold mb-0"},_i={class:"text-xs font-weight-bold mb-0"},Pi={class:"align-middle text-center"},Ii={class:"text-secondary text-xs font-weight-bold"},Di={class:"align-middle text-center"},Ti={class:"text-secondary text-xs font-weight-bold"},Mi={class:"align-middle text-center"},zi={class:"text-secondary text-xs font-weight-bold"},Fi={class:"align-middle text-center text-sm"},Ui={class:"badge badge-sm bg-gradient-success"},Li={class:"align-middle text-center"},$i=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),qi=["onClick"];function Ri(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",mi,[Object(l["createElementVNode"])("div",bi,[Object(l["createElementVNode"])("div",pi,[Object(l["createElementVNode"])("div",ui,[Object(l["createElementVNode"])("div",Oi,[hi,s.userPermissions.create_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-school"}},{default:Object(l["withCtx"])(()=>[ji]),_:1})):Object(l["createCommentVNode"])("",!0)]),gi,Object(l["createElementVNode"])("div",fi,[Object(l["createElementVNode"])("div",Ei,[Object(l["createElementVNode"])("table",Vi,[Ni,Object(l["createElementVNode"])("tbody",null,[0===o.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",xi,vi)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",ki,[Object(l["createElementVNode"])("p",wi,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",Ai,[Object(l["createElementVNode"])("p",Si,Object(l["toDisplayString"])(e.title),1),Bi])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Ci,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",_i,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",Pi,[Object(l["createElementVNode"])("span",Ii,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",Di,[Object(l["createElementVNode"])("span",Ti,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",Mi,[Object(l["createElementVNode"])("span",zi,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",Fi,[Object(l["createElementVNode"])("span",Ui,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",Li,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[$i]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,qi)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var Hi={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{allSchools:"",schools:6,user:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await et.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await et.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("0b3c");const Qi=We()(Hi,[["render",Ri]]);var Ji=Qi;const Yi={class:"container-fluid"},Wi={class:"row"},Xi={class:"col-12"},Zi={class:"card"},Ki=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"ARCHIVED SITES")],-1),Gi=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:" me-4 page-description"},[Object(l["createTextVNode"])(" In the Archived Sites section, you can view and restore archived school locations. The details displayed include the student count and teacher count "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" for each archived site. This allows you to manage and review historical site data effectively. ")])],-1),ed={class:"card-body px-0 pb-2"},td=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),ad=Object(l["createTextVNode"])(" Bulk Restore "),ld=[td,ad],cd={class:"table-responsive p-0"},od={class:"table align-items-center mb-0"},sd={class:""},nd={class:"form-check",style:{"margin-left":"-20px"}},rd=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),id=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID ",-1),dd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name ",-1),md=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),bd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country ",-1),pd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation ",-1),ud=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Teachers ",-1),Od=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students ",-1),hd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),jd={key:0},gd=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),fd=[gd],Ed={class:"align-middle text-center text-sm"},Vd={class:"form-check"},Nd=["checked","onChange"],xd=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),yd={class:"align-middle text-center text-sm"},vd={class:"text-xs font-weight-bold mb-0"},kd={class:"d-flex"},wd={class:"text-xs font-weight-bold mb-0"},Ad=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),Sd={class:"text-xs font-weight-bold mb-0"},Bd={class:"text-xs font-weight-bold mb-0"},Cd={class:"align-middle text-center"},_d={class:"text-secondary text-xs font-weight-bold"},Pd={class:"align-middle text-center"},Id={class:"text-secondary text-xs font-weight-bold"},Dd={class:"align-middle text-center"},Td={class:"text-secondary text-xs font-weight-bold"},Md={class:"align-middle text-center text-sm"},zd={class:"badge badge-sm bg-gradient-success"};function Fd(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Yi,[Object(l["createElementVNode"])("div",Wi,[Object(l["createElementVNode"])("div",Xi,[Object(l["createElementVNode"])("div",Zi,[Ki,Gi,Object(l["createElementVNode"])("div",ed,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[0]||(t[0]=e=>s.confirmAction("restore"))},ld),Object(l["createElementVNode"])("div",cd,[Object(l["createElementVNode"])("table",od,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",sd,[Object(l["createElementVNode"])("div",nd,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[1]||(t[1]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),rd])]),id,dd,md,bd,pd,ud,Od,hd])]),Object(l["createElementVNode"])("tbody",null,[0===o.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",jd,fd)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Ed,[Object(l["createElementVNode"])("div",Vd,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.id),onChange:t=>s.selectRecord(e.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,Nd),xd])]),Object(l["createElementVNode"])("td",yd,[Object(l["createElementVNode"])("p",vd,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",kd,[Object(l["createElementVNode"])("p",wd,Object(l["toDisplayString"])(e.title),1),Ad])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Sd,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Bd,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",Cd,[Object(l["createElementVNode"])("span",_d,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",Pd,[Object(l["createElementVNode"])("span",Id,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",Dd,[Object(l["createElementVNode"])("span",Td,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",Md,[Object(l["createElementVNode"])("span",zd,Object(l["toDisplayString"])(e.status),1)])]))),128))])])])])])])])])}var Ud={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getAllSchools(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{selectall:!1,selectedRecords:[],allSchools:"",schools:6,user:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{confirmAction(e){Kc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&"restore"==e&&this.bulkRestore()})},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await et.post("/bulkRestoreSchools",e);this.snackbarMsg(t.data.message),this.getAllSchools()}else this.snackbarMsg("Error: data not selected")},selectAll(){this.selectedRecords=[],this.allSchools.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/archivedSchools";"organization_admin"==this.user.role&&(e="/archivedSchools/"+this.user.id);const t=await et.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await et.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("ca92");const Ld=We()(Ud,[["render",Fd]]);var $d=Ld;Object(l["pushScopeId"])("data-v-df89067c");const qd={class:"container-fluid py-4"},Rd={class:"row"},Hd={class:"col-12"},Qd={class:"card my-4"},Jd={class:"d-flex justify-content-between  border-radius-lg pt-4 "},Yd=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Site",-1),Wd=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 px-4 py-2 border-radius-lg"}," Back ",-1),Xd={class:"card-body px-0 pb-2"},Zd={class:"table-responsive p-0"},Kd={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Gd={key:0,class:"mb-3 change-pass-alert"},em=Object(l["createElementVNode"])("br",null,null,-1),tm={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},am={class:"form-bg container p-4 ms-2"},lm={class:"card card-plain"},cm={class:"card-body"},om={role:"form"},sm={class:"mb-1"},nm=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),rm={key:0,class:"text-danger error-txt"},im={class:"mb-1"},dm=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),mm={key:0,class:"text-danger error-txt"},bm={class:"mb-1"},pm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),um={key:0,class:"text-danger error-txt"},Om={class:"mb-1"},hm=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),jm={key:0,class:"text-danger error-txt"},gm={class:"mb-1"},fm=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),Em={key:0,class:"text-danger error-txt"},Vm={key:0,class:"mb-1"},Nm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),xm=Object(l["createElementVNode"])("br",null,null,-1),ym=["value"],vm={key:0,class:"text-danger error-txt"},km={class:"mb-1"},wm=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),Am=Object(l["createElementVNode"])("br",null,null,-1),Sm=["value"],Bm={key:0,class:"text-danger error-txt"},Cm={class:"mb-1"},_m=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),Pm={key:0,class:"text-danger error-txt"},Im={class:"mb-1"},Dm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),Tm={key:0,class:"text-danger error-txt"},Mm={class:"mb-1"},zm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),Fm=Object(l["createElementVNode"])("br",null,null,-1),Um=["value"],Lm={key:0,class:"text-danger error-txt"},$m={class:"mt-4 d-flex justify-content-center"};function qm(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qd,[Object(l["createElementVNode"])("div",Rd,[Object(l["createElementVNode"])("div",Hd,[Object(l["createElementVNode"])("div",Qd,[Object(l["createElementVNode"])("div",Jd,[Yd,Object(l["createVNode"])(n,{to:{name:"list-schools"}},{default:Object(l["withCtx"])(()=>[Wd]),_:1})]),Object(l["createElementVNode"])("div",Xd,[Object(l["createElementVNode"])("div",Zd,[Object(l["createElementVNode"])("div",Kd,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Gd,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),em]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",tm,[Object(l["createElementVNode"])("div",am,[Object(l["createElementVNode"])("div",lm,[Object(l["createElementVNode"])("div",cm,[Object(l["createElementVNode"])("form",om,[Object(l["createElementVNode"])("div",sm,[nm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],o.newSchool.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rm,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",im,[dm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],o.newSchool.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mm,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",bm,[pm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newSchool.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",um,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Om,[hm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],o.newSchool.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jm,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",gm,[fm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newSchool.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Em,"Address is required")):Object(l["createCommentVNode"])("",!0)]),"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Vm,[Nm,xm,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,ym))),128))],512),[[l["vModelSelect"],o.newSchool.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vm,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",km,[wm,Am,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Sm))),128))],512),[[l["vModelSelect"],o.newSchool.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Bm,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Cm,[_m,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>o.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newSchool.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Pm,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Im,[Dm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>o.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],o.newSchool.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Tm,"ZIP code is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Mm,[zm,Fm,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Um))),128))],512),[[l["vModelSelect"],o.newSchool.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Lm,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$m,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>s.saveNewSchool&&s.saveNewSchool(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var Rm={name:"",components:{},mounted(){this.getUser(),this.getOrganizations(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_site");let e=!1,t="";t=Ns()(this.newSchool);for(let a in this.newSchool)""!==this.newSchool[a]&&void 0!==this.newSchool[a]||"organization_id"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewSchool(){if(!this.validateForm())try{let e="/createSchool";"organization_admin"==this.user.role&&(e="/createSchool/"+this.user.id),await et.post(e,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Saved Successfuly"),this.isError=!1}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}},async getOrganizations(){try{const e=await et.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("e243");const Hm=We()(Rm,[["render",qm],["__scopeId","data-v-df89067c"]]);var Qm=Hm;Object(l["pushScopeId"])("data-v-8fc9cd78");const Jm={class:"container-fluid py-4"},Ym={class:"row"},Wm={class:"col-12"},Xm={class:"card my-4"},Zm={class:"d-flex justify-content-between border-radius-lg pt-4"},Km=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Site",-1),Gm=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),eb={class:"card-body px-0 pb-2"},tb={class:"table-responsive p-0"},ab={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},lb={key:0,class:"mb-3 change-pass-alert"},cb=Object(l["createElementVNode"])("br",null,null,-1),ob={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},sb={class:"form-bg container p-4 ms-2"},nb={class:"card card-plain"},rb={class:"card-body"},ib={role:"form"},db={class:"mb-1"},mb=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),bb={key:0,class:"text-danger error-txt"},pb={class:"mb-1"},ub=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),Ob={key:0,class:"text-danger error-txt"},hb={class:"mb-1"},jb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),gb={key:0,class:"text-danger error-txt"},fb={class:"mb-1"},Eb=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),Vb={key:0,class:"text-danger error-txt"},Nb={class:"mb-1"},xb=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),yb={key:0,class:"text-danger error-txt"},vb={key:0,class:"mb-1"},kb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),wb=Object(l["createElementVNode"])("br",null,null,-1),Ab=["value"],Sb={key:0,class:"text-danger error-txt"},Bb={class:"mb-1"},Cb=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),_b=Object(l["createElementVNode"])("br",null,null,-1),Pb=["value"],Ib={key:0,class:"text-danger error-txt"},Db={class:"mb-1"},Tb=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),Mb={key:0,class:"text-danger error-txt"},zb={class:"mb-1"},Fb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),Ub={key:0,class:"text-danger error-txt"},Lb={class:"mb-1"},$b=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),qb=Object(l["createElementVNode"])("br",null,null,-1),Rb=["value"],Hb={key:0,class:"text-danger error-txt"},Qb={class:"mt-4 d-flex justify-content-center"};function Jb(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Jm,[Object(l["createElementVNode"])("div",Ym,[Object(l["createElementVNode"])("div",Wm,[Object(l["createElementVNode"])("div",Xm,[Object(l["createElementVNode"])("div",Zm,[Km,Object(l["createVNode"])(n,{to:{name:"list-schools"}},{default:Object(l["withCtx"])(()=>[Gm]),_:1})]),Object(l["createElementVNode"])("div",eb,[Object(l["createElementVNode"])("div",tb,[Object(l["createElementVNode"])("div",ab,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lb,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),cb]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",ob,[Object(l["createElementVNode"])("div",sb,[Object(l["createElementVNode"])("div",nb,[Object(l["createElementVNode"])("div",rb,[Object(l["createElementVNode"])("form",ib,[Object(l["createElementVNode"])("div",db,[mb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],o.newSchool.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bb,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pb,[ub,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],o.newSchool.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ob,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hb,[jb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newSchool.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gb,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",fb,[Eb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],o.newSchool.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Vb,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Nb,[xb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newSchool.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yb,"Address is required")):Object(l["createCommentVNode"])("",!0)]),"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",vb,[kb,wb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Ab))),128))],512),[[l["vModelSelect"],o.newSchool.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Sb,"Organization is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Bb,[Cb,_b,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Pb))),128))],512),[[l["vModelSelect"],o.newSchool.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ib,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Db,[Tb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>o.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newSchool.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Mb,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zb,[Fb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>o.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],o.newSchool.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ub,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Lb,[$b,qb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Rb))),128))],512),[[l["vModelSelect"],o.newSchool.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Hb,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Qb,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>s.updateData&&s.updateData(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn ms-3 text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var Yb={name:"",components:{},mounted(){this.getUser(),this.editSchool(),this.getOrganizations(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],schoolData:"",newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_site");let e=!1,t="";t=Ns()(this.newSchool);for(let a in this.newSchool)""===this.newSchool[a]||void 0===this.newSchool[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editSchool(){let e=this.$route.params.id;try{const t=await et.get("/editSchool/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newSchool.organization_id=t.organization_id,this.newSchool.website=t.website,this.newSchool.title=t.title,this.newSchool.website=t.website,this.newSchool.email=t.email,this.newSchool.phone=t.phone,this.newSchool.country=t.country,this.newSchool.city=t.city,this.newSchool.state=t.state,this.newSchool.zip=t.zip,this.newSchool.address=t.address,this.newSchool.status=t.status,this.newSchool.description=t.description)},async updateData(){if(this.validateForm())return;let e=this.$route.params.id;try{let t="/updateSchool/"+e;"organization_admin"==this.user.role&&(t="/updateSchool/"+e+"/"+this.user.id),await et.put(t,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getOrganizations(){try{const e=await et.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("9c6f");const Wb=We()(Yb,[["render",Jb],["__scopeId","data-v-8fc9cd78"]]);var Xb=Wb;Object(l["pushScopeId"])("data-v-103a6f84");const Zb={class:"row"},Kb={class:"col-12 col-md-6 col-xl-6 position-relative"},Gb={class:"card card-plain h-100"},ep=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Branding Settings")],-1),tp={class:"p-3 card-body"},ap={class:"list-group"},lp={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},cp={class:"col-md-5 mx-auto bg-white new-pass p-2"},op=Object(l["createElementVNode"])("label",null,"Primary Color",-1),sp=Object(l["createElementVNode"])("br",null,null,-1),np=Object(l["createElementVNode"])("label",null,"Secondary Color",-1),rp=Object(l["createElementVNode"])("br",null,null,-1),ip=Object(l["createElementVNode"])("label",null,"Logo",-1),dp=["src"],mp=Object(l["createElementVNode"])("br",null,null,-1),bp=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),pp={class:"col-12 col-md-5 col-xl-6 position-relative"},up={class:"card card-plain h-100"},Op=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Finance Coordinator Email")],-1),hp={class:"p-3 card-body"},jp={class:"list-group"},gp={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},fp={class:"col-md-5 mx-auto bg-white new-pass p-2"},Ep=Object(l["createElementVNode"])("label",null,"Email",-1),Vp=Object(l["createElementVNode"])("br",null,null,-1);function Np(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",Zb,[Object(l["createElementVNode"])("div",Kb,[Object(l["createElementVNode"])("div",Gb,[ep,Object(l["createElementVNode"])("div",tp,[Object(l["createElementVNode"])("ul",ap,[Object(l["createElementVNode"])("li",lp,[Object(l["createElementVNode"])("div",cp,[op,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.branding.primaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.branding.primaryColor]]),sp,np,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.branding.SecondaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.branding.SecondaryColor]]),rp,ip,Object(l["createElementVNode"])("input",{onChange:t[2]||(t[2]=(...e)=>s.onFileChange&&s.onFileChange(...e)),id:"card-holder-name",type:"file",class:"bg-white w-100  mb-2"},null,32),o.imageUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:o.imageUrl,height:"60",width:"60",alt:"Selected Image"},null,8,dp)):Object(l["createCommentVNode"])("",!0),mp,Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>s.updateBranding()),style:{"font-size":"12px","background-color":"#573078"},class:"btn p-2 mb-3 mt-2 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),bp]),Object(l["createElementVNode"])("div",pp,[Object(l["createElementVNode"])("div",up,[Op,Object(l["createElementVNode"])("div",hp,[Object(l["createElementVNode"])("ul",jp,[Object(l["createElementVNode"])("li",gp,[Object(l["createElementVNode"])("div",fp,[Ep,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.finance_coordinator_email=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.finance_coordinator_email]]),Vp,Object(l["createElementVNode"])("button",{onClick:t[5]||(t[5]=e=>s.updateFinanceCoordiantorEmail()),style:{"font-size":"12px","background-color":"#573078"},class:"btn save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Save ")])])])])])])])])}Object(l["popScopeId"])();var xp={mounted(){this.getSettings(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"])},data(){return{dataLoaded:!1,userCards:"",imageUrl:null,selectedFile:null,finance_coordinator_email:null,branding:{primaryColor:"",SecondaryColor:"",logo:""}}},methods:{addCard(){let e=this.$route.params.id;this.$router.push({name:"card-school",params:{id:e}})},onFileChange(e){const t=e.target.files[0];t&&(this.imageUrl=URL.createObjectURL(t),this.selectedFile=t)},async getSettings(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e);try{let e=await et.post("/getSettings",t);this.branding.primaryColor=Ns()(e.data.primary_color),this.branding.SecondaryColor=Ns()(e.data.secondary_color),this.imageUrl=this.$env_vars.BASE_URL+e.data.logo,this.finance_coordinator_email=e.data.finance_coordinator_email}catch(a){console.log(a)}},async updateBranding(){let e=this.$route.params.id;const t=new FormData;t.append("logo",this.selectedFile),t.append("primary_color",this.branding.primaryColor),t.append("secondary_color",this.branding.SecondaryColor),t.append("school_id",e);try{await et.post("/storebranding",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async updateFinanceCoordiantorEmail(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e),t.append("finance_coordinator_email",this.finance_coordinator_email);try{await et.post("/updateFinanceCoordiantorEmail",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t,type:"school"};try{const e=await et.post("/getPaymentMethods",a);this.userCards=e.data.data,this.dataLoaded=!0}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await et.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})}}};a("756a");const yp=We()(xp,[["render",Np],["__scopeId","data-v-103a6f84"]]);var vp=yp;const kp={class:"card"},wp=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),Ap={class:"card-body"},Sp=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2"></div></div>',3),Bp={class:"row d-flex justify-content-center"};function Cp(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",kp,[wp,Object(l["createElementVNode"])("div",Ap,[Sp,Object(l["createElementVNode"])("div",Bp,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>s.submitPaymentMethod&&s.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"btn me-3 w-20 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var _p={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.$globalHelper.buttonColor()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),o=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),o.parentNode.insertBefore(c,o)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=this.$route.params.id,a={card_token:e,school_id:t};try{await et.post("/createSchoolCard",a),this.$router.push({name:"settings-school",params:{id:t}})}catch(l){console.log(l),this.snackbarMsg("Something Went Wrong")}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("1504");const Pp=We()(_p,[["render",Cp]]);var Ip=Pp;const Dp={class:"container-fluid"},Tp={class:"row"},Mp={class:"col-12"},zp={class:"card px-3"},Fp={class:"d-flex justify-content-between  border-radius-lg pt-4"},Up=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STUDENTS",-1),Lp=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-2 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),$p=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee student accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each student. ")])],-1),qp={class:"filter-container"},Rp={class:"row"},Hp={class:"col-6"},Qp={style:{display:"flex"}},Jp=["value"],Yp={class:"col-12 col-md-3 col-sm-6",style:{"padding-top":"10px"}},Wp=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),Xp=Object(l["createTextVNode"])(" Export To XLS "),Zp=[Wp,Xp],Kp={class:"col-12 col-md-3 col-sm-6",style:{"padding-top":"10px"}},Gp=Object(l["createElementVNode"])("i",{class:"fas fa-credit-card payment-icon me-1"},null,-1),eu=Object(l["createTextVNode"])(" Bulk Topup "),tu=[Gp,eu],au={class:"card-body px-0 pb-2"},lu={class:"table-responsive p-0 student-table"},cu={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"0px !important"}},ou={class:"thead"},su={class:"pe-5"},nu={class:"form-check",style:{"margin-left":"0px !important"}},ru=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),iu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),du=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),mu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),bu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),pu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," FSM ",-1),uu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Balance ",-1),Ou={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},hu={key:1,class:"text-center text-uppercase text-xxs font-weight-bolder"},ju=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),gu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),fu={key:0},Eu=Object(l["createElementVNode"])("td",{colspan:"11",class:"text-center"}," No data available. ",-1),Vu=[Eu],Nu={class:"text-sm"},xu={class:"form-check",style:{"margin-left":"17px !important"}},yu=["checked","onChange"],vu=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),ku={class:"align-middle text-center text-sm"},wu={class:"text-xs font-weight-bold mb-0"},Au={class:"text-xs font-weight-bold mb-0"},Su={class:"text-xs font-weight-bold mb-0"},Bu={class:"text-xs mb-0",style:{"font-size":"8px"}},Cu={class:"align-middle text-center"},_u={class:"text-secondary text-xs font-weight-bold"},Pu={class:"align-middle text-center"},Iu={class:"align-middle text-center"},Du={class:"text-secondary text-xs font-weight-bold"},Tu={key:0,class:"align-middle text-center"},Mu=Object(l["createElementVNode"])("i",{class:"fas fa-donate fs-5 me-2"},null,-1),zu={key:1,class:"align-middle text-center"},Fu=["onClick"],Uu={class:"align-middle text-center text-sm"},Lu={class:"badge badge-sm bg-gradient-success"},$u={class:"align-middle text-center"},qu=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),Ru=["onClick"],Hu={class:"row"},Qu={class:"col-md-12 col-lg-12"},Ju={class:"pagination-container"},Yu={class:"entries-dropdown"},Wu=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),Xu=["value"],Zu={class:"pagination-wrapper"},Ku={class:"pagination"},Gu=["onClick"];function eO(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("BulkTopup");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Dp,[Object(l["createElementVNode"])("div",Tp,[Object(l["createElementVNode"])("div",Mp,[Object(l["createElementVNode"])("div",zp,[Object(l["createElementVNode"])("div",Fp,[Up,s.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-student"}},{default:Object(l["withCtx"])(()=>[Lp]),_:1})):Object(l["createCommentVNode"])("",!0)]),$p,Object(l["createElementVNode"])("div",null,[Object(l["createVNode"])(r,{show:o.showModal,task:e.task,onClose:t[0]||(t[0]=e=>o.showModal=!1),onUpdateTask:s.updateAmount},null,8,["show","task","onUpdateTask"]),Object(l["createElementVNode"])("div",qp,[Object(l["createElementVNode"])("div",Rp,[Object(l["createElementVNode"])("div",Hp,[Object(l["createElementVNode"])("span",Qp,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"ms-2 input-box filter-box",onKeyup:t[1]||(t[1]=(...e)=>s.filterStudents&&s.filterStudents(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[3]||(t[3]=(...e)=>s.filterStudents&&s.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[4]||(t[4]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Jp))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",Yp,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.exportTableToXLS())},Zp)]),Object(l["createElementVNode"])("div",Kp,[s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.showModal=!0)},tu)):Object(l["createCommentVNode"])("",!0)])])])]),Object(l["createElementVNode"])("div",au,[Object(l["createElementVNode"])("div",lu,[Object(l["createElementVNode"])("table",cu,[Object(l["createElementVNode"])("thead",ou,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",su,[Object(l["createElementVNode"])("div",nu,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),ru])]),iu,du,mu,bu,pu,uu,s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",Ou," Wallet ")):Object(l["createCommentVNode"])("",!0),s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",hu," Topup ")):Object(l["createCommentVNode"])("",!0),ju,gu])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",fu,Vu)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Nu,[Object(l["createElementVNode"])("div",xu,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.user.id),onChange:t=>s.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,yu),vu])]),Object(l["createElementVNode"])("td",ku,[Object(l["createElementVNode"])("p",wu,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Au,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Su,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",Bu,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",Cu,[Object(l["createElementVNode"])("span",_u,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",Pu,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["text-secondary text-xs font-weight-bold",null===e.fsm_amount?"text-danger":"text-success"])},Object(l["toDisplayString"])(null!==e.fsm_amount?"£"+s.formattedPrice(e.fsm_amount):"No FSM"),3)]),Object(l["createElementVNode"])("td",Iu,[Object(l["createElementVNode"])("span",Du,"£"+Object(l["toDisplayString"])(s.formattedPrice(e.user.balance?e.user.balance.ballance:0)),1)]),s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",Tu,[Object(l["createVNode"])(n,{to:{name:"balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[Mu]),_:2},1032,["to"])])):Object(l["createCommentVNode"])("",!0),s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",zu,[Object(l["createElementVNode"])("i",{onClick:t=>s.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,Fu)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",Uu,[Object(l["createElementVNode"])("span",Lu,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",$u,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-student",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[qu]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,Ru)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",Hu,[Object(l["createElementVNode"])("div",Qu,[Object(l["createElementVNode"])("div",Ju,[Object(l["createElementVNode"])("div",Yu,[Wu,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,Xu))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",Zu,[Object(l["createElementVNode"])("ul",Ku,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,Gu)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])}Object(l["pushScopeId"])("data-v-450a1304");const tO={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},aO={class:"modal-dialog modal-dialog-centered"},lO={class:"modal-content"},cO={class:"modal-header"},oO=Object(l["createElementVNode"])("h5",{class:"h5 modal-title"},"Bulk Topup",-1),sO=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),nO=[sO],rO={class:"pt-4 modal-body"},iO=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),dO={class:"mb-4 input-group"},mO=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),bO={key:0,class:"alert alert-success"},pO={class:"text-end"};function uO(e,t,a,c,o,s){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",tO,[Object(l["createElementVNode"])("div",aO,[Object(l["createElementVNode"])("div",lO,[Object(l["createElementVNode"])("div",cO,[oO,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e)),"aria-label":"Close"},nO)]),Object(l["createElementVNode"])("div",rO,[iO,Object(l["createElementVNode"])("div",dO,[mO,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>s.formattedBalance=e),class:"form-control",placeholder:"Topup amount",type:"text"},null,512),[[l["vModelText"],s.formattedBalance]])]),o.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bO,Object(l["toDisplayString"])(o.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",pO,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>s.saveChanges&&s.saveChanges(...e)),class:"m-1 btn btn-primary"}," Topup "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var OO={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},mounted(){this.$globalHelper.buttonColor()},computed:{formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},data(){return{addedBalance:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},saveChanges(){this.$emit("update-task",this.addedBalance),this.closeModal()}}};a("0215");const hO=We()(OO,[["render",uO],["__scopeId","data-v-450a1304"]]);var jO=hO,gO=a("25ca"),fO={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStudents(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_student"),this.$globalHelper.buttonColor()},components:{BulkTopup:jO},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Name",seachString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"students_table.xlsx")},async updateAmount(e){this.topUpAmount=e;let t=[];this.selectedRecords.filter(e=>{e.value&&t.push(e.id)});let a={topup_amount:this.topUpAmount,students:t};if(t.length&&null!=this.topUpAmount)try{const e=await et.post("/bulkTopUp",a);this.snackbarMsg(e.data.message),this.getAllStudents()}catch(l){console.log(l)}else this.$snackbar.add({type:"error",text:"Please select the students and enter amount!",background:"white"})},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e={type:this.filterBy,value:this.seachString,status:"active"};try{const t=await et.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await et.post("getAllStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await et.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("80d2");const EO=We()(fO,[["render",eO]]);var VO=EO;const NO={class:"container-fluid"},xO={class:"row"},yO={class:"col-12"},vO={class:"card px-3"},kO=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-2"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED-STUDENTS"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Every archived student can be found in this table. Here, you can manage archived student accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),wO={class:"card-body px-0 pb-2"},AO={class:"filter-container mb-1",style:{"margin-top":"-11px"}},SO={class:"row",style:{width:"100%"}},BO={class:"col-4"},CO={style:{display:"flex"}},_O=["value"],PO={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"10px"}},IO=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon"},null,-1),DO=Object(l["createTextVNode"])(" Export To XLS "),TO=[IO,DO],MO={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"10px"}},zO=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon"},null,-1),FO=Object(l["createTextVNode"])(" Bulk Restore "),UO=[zO,FO],LO={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"10px"}},$O=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon"},null,-1),qO=Object(l["createTextVNode"])(" Bulk Delete "),RO=[$O,qO],HO={class:"table-responsive p-0 student-table"},QO={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"0px !important"}},JO={class:""},YO={class:"form-check",style:{"margin-left":"-20px"}},WO=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),XO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),ZO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),KO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),GO=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),eh=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),th={key:0},ah=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),lh=[ah],ch={class:"align-middle text-center text-sm"},oh={class:"form-check"},sh=["checked","onChange"],nh=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),rh={class:"align-middle text-center text-sm"},ih={class:"text-xs font-weight-bold mb-0"},dh={class:"text-xs font-weight-bold mb-0"},mh={class:"text-xs font-weight-bold mb-0"},bh={class:"text-xs mb-0",style:{"font-size":"8px"}},ph={class:"align-middle text-center"},uh={class:"text-secondary text-xs font-weight-bold"},Oh={class:"align-middle text-center text-sm"},hh={class:"badge badge-sm bg-gradient-success"},jh={class:"row"},gh={class:"col-md-12 col-lg-12"},fh={class:"pagination-container"},Eh={class:"entries-dropdown"},Vh=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),Nh=["value"],xh={class:"pagination-wrapper"},yh={class:"pagination"},vh=["onClick"];function kh(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",NO,[Object(l["createElementVNode"])("div",xO,[Object(l["createElementVNode"])("div",yO,[Object(l["createElementVNode"])("div",vO,[kO,Object(l["createElementVNode"])("div",wO,[Object(l["createElementVNode"])("div",AO,[Object(l["createElementVNode"])("div",SO,[Object(l["createElementVNode"])("div",BO,[Object(l["createElementVNode"])("span",CO,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"ms-2 input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterStudents&&s.filterStudents(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterStudents&&s.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,_O))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",PO,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},TO)]),Object(l["createElementVNode"])("div",MO,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.confirmAction("restore"))},UO)]),Object(l["createElementVNode"])("div",LO,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.confirmAction("delete"))},RO)):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",HO,[Object(l["createElementVNode"])("table",QO,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",JO,[Object(l["createElementVNode"])("div",YO,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),WO])]),XO,ZO,KO,GO,eh])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",th,lh)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",ch,[Object(l["createElementVNode"])("div",oh,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.user.id),onChange:t=>s.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,sh),nh])]),Object(l["createElementVNode"])("td",rh,[Object(l["createElementVNode"])("p",ih,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",dh,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",mh,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",bh,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",ph,[Object(l["createElementVNode"])("span",uh,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",Oh,[Object(l["createElementVNode"])("span",hh,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",jh,[Object(l["createElementVNode"])("div",gh,[Object(l["createElementVNode"])("div",fh,[Object(l["createElementVNode"])("div",Eh,[Vh,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,Nh))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",xh,[Object(l["createElementVNode"])("ul",yh,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,vh)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])}var wh={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStudents(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_student")},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,selectall:!1,selectedRecords:[],filterBy:"Name",seachString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"archived_students.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await et.post("/bulkDeleteStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await et.post("/bulkRestoreStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){Kc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await et.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await et.post("archivedStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await et.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("2adb");const Ah=We()(wh,[["render",kh]]);var Sh=Ah;Object(l["pushScopeId"])("data-v-0d7f592b");const Bh={class:"container-fluid py-4"},Ch={class:"row"},_h={class:"col-12"},Ph={class:"card my-4"},Ih={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},Dh=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Student",-1),Th=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),Mh={class:"card-body px-0 pb-2"},zh={class:"table-responsive p-0"},Fh={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Uh={key:0,class:"mb-3 change-pass-alert"},Lh=Object(l["createElementVNode"])("br",null,null,-1),$h={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},qh={class:"form-bg container p-4"},Rh=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),Hh={class:"card card-plain"},Qh={class:"card-body"},Jh={role:"form"},Yh={class:"mb-1"},Wh=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Xh={key:0,class:"text-danger error-txt"},Zh={class:"mb-1"},Kh=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Gh={key:0,class:"text-danger error-txt"},ej={class:"mb-1"},tj=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),aj={key:0,class:"text-danger error-txt"},lj={class:"mb-1"},cj=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),oj={key:0,class:"text-danger error-txt"},sj={class:"mb-1"},nj=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),rj={key:0,class:"text-danger error-txt"},ij={class:"mb-1"},dj=Object(l["createElementVNode"])("label",{class:"input-label",for:"date_of_birth"},"Date Of Birth",-1),mj={class:"mb-1"},bj=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),pj=Object(l["createElementVNode"])("br",null,null,-1),uj=["value"],Oj={key:0,class:"text-danger error-txt"},hj={class:"mb-1"},jj=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),gj=Object(l["createElementVNode"])("br",null,null,-1),fj=["value"],Ej={key:0,class:"text-danger error-txt"},Vj={class:"mb-1"},Nj=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance",-1),xj={class:"mb-1"},yj=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),vj=Object(l["createElementVNode"])("br",null,null,-1),kj=["value"],wj={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Aj={class:""};function Sj(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Bh,[Object(l["createElementVNode"])("div",Ch,[Object(l["createElementVNode"])("div",_h,[Object(l["createElementVNode"])("div",Ph,[Object(l["createElementVNode"])("div",Ih,[Dh,Object(l["createVNode"])(n,{to:{name:"list-students"}},{default:Object(l["withCtx"])(()=>[Th]),_:1})]),Object(l["createElementVNode"])("div",Mh,[Object(l["createElementVNode"])("div",zh,[Object(l["createElementVNode"])("div",Fh,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Uh,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Lh]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",$h,[Object(l["createElementVNode"])("div",qh,[Rh,Object(l["createElementVNode"])("div",Hh,[Object(l["createElementVNode"])("div",Qh,[Object(l["createElementVNode"])("form",Jh,[Object(l["createElementVNode"])("div",Yh,[Wh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStudent.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xh,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Zh,[Kh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStudent.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gh,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ej,[tj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStudent.student_id=e),type:"text",placeholder:"Student ID",name:"student_id"},null,512),[[l["vModelText"],o.newStudent.student_id]]),""!==o.formValidation&&""!==o.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",aj,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lj,[cj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStudent.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],o.newStudent.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",oj,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sj,[nj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStudent.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rj,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ij,[dj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"date_of_birth","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStudent.date_of_birth=e),type:"date",placeholder:"date of birth",name:"date_of_birth"},null,512),[[l["vModelText"],o.newStudent.date_of_birth]])]),Object(l["createElementVNode"])("div",mj,[bj,pj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,uj))),128))],512),[[l["vModelSelect"],o.newStudent.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Oj,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hj,[jj,gj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>o.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,fj))),128))],512),[[l["vModelSelect"],o.newStudent.fsm]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ej,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Vj,[Nj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[8]||(t[8]=e=>s.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],s.formattedBalance]])]),Object(l["createElementVNode"])("div",xj,[yj,vj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,kj))),128))],512),[[l["vModelSelect"],o.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",wj,[Object(l["createElementVNode"])("div",Aj,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=(...e)=>s.saveNewStudent&&s.saveNewStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Student")])])])])])])])])])}Object(l["popScopeId"])();var Bj={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.getAllAttributes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_student")},computed:{formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{selected:null,fsm:[!1,!0],allAttributes:"",availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",multiValue:"",newStudent:{mifare_id:"",school_id:"",student_id:"",attribute_id:"",attributes:[],first_name:"",last_name:"",email:"",date_of_birth:"",status:"",fsm:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_student");let e=!1,t="";t=Ns()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&void 0!==this.newStudent[a]||"attribute_id"===a||"balance"===a||"date_of_birth"===a||"add_amount"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStudent(){if(!this.validateForm())try{let e=await et.post("/createStudent",this.newStudent);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async getAllAttributes(){try{const e=await et.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},async createCustomer(e){let t=this.newStudent.first_name+" "+this.newStudent.last_name,a={user_id:e,name:t,email:this.newStudent.email};try{await et.post("/createCustomer",a)}catch(l){console.log(l)}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await et.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("90d4");const Cj=We()(Bj,[["render",Sj],["__scopeId","data-v-0d7f592b"]]);var _j=Cj;Object(l["pushScopeId"])("data-v-175ae6fc");const Pj={class:"container-fluid py-4"},Ij={class:"row"},Dj={class:"col-12"},Tj={class:"card my-4"},Mj={class:"d-flex justify-content-between border-radius-lg pt-4"},zj=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Student",-1),Fj=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),Uj={class:"card-body px-0 pb-2"},Lj={class:"table-responsive p-0"},$j={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},qj={key:0,class:"mb-3 change-pass-alert"},Rj=Object(l["createElementVNode"])("br",null,null,-1),Hj={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Qj={class:"form-bg container p-4"},Jj=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),Yj={class:"card card-plain"},Wj={class:"card-body"},Xj={role:"form"},Zj={class:"mb-1"},Kj=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Gj={key:0,class:"text-danger error-txt"},eg={class:"mb-1"},tg=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),ag={key:0,class:"text-danger error-txt"},lg={class:"mb-1"},cg=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),og={key:0,class:"text-danger error-txt"},sg={class:"mb-1"},ng=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),rg={key:0,class:"text-danger error-txt"},ig={class:"mb-1"},dg=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),mg={key:0,class:"text-danger error-txt"},bg={class:"mb-1"},pg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),ug=Object(l["createElementVNode"])("br",null,null,-1),Og=["value"],hg={key:0,class:"text-danger error-txt"},jg={class:"mb-1"},gg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),fg=Object(l["createElementVNode"])("br",null,null,-1),Eg=["value"],Vg={key:0,class:"text-danger error-txt"},Ng={class:"mb-1"},xg=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance",-1),yg={class:"mb-1"},vg=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),kg={class:"mb-1"},wg=Object(l["createElementVNode"])("label",{class:"input-label",for:"date_of_birth"},"Date Of Birth",-1),Ag={class:"mb-1"},Sg=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Bg=Object(l["createElementVNode"])("br",null,null,-1),Cg=["value"],_g={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},Pg={class:"form-bg container p-4"},Ig=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),Dg=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),Tg={class:"card card-plain"},Mg={class:"card-body"},zg={role:"form"},Fg={class:"mb-1"},Ug=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),Lg={class:"mb-1"},$g=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),qg={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Rg={class:""};function Hg(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Pj,[Object(l["createElementVNode"])("div",Ij,[Object(l["createElementVNode"])("div",Dj,[Object(l["createElementVNode"])("div",Tj,[Object(l["createElementVNode"])("div",Mj,[zj,Object(l["createVNode"])(n,{to:{name:"list-students"}},{default:Object(l["withCtx"])(()=>[Fj]),_:1})]),Object(l["createElementVNode"])("div",Uj,[Object(l["createElementVNode"])("div",Lj,[Object(l["createElementVNode"])("div",$j,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qj,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Rj]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Hj,[Object(l["createElementVNode"])("div",Qj,[Jj,Object(l["createElementVNode"])("div",Yj,[Object(l["createElementVNode"])("div",Wj,[Object(l["createElementVNode"])("form",Xj,[Object(l["createElementVNode"])("div",Zj,[Kj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStudent.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gj,"first name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eg,[tg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStudent.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ag,"last name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lg,[cg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStudent.mifare_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStudent.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",og," MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sg,[ng,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStudent.student_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStudent.student_id]]),""!==o.formValidation&&""!==o.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rg," student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ig,[dg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStudent.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mg,"email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",bg,[pg,ug,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,Og))),128))],512),[[l["vModelSelect"],o.newStudent.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hg,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",jg,[gg,fg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Eg))),128))],512),[[l["vModelSelect"],o.newStudent.fsm]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Vg,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Ng,[xg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[7]||(t[7]=e=>s.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],s.formattedBalance]])]),Object(l["createElementVNode"])("div",yg,[vg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[8]||(t[8]=e=>s.formattedAmount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],s.formattedAmount]])]),Object(l["createElementVNode"])("div",kg,[wg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"date_of_birth","onUpdate:modelValue":t[9]||(t[9]=e=>o.newStudent.date_of_birth=e),type:"date",placeholder:"date of birth",name:"date_of_birth"},null,512),[[l["vModelText"],o.newStudent.date_of_birth]])]),Object(l["createElementVNode"])("div",Ag,[Sg,Bg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Cg))),128))],512),[[l["vModelSelect"],o.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",_g,[Object(l["createElementVNode"])("div",Pg,[Ig,Dg,Object(l["createElementVNode"])("div",Tg,[Object(l["createElementVNode"])("div",Mg,[Object(l["createElementVNode"])("form",zg,[Object(l["createElementVNode"])("div",Fg,[Ug,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[11]||(t[11]=e=>o.newStudent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newStudent.password]])]),Object(l["createElementVNode"])("div",Lg,[$g,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[12]||(t[12]=e=>o.newStudent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newStudent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",qg,[Object(l["createElementVNode"])("div",Rg,[Object(l["createElementVNode"])("button",{onClick:t[13]||(t[13]=(...e)=>s.updateStudent&&s.updateStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var Qg={name:"",components:{},mounted(){this.getUser(),this.editStudent(),this.getSchools(),this.getAllAttributes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_student")},computed:{formattedAmount:{get(){return parseFloat(this.newStudent.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.add_amount=t}},formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{allAttributes:"",availableCountries:["UK","USA","Canada"],user:"",formValidation:"",isError:!1,validationErrors:"",fsm:[!1,!0],selectedAttrs:[],newStudent:{school_id:"",student_id:"",add_amount:"",mifare_id:"",attribute_id:"",attributes:[],first_name:"",last_name:"",email:"",date_of_birth:"",status:"",password:"",password_confirmation:"",fsm:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_student");let e=!1,t="";t=Ns()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&null!==this.newStudent[a]||"attribute_id"===a||"date_of_birth"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStudent(){let e=this.$route.params.id;try{const t=await et.get("/editStudent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStudent.school_id=t.school_id,this.newStudent.student_id=t.student_id,this.newStudent.mifare_id=t.mifare_id,this.newStudent.first_name=t.user.first_name,this.newStudent.last_name=t.user.last_name,this.newStudent.email=t.user.email,this.newStudent.date_of_birth=t.dob,this.newStudent.status=t.user.status,this.newStudent.fsm=0!=t.fsm_activated,this.newStudent.attribute_id=t.attribute_id,this.newStudent.balance=this.formattedPrice(t.balance),this.newStudent.attributes=t.attributes)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async updateStudent(){if(this.validateForm())return;let e=this.$route.params.id;try{await et.put("/updateStudent/"+e,this.newStudent),this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await et.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async getAllAttributes(){try{const e=await et.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}this.allAttributes.map(e=>{this.newStudent.attributes.includes(e.id)&&this.selectedAttrs.push(e)})},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})}}};a("e935");const Jg=We()(Qg,[["render",Hg],["__scopeId","data-v-175ae6fc"]]);var Yg=Jg;const Wg={class:"container-fluid py-4"},Xg={class:"row"},Zg={class:"col-12"},Kg={class:"card my-4"},Gg={class:"card-body px-0 pb-2"},ef={class:"table-responsive p-0"},tf={class:"filter-container"},af=Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,-1),lf=Object(l["createElementVNode"])("option",{value:"",disabled:"",selected:""},"Filter",-1),cf=["value"],of=Object(l["createElementVNode"])("i",{class:"fas fa-filter filter-icon me-1"},null,-1),sf={class:"table align-items-center mb-0"},nf=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Type "),Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Amount "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Date "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Action ")])],-1),rf={class:"align-middle text-center"},df={class:"text-xs text-secondary mb-0"},mf={class:"align-middle text-center"},bf={class:"d-flex justify-content-center"},pf={key:0,class:"fas fa-plus fa-xs text-success me-2","aria-hidden":"true"},uf={key:1,class:"fas fa-minus fa-xs text-danger me-2","aria-hidden":"true"},Of={class:"text-xs text-secondary mb-0"},hf={class:"align-middle text-center"},jf={class:"text-secondary text-xs "},gf={class:"align-middle text-center text-sm"},ff=["onClick"];function Ef(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Wg,[Object(l["createElementVNode"])("div",Xg,[Object(l["createElementVNode"])("div",Zg,[Object(l["createElementVNode"])("div",Kg,[Object(l["createElementVNode"])("div",Gg,[Object(l["createElementVNode"])("div",ef,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",tf,[af,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box filter-type-btn","onUpdate:modelValue":t[0]||(t[0]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[lf,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,cf))),128))],512),[[l["vModelSelect"],o.filterBy]]),of])]),Object(l["createElementVNode"])("table",sf,[nf,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",rf,[Object(l["createElementVNode"])("p",df,Object(l["toDisplayString"])(e.type),1)]),Object(l["createElementVNode"])("td",mf,[Object(l["createElementVNode"])("span",bf,["top_up"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",pf)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",uf)),Object(l["createElementVNode"])("p",Of,"£"+Object(l["toDisplayString"])(s.formattedPrice(e.amount)),1)])]),Object(l["createElementVNode"])("td",hf,[Object(l["createElementVNode"])("span",jf,Object(l["toDisplayString"])(e.created_at.toString().split("T")[0]),1)]),Object(l["createElementVNode"])("td",gf,[Object(l["createElementVNode"])("i",{onClick:t=>s.deleteTransactionHistory(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,ff)])]))),128))])])])])])])])])}var Vf={name:"tables",mounted(){this.getTransactionHistory(),this.$globalHelper.buttonColor()},data(){return{transactionHistoryList:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getTransactionHistory(){let e,t;this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id);let a={user_id:t,admin_id:null};try{const e=await et.post("/getTransactionHistory",a);this.transactionHistoryList=e.data}catch(l){console.log(l)}},async deleteTransactionHistory(e){try{await et.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)}}};a("36c5");const Nf=We()(Vf,[["render",Ef]]);var xf=Nf;const yf={class:"card"},vf={class:"card-body pt-4 p-3"},kf={class:"row"},wf={class:"col-md-12 col-sm-12"},Af={class:"list-group"},Sf={style:{"background-color":"#573078 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Bf={class:"d-flex flex-column"},Cf={class:"mb-3 text-sm text-white"},_f={class:"wallet-info text-white mb-1 text-xs font-weight-bold"},Pf=Object(l["createTextVNode"])(" Current Balance: "),If={class:"wallet-info text-white font-weight-bold ms-sm-2"},Df={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},Tf=Object(l["createTextVNode"])(" FSM Balance: "),Mf={class:"wallet-info text-white font-weight-bold ms-sm-2"},zf={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},Ff=Object(l["createTextVNode"])(" Phone: "),Uf={class:"wallet-info text-white ms-sm-2 font-weight-bold"},Lf={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},$f=Object(l["createTextVNode"])(" Email Address: "),qf={class:"wallet-info text-white ms-sm-2 font-weight-bold"},Rf={class:"col-md-12 col-sm-12"},Hf={class:"list-group"},Qf={class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Jf={class:"d-flex flex-column"},Yf=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm"},"Recent Transaction",-1),Wf={class:"text-dark ms-sm-2 font-weight-bold"},Xf=Object(l["createElementVNode"])("br",null,null,-1),Zf=Object(l["createElementVNode"])("br",null,null,-1),Kf={class:"text-dark font-weight-bold me-3"},Gf={key:0,class:"recent-transactions mb-1 text-xs"},eE=Object(l["createElementVNode"])("span",{class:"text-warning ms-sm-2 font-weight-bold"},"No recent transactions.",-1),tE=[eE];function aE(e,t,a,c,o,s){var n,r,i,d,m,b;return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yf,[Object(l["createElementVNode"])("div",vf,[Object(l["createElementVNode"])("div",kf,[Object(l["createElementVNode"])("div",wf,[Object(l["createElementVNode"])("ul",Af,[Object(l["createElementVNode"])("li",Sf,[Object(l["createElementVNode"])("div",Bf,[Object(l["createElementVNode"])("h6",Cf,Object(l["toDisplayString"])(`${(null===(n=s.walletData.user)||void 0===n?void 0:n.first_name)||"-"} ${(null===(r=s.walletData.user)||void 0===r?void 0:r.last_name)||"-"}`),1),Object(l["createElementVNode"])("span",_f,[Pf,Object(l["createElementVNode"])("span",If," £"+Object(l["toDisplayString"])(s.formattedPrice((null===(i=s.walletData)||void 0===i?void 0:i.ballance)||"0")),1)]),Object(l["createElementVNode"])("span",Df,[Tf,Object(l["createElementVNode"])("span",Mf," £"+Object(l["toDisplayString"])(s.formattedPrice((null===(d=o.fsmAmount)||void 0===d?void 0:d.fsm_amount)||"0")),1)]),Object(l["createElementVNode"])("span",zf,[Ff,Object(l["createElementVNode"])("span",Uf,Object(l["toDisplayString"])((null===(m=s.walletData.user)||void 0===m?void 0:m.phone)||"-"),1)]),Object(l["createElementVNode"])("span",Lf,[$f,Object(l["createElementVNode"])("span",qf,Object(l["toDisplayString"])((null===(b=s.walletData.user)||void 0===b?void 0:b.email)||"-"),1)])])])])]),Object(l["createElementVNode"])("div",Rf,[Object(l["createElementVNode"])("ul",Hf,[Object(l["createElementVNode"])("li",Qf,[Object(l["createElementVNode"])("div",Jf,[Yf,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.transactions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"recent-transactions mb-1 text-xs"},[Object(l["createElementVNode"])("span",Wf,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(s.transactionType(e.type))+" ",1),Xf,Object(l["createElementVNode"])("small",null,Object(l["toDisplayString"])(s.formatDate(e.created_at)),1)]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["font-weight-bold me-3",{"text-success":"top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type,"text-danger":!("top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type)}])},Object(l["toDisplayString"])("top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"+":"-")+" £"+Object(l["toDisplayString"])(s.formattedPrice(e.amount)),3),Zf,Object(l["createElementVNode"])("small",Kf,Object(l["toDisplayString"])("top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"Received":"Spent"),1)])]))),128)),0==o.transactions.length&&o.isTransactions?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Gf,tE)):Object(l["createCommentVNode"])("",!0)])])])])])])])}var lE={name:"billing-card",mounted(){this.getUserId(),this.getWallet(),this.getFSMamount(),this.getRecentTransactions(),this.$globalHelper.buttonColor()},data(){return{fsmAmount:"",isTransactions:!1,transactions:"",user_id:"",user:"",wallet:""}},computed:{walletData(){return this.wallet}},methods:{transactionType(e){let t="";return"top_up"==e?t="Top Up":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUserId(){let e=localStorage.getItem("user");e=JSON.parse(e),this.$route.params.id?this.user_id=this.$route.params.id:this.user_id=e.id},async getWallet(){try{const e=await et.get("/getWallet/"+this.user_id);this.wallet=e.data}catch(e){console.log(e)}},async getFSMamount(){try{const e=await et.get("/getAmountFSM/"+this.user_id);this.fsmAmount=e.data}catch(e){console.log(e)}},async getRecentTransactions(){let e={user_id:this.user_id,admin_id:null};try{const t=await et.post("/getTransactionHistory",e);this.transactions=t.data.data.data,this.isTransactions=!0}catch(t){console.log(t)}},formatDate(e){const t=eo()(e);return t.format("MMM D, YYYY,   HH:mm:ss")}}};a("3130");const cE=We()(lE,[["render",aE]]);var oE=cE;const sE={class:"container-fluid"},nE={class:"row"},rE={class:"col-12"},iE={class:"card px-1"},dE={class:"d-flex justify-content-between border-radius-lg pt-4 "},mE=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ORGANISATIONS",-1),bE=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),pE=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},"Here, you can add organizations such as ETC. Each organization can have multiple sites associated with it, all belonging to the same organization.")],-1),uE={class:"card-body px-0 pb-2"},OE={class:"table-responsive p-0"},hE={class:"table align-items-center mb-0"},jE=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Organisation Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"},"Action")])],-1),gE={key:0},fE=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),EE=[fE],VE={class:"align-middle text-center text-sm"},NE={class:"text-xs font-weight-bold mb-0"},xE={class:"d-flex px-2"},yE={class:"d-flex flex-column justify-content-center"},vE={class:"text-xs text-secondary mb-0"},kE={class:"d-flex px-2 "},wE={class:"d-flex flex-column justify-content-center"},AE={class:"text-xs text-secondary mb-0 "},SE={class:"d-flex px-2"},BE={class:"d-flex flex-column justify-content-center"},CE={class:"text-xs text-secondary  mb-0"},_E={class:"align-middle text-center text-sm"},PE={class:"badge badge-sm bg-gradient-success"},IE={class:"align-middle text-center"},DE=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),TE=["onClick"];function ME(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",sE,[Object(l["createElementVNode"])("div",nE,[Object(l["createElementVNode"])("div",rE,[Object(l["createElementVNode"])("div",iE,[Object(l["createElementVNode"])("div",dE,[mE,Object(l["createVNode"])(n,{to:{name:"add-organizations"}},{default:Object(l["withCtx"])(()=>[bE]),_:1})]),pE,Object(l["createElementVNode"])("div",uE,[Object(l["createElementVNode"])("div",OE,[Object(l["createElementVNode"])("table",hE,[jE,Object(l["createElementVNode"])("tbody",null,[0===o.organizationsData.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",gE,EE)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.organizationsData,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",VE,[Object(l["createElementVNode"])("p",NE,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",xE,[Object(l["createElementVNode"])("div",yE,[Object(l["createElementVNode"])("h6",vE,Object(l["toDisplayString"])(e.name),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",kE,[Object(l["createElementVNode"])("div",wE,[Object(l["createElementVNode"])("h6",AE,Object(l["toDisplayString"])(e.email),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",SE,[Object(l["createElementVNode"])("div",BE,[Object(l["createElementVNode"])("h6",CE,Object(l["toDisplayString"])(e.country),1)])])]),Object(l["createElementVNode"])("td",_E,[Object(l["createElementVNode"])("span",PE,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",IE,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[DE]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,TE)])])]))),128))])])])])])])])])}var zE={name:"organizations",metaInfo:{title:"Organizations"},mounted(){this.setColor(),this.getOrganizations(),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"])},data(){return{organizationsData:"",schools:6}},methods:{confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganization(e)})},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},setListData(){this.updateOrganizationList(this.organizationsData)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getOrganizations(){try{const e=await et.get("/getAllOrganizations");this.organizationsData=e.data}catch(e){console.log(e)}},async deleteOrganization(e){try{await et.delete("/deleteOrganization/"+e),this.removeOrganizationFromList(e),this.snackbarMsg("Organization Deleted")}catch(t){console.log(t)}},removeOrganizationFromList(e){const t=this.organizationsData.findIndex(t=>t.id===e);this.organizationsData.splice(t,1)}}};a("e0bc");const FE=We()(zE,[["render",ME]]);var UE=FE;Object(l["pushScopeId"])("data-v-73711a6d");const LE={class:"container-fluid py-4"},$E={class:"row"},qE={class:"col-12"},RE={class:"card my-4"},HE={class:"d-flex justify-content-between border-radius-lg pt-4"},QE=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Organisation",-1),JE=Object(l["createElementVNode"])("button",{style:{"font-size":"12px"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),YE={class:"card-body px-0 pb-2"},WE={class:"table-responsive p-0"},XE={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},ZE={key:0,class:"mb-3 change-pass-alert"},KE=Object(l["createElementVNode"])("br",null,null,-1),GE={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},eV={class:"form-bg container p-4 ms-2"},tV={class:"card card-plain"},aV={class:"card-body"},lV={class:"mb-1"},cV=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),oV={key:0,class:"text-danger error-txt"},sV={class:"mb-1"},nV=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),rV={key:0,class:"text-danger error-txt"},iV={class:"mb-1"},dV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),mV={key:0,class:"text-danger error-txt"},bV={class:"mb-1"},pV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),uV={key:0,class:"text-danger error-txt"},OV={class:"mb-1"},hV=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),jV=Object(l["createElementVNode"])("br",null,null,-1),gV=["value"],fV={key:0,class:"text-danger error-txt"},EV={class:"mb-1"},VV=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),NV={key:0,class:"text-danger error-txt"},xV={class:"mb-1"},yV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),vV={key:0,class:"text-danger error-txt"},kV={class:"mb-1"},wV=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),AV={key:0,class:"text-danger error-txt"},SV={class:"d-flex justify-content-center"};function BV(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LE,[Object(l["createElementVNode"])("div",$E,[Object(l["createElementVNode"])("div",qE,[Object(l["createElementVNode"])("div",RE,[Object(l["createElementVNode"])("div",HE,[QE,Object(l["createVNode"])(n,{to:{name:"list-organizations"}},{default:Object(l["withCtx"])(()=>[JE]),_:1})]),Object(l["createElementVNode"])("div",YE,[Object(l["createElementVNode"])("div",WE,[Object(l["createElementVNode"])("div",XE,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ZE,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),KE]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",GE,[Object(l["createElementVNode"])("div",eV,[Object(l["createElementVNode"])("div",tV,[Object(l["createElementVNode"])("div",aV,[Object(l["createElementVNode"])("div",lV,[cV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>o.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newOrganization.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",oV,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sV,[nV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],o.newOrganization.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rV,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",iV,[dV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newOrganization.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mV,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",bV,[pV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],o.newOrganization.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uV,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",OV,[hV,jV,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>o.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,gV))),128))],512),[[l["vModelSelect"],o.newOrganization.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fV,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EV,[VV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"city","onUpdate:modelValue":t[5]||(t[5]=e=>o.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newOrganization.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NV,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xV,[yV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],o.newOrganization.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vV,"Postocode/Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kV,[wV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>o.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newOrganization.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",AV,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",SV,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.saveNewOrganization&&s.saveNewOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var CV={name:"",components:{},mounted(){this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getOrganizationList"])},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Ns()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async saveNewOrganization(){if(!this.validateForm())try{await et.post("/createOrganization",this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Saved"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("7497");const _V=We()(CV,[["render",BV],["__scopeId","data-v-73711a6d"]]);var PV=_V;Object(l["pushScopeId"])("data-v-8a5c53d2");const IV={class:"container-fluid py-4"},DV={class:"row"},TV={class:"col-12"},MV={class:"card my-4"},zV={class:"d-flex justify-content-between  border-radius-lg pt-4"},FV=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Organisation",-1),UV=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),LV={class:"card-body px-0 pb-2"},$V={class:"table-responsive p-0"},qV={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},RV={key:0,class:"mb-3 change-pass-alert"},HV=Object(l["createElementVNode"])("br",null,null,-1),QV={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},JV={class:"form-bg container p-4 ms-2"},YV={class:"card card-plain"},WV={class:"card-body"},XV={class:"mb-1"},ZV=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),KV={key:0,class:"text-danger error-txt"},GV={class:"mb-1"},eN=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),tN={key:0,class:"text-danger error-txt"},aN={class:"mb-1"},lN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),cN={key:0,class:"text-danger error-txt"},oN={class:"mb-1"},sN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),nN={key:0,class:"text-danger error-txt"},rN={class:"mb-1"},iN=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),dN=Object(l["createElementVNode"])("br",null,null,-1),mN=["value"],bN={key:0,class:"text-danger error-txt"},pN={class:"mb-1"},uN=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),ON={key:0,class:"text-danger error-txt"},hN={class:"mb-1"},jN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),gN={key:0,class:"text-danger error-txt"},fN={class:"mb-1"},EN=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),VN={key:0,class:"text-danger error-txt"},NN={class:"d-flex justify-content-center"};function xN(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",IV,[Object(l["createElementVNode"])("div",DV,[Object(l["createElementVNode"])("div",TV,[Object(l["createElementVNode"])("div",MV,[Object(l["createElementVNode"])("div",zV,[FV,Object(l["createVNode"])(n,{to:{name:"list-organizations"}},{default:Object(l["withCtx"])(()=>[UV]),_:1})]),Object(l["createElementVNode"])("div",LV,[Object(l["createElementVNode"])("div",$V,[Object(l["createElementVNode"])("div",qV,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",RV,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),HV]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",QV,[Object(l["createElementVNode"])("div",JV,[Object(l["createElementVNode"])("div",YV,[Object(l["createElementVNode"])("div",WV,[Object(l["createElementVNode"])("div",XV,[ZV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>o.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newOrganization.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",KV,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",GV,[eN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],o.newOrganization.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",tN,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",aN,[lN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newOrganization.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cN,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",oN,[sN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],o.newOrganization.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nN,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",rN,[iN,dN,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>o.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,mN))),128))],512),[[l["vModelSelect"],o.newOrganization.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bN,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pN,[uN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>o.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newOrganization.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ON,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hN,[jN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],o.newOrganization.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gN,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",fN,[EN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>o.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newOrganization.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",VN,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",NN,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.updateOrganization&&s.updateOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var yN={name:"",props:["data"],components:{},mounted(){this.editOrganization(),this.$globalHelper.buttonColor()},computed:{},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Ns()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async editOrganization(){let e=this.$route.params.id;try{const t=await et.get("/editOrganization/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newOrganization.name=t.name,this.newOrganization.website=t.website,this.newOrganization.email=t.email,this.newOrganization.phone=t.phone,this.newOrganization.country=t.country,this.newOrganization.city=t.city,this.newOrganization.state=t.state,this.newOrganization.zip=t.zip,this.newOrganization.address=t.address,this.newOrganization.founded_date=t.founded_date,this.newOrganization.description=t.description)},async updateOrganization(){if(this.validateForm())return;let e=this.$route.params.id;try{await et.put("/updateOrganization/"+e,this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("e6f0");const vN=We()(yN,[["render",xN],["__scopeId","data-v-8a5c53d2"]]);var kN=vN,wN=a("d15c"),AN=a.n(wN);const SN={class:"card"},BN={class:"card-header pb-0 px-3"},CN={class:"d-flex justify-content-between"},_N=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Trips",-1),PN={class:"card-body pt-1 p-3"},IN={class:"container-fluid mt-1"},DN={class:"col-md-8"},TN={class:"d-flex flex-column"},MN={class:"mb-3 text-sm"},zN=Object(l["createElementVNode"])("img",{src:AN.a,alt:"profile_image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,-1),FN={class:"trip-description mt-2"},UN={class:"col-md-4"},LN={class:"ms-auto text-start"},$N={class:"me-3 trip-dates"},qN=Object(l["createElementVNode"])("br",null,null,-1),RN={class:"me-3 trip-dates"},HN={class:"me-3 trip-dates"},QN=Object(l["createElementVNode"])("br",null,null,-1),JN=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Age Group - 16-20")],-1),YN=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Booking Open")],-1),WN=Object(l["createElementVNode"])("br",null,null,-1),XN={class:"me-3 trip-dates"},ZN=Object(l["createElementVNode"])("br",null,null,-1),KN={key:0},GN={class:"me-3 trip-dates"},ex={class:"d-flex  align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},tx=Object(l["createElementVNode"])("br",null,null,-1),ax=["onClick"],lx=Object(l["createTextVNode"])(" Participants "),cx=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"arrow_forward",-1),ox=[lx,cx],sx=Object(l["createElementVNode"])("br",null,null,-1),nx={class:"mt-0"},rx=["onClick"],ix=["onClick"],dx={key:2,class:"mt-0"},mx=Object(l["createElementVNode"])("div",{class:"cart-status"},"Added To Cart",-1),bx=[mx],px={key:3,class:"mt-0"},ux=["onClick"],Ox=Object(l["createElementVNode"])("br",null,null,-1),hx={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},jx=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No trips found!",-1),gx=[jx];function fx(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",SN,[Object(l["createElementVNode"])("div",BN,[Object(l["createElementVNode"])("div",CN,[_N,s.userPermissions.create_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},["super_admin"==o.user.role||"organization_admin"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=(...e)=>s.redirectToAddTrips&&s.redirectToAddTrips(...e)),to:{name:"add-trips"},style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-10  text-white fw-5 p-2 border-radius-lg"},"Add Trips")):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",PN,[Object(l["createElementVNode"])("div",IN,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allTrips,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",DN,[Object(l["createElementVNode"])("div",TN,[Object(l["createElementVNode"])("h6",MN,Object(l["toDisplayString"])(e.title),1),zN,Object(l["createElementVNode"])("small",FN,Object(l["toDisplayString"])(e.description),1)])]),Object(l["createElementVNode"])("div",UN,[Object(l["createElementVNode"])("div",LN,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",$N,"From "+Object(l["toDisplayString"])(s.formatDateString(e.start_date))+" To "+Object(l["toDisplayString"])(s.formatDateString(e.end_date)),1)]),qN,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",RN,"Total Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",HN,"Available Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),QN,JN,YN,WN,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",XN,Object(l["toDisplayString"])(e.accomodation_details?e.accomodation_details:"-"),1)]),ZN,"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",KN,[Object(l["createElementVNode"])("small",GN,"Organization: "+Object(l["toDisplayString"])(e.organization?e.organization.name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",ex," Trip Cost - £"+Object(l["toDisplayString"])(s.formattedAmount(e.budget)),1),tx,"super_admin"==o.user.role||"organization_admin"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("button",{onClick:t=>s.navLegacy("participants-trips",{id:e.id}),style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"d-flex justify-content-around align-items-center me-3 trips-btn w-50  text-white fw-5 p-2 border-radius-lg"},ox,8,ax),sx,Object(l["createElementVNode"])("div",nx,[s.userPermissions.edit_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t=>s.editTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Edit ",8,rx)):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t=>s.deleteTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Delete ",8,ix)):Object(l["createCommentVNode"])("",!0)])],64)):Object(l["createCommentVNode"])("",!0),null!==e.cart&&"student"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",dx,bx)):Object(l["createCommentVNode"])("",!0),null==e.cart&&"student"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",px,[Object(l["createElementVNode"])("button",{onClick:t=>s.addTripToCart(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,ux)])):Object(l["createCommentVNode"])("",!0),Ox])])]))),128)),0==o.allTrips.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hx,gx)):Object(l["createCommentVNode"])("",!0)])])])}var Ex={name:"billing-card",data(){return{user:"",allTrips:""}},mounted(){this.getUser(),this.getAllTrips()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_trip")},watch:{getRemovedItem(e,t){console.log(t),"trip"==e&&this.getAllTrips()}},computed:{...Object(Qe["c"])(["getRemovedItem","getPermissions"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{...Object(Qe["b"])(["updateRemovedItem"]),snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},navLegacy(e,t){this.$router.push({name:e,params:t})},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t},async addTripToCart(e){let t={trip_id:e};try{await et.post("/addTripToCart",t),await this.getAllTrips(),this.snackbarMsg("Successfuly Added Trip To Cart")}catch(a){console.log(a)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},redirectToAddTrips(){this.$router.push({name:"add-trips"})},async getAllTrips(){try{const e=await et.get("/getAllTrips");this.allTrips=e.data,this.updateRemovedItem(null)}catch(e){console.log(e)}},async deleteTrip(e){try{await et.delete("/deleteTrip/"+e),this.removeTripFromList(e),this.snackbarMsg("Trip Deleted Successfuly")}catch(t){console.log(t)}},removeTripFromList(e){const t=this.allTrips.findIndex(t=>t.id===e);this.allTrips.splice(t,1)},formatDateString(e){const t=eo()(e),a=t.format("DD MMMM YYYY");return a},editTrip(e){this.$router.push("/edit-trips/"+e)}}};a("b0e7");const Vx=We()(Ex,[["render",fx]]);var Nx=Vx;Object(l["pushScopeId"])("data-v-2a8f2351");const xx={class:"container-fluid py-4"},yx={class:"row "},vx={class:"col-12"},kx={class:"card my-4"},wx={class:"d-flex justify-content-between  border-radius-lg pt-4 "},Ax=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Trips",-1),Sx=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),Bx={class:"card-body px-0 pb-2"},Cx={class:"table-responsive p-0"},_x={class:"row py-2 bg-white form-data border-radius-lg"},Px={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},Ix={class:"form-bg container p-4 ms-2"},Dx={class:"card card-plain"},Tx={class:"card-body"},Mx={role:"form"},zx={class:"row mb-1"},Fx={class:"mb-1"},Ux=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Image",-1),Lx={class:"mb-1"},$x=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),qx={key:0,class:"text-danger error-txt"},Rx={class:"mb-1"},Hx=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),Qx=Object(l["createElementVNode"])("br",null,null,-1),Jx={key:0,class:"text-danger error-txt"},Yx={class:"row p-2"},Wx={class:"col-xl-4 col-lg-4 col-md-4"},Xx={class:"mb-1"},Zx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),Kx={key:0,class:"text-danger error-txt"},Gx={class:"col-xl-4 col-lg-4 col-md-4"},ey={class:"mb-1"},ty=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),ay=Object(l["createElementVNode"])("br",null,null,-1),ly=["value"],cy={key:0,class:"text-danger error-txt"},oy={class:"col-xl-4 col-lg-4 col-md-4"},sy={class:"mb-1"},ny=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),ry={key:0,class:"text-danger error-txt"},iy={class:"col-xl-4 col-lg-4 col-md-4"},dy={class:"mb-1"},my=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),by={key:0,class:"text-danger error-txt"},py={class:"col-xl-4 col-lg-4 col-md-4"},uy={class:"mb-1"},Oy=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),hy={key:0,class:"text-danger error-txt"},jy={class:"col-xl-4 col-lg-4 col-md-4"},gy={class:"mb-1"},fy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),Ey={key:0,class:"text-danger error-txt"},Vy={class:"row p-2"},Ny=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),xy={class:"col-xl-4 col-lg-4 col-md-4"},yy={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},vy=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),ky={class:"checkbox-container mt-2 me-5"},wy=["checked"],Ay=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),Sy={class:"col-xl-4 col-lg-4 col-md-4"},By={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},Cy=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit",-1),_y={class:"checkbox-container mt-2 me-5"},Py=["checked"],Iy=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),Dy={class:"col-xl-4 col-lg-4 col-md-4"},Ty={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},My=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Manual Payment",-1),zy={class:"checkbox-container mt-2 me-5"},Fy=["checked"],Uy=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),Ly={key:0,class:"row p-2"},$y={class:"col-xl-4 col-lg-4 col-md-4"},qy={class:"mb-1"},Ry=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),Hy={key:0,class:"text-danger error-txt"},Qy={class:"col-xl-4 col-lg-4 col-md-4"},Jy={class:"mb-1"},Yy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),Wy={key:0,class:"text-danger error-txt"},Xy={class:"col-xl-4 col-lg-4 col-md-4"},Zy={class:"mb-1"},Ky=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),Gy={key:0,class:"text-danger error-txt"},ev={class:"col-xl-4 col-lg-4 col-md-4"},tv={class:"mb-1"},av=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),lv={key:0,class:"text-danger error-txt"},cv={class:"mb-1"},ov={class:"input-label",for:"enrollment_date"},sv=["onUpdate:modelValue"],nv={key:0,class:"text-danger error-txt"},rv={key:1,class:"row p-2"},iv={class:"col-xl-4 col-lg-4 col-md-4"},dv={class:"mb-1"},mv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Deposit",-1),bv={key:0,class:"text-danger error-txt"},pv={class:"col-xl-4 col-lg-4 col-md-4"},uv={class:"mb-1"},Ov=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Deposit",-1),hv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,-1),jv={key:0,class:"text-danger error-txt"},gv={class:"col-xl-4 col-lg-4 col-md-4"},fv={class:"mb-1"},Ev=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Deposit",-1),Vv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Deposit",name:"name"},null,-1),Nv={key:0,class:"text-danger error-txt"},xv={class:"col-xl-4 col-lg-4 col-md-4"},yv={class:"mb-1"},vv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),kv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),wv={key:0,class:"text-danger error-txt"},Av={class:"col-xl-4 col-lg-4 col-md-4"},Sv={class:"mb-1"},Bv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Deposit",-1),Cv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),_v={key:0,class:"text-danger error-txt"},Pv={key:2,class:"row p-2"},Iv={class:"col-xl-4 col-lg-4 col-md-4"},Dv={class:"mb-1"},Tv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Amount",-1),Mv={key:0,class:"text-danger error-txt"},zv={class:"col-xl-4 col-lg-4 col-md-4"},Fv={class:"mb-1"},Uv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Amount",-1),Lv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Amount",name:"name"},null,-1),$v={key:0,class:"text-danger error-txt"},qv={class:"col-xl-4 col-lg-4 col-md-4"},Rv={class:"mb-1"},Hv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Amount",-1),Qv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Amount",name:"name"},null,-1),Jv={key:0,class:"text-danger error-txt"},Yv={class:"col-xl-4 col-lg-4 col-md-4"},Wv={class:"mb-1"},Xv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Amount",-1),Zv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),Kv={key:0,class:"text-danger error-txt"},Gv={class:"col-xl-4 col-lg-4 col-md-4"},ek={class:"mb-1"},tk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Amount",-1),ak=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),lk={key:0,class:"text-danger error-txt"},ck={class:"col-xl-4 col-lg-4 col-md-4"},ok={class:"mb-1"},sk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Comments",-1),nk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"cash and card payments are accepted",name:"name"},null,-1),rk={key:0,class:"text-danger error-txt"},ik={class:"mb-1"},dk=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),mk=Object(l["createElementVNode"])("br",null,null,-1),bk={class:"mt-4"};function pk(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("DropZone"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",xx,[Object(l["createElementVNode"])("div",yx,[Object(l["createElementVNode"])("div",vx,[Object(l["createElementVNode"])("div",kx,[Object(l["createElementVNode"])("div",wx,[Ax,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[Sx]),_:1})]),Object(l["createElementVNode"])("div",Bx,[Object(l["createElementVNode"])("div",Cx,[Object(l["createElementVNode"])("div",_x,[Object(l["createElementVNode"])("div",Px,[Object(l["createElementVNode"])("div",Ix,[Object(l["createElementVNode"])("div",Dx,[Object(l["createElementVNode"])("div",Tx,[Object(l["createElementVNode"])("form",Mx,[Object(l["createElementVNode"])("div",zx,[Object(l["createElementVNode"])("div",Fx,[Ux,Object(l["createVNode"])(r,{maxFiles:Number(1),url:"http://localhost:8080",uploadOnDrop:!0,multipleUpload:!1,parallelUpload:1},null,8,["maxFiles"])]),Object(l["createElementVNode"])("div",Lx,[$x,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],o.newTrip.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",qx,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Rx,[Hx,Qx,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],o.newTrip.description]]),""!==o.formValidation&&""!==o.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jx,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Yx,[Object(l["createElementVNode"])("div",Wx,[Object(l["createElementVNode"])("div",Xx,[Zx,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],o.newTrip.total_seats]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Kx,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Gx,[Object(l["createElementVNode"])("div",ey,[ty,ay,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,ly))),128))],512),[[l["vModelSelect"],o.newTrip.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cy,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",oy,[Object(l["createElementVNode"])("div",sy,[ny,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],o.newTrip.accomodation_details]]),""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ry,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",iy,[Object(l["createElementVNode"])("div",dy,[my,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.start_date]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",by,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",py,[Object(l["createElementVNode"])("div",uy,[Oy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.end_date]]),""!==o.formValidation&&""!==o.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hy,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",jy,[Object(l["createElementVNode"])("div",gy,[fy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ey,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",Vy,[Ny,Object(l["createElementVNode"])("div",xy,[Object(l["createElementVNode"])("span",yy,[vy,Object(l["createElementVNode"])("div",ky,[Object(l["createElementVNode"])("input",{checked:"installments"==o.paymentPlan,onChange:t[8]||(t[8]=e=>s.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,wy),Ay])])]),Object(l["createElementVNode"])("div",Sy,[Object(l["createElementVNode"])("span",By,[Cy,Object(l["createElementVNode"])("div",_y,[Object(l["createElementVNode"])("input",{checked:"deposit"==o.paymentPlan,onChange:t[9]||(t[9]=e=>s.changePaymentPlan("deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,Py),Iy])])]),Object(l["createElementVNode"])("div",Dy,[Object(l["createElementVNode"])("span",Ty,[My,Object(l["createElementVNode"])("div",zy,[Object(l["createElementVNode"])("input",{checked:"manual"==o.paymentPlan,onChange:t[10]||(t[10]=e=>s.changePaymentPlan("manual")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,Fy),Uy])])])]),"installments"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ly,[Object(l["createElementVNode"])("div",$y,[Object(l["createElementVNode"])("div",qy,[Ry,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.installmentsPlan.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.total_installments]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Hy,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Qy,[Object(l["createElementVNode"])("div",Jy,[Yy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.installmentsPlan.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.amount_per_installment]]),""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Wy,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Xy,[Object(l["createElementVNode"])("div",Zy,[Ky,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.installmentsPlan.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.initial_deposit]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gy,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",ev,[Object(l["createElementVNode"])("div",tv,[av,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.installmentsPlan.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.initial_deposit_due_date]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",lv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),o.installmentsPlan.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsPlan.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",cv,[Object(l["createElementVNode"])("label",ov,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>o.installmentsPlan.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,sv),[[l["vModelText"],o.installmentsPlan.other_installments_due_date[t]]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"deposit"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",rv,[Object(l["createElementVNode"])("div",iv,[Object(l["createElementVNode"])("div",dv,[mv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Deposit",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bv,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",pv,[Object(l["createElementVNode"])("div",uv,[Ov,hv,""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jv,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",gv,[Object(l["createElementVNode"])("div",fv,[Ev,Vv,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Nv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",xv,[Object(l["createElementVNode"])("div",yv,[vv,kv,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",wv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Av,[Object(l["createElementVNode"])("div",Sv,[Bv,Cv,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_v,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),"manual"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Pv,[Object(l["createElementVNode"])("div",Iv,[Object(l["createElementVNode"])("div",Dv,[Tv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Amount",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Mv,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",zv,[Object(l["createElementVNode"])("div",Fv,[Uv,Lv,""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$v,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",qv,[Object(l["createElementVNode"])("div",Rv,[Hv,Qv,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Yv,[Object(l["createElementVNode"])("div",Wv,[Xv,Zv,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Kv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Gv,[Object(l["createElementVNode"])("div",ek,[tk,ak,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",lk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",ck,[Object(l["createElementVNode"])("div",ok,[sk,nk,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",ik,[dk,mk,Object(l["createVNode"])(i,{label:"Attributes",options:o.allAttributes,onInput:s.handleAttributes,placeholder:"Attributes"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",bk,[Object(l["createElementVNode"])("button",{onClick:t[17]||(t[17]=Object(l["withModifiers"])((...e)=>s.saveNewTrip&&s.saveNewTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])(),Object(l["pushScopeId"])("data-v-58ff6324");const uk=["onClick"],Ok=["placeholder"],hk={key:0,class:"dropdown"},jk=["onClick"];function gk(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.selectedOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"tag"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name)+" ",1),Object(l["createElementVNode"])("span",{onClick:e=>s.removeTag(t),class:"remove-tag"},"×",8,uk)]))),128)),Object(l["createElementVNode"])("div",null,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.inputValue=e),onInput:t[1]||(t[1]=(...e)=>s.filterOptions&&s.filterOptions(...e)),onKeydown:t[2]||(t[2]=Object(l["withKeys"])(Object(l["withModifiers"])((...e)=>s.addTag&&s.addTag(...e),["prevent"]),["enter"])),onFocus:t[3]||(t[3]=(...e)=>s.showOptions&&s.showOptions(...e)),placeholder:a.placeholder,onBlur:t[4]||(t[4]=(...e)=>s.hideDropdown&&s.hideDropdown(...e))},null,40,Ok),[[l["vModelText"],o.inputValue]]),o.showDropdown?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hk,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.filteredOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,onClick:t=>s.selectOption(e),class:"option-width"},Object(l["toDisplayString"])(e.name),9,jk))),128))])):Object(l["createCommentVNode"])("",!0)])])}Object(l["popScopeId"])();var fk={props:{label:{type:String,required:!0},options:{type:Array,required:!0},placeholder:{type:String,default:"Pelase select"},value:{type:Array,default:()=>[]}},data(){return{selectedOptions:this.value,inputValue:"",showDropdown:!1}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.inputValue.toLowerCase())&&!this.isSelected(e))}},watch:{value(e){this.selectedOptions=e}},methods:{addTag(e){const t=e;console.log(t),t&&!this.isSelected(t)&&(this.selectedOptions.push(t),this.$emit("input",this.selectedOptions),this.inputValue="")},removeTag(e){this.selectedOptions.splice(e,1),this.$emit("input",this.selectedOptions)},filterOptions(){this.showDropdown=!0},showOptions(){this.showDropdown=!0},hideDropdown(){setTimeout(()=>{this.showDropdown=!1},800)},selectOption(e){console.log(e),this.addTag(e),this.showDropdown=!1},isSelected(e){return this.selectedOptions.some(t=>t.name===e.name)}}};a("ed52");const Ek=We()(fk,[["render",gk],["__scopeId","data-v-58ff6324"]]);var Vk=Ek,Nk=a("cd1f"),xk=a.n(Nk),yk={name:"",components:{MultiSelect:Vk,DropZone:Nk["DropZone"]},mounted(){this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("create_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{paymentPlan:"",installmentsPlan:{total_installments:"",amount_per_installment:"",initial_deposit:"",initial_deposit_due_date:"",other_installments_due_date:[]},depositPlan:{total:"",final_deposit:"",initial_deposit:""},manualPlan:{total:"",final_deposit:"",initial_deposit:""},allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await et.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},validateForm(){this.$permissions.redirectIfNotAllowed("create_trip");let e=!1,t="";t=Ns()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},async saveNewTrip(){if(!this.validateForm()){await this.addPaymentPlan();try{await et.post("/createTrip",this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Saved Successfuly")}catch(e){console.log(e)}}},addPaymentPlan(){"installments"==this.paymentPlan&&(this.newTrip.payment_plan="installments",this.newTrip={...this.newTrip,...this.installmentsPlan})},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await et.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("cad8");const vk=We()(yk,[["render",pk],["__scopeId","data-v-2a8f2351"]]);var kk=vk;Object(l["pushScopeId"])("data-v-109a06c8");const wk={class:"container-fluid py-4"},Ak={class:"row "},Sk={class:"col-12"},Bk={class:"card my-4"},Ck={class:"d-flex justify-content-between  border-radius-lg pt-4 "},_k=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Trip",-1),Pk=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),Ik={class:"card-body px-0 pb-2"},Dk={class:"table-responsive p-0"},Tk={class:"row py-2 bg-white form-data border-radius-lg"},Mk={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},zk={class:"form-bg container p-4 ms-2"},Fk={class:"card card-plain"},Uk={class:"card-body"},Lk={role:"form"},$k={class:"row mb-1"},qk={class:"mb-1"},Rk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),Hk={key:0,class:"text-danger error-txt"},Qk={class:"mb-1"},Jk=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),Yk=Object(l["createElementVNode"])("br",null,null,-1),Wk={key:0,class:"text-danger error-txt"},Xk={class:"row p-2"},Zk={class:"col-xl-4 col-lg-4 col-md-4"},Kk={class:"mb-1"},Gk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),ew={key:0,class:"text-danger error-txt"},tw={class:"col-xl-4 col-lg-4 col-md-4"},aw={class:"mb-1"},lw=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),cw=Object(l["createElementVNode"])("br",null,null,-1),ow=["value"],sw={key:0,class:"text-danger error-txt"},nw={class:"col-xl-4 col-lg-4 col-md-4"},rw={class:"mb-1"},iw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),dw={key:0,class:"text-danger error-txt"},mw={class:"col-xl-4 col-lg-4 col-md-4"},bw={class:"mb-1"},pw=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),uw={key:0,class:"text-danger error-txt"},Ow={class:"col-xl-4 col-lg-4 col-md-4"},hw={class:"mb-1"},jw=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),gw={key:0,class:"text-danger error-txt"},fw={class:"col-xl-4 col-lg-4 col-md-4"},Ew={class:"mb-1"},Vw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),Nw={key:0,class:"text-danger error-txt"},xw={class:"mb-1"},yw=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),vw=Object(l["createElementVNode"])("br",null,null,-1),kw={class:"mt-4"};function ww(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",wk,[Object(l["createElementVNode"])("div",Ak,[Object(l["createElementVNode"])("div",Sk,[Object(l["createElementVNode"])("div",Bk,[Object(l["createElementVNode"])("div",Ck,[_k,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[Pk]),_:1})]),Object(l["createElementVNode"])("div",Ik,[Object(l["createElementVNode"])("div",Dk,[Object(l["createElementVNode"])("div",Tk,[Object(l["createElementVNode"])("div",Mk,[Object(l["createElementVNode"])("div",zk,[Object(l["createElementVNode"])("div",Fk,[Object(l["createElementVNode"])("div",Uk,[Object(l["createElementVNode"])("form",Lk,[Object(l["createElementVNode"])("div",$k,[Object(l["createElementVNode"])("div",qk,[Rk,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],o.newTrip.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Hk,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Qk,[Jk,Yk,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],o.newTrip.description]]),""!==o.formValidation&&""!==o.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Wk,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Xk,[Object(l["createElementVNode"])("div",Zk,[Object(l["createElementVNode"])("div",Kk,[Gk,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],o.newTrip.total_seats]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ew,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",tw,[Object(l["createElementVNode"])("div",aw,[lw,cw,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,ow))),128))],512),[[l["vModelSelect"],o.newTrip.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",sw,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",nw,[Object(l["createElementVNode"])("div",rw,[iw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],o.newTrip.accomodation_details]]),""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dw,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",mw,[Object(l["createElementVNode"])("div",bw,[pw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.start_date]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uw,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ow,[Object(l["createElementVNode"])("div",hw,[jw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.end_date]]),""!==o.formValidation&&""!==o.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gw,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",fw,[Object(l["createElementVNode"])("div",Ew,[Vw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Nw,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",xw,[yw,vw,Object(l["createVNode"])(r,{label:"Attributes",value:o.selectedAttrs,options:o.allAttributes,onInput:s.handleAttributes,placeholder:"Attributes"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",kw,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=Object(l["withModifiers"])((...e)=>s.updateTrip&&s.updateTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var Aw={name:"",components:{MultiSelect:Vk},mounted(){this.editTrip(),this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("edit_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",selectedAttrs:[],newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await et.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}this.allAttributes.map(e=>{this.newTrip.attributes.includes(e.id)&&this.selectedAttrs.push(e)})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_trip");let e=!1,t="";t=Ns()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async updateTrip(){if(this.validateForm())return;let e=this.$route.params.id;try{await et.put("/updateTrip/"+e,this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Updated Successfuly")}catch(t){console.log(t)}},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await et.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}},async editTrip(){let e=this.$route.params.id;try{let t=await et.get("/findTrip/"+e);t=t.data,this.setTrip(t)}catch(t){console.log(t)}},setTrip(e){this.newTrip.title=e.title,this.newTrip.description=e.description,this.newTrip.total_seats=e.total_booking,this.newTrip.accomodation_details=e.accomodation_details,this.newTrip.start_date=this.formatDateString(e.start_date),this.newTrip.end_date=this.formatDateString(e.end_date),this.newTrip.total_funds=e.budget,this.newTrip.organization_id=e.organization_id,this.newTrip.attributes=e.attributes},formatDateString(e){const t=eo()(e),a=t.format("YYYY-MM-DD");return a}}};a("9bb4");const Sw=We()(Aw,[["render",ww],["__scopeId","data-v-109a06c8"]]);var Bw=Sw;const Cw={class:"container-fluid py-4"},_w={class:"row"},Pw={class:"col-12"},Iw={class:"card my-4"},Dw={class:"card-body px-0 pb-2"},Tw={class:"table-responsive p-0"},Mw=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"}),Object(l["createElementVNode"])("small",{style:{"font-size":"12px","font-weight":"bold"},class:" me-3 text-dark fw-5 border-0 py-2 px-4 border-radius-lg"}," Trip Participants ")])],-1),zw={class:"table align-items-center mb-0"},Fw=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Participation Status ")])],-1),Uw={class:"align-middle text-center"},Lw={class:"text-secondary text-xs font-weight-bold"},$w={class:"align-middle text-center"},qw={class:"text-secondary text-xs "},Rw={class:"align-middle text-center"},Hw={class:"text-secondary text-xs "},Qw={class:"align-middle text-center"},Jw={class:"text-secondary text-xs "},Yw={class:"align-middle text-center text-sm"},Ww={class:"badge badge-sm bg-gradient-success"},Xw={class:"align-middle text-center text-sm"},Zw={class:"badge badge-sm bg-gradient-success"};function Kw(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Cw,[Object(l["createElementVNode"])("div",_w,[Object(l["createElementVNode"])("div",Pw,[Object(l["createElementVNode"])("div",Iw,[Object(l["createElementVNode"])("div",Dw,[Object(l["createElementVNode"])("div",Tw,[Mw,Object(l["createElementVNode"])("table",zw,[Fw,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allParticipants,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Uw,[Object(l["createElementVNode"])("span",Lw,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",$w,[Object(l["createElementVNode"])("span",qw,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",Rw,[Object(l["createElementVNode"])("span",Hw,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",Qw,[Object(l["createElementVNode"])("span",Jw,Object(l["toDisplayString"])(e.school),1)]),Object(l["createElementVNode"])("td",Yw,[Object(l["createElementVNode"])("span",Ww,Object(l["toDisplayString"])(e.payment_status),1)]),Object(l["createElementVNode"])("td",Xw,[Object(l["createElementVNode"])("span",Zw,Object(l["toDisplayString"])(e.participation_status),1)])]))),128))])])])])])])])])}var Gw={name:"tables",mounted(){this.getUser(),this.getTripParticipants()},data(){return{allParticipants:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getTripParticipants(){let e=this.$route.params.id;try{const t=await et.get("/getTripParticipants/"+e);this.allParticipants=t.data}catch(t){console.log(t)}}}};a("506d");const eA=We()(Gw,[["render",Kw]]);var tA=eA;const aA={class:"container-fluid"},lA={class:"row"},cA={class:"col-12"},oA={class:"card px-3"},sA=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"TRANSACTION HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("The Transaction History section displays key details of each transaction, including the User, Type, Amount, and Date. This allows you to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" track all financial activities efficiently, providing a clear overview of each user's transactions over time.")])])],-1),nA={class:"card-body px-0 pb-2"},rA={class:"table-responsive p-0"},iA={class:"filter-container ms-2 mb-2"},dA={class:"row",style:{width:"100%"}},mA={class:"col-4"},bA={style:{display:"flex"}},pA=["placeholder"],uA=["value"],OA={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},hA=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),jA=Object(l["createTextVNode"])(" Export To XLS "),gA=[hA,jA],fA={class:"table-responsive p-0"},EA={ref:"table",class:"table align-items-center mb-0"},VA={key:0,class:"text-uppercase text-xxs font-weight-bolder"},NA=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Type ",-1),xA=Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-xxs font-weight-bolder ps-2"}," Amount ",-1),yA=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date ",-1),vA={key:0},kA=Object(l["createElementVNode"])("td",{colspan:"4",class:"text-center"}," No data available. ",-1),wA=[kA],AA={key:0},SA={class:"d-flex px-2 py-1"},BA=Object(l["createElementVNode"])("div",null,null,-1),CA={class:"d-flex flex-column justify-content-center"},_A={class:"text-xs text-secondary mb-0"},PA={class:"align-middle text-center"},IA={class:"text-xs text-secondary mb-0"},DA={class:"align-middle text-center"},TA={class:"d-flex justify-content-center"},MA={key:0,class:"fas fa-plus fa-xs text-success me-2","aria-hidden":"true"},zA={key:1,class:"fas fa-minus fa-xs text-danger me-2","aria-hidden":"true"},FA={class:"text-xs text-secondary mb-0"},UA={class:"align-middle text-center"},LA={class:"text-secondary text-xs "},$A={class:"row"},qA={class:"col-md-12 col-lg-12"},RA={class:"pagination-container"},HA={class:"entries-dropdown"},QA=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),JA=["value"],YA={class:"pagination-wrapper"},WA={class:"pagination"},XA=["onClick"];function ZA(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",aA,[Object(l["createElementVNode"])("div",lA,[Object(l["createElementVNode"])("div",cA,[Object(l["createElementVNode"])("div",oA,[sA,Object(l["createElementVNode"])("div",nA,[Object(l["createElementVNode"])("div",rA,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",iA,[Object(l["createElementVNode"])("div",dA,[Object(l["createElementVNode"])("div",mA,[Object(l["createElementVNode"])("span",bA,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterTransactionHistory&&s.filterTransactionHistory(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:s.computedPlaceholder,name:"address"},null,40,pA),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterTransactionHistory&&s.filterTransactionHistory(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,uA))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",OA,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},gA)])])])]),Object(l["createElementVNode"])("div",fA,[Object(l["createElementVNode"])("table",EA,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,["student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",VA," User ")):Object(l["createCommentVNode"])("",!0),NA,xA,yA])]),Object(l["createElementVNode"])("tbody",null,[0===o.transactionHistoryList.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",vA,wA)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},["student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",AA,[Object(l["createElementVNode"])("div",SA,[BA,Object(l["createElementVNode"])("div",CA,[Object(l["createElementVNode"])("p",_A,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",PA,[Object(l["createElementVNode"])("p",IA,Object(l["toDisplayString"])(s.transactionType(e.type)),1)]),Object(l["createElementVNode"])("td",DA,[Object(l["createElementVNode"])("span",TA,["top_up"==e.type||"pos_refund"==e.type||"school_shop_refund"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",MA)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",zA)),Object(l["createElementVNode"])("p",FA,"£"+Object(l["toDisplayString"])(s.formattedPrice(e.amount)),1)])]),Object(l["createElementVNode"])("td",UA,[Object(l["createElementVNode"])("span",LA,Object(l["toDisplayString"])(s.formatDate(e.created_at)),1)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",$A,[Object(l["createElementVNode"])("div",qA,[Object(l["createElementVNode"])("div",RA,[Object(l["createElementVNode"])("div",HA,[QA,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemsPerPage=e),onChange:t[6]||(t[6]=e=>s.getTransactionHistory(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,JA))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",YA,[Object(l["createElementVNode"])("ul",WA,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getTransactionHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getTransactionHistory(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getTransactionHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,XA)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getTransactionHistory(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getTransactionHistory(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var KA={name:"tables",mounted(){this.setColor(),this.getUser(),this.getTransactionHistory(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"satff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("transaction_history"),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e},computedPlaceholder(){return"Date"===this.filterBy?"Sep 18, 2024":"Type to Search..."}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,user:"",transactionHistoryList:"",seachString:"",filterBy:"User",allFields:["User","Amount","Date"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"transaction_history.xlsx")},transactionType(e){let t="";return"top_up"==e?t="Top Up":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");this.user=JSON.parse(e)},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},async getTransactionHistory(e=null){let t=localStorage.getItem("user");t=JSON.parse(t);let a=null;"student"==t.role&&(a=t.id);let l={user_id:null,admin_id:null,role:null,page:e,entries_per_page:this.itemsPerPage};l.user_id=a,"organization_admin"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||(l.admin_id=this.user.id,l.role=this.user.role);try{const e=await et.post("getTransactionHistory",l);this.transactionHistoryList=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(c){console.log(c)}},async filterTransactionHistory(){(""==this.filterBy&&""==this.seachString||""!=this.filterBy&&""==this.seachString)&&this.getTransactionHistory();let e={type:this.filterBy,value:this.seachString};try{const t=await et.post("/filterTransactionHistory",e);this.transactionHistoryList=t.data}catch(t){console.log(t)}},async deleteTransactionHistory(e){try{await et.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)},formatDate(e){const t=eo()(e);return t.format("MMM D, YYYY,   HH:mm:ss")}}};a("aaa2");const GA=We()(KA,[["render",ZA]]);var eS=GA;Object(l["pushScopeId"])("data-v-562a37d9");const tS={class:" py-4"},aS={class:"row"},lS={class:"col-12"},cS={class:"card my-4"},oS={class:"card-body px-0 pb-2"},sS={class:"table-responsive p-0"},nS=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"},[Object(l["createTextVNode"])("Purchase History section not only provides a clear overview of completed purchases but also allows users to initiate refund requests directly from the purchase history,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" streamlining the process for resolving payment issues.")])])])],-1),rS={class:"card-body pt-1 p-3"},iS={class:"container-fluid mt-1"},dS={class:"listNavigation__lists"},mS={class:"listNavigation__list"},bS={class:"list__item"},pS={href:"#",class:"item__link"},uS={class:"item__icon"},OS=["src"],hS={class:"item__content"},jS={class:"label text-sm"},gS={class:"label text-success"},fS={key:0,class:"text-success text-sm"},ES={key:1,class:"text-success text-sm"},VS={key:2,class:"ms-1 text-primary text-sm"},NS=Object(l["createElementVNode"])("small",null," (Card Payment)",-1),xS=[NS],yS={key:3,class:"ms-1 text-warning text-sm"},vS=Object(l["createElementVNode"])("small",null," (Wallet Payment)",-1),kS=[vS],wS={key:4,class:"ms-5 text-warning text-sm"},AS=Object(l["createElementVNode"])("small",null,"(Refunded)",-1),SS=[AS],BS={class:"description"},CS={class:"me-3 trip-dates text-warning"},_S=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),PS={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},IS=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),DS=[IS];function TS(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",tS,[Object(l["createElementVNode"])("div",aS,[Object(l["createElementVNode"])("div",lS,[Object(l["createElementVNode"])("div",cS,[Object(l["createElementVNode"])("div",oS,[Object(l["createElementVNode"])("div",sS,[nS,Object(l["createElementVNode"])("div",rS,[Object(l["createElementVNode"])("div",iS,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",dS,[Object(l["createElementVNode"])("ul",mS,[Object(l["createElementVNode"])("li",bS,[Object(l["createElementVNode"])("a",pS,[Object(l["createElementVNode"])("div",uS,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,OS)]),Object(l["createElementVNode"])("div",hS,[Object(l["createElementVNode"])("h4",jS,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1),Object(l["createElementVNode"])("p",gS,"Price - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price)),1),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",fS,[Object(l["createElementVNode"])("small",null," Fully Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",ES,[Object(l["createElementVNode"])("small",null,"Partially Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",VS,xS)):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yS,kS)):Object(l["createCommentVNode"])("",!0),"refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",wS,SS)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",BS,"Detail: "+Object(l["toDisplayString"])(t.detail),1),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",CS,"Date "+Object(l["toDisplayString"])(s.formatDateString(t.created_at)),1)])]),_S])])])])]))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",PS,DS)):Object(l["createCommentVNode"])("",!0)])])])])])])])])}Object(l["popScopeId"])();var MS={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{shopItems:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await et.post("/getMyPurchases",t);this.shopItems=e.data.data}catch(a){console.log(a)}},async deleteShopItem(e){try{await et.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await et.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=eo()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("dcd4");const zS=We()(MS,[["render",TS],["__scopeId","data-v-562a37d9"]]);var FS=zS;const US={class:"container-fluid"},LS={class:"row"},$S={class:"col-12"},qS={class:"card px-3"},RS=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description ms-3"},[Object(l["createTextVNode"])("The Purchase History section provides detailed records of each purchase, including the Item Name, Buyer Name, Price, Amount Paid,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" Payment Status, and Date of Purchase. This feature helps track all transactions, offering a clear and organized overview of past purchases.")])])],-1),HS={class:"card-body px-0 pb-2"},QS={class:"table-responsive p-0"},JS={class:"filter-container ms-2 mb-2"},YS={class:"row",style:{width:"100%"}},WS={class:"col-4"},XS={style:{display:"flex"}},ZS=["value"],KS={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},GS=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),eB=Object(l["createTextVNode"])(" Export To XLS "),tB=[GS,eB],aB={class:"table-responsive p-0"},lB={ref:"table",class:"table align-items-center mb-0"},cB=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Buyer "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Amount Paid "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Payment Method "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),oB={key:0},sB=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),nB=[sB],rB={class:"align-middle text-center"},iB={class:"text-secondary text-xs font-weight-bold"},dB={class:"align-middle text-center d-flex flex-column"},mB={class:"text-secondary text-xs"},bB={class:"text-secondary text-xs"},pB={class:"align-middle text-center"},uB=["src"],OB={class:"text-secondary text-xs "},hB={class:"align-middle text-center"},jB={class:"text-secondary text-xs"},gB={class:"align-middle text-center"},fB={class:"text-secondary text-xs"},EB={class:"align-middle text-center"},VB={key:0,class:"text-success text-xs"},NB={key:1,class:"text-warning text-xs"},xB={class:"align-middle text-center text-sm"},yB={key:0,class:"badge badge-sm bg-gradient-danger"},vB={key:1,class:"badge badge-sm bg-gradient-success"},kB={class:"align-middle text-center text-sm"},wB={class:"align-middle text-center text-sm"},AB=["onClick"],SB={key:1,class:"badge badge-sm bg-gradient-success"},BB={class:"row"},CB={class:"col-md-12 col-lg-12"},_B={class:"pagination-container"},PB={class:"entries-dropdown"},IB=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),DB=["value"],TB={class:"pagination-wrapper"},MB={class:"pagination"},zB=["onClick"];function FB(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",US,[Object(l["createElementVNode"])("div",LS,[Object(l["createElementVNode"])("div",$S,[Object(l["createElementVNode"])("div",qS,[RS,Object(l["createElementVNode"])("div",HS,[Object(l["createElementVNode"])("div",QS,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",JS,[Object(l["createElementVNode"])("div",YS,[Object(l["createElementVNode"])("div",WS,[Object(l["createElementVNode"])("span",XS,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterPurchaseHistory&&s.filterPurchaseHistory(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterPurchaseHistory&&s.filterPurchaseHistory(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"110px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,ZS))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",KS,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS()),style:{"padding-top":"7px"}},tB)])])])]),Object(l["createElementVNode"])("div",aB,[Object(l["createElementVNode"])("table",lB,[cB,Object(l["createElementVNode"])("tbody",null,[0===o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",oB,nB)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",rB,[Object(l["createElementVNode"])("span",iB,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",dB,[Object(l["createElementVNode"])("span",mB,Object(l["toDisplayString"])(t.buyer_name)+" ,",1),Object(l["createElementVNode"])("small",bB,Object(l["toDisplayString"])(t.buyer_email),1)]),Object(l["createElementVNode"])("td",pB,[t.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+t.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,uB)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",OB,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",hB,[Object(l["createElementVNode"])("span",jB,"£"+Object(l["toDisplayString"])(s.formattedPrice(t.price)),1)]),Object(l["createElementVNode"])("td",gB,[Object(l["createElementVNode"])("span",fB,"£"+Object(l["toDisplayString"])(s.formattedPrice(t.amount_paid)),1)]),Object(l["createElementVNode"])("td",EB,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",VB,"Card Payment")):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",NB,"Wallet Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",xB,["partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yB,"Partially Paid")):Object(l["createCommentVNode"])("",!0),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",vB,"Fully Paid")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",kB,Object(l["toDisplayString"])(s.formatDateString(t.created_at)),1),Object(l["createElementVNode"])("td",wB,[null==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,onClick:e=>s.confirmRefund(t.id),class:"badge badge-sm bg-gradient-danger",style:{cursor:"pointer"}},"Refund ->",8,AB)):Object(l["createCommentVNode"])("",!0),"refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",SB,"Refunded")):Object(l["createCommentVNode"])("",!0)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",BB,[Object(l["createElementVNode"])("div",CB,[Object(l["createElementVNode"])("div",_B,[Object(l["createElementVNode"])("div",PB,[IB,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemsPerPage=e),onChange:t[6]||(t[6]=e=>s.getPurchaseHistory(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,DB))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",TB,[Object(l["createElementVNode"])("ul",MB,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getPurchaseHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getPurchaseHistory(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getPurchaseHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,zB)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getPurchaseHistory(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getPurchaseHistory(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var UB={name:"tables",mounted(){this.setColor(),this.getUser(),this.getPurchaseHistory(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("purchase_history"),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Item Name",allFields:["Buyer","Item Name","Price","Amount Paid","Payment Status"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmRefund(e){Kc.a.fire({title:"Are you sure?",text:"Paid Amount will be refunded and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, refund it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.refundActions(e)})},exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"purchase_history.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async refundActions(e){let t={purchase_id:e};try{await et.post("/refundStatus",t),this.snackbarMsg("Successfuly Refunded!"),this.getPurchaseHistory()}catch(a){console.log(a),this.snackbarMsg("Something went wrong!")}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getPurchaseHistory(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await et.post("/getMyPurchases",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterPurchaseHistory(){if(""==this.filterBy&&""==this.seachString)return void this.getPurchaseHistory();if(""!=this.filterBy&&""==this.seachString)return void this.getPurchaseHistory();let e={type:this.filterBy,value:this.seachString};try{const t=await et.post("/filterPurchaseHistory",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await et.delete("/deleteShopItem/"+e),this.getPurchaseHistory(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=eo()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await et.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("2ae0");const LB=We()(UB,[["render",FB]]);var $B=LB;const qB={class:""},RB={class:"row"},HB={class:"col-12"},QB={class:"card"},JB={class:"card-body px-0 pb-2"},YB={class:"table-responsive p-0"},WB=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PENDING INSTALLMENTS",-1),XB=Object(l["createElementVNode"])("div",{class:"filter-container mb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"ms-4 page-description"}," In the Pending Installments section, you can track and manage pending payments for students. This section allows you to view details of pending installments. ")])],-1),ZB={class:"filter-container ms-3 mb-2"},KB={style:{display:"flex"}},GB=["value"],eC={class:"card-body pt-1 p-3"},tC={class:"container-fluid mt-1"},aC={class:"listNavigation__lists"},lC={class:"listNavigation__list"},cC={class:"list__item"},oC={href:"#",class:"item__link"},sC={class:"item__icon"},nC=["src"],rC={class:"item__content"},iC={class:"label text-sm"},dC={class:"label text-success"},mC={class:"description"},bC=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),pC={key:0,class:""},uC=Object(l["createElementVNode"])("h4",{class:"label text-sm text-warning"},"Buyer",-1),OC={class:"label text-sm"},hC={class:"label text-success"},jC=["onClick"],gC={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},fC=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),EC=[fC],VC={class:"row"},NC={class:"col-md-12 col-lg-12"},xC={class:"pagination-container"},yC={class:"entries-dropdown"},vC=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),kC=["value"],wC={class:"pagination-wrapper"},AC={class:"pagination"},SC=["onClick"];function BC(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qB,[Object(l["createElementVNode"])("div",RB,[Object(l["createElementVNode"])("div",HB,[Object(l["createElementVNode"])("div",QB,[Object(l["createElementVNode"])("div",JB,[Object(l["createElementVNode"])("div",YB,[WB,XB,Object(l["createElementVNode"])("div",ZB,[Object(l["createElementVNode"])("span",KB,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterInstallments&&s.filterInstallments(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterInstallments&&s.filterInstallments(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,GB))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",eC,[Object(l["createElementVNode"])("div",tC,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",aC,[Object(l["createElementVNode"])("ul",lC,[Object(l["createElementVNode"])("li",cC,[Object(l["createElementVNode"])("a",oC,[Object(l["createElementVNode"])("div",sC,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,nC)]),Object(l["createElementVNode"])("div",rC,[Object(l["createElementVNode"])("h4",iC,"Installment No."+Object(l["toDisplayString"])(t.installment_no),1),Object(l["createElementVNode"])("p",dC,"Installment Amount - £"+Object(l["toDisplayString"])(s.formattedAmount(t.installment_amount)),1),Object(l["createElementVNode"])("div",mC,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1)]),bC]),"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pC,[uC,Object(l["createElementVNode"])("h4",OC,Object(l["toDisplayString"])(t.buyer_name),1),Object(l["createElementVNode"])("p",hC,Object(l["toDisplayString"])(t.buyer_email),1)])):Object(l["createCommentVNode"])("",!0),"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:e=>s.payNow(t.id),style:{"font-size":"12px",width:"25% !important","background-color":"#573078"},class:"trips-btn btn text-white fw-2 py-2 px-1 border-radius-lg"}," Pay now",8,jC)):Object(l["createCommentVNode"])("",!0)])])])]))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",gC,EC)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",VC,[Object(l["createElementVNode"])("div",NC,[Object(l["createElementVNode"])("div",xC,[Object(l["createElementVNode"])("div",yC,[vC,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.itemsPerPage=e),onChange:t[5]||(t[5]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,kC))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",wC,[Object(l["createElementVNode"])("ul",AC,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,SC)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var CC={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("pending_installments"),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Buyer",allFields:["Buyer","Item Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await et.post("/getMyInstallments",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterInstallments(){(""==this.filterBy&&""==this.seachString||""!=this.filterBy&&""==this.seachString)&&this.getShopItems();let e={type:this.filterBy,value:this.seachString};try{const t=await et.post("/filterInstallments",e);this.shopItems=t.data}catch(t){console.log(t)}},async deleteShopItem(e){try{await et.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},payNow(e){this.$router.push({name:"pay-installment",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await et.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=eo()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("8908");const _C=We()(CC,[["render",BC]]);var PC=_C,IC=a("aa68"),DC=a.n(IC);const TC={class:"row"},MC={class:"col-xl-12 col-lg-12 col-md-12"},zC={class:"card"},FC=Object(l["createElementVNode"])("div",{class:"card-header pb-0 px-3 d-flex justify-content-between"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Pay Installment")],-1),UC={class:"card-body pt-4 p-3"},LC={class:"row"},$C={class:"list-group col-xl-6 col-lg-6 col-md-6"},qC={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},RC={class:"d-flex flex-column"},HC={class:"mb-3 text-sm"},QC={key:0},JC=Object(l["createElementVNode"])("br",null,null,-1),YC={key:1,class:"text-success"},WC={key:2,class:"text-success"},XC=Object(l["createTextVNode"])(" Installments And Deposit "),ZC=Object(l["createElementVNode"])("br",null,null,-1),KC=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},null,-1),GC={class:"ms-auto text-end"},e_=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),t_=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),a_={class:"ms-auto text-end"},l_={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},c_=["onClick"],o_=Object(l["createElementVNode"])("br",null,null,-1),s_={key:0,class:"text-success me-3"},n_={key:1,class:"text-success me-3"},r_=Object(l["createElementVNode"])("br",null,null,-1),i_={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},d_={class:"d-flex flex-column"},m_={class:"mb-3 text-sm"},b_=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs"},null,-1),p_={class:"ms-auto text-end"},u_=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),O_=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),h_={class:"ms-auto text-end"},j_={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},g_=["onClick"],f_={class:"col-md-5 ms-auto"},E_=["onClick"],V_={key:0,class:"w-10 me-3 mb-0",src:DC.a,alt:"logo"},N_={key:1,class:"w-10 me-3 mb-0",src:ot.a,alt:"logo"},x_={class:"mb-0"},y_={key:0,class:"text-sm text-warning mt-1"};function v_(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",TC,[Object(l["createElementVNode"])("div",MC,[Object(l["createElementVNode"])("div",zC,[FC,Object(l["createElementVNode"])("div",UC,[Object(l["createElementVNode"])("div",LC,[Object(l["createElementVNode"])("ul",$C,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",qC,[Object(l["createElementVNode"])("div",RC,[Object(l["createElementVNode"])("h6",HC,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",QC,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),JC,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",YC," Installments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",WC,[XC,ZC,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Installments) ",1)])):Object(l["createCommentVNode"])("",!0)]),KC]),Object(l["createElementVNode"])("div",GC,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[e_,t_],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",a_,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",l_," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,c_),o_,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",s_," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",n_,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.initial_deposit_installments))+" Deposit ",1),r_,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",i_,[Object(l["createElementVNode"])("div",d_,[Object(l["createElementVNode"])("h6",m_,Object(l["toDisplayString"])(e.trip.title)+" (Trip)",1),b_]),Object(l["createElementVNode"])("div",p_,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"school_user"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[u_,O_],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",h_,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",j_," £"+Object(l["toDisplayString"])(s.formattedPrice(e.trip.budget)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,g_)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",f_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:o.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>s.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",V_)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",N_)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",x_," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,E_))),128)),Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=e=>s.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment "),Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>s.checkout("wallet_and_card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet Payment "),o.dataLoaded?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",y_,"In a Wallet & Card Payment, the wallet is charged first, and any remaining amount is charged to the card.")):Object(l["createCommentVNode"])("",!0)])])])])])])}var k_={name:"billing-card",data(){return{userCards:"",dataLoaded:!1,user:"",isSelected:0}},mounted(){this.getUser(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit_installments:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price))}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await et.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"",a=this.$route.params.id,l={payment_method:t,type:e,installment_id:a};try{await et.post("/payInstallment",l),this.snackbarMsg("Payment Successful"),this.$router.push({name:"installments"})}catch(c){console.log(c)}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await et.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};const w_=We()(k_,[["render",v_]]);var A_=w_;const S_={class:""},B_={class:"row"},C_={class:"col-12"},__={class:"card"},P_={class:"card-body px-0 pb-2"},I_={class:"table-responsive p-0"},D_=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"REFUND REQUESTS",-1),T_=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Refund Requests section, you can manage and process requests for refunds submitted by students and approve or "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("reject the request as needed. ")])],-1),M_={class:"filter-container mb-3"},z_={style:{display:"flex","margin-left":"20px"}},F_=["value"],U_={class:"card-body pt-1 p-3"},L_={class:"container-fluid mt-1"},$_={class:"col-md-8"},q_={class:"d-flex flex-column"},R_={class:"d-flex"},H_={class:"mb-3 text-sm"},Q_={key:0,style:{"font-size":"12px !important"},class:" text-sm ms-2"},J_=["src"],Y_={class:"col-md-4"},W_={class:"ms-auto text-start"},X_={class:"me-3 trip-dates text-warning"},Z_=Object(l["createElementVNode"])("br",null,null,-1),K_={class:"d-flex align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},G_={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2 mb-1"},eP={key:0,class:"text-success text-sm rounded-pill p-1"},tP=Object(l["createElementVNode"])("small",null,"Card Payment",-1),aP=[tP],lP={key:1,class:"text-warning text-sm rounded-pill p-1"},cP=Object(l["createElementVNode"])("small",null,"Wallet Payment",-1),oP=[cP],sP={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},nP={key:0,class:"text-success"},rP={key:1,class:"text-success"},iP={key:0,class:"mt-0 d-flex mt-2"},dP=["onClick"],mP=["onClick"],bP={key:1,style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},pP={key:0,class:"text-success"},uP={key:1,class:"text-success"},OP=Object(l["createElementVNode"])("br",null,null,-1),hP={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},jP=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),gP=[jP],fP={class:"row"},EP={class:"col-md-12 col-lg-12"},VP={class:"pagination-container"},NP={class:"entries-dropdown"},xP=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),yP=["value"],vP={class:"pagination-wrapper"},kP={class:"pagination"},wP=["onClick"];function AP(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",S_,[Object(l["createElementVNode"])("div",B_,[Object(l["createElementVNode"])("div",C_,[Object(l["createElementVNode"])("div",__,[Object(l["createElementVNode"])("div",P_,[Object(l["createElementVNode"])("div",I_,[D_,T_,Object(l["createElementVNode"])("div",M_,[Object(l["createElementVNode"])("span",z_,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterRefunds&&s.filterRefunds(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterRefunds&&s.filterRefunds(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,F_))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",U_,[Object(l["createElementVNode"])("div",L_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[Object(l["createElementVNode"])("div",$_,[Object(l["createElementVNode"])("div",q_,[Object(l["createElementVNode"])("span",R_,[Object(l["createElementVNode"])("h6",H_,Object(l["toDisplayString"])(t.name),1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Q_," ("+Object(l["toDisplayString"])(t.product_type)+") ",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-20 h-10 border-radius-lg"},null,8,J_)])]),Object(l["createElementVNode"])("div",Y_,[Object(l["createElementVNode"])("div",W_,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",X_,"Date "+Object(l["toDisplayString"])(s.formatDateString(t.created_at)),1)]),Z_,Object(l["createElementVNode"])("div",K_," Price - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price)),1),Object(l["createElementVNode"])("div",G_,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",eP,aP)):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",lP,oP)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sP,["fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",nP,"Fully Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",rP,"Partially Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0)]),s.userPermissions.refunds?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},["refund_requested"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iP,[Object(l["createElementVNode"])("button",{onClick:e=>s.confirmAction(t.id,"refunded"),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45  btn bg-success text-white fw-5 p-2 border-radius-lg"}," Approve Refund ",8,dP),Object(l["createElementVNode"])("button",{onClick:e=>s.confirmAction(t.id,"refund_rejected"),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn btn w-45 bg-warning text-white fw-5 p-2 border-radius-lg"}," Decline Refund ",8,mP)])):Object(l["createCommentVNode"])("",!0)],64)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bP,["not_refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",pP,"Refund Rejected")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",uP,Object(l["toDisplayString"])(t.refund_status),1))])),OP])])],64))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hP,gP)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",fP,[Object(l["createElementVNode"])("div",EP,[Object(l["createElementVNode"])("div",VP,[Object(l["createElementVNode"])("div",NP,[xP,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.itemsPerPage=e),onChange:t[5]||(t[5]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,yP))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",vP,[Object(l["createElementVNode"])("ul",kP,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,wP)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var SP={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("refunds"),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",filterBy:"Buyer",allFields:["Buyer"],seachString:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmAction(e,t){Kc.a.fire({title:"Are you sure?",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Proceed!",customClass:{popup:"custom-swal"}}).then(a=>{a.isConfirmed&&this.refundActions(e,t)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await et.post("/getRefundRequest",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterRefunds(){(""==this.filterBy&&""==this.seachString||""!=this.filterBy&&""==this.seachString)&&this.getShopItems();let e={type:this.filterBy,value:this.seachString};try{const t=await et.post("/filterRefunds",e);this.shopItems=t.data}catch(t){console.log(t)}},async refundActions(e,t){let a={refund_status:t,refund_id:e};try{await et.post("/refundStatus",a),this.getShopItems(),this.snackbarMsg("Successfuly Refunded!")}catch(l){console.log(l),this.snackbarMsg("Something went wrong!")}},async deleteShopItem(e){try{await et.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await et.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=eo()(e),a=t.format("DD MMMM YYYY, HH:mm");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("fd84");const BP=We()(SP,[["render",AP]]);var CP=BP;Object(l["pushScopeId"])("data-v-69108a95");const _P={class:"row"},PP={class:"col-md-12 col-sm-12"},IP={class:"support-form-container"},DP=Object(l["createElementVNode"])("h5",null,"Contact Support",-1),TP={class:"col-md-6 col-sm-12"},MP={key:0,class:"row mb-1 validation-errors bg-warning rounded p-1"},zP={class:"form-group"},FP=Object(l["createElementVNode"])("label",{for:"fullName",class:"input-label"},"Full Name",-1),UP={class:"form-group"},LP=Object(l["createElementVNode"])("label",{for:"email"},"Email",-1),$P={class:"form-group"},qP=Object(l["createElementVNode"])("label",{for:"subject"},"Subject",-1),RP={class:"form-group"},HP=Object(l["createElementVNode"])("label",{for:"message"},"Message",-1),QP=Object(l["createElementVNode"])("button",{type:"submit",class:"submit-button btn p-1 text-sm"},"Submit",-1);function JP(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_P,[Object(l["createElementVNode"])("div",PP,[Object(l["createElementVNode"])("div",IP,[Object(l["createElementVNode"])("form",{class:"support-form",onSubmit:t[4]||(t[4]=Object(l["withModifiers"])((...e)=>s.handleSubmit&&s.handleSubmit(...e),["prevent"]))},[DP,Object(l["createElementVNode"])("div",TP,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",MP,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",zP,[FP,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.fullName=e),type:"text",class:"input-box",id:"fullName",name:"fullName",required:""},null,512),[[l["vModelText"],o.form.fullName]])]),Object(l["createElementVNode"])("div",UP,[LP,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.email=e),type:"email",class:"input-box",id:"email",name:"email",required:""},null,512),[[l["vModelText"],o.form.email]])]),Object(l["createElementVNode"])("div",$P,[qP,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.subject=e),type:"text",class:"input-box",id:"subject",name:"subject",required:""},null,512),[[l["vModelText"],o.form.subject]])]),Object(l["createElementVNode"])("div",RP,[HP,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.form.message=e),id:"message",class:"input-area",name:"message",rows:"5",required:""},null,512),[[l["vModelText"],o.form.message]])])]),QP],32)])])])}Object(l["popScopeId"])();var YP={data(){return{isError:!1,validationErrors:"",user:"",form:{fullName:"",email:"",subject:"",message:""}}},mounted(){this.getUser(),this.$globalHelper.buttonColor()},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,"student"==e.role||"staff"==e.role?console.log(""):this.$router.go(-1)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async handleSubmit(){try{await et.post("/sendSupportEmail",this.form),this.snackbarMsg("Message Sent Successfully!"),this.isError=!1,Object.keys(this.form).forEach(e=>this.form[e]="")}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("1ccf");const WP=We()(YP,[["render",JP],["__scopeId","data-v-69108a95"]]);var XP=WP;const ZP={class:"container-fluid"},KP={class:"row"},GP={class:"col-12"},eI={class:"card ps-3"},tI={class:"d-flex justify-content-between border-radius-lg pt-4"},aI=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS",-1),lI=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),cI=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee Shop Items. You can add new items, delete or edit existing items, and update their quantity, status, "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" and price. This functionality ensures effective management of the shop items. ")])],-1),oI={class:"card-body px-0 pb-2"},sI={class:"table-responsive p-0"},nI={class:"filter-container ms-2 mb-2"},rI={class:"row",style:{width:"100%"}},iI={class:"col-4"},dI={style:{display:"flex"}},mI=["value"],bI={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},pI=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),uI=Object(l["createTextVNode"])(" Export To XLS "),OI=[pI,uI],hI={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},jI=Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon me-1"},null,-1),gI=Object(l["createTextVNode"])(" Products Owner "),fI=[jI,gI],EI={class:"table-responsive p-0"},VI={ref:"table",class:"table align-items-center mb-0"},NI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),xI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),yI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),vI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Sold Quantity ",-1),kI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Expiration Date ",-1),wI=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),AI={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},SI=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),BI=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),CI={key:0},_I=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),PI=[_I],II={class:"align-middle text-center"},DI={class:"text-secondary text-xs font-weight-bold"},TI={class:"align-middle text-center"},MI=["src"],zI={class:"text-secondary text-xs "},FI={class:"align-middle text-center"},UI={class:"text-secondary text-xs "},LI={class:"align-middle text-center"},$I={class:"text-secondary text-xs "},qI={class:"align-middle text-center"},RI={class:"text-secondary text-xs "},HI={class:"align-middle text-center"},QI={class:"text-secondary text-xs "},JI={key:0,class:"align-middle text-center"},YI={class:"text-secondary text-xs "},WI={class:"align-middle text-center text-sm"},XI={key:0,class:"badge badge-sm bg-gradient-success"},ZI={key:1,class:"badge badge-sm bg-gradient-danger"},KI={class:"align-middle text-center text-sm"},GI={key:0},eD=["onClick"],tD=["onClick"],aD={class:"row"},lD={class:"col-md-12 col-lg-12"},cD={class:"pagination-container"},oD={class:"entries-dropdown"},sD=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),nD=["value"],rD={class:"pagination-wrapper"},iD={class:"pagination"},dD=["onClick"];function mD(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("ProductOwner");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ZP,[Object(l["createElementVNode"])("div",KP,[Object(l["createElementVNode"])("div",GP,[Object(l["createElementVNode"])("div",eI,[Object(l["createElementVNode"])("div",tI,[aI,s.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-items"}},{default:Object(l["withCtx"])(()=>[lI]),_:1})):Object(l["createCommentVNode"])("",!0)]),cI,Object(l["createElementVNode"])("div",oI,[Object(l["createElementVNode"])("div",sI,[Object(l["createElementVNode"])("div",nI,[Object(l["createElementVNode"])("div",rI,[Object(l["createElementVNode"])("div",iI,[Object(l["createElementVNode"])("span",dI,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,mI))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",bI,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},OI)]),Object(l["createElementVNode"])("div",hI,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.showModal=!0),style:{width:"120px"}},fI)])])]),Object(l["createElementVNode"])("div",EI,[Object(l["createElementVNode"])("table",VI,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[NI,xI,yI,vI,kI,wI,o.user&&"super_admin"==o.user.role||o.user&&"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",AI," Shop ")):Object(l["createCommentVNode"])("",!0),SI,BI])]),Object(l["createElementVNode"])("tbody",null,[0===o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",CI,PI)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(a,c)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:c},[Object(l["createElementVNode"])("td",II,[Object(l["createElementVNode"])("span",DI,Object(l["toDisplayString"])(a.id),1)]),Object(l["createElementVNode"])("td",TI,[a.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+a.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,MI)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",zI,Object(l["toDisplayString"])(a.name),1)]),Object(l["createElementVNode"])("td",FI,[Object(l["createElementVNode"])("span",UI,Object(l["toDisplayString"])(a.quantity),1)]),Object(l["createElementVNode"])("td",LI,[Object(l["createElementVNode"])("span",$I,Object(l["toDisplayString"])(a.quantity_sold),1)]),Object(l["createElementVNode"])("td",qI,[Object(l["createElementVNode"])("span",RI,Object(l["toDisplayString"])(a.valid_to),1)]),Object(l["createElementVNode"])("td",HI,[Object(l["createElementVNode"])("span",QI,"£"+Object(l["toDisplayString"])(s.formattedPrice(a.price)),1)]),o.user&&"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",JI,[Object(l["createElementVNode"])("span",YI,Object(l["toDisplayString"])(t.shop_name?t.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",WI,[a.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",XI,"Available")):Object(l["createCommentVNode"])("",!0),0==a.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",ZI,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",KI,[o.user&&"student"!=o.user.role&&"parent"!=o.user.role&&"staff"!=o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",GI,[s.userPermissions.edit_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:e=>s.editShopItem(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,eD)):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:e=>s.confirmDelete(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,tD)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0)])]))),128))],64))),128))])],512)])]),Object(l["createVNode"])(r,{show:o.showModal,ownerData:o.ownerData,onClose:t[6]||(t[6]=e=>o.showModal=!1),onUpdateTask:e.updateAmount},null,8,["show","ownerData","onUpdateTask"]),Object(l["createElementVNode"])("div",aD,[Object(l["createElementVNode"])("div",lD,[Object(l["createElementVNode"])("div",cD,[Object(l["createElementVNode"])("div",oD,[sD,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.itemsPerPage=e),onChange:t[8]||(t[8]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,nD))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",rD,[Object(l["createElementVNode"])("ul",iD,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,dD)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}Object(l["pushScopeId"])("data-v-0c52248a");const bD={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},pD={class:"modal-dialog modal-dialog-centered",style:{width:"28%"}},uD={class:"modal-content"},OD={class:"modal-header"},hD=Object(l["createElementVNode"])("h5",{class:"h5 modal-title"},"Product Owner",-1),jD=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),gD=[jD],fD={class:"pt-4 modal-body"},ED=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),VD={class:"mb-4 input-group"},ND={class:"mb-4 input-group"},xD={key:0,class:"alert alert-success"},yD={class:"text-end"};function vD(e,t,a,c,o,s){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bD,[Object(l["createElementVNode"])("div",pD,[Object(l["createElementVNode"])("div",uD,[Object(l["createElementVNode"])("div",OD,[hD,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e)),"aria-label":"Close"},gD)]),Object(l["createElementVNode"])("div",fD,[ED,Object(l["createElementVNode"])("div",VD,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>o.owner.product_owner_name=e),type:"email",class:"form-control border p-1",placeholder:"Name"},null,512),[[l["vModelText"],o.owner.product_owner_name]])]),Object(l["createElementVNode"])("div",ND,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[2]||(t[2]=e=>o.owner.product_owner_email=e),type:"email",class:"form-control border p-1",placeholder:"Email"},null,512),[[l["vModelText"],o.owner.product_owner_email]])]),o.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",xD,Object(l["toDisplayString"])(o.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",yD,[Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>s.saveChanges&&s.saveChanges(...e)),class:"m-1 btn btn-primary"}," Save "),Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var kD={props:{show:{type:Boolean,required:!0},ownerData:{type:Object,required:!0}},mounted(){this.$globalHelper.buttonColor()},computed:{formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},data(){return{addedBalance:null,successMessage:"",owner:{product_owner_name:"",product_owner_email:""}}},watch:{ownerData:{handler(e){this.owner=e},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},async saveChanges(){try{const e="/productsOwner";await et.post(e,this.owner),this.snackbarMsg("Item Updated Successfuly")}catch(e){console.log(e)}this.$emit("update-task",this.addedBalance),this.closeModal()}}};a("4aee");const wD=We()(kD,[["render",vD],["__scopeId","data-v-0c52248a"]]);var AD=wD,SD={components:{ProductOwner:AD},name:"tables",mounted(){this.setColor(),this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_shop"),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{ownerData:"",showModal:!1,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",shopItems:"",user:"",filterBy:"Name",allFields:["Name","Quantity","Price"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"shop_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await et.post("/getShopItems",t);this.shopItems=e.data.data.data,console.log(this.shopItems);let a=this.shopItems[0];this.ownerData={product_owner_name:a.product_owner_name,product_owner_email:a.product_owner_email},this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await et.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await et.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await et.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("cf0c");const BD=We()(SD,[["render",mD]]);var CD=BD;const _D={class:"container-fluid"},PD={class:"row"},ID={class:"col-12"},DD={class:"card px-3"},TD=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"page-description"}," Every archived Item can be found in this table. Here, you can manage archived Shop Items. You can permanently delete them in bulk, restore them, or export the data to an Excel sheet ")])],-1),MD={class:"card-body px-0 pb-2"},zD={class:"table-responsive p-0"},FD={class:"filter-container ms-2 mb-2"},UD={class:"row",style:{width:"100%"}},LD={class:"col-4"},$D={style:{display:"flex"}},qD=["value"],RD={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},HD=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),QD=Object(l["createTextVNode"])(" Export To XLS "),JD=[HD,QD],YD={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},WD=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),XD=Object(l["createTextVNode"])(" Bulk Restore "),ZD=[WD,XD],KD={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},GD=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),eT=Object(l["createTextVNode"])(" Bulk Delete "),tT=[GD,eT],aT={class:"table-responsive p-0"},lT={ref:"table",class:"table align-items-center mb-0"},cT={class:""},oT={class:"form-check",style:{"margin-left":"-20px"}},sT=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),nT=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),rT=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),iT=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),dT=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),mT={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},bT=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),pT={key:0},uT=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),OT=[uT],hT={class:"align-middle text-center text-sm"},jT={class:"form-check"},gT=["checked","onChange"],fT=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),ET={class:"align-middle text-center"},VT={class:"text-secondary text-xs font-weight-bold"},NT={class:"align-middle text-center"},xT={class:"text-secondary text-xs "},yT={class:"align-middle text-center"},vT={class:"text-secondary text-xs "},kT={class:"align-middle text-center"},wT={class:"text-secondary text-xs "},AT={key:0,class:"align-middle text-center"},ST={class:"text-secondary text-xs "},BT={class:"align-middle text-center text-sm"},CT={class:"badge badge-sm bg-gradient-success"},_T={class:"row"},PT={class:"col-md-12 col-lg-12"},IT={class:"pagination-container"},DT={class:"entries-dropdown"},TT=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),MT=["value"],zT={class:"pagination-wrapper"},FT={class:"pagination"},UT=["onClick"];function LT(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_D,[Object(l["createElementVNode"])("div",PD,[Object(l["createElementVNode"])("div",ID,[Object(l["createElementVNode"])("div",DD,[TD,Object(l["createElementVNode"])("div",MD,[Object(l["createElementVNode"])("div",zD,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",FD,[Object(l["createElementVNode"])("div",UD,[Object(l["createElementVNode"])("div",LD,[Object(l["createElementVNode"])("span",$D,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,qD))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",RD,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},JD)]),Object(l["createElementVNode"])("div",YD,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.confirmAction("restore"))},ZD)]),Object(l["createElementVNode"])("div",KD,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.confirmAction("delete"))},tT)):Object(l["createCommentVNode"])("",!0)])])])]),Object(l["createElementVNode"])("div",aT,[Object(l["createElementVNode"])("table",lT,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",cT,[Object(l["createElementVNode"])("div",oT,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),sT])]),nT,rT,iT,dT,o.user&&"super_admin"==o.user.role||o.user&&"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",mT," Shop ")):Object(l["createCommentVNode"])("",!0),bT])]),Object(l["createElementVNode"])("tbody",null,[0===o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",pT,OT)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",hT,[Object(l["createElementVNode"])("div",jT,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(t.id),onChange:e=>s.selectRecord(t.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,gT),fT])]),Object(l["createElementVNode"])("td",ET,[Object(l["createElementVNode"])("span",VT,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",NT,[Object(l["createElementVNode"])("span",xT,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",yT,[Object(l["createElementVNode"])("span",vT,Object(l["toDisplayString"])(t.quantity),1)]),Object(l["createElementVNode"])("td",kT,[Object(l["createElementVNode"])("span",wT,"£"+Object(l["toDisplayString"])(s.formattedPrice(t.price)),1)]),o.user&&"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",AT,[Object(l["createElementVNode"])("span",ST,Object(l["toDisplayString"])(e.shop_name?e.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",BT,[Object(l["createElementVNode"])("span",CT,Object(l["toDisplayString"])(t.status),1)])]))),128))],64))),128))])],512)])]),Object(l["createElementVNode"])("div",_T,[Object(l["createElementVNode"])("div",PT,[Object(l["createElementVNode"])("div",IT,[Object(l["createElementVNode"])("div",DT,[TT,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,MT))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",zT,[Object(l["createElementVNode"])("ul",FT,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,UT)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var $T={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getShopItems(),await this.selectAll()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop")},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["Name","Quantity","Price"],seachString:"",selectall:!1,selectedRecords:[],shopItems:"",user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"archived_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await et.post("/getArchivedItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await et.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await et.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},selectAll(){this.selectedRecords=[],this.shopItems[0].shop_items.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkRestore(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await et.post("/bulkRestoreItems",e),this.snackbarMsg("Successfully restored"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},async bulkDelete(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await et.post("/bulkDeleteItems",e),this.snackbarMsg("Successfully deleted"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await et.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},confirmAction(e){Kc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})}}};a("1a8c6");const qT=We()($T,[["render",LT]]);var RT=qT;Object(l["pushScopeId"])("data-v-50918c62");const HT={class:"container-fluid py-4"},QT={class:"row"},JT={class:"col-12"},YT={class:"card my-4"},WT={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},XT=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Shop Item",-1),ZT=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),KT={class:"card-body px-0 pb-2"},GT={class:"table-responsive p-0"},eM={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},tM={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},aM={class:"form-bg container p-4"},lM={class:"card card-plain"},cM={class:"card-body"},oM={role:"form"},sM={key:0,class:"row mb-1 validation-errors"},nM={class:"row mb-1"},rM={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},iM=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),dM={key:0,class:"text-danger error-txt"},mM={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},bM=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),pM={key:0,class:"text-danger error-txt"},uM={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},OM=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),hM={key:0,class:"text-danger error-txt"},jM={class:"mb-1"},gM=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),fM={key:0,class:"text-danger error-txt"},EM={class:"row mb-1"},VM={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},NM=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),xM={key:0,class:"text-danger error-txt"},yM={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},vM=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),kM={key:0,class:"text-danger error-txt"},wM={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},AM=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),SM=Object(l["createElementVNode"])("br",null,null,-1),BM=["value"],CM={key:0,class:"text-danger error-txt"},_M={class:"row mb-1"},PM={class:"col-xl-12 col-lg-12 col-md-12 mb-1"},IM=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Visibility Options",-1),DM=Object(l["createElementVNode"])("br",null,null,-1),TM={class:"row mb-1"},MM={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},zM=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Colleges",-1),FM=Object(l["createElementVNode"])("br",null,null,-1),UM={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},LM=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Courses",-1),$M=Object(l["createElementVNode"])("br",null,null,-1),qM={class:"row p-2"},RM=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),HM={class:"col-xl-4 col-lg-4 col-md-4"},QM={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},JM=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),YM={class:"checkbox-container mt-2 me-5"},WM=["checked"],XM=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),ZM={class:"col-xl-4 col-lg-4 col-md-4"},KM={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},GM=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Installments",-1),ez={class:"checkbox-container mt-2 me-5"},tz=["checked"],az=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),lz={class:"col-xl-4 col-lg-4 col-md-4"},cz={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},oz=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),sz={class:"checkbox-container mt-2 me-5"},nz=["checked"],rz=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),iz={key:1,class:"row p-2"},dz={class:"col-xl-4 col-lg-4 col-md-4"},mz={class:"mb-1"},bz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),pz={class:"col-xl-4 col-lg-4 col-md-4"},uz={class:"mb-1"},Oz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),hz={class:"mb-1"},jz={class:"input-label",for:"enrollment_date"},gz=["onUpdate:modelValue"],fz={key:2,class:"row p-2"},Ez={class:"col-xl-4 col-lg-4 col-md-4"},Vz={class:"mb-1"},Nz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),xz={class:"col-xl-4 col-lg-4 col-md-4"},yz={class:"mb-1"},vz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),kz={class:"col-xl-4 col-lg-4 col-md-4"},wz={class:"mb-1"},Az=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),Sz={class:"col-xl-4 col-lg-4 col-md-4"},Bz={class:"mb-1"},Cz=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),_z={class:"mb-1"},Pz={class:"input-label",for:"enrollment_date"},Iz=["onUpdate:modelValue"],Dz={class:"mb-1"},Tz={class:"upload-container"},Mz={key:0,class:"image-preview"},zz=["src"],Fz=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),Uz={for:"file-input",class:"file-input-label"},Lz={key:0},$z={key:1},qz=Object(l["createElementVNode"])("br",null,null,-1),Rz={key:0,class:"text-danger error-txt"},Hz={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Qz={class:""};function Jz(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",HT,[Object(l["createElementVNode"])("div",QT,[Object(l["createElementVNode"])("div",JT,[Object(l["createElementVNode"])("div",YT,[Object(l["createElementVNode"])("div",WT,[XT,Object(l["createVNode"])(n,{to:{name:"shop-items"}},{default:Object(l["withCtx"])(()=>[ZT]),_:1})]),Object(l["createElementVNode"])("div",KT,[Object(l["createElementVNode"])("div",GT,[Object(l["createElementVNode"])("div",eM,[Object(l["createElementVNode"])("div",tM,[Object(l["createElementVNode"])("div",aM,[Object(l["createElementVNode"])("div",lM,[Object(l["createElementVNode"])("div",cM,[Object(l["createElementVNode"])("form",oM,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",sM,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationError,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",nM,[Object(l["createElementVNode"])("div",rM,[iM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newItem.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dM,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",mM,[bM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>o.newItem.price=e),type:"number",step:"0.01",min:"0",placeholder:"price",name:"price"},null,512),[[l["vModelText"],o.newItem.price]]),""!==o.formValidation&&""!==o.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pM,"Price is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",uM,[OM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[2]||(t[2]=e=>o.newItem.quantity=e),min:"0",type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],o.newItem.quantity]]),""!==o.formValidation&&""!==o.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hM,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",jM,[gM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],o.newItem.detail]]),""!==o.formValidation&&""!==o.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fM,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EM,[Object(l["createElementVNode"])("div",VM,[NM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_from","onUpdate:modelValue":t[4]||(t[4]=e=>o.newItem.valid_from=e),type:"date",placeholder:"Valid From",name:"valid_from"},null,512),[[l["vModelText"],o.newItem.valid_from]]),""!==o.formValidation&&""!==o.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xM,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",yM,[vM,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_to","onUpdate:modelValue":t[5]||(t[5]=e=>o.newItem.valid_to=e),type:"date",placeholder:"Valid To",name:"valid_to"},null,512),[[l["vModelText"],o.newItem.valid_to]]),""!==o.formValidation&&""!==o.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",kM,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",wM,[AM,SM,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.productTypes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,BM))),128))],512),[[l["vModelSelect"],o.newItem.product_type]]),""!==o.formValidation&&""!==o.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",CM,"Shop is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",_M,[Object(l["createElementVNode"])("div",PM,[IM,DM,Object(l["createVNode"])(r,{label:"Visibility Options",options:o.visibilityOptions,onInput:s.handleVisibility,placeholder:"Visibility Options"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",TM,[Object(l["createElementVNode"])("div",MM,[zM,FM,Object(l["createVNode"])(r,{label:"Payment Options",options:o.schoolsList,onInput:s.handleColleges,placeholder:"Limit Colleges"},null,8,["options","onInput"])]),Object(l["createElementVNode"])("div",UM,[LM,$M,Object(l["createVNode"])(r,{label:"Visibility Options",options:o.coursesList,onInput:s.handleCourses,placeholder:"Limit Courses"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",qM,[RM,Object(l["createElementVNode"])("div",HM,[Object(l["createElementVNode"])("span",QM,[JM,Object(l["createElementVNode"])("div",YM,[Object(l["createElementVNode"])("input",{checked:"installments"==o.paymentPlan,onChange:t[7]||(t[7]=e=>s.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,WM),XM])])]),Object(l["createElementVNode"])("div",ZM,[Object(l["createElementVNode"])("span",KM,[GM,Object(l["createElementVNode"])("div",ez,[Object(l["createElementVNode"])("input",{checked:"deposit"==o.paymentPlan,onChange:t[8]||(t[8]=e=>s.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,tz),az])])]),Object(l["createElementVNode"])("div",lz,[Object(l["createElementVNode"])("span",cz,[oz,Object(l["createElementVNode"])("div",sz,[Object(l["createElementVNode"])("input",{checked:"manual"==o.paymentPlan,onChange:t[9]||(t[9]=e=>s.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,nz),rz])])])]),"installments"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iz,[Object(l["createElementVNode"])("div",dz,[Object(l["createElementVNode"])("div",mz,[bz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",pz,[Object(l["createElementVNode"])("div",uz,[Oz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",hz,[Object(l["createElementVNode"])("label",jz,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,gz),[[l["vModelText"],o.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",fz,[Object(l["createElementVNode"])("div",Ez,[Object(l["createElementVNode"])("div",Vz,[Nz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",xz,[Object(l["createElementVNode"])("div",yz,[vz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",kz,[Object(l["createElementVNode"])("div",wz,[Az,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",Sz,[Object(l["createElementVNode"])("div",Bz,[Cz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.initial_deposit_due_date]])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",_z,[Object(l["createElementVNode"])("label",Pz,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,Iz),[[l["vModelText"],o.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Dz,[Object(l["createElementVNode"])("div",Tz,[o.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Mz,[Object(l["createElementVNode"])("img",{src:o.imageFileUrl,alt:"Image Preview"},null,8,zz)])):Object(l["createCommentVNode"])("",!0),Fz,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[16]||(t[16]=(...e)=>s.handleImageUpload&&s.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",Uz,[e.mageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",$z,Object(l["toDisplayString"])(o.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Lz,"Choose a file"))])]),qz,""!==o.formValidation&&""!==o.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Rz,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",Hz,[Object(l["createElementVNode"])("div",Qz,[Object(l["createElementVNode"])("button",{onClick:t[17]||(t[17]=(...e)=>s.saveNewItem&&s.saveNewItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var Yz={name:"",components:{MultiSelect:Vk},mounted(){this.getUser(),this.getAllShops(),this.getSchools(),this.getAllCourses(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_shop")},computed:{},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))}},data(){return{debounceTimeout:null,paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:null,other_installments_due_date:[]},schoolsList:null,coursesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:null,formValidation:"",allAttributes:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",allShops:"",productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],user:"",validationError:"",isError:!1,newItem:{name:"",price:"",quantity:"",product_type:"",detail:"",shop_id:"",image:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitColleges:null,limitCourses:null},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await et.get(e);this.coursesList=t.data}catch(e){console.log(e)}},async getSchools(){try{let e=await et.get("/getAllSchoolsCourses");this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},validateForm(){this.$permissions.redirectIfNotAllowed("create_shop");let e=!1,t="";t=Ns()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewItem(){this.newItem.payment_plan=this.paymentPlan,this.newItem.installmentsAndDeposit=this.installmentsAndDeposit,this.newItem.image=this.selectedImageFile,console.log(this.selectedImageFile);const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.paymentPlan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),e.append("quantity",this.newItem.quantity),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from),e.append("valid_to",this.newItem.valid_to),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));try{await et.post("/addItem",e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Saved Successfuly"),this.isError=!1}catch(t){this.validationError=t.response.data.errors,this.isError=!0}},handleAttributes(e){this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},async getAllAttributes(){try{const e=await et.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){console.log(e),this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await et.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("b794");const Wz=We()(Yz,[["render",Jz],["__scopeId","data-v-50918c62"]]);var Xz=Wz;Object(l["pushScopeId"])("data-v-81641e2e");const Zz={class:"container-fluid py-4"},Kz={class:"row"},Gz={class:"col-12"},eF={class:"card my-4"},tF={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},aF=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Shop Item",-1),lF=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),cF={class:"card-body px-0 pb-2"},oF={class:"table-responsive p-0"},sF={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},nF={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},rF={class:"form-bg container p-4"},iF={class:"card card-plain"},dF={class:"card-body"},mF={role:"form"},bF={key:0,class:"row mb-1 validation-errors"},pF={class:"row mb-1"},uF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},OF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),hF={key:0,class:"text-danger error-txt"},jF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},gF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),fF={key:0,class:"text-danger error-txt"},EF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},VF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),NF={key:0,class:"text-danger error-txt"},xF={class:"mb-1"},yF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),vF={key:0,class:"text-danger error-txt"},kF={class:"row mb-1"},wF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},AF=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),SF={key:0,class:"text-danger error-txt"},BF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},CF=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),_F={key:0,class:"text-danger error-txt"},PF={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},IF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),DF=Object(l["createElementVNode"])("br",null,null,-1),TF=["value"],MF={key:0,class:"text-danger error-txt"},zF={class:"row mb-1"},FF={class:"col-xl-12 col-lg-12 col-md-12 mb-1"},UF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Visibility Options",-1),LF=Object(l["createElementVNode"])("br",null,null,-1),$F={class:"row mb-1"},qF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},RF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Colleges",-1),HF=Object(l["createElementVNode"])("br",null,null,-1),QF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},JF=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Courses",-1),YF=Object(l["createElementVNode"])("br",null,null,-1),WF={class:"row p-2"},XF=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),ZF={class:"col-xl-4 col-lg-4 col-md-4"},KF={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},GF=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),eU={class:"checkbox-container mt-2 me-5"},tU=["checked"],aU=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),lU={class:"col-xl-4 col-lg-4 col-md-4"},cU={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},oU=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Installments",-1),sU={class:"checkbox-container mt-2 me-5"},nU=["checked"],rU=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),iU={class:"col-xl-4 col-lg-4 col-md-4"},dU={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},mU=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),bU={class:"checkbox-container mt-2 me-5"},pU=["checked"],uU=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),OU={key:1,class:"row p-2"},hU={class:"col-xl-4 col-lg-4 col-md-4"},jU={class:"mb-1"},gU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),fU={class:"col-xl-4 col-lg-4 col-md-4"},EU={class:"mb-1"},VU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),NU={class:"mb-1"},xU={class:"input-label",for:"enrollment_date"},yU=["onUpdate:modelValue"],vU={key:2,class:"row p-2"},kU={class:"col-xl-4 col-lg-4 col-md-4"},wU={class:"mb-1"},AU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),SU={class:"col-xl-4 col-lg-4 col-md-4"},BU={class:"mb-1"},CU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),_U={class:"col-xl-4 col-lg-4 col-md-4"},PU={class:"mb-1"},IU=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),DU={class:"col-xl-4 col-lg-4 col-md-4"},TU={class:"mb-1"},MU=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),zU={class:"mb-1"},FU={class:"input-label",for:"enrollment_date"},UU=["onUpdate:modelValue"],LU={class:"mb-1"},$U={class:"upload-container"},qU={key:0,class:"image-preview"},RU=["src"],HU=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),QU={for:"file-input",class:"file-input-label"},JU={key:0},YU={key:1},WU=Object(l["createElementVNode"])("br",null,null,-1),XU={key:0,class:"text-danger error-txt"},ZU={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},KU={class:""};function GU(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Zz,[Object(l["createElementVNode"])("div",Kz,[Object(l["createElementVNode"])("div",Gz,[Object(l["createElementVNode"])("div",eF,[Object(l["createElementVNode"])("div",tF,[aF,Object(l["createVNode"])(n,{to:{name:"shop-items"}},{default:Object(l["withCtx"])(()=>[lF]),_:1})]),Object(l["createElementVNode"])("div",cF,[Object(l["createElementVNode"])("div",oF,[Object(l["createElementVNode"])("div",sF,[Object(l["createElementVNode"])("div",nF,[Object(l["createElementVNode"])("div",rF,[Object(l["createElementVNode"])("div",iF,[Object(l["createElementVNode"])("div",dF,[Object(l["createElementVNode"])("form",mF,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bF,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationError,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",pF,[Object(l["createElementVNode"])("div",uF,[OF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newItem.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hF,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",jF,[gF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>o.newItem.price=e),type:"number",placeholder:"price",name:"price"},null,512),[[l["vModelText"],o.newItem.price]]),""!==o.formValidation&&""!==o.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fF,"Price is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EF,[VF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[2]||(t[2]=e=>o.newItem.quantity=e),type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],o.newItem.quantity]]),""!==o.formValidation&&""!==o.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NF,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",xF,[yF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],o.newItem.detail]]),""!==o.formValidation&&""!==o.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vF,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kF,[Object(l["createElementVNode"])("div",wF,[AF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_from","onUpdate:modelValue":t[4]||(t[4]=e=>o.newItem.valid_from=e),type:"date",placeholder:"Valid From",name:"valid_from"},null,512),[[l["vModelText"],o.newItem.valid_from]]),""!==o.formValidation&&""!==o.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",SF,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",BF,[CF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"valid_to","onUpdate:modelValue":t[5]||(t[5]=e=>o.newItem.valid_to=e),type:"date",placeholder:"Valid To",name:"valid_to"},null,512),[[l["vModelText"],o.newItem.valid_to]]),""!==o.formValidation&&""!==o.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_F,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",PF,[IF,DF,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.productTypes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,TF))),128))],512),[[l["vModelSelect"],o.newItem.product_type]]),""!==o.formValidation&&""!==o.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",MF,"Shop is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",zF,[Object(l["createElementVNode"])("div",FF,[UF,LF,Object(l["createVNode"])(r,{label:"Visibility Options",value:o.newItem.visibility_options,options:o.visibilityOptions,onInput:s.handleVisibility,placeholder:"Visibility Options"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",$F,[Object(l["createElementVNode"])("div",qF,[RF,HF,Object(l["createVNode"])(r,{label:"Payment Options",value:o.newItem.limitColleges,options:o.schoolsList,onInput:s.handleColleges,placeholder:"Limit Colleges"},null,8,["value","options","onInput"])]),Object(l["createElementVNode"])("div",QF,[JF,YF,Object(l["createVNode"])(r,{label:"Visibility Options",value:o.newItem.limitCourses,options:o.coursesList,onInput:s.handleCourses,placeholder:"Limit Courses"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",WF,[XF,Object(l["createElementVNode"])("div",ZF,[Object(l["createElementVNode"])("span",KF,[GF,Object(l["createElementVNode"])("div",eU,[Object(l["createElementVNode"])("input",{checked:"installments"==o.newItem.payment_plan,onChange:t[7]||(t[7]=e=>s.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,tU),aU])])]),Object(l["createElementVNode"])("div",lU,[Object(l["createElementVNode"])("span",cU,[oU,Object(l["createElementVNode"])("div",sU,[Object(l["createElementVNode"])("input",{checked:"installments_and_deposit"==o.newItem.payment_plan,onChange:t[8]||(t[8]=e=>s.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,nU),rU])])]),Object(l["createElementVNode"])("div",iU,[Object(l["createElementVNode"])("span",dU,[mU,Object(l["createElementVNode"])("div",bU,[Object(l["createElementVNode"])("input",{checked:"full_payment"==o.newItem.payment_plan,onChange:t[9]||(t[9]=e=>s.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,pU),uU])])])]),"installments"==o.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",OU,[Object(l["createElementVNode"])("div",hU,[Object(l["createElementVNode"])("div",jU,[gU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",fU,[Object(l["createElementVNode"])("div",EU,[VU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",NU,[Object(l["createElementVNode"])("label",xU,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,yU),[[l["vModelText"],o.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==o.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",vU,[Object(l["createElementVNode"])("div",kU,[Object(l["createElementVNode"])("div",wU,[AU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",SU,[Object(l["createElementVNode"])("div",BU,[CU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",_U,[Object(l["createElementVNode"])("div",PU,[IU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",DU,[Object(l["createElementVNode"])("div",TU,[MU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.initial_deposit_due_date]])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",zU,[Object(l["createElementVNode"])("label",FU,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,UU),[[l["vModelText"],o.installmentsAndDeposit.other_installments_due_date[t]]])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",LU,[Object(l["createElementVNode"])("div",$U,[o.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qU,[Object(l["createElementVNode"])("img",{src:o.imageFileUrl,alt:"Image Preview"},null,8,RU)])):Object(l["createCommentVNode"])("",!0),HU,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[16]||(t[16]=(...e)=>s.handleImageUpload&&s.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",QU,[o.imageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",YU,Object(l["toDisplayString"])(o.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",JU,"Choose a file"))])]),WU,""!==o.formValidation&&""!==o.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",XU,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",ZU,[Object(l["createElementVNode"])("div",KU,[Object(l["createElementVNode"])("button",{onClick:t[17]||(t[17]=(...e)=>s.updateItem&&s.updateItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var eL={name:"",components:{MultiSelect:Vk},mounted(){this.getUser(),this.editItem(),this.getAllShops(),this.getAllCourses(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_shop")},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))}},data(){return{paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:null,other_installments_due_date:[]},validationError:"",isError:!1,productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],schoolsList:null,coursesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:"",formValidation:"",allAttributes:"",allShops:"",selectedAttrs:[],user:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitColleges:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",newItem:{name:"",product_type:"",price:"",quantity:"",detail:"",image:"",shop_id:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitCourses:null,limitColleges:null},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_shop");let e=!1,t="";t=Ns()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async updateItem(){const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.newItem.payment_plan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),e.append("quantity",this.newItem.quantity),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from),e.append("valid_to",this.newItem.valid_to),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));let t=this.$route.params.id;try{const a=`/updateShopItem/${t}?_method=PUT`;await et.post(a,e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Updated Successfuly"),this.isError=!1}catch(a){this.validationError=a.response.data.errors,this.isError=!0}},async editItem(){let e=this.$route.params.id;try{let t=await et.get("/editShopItem/"+e);t=t.data,this.setShopItem(t)}catch(t){console.log(t)}},setShopItem(e){this.newItem.name=e.name,this.newItem.price=e.price,this.newItem.quantity=e.quantity,this.newItem.product_type=e.product_type,this.newItem.shop_id=e.shop_id,this.newItem.attribute_id=e.attribute_id,this.newItem.detail=e.detail,this.newItem.attributes=e.attributes,this.newItem.valid_from=e.valid_from,this.newItem.valid_to=e.valid_to,this.newItem.visibility_options=e.visibility_options?e.visibility_options:[],this.newItem.limitColleges=e.limit_colleges?e.limit_colleges:[],this.newItem.limitCourses=e.limit_courses?e.limit_courses:[],this.newItem.payment_plan=e.payment_plan,this.imageFileUrl=this.$env_vars.BASE_URL+e.image,e.payment&&(this.installmentsAndDeposit.total_installments=e.payment.total_installments,this.installmentsAndDeposit.amount_per_installment=e.payment.amount_per_installment,this.installmentsAndDeposit.other_installments_due_date=e.payment.other_installments_deadline_installments)},handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await et.get(e);this.coursesList=t.data}catch(e){console.log(e)}},changePaymentPlan(e){this.newItem.payment_plan==e?this.newItem.payment_plan="":this.newItem.payment_plan=e},async getSchools(){try{let e=await et.get("/getAllSchoolsCourses");console.log(e),this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},handleAttributes(e){console.log("attrs",e),this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await et.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("8fb1");const tL=We()(eL,[["render",GU],["__scopeId","data-v-81641e2e"]]);var aL=tL;Object(l["pushScopeId"])("data-v-a769ea3a");const lL={class:"row"},cL={class:"col-xl-12 col-lg-12 col-md-12"},oL={class:"card"},sL=Object(l["createElementVNode"])("div",{class:"card-header pb-0 px-3 d-flex justify-content-between"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Checkout")],-1),nL={class:"card-body pt-4 p-3"},rL={class:"row"},iL={class:"list-group col-xl-6 col-lg-6 col-md-6"},dL={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},mL={class:"d-flex flex-column"},bL={class:"mb-3 text-sm"},pL={key:0},uL=Object(l["createElementVNode"])("br",null,null,-1),OL={key:1,class:"text-success"},hL={key:2,class:"text-success"},jL=Object(l["createTextVNode"])(" Installments And Deposit "),gL=Object(l["createElementVNode"])("br",null,null,-1),fL=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},null,-1),EL={class:"ms-auto text-end"},VL=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),NL=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),xL={class:"ms-auto text-end"},yL={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},vL=["onClick"],kL=Object(l["createElementVNode"])("br",null,null,-1),wL={key:0,class:"text-success me-3"},AL={key:1,class:"text-success me-3"},SL=Object(l["createElementVNode"])("br",null,null,-1),BL={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},CL={class:"d-flex flex-column"},_L={class:"mb-3 text-sm"},PL=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs"},null,-1),IL={class:"ms-auto text-end"},DL=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),TL=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),ML={class:"ms-auto text-end"},zL={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},FL=["onClick"],UL={class:"col-md-5 ms-auto"},LL={key:0,class:"text-danger text-sm"},$L=["onClick"],qL={key:0,class:"w-10 me-3 mb-0",src:DC.a,alt:"logo"},RL={key:1,class:"w-10 me-3 mb-0",src:ot.a,alt:"logo"},HL={class:"mb-0"},QL={key:1,class:"d-flex align-items-center list-group-item border-0 d-flex p-2 bg-gray-100 border-radius-lg"},JL=Object(l["createElementVNode"])("div",{class:"d-flex flex-column"},[Object(l["createElementVNode"])("h6",{class:"d-flex align-items-center text-sm "},"Total Amount")],-1),YL={class:"ms-auto text-end"},WL={class:"d-flex me-3 align-items-center",style:{"justify-content":"flex-end"}},XL={class:"d-flex align-items-center text-success fw-bold text-sm "},ZL={key:2,class:"d-flex justify-content-center align-items-center list-group-item border-0 d-flex p-4 bg-gray-100 border-radius-lg"},KL=Object(l["createElementVNode"])("h6",{class:"text-sm text-warning"},"You can't checkout while Cart is empty!",-1),GL=[KL],e$={key:3,style:{color:"#59B15D !important"}};function t$(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lL,[Object(l["createElementVNode"])("div",cL,[Object(l["createElementVNode"])("div",oL,[sL,Object(l["createElementVNode"])("div",nL,[Object(l["createElementVNode"])("div",rL,[Object(l["createElementVNode"])("ul",iL,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",dL,[Object(l["createElementVNode"])("div",mL,[Object(l["createElementVNode"])("h6",bL,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",pL,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),uL,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",OL," Installments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",hL,[jL,gL,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Installments) ",1)])):Object(l["createCommentVNode"])("",!0)]),fL]),Object(l["createElementVNode"])("div",EL,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[VL,NL],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xL,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",yL," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,vL),kL,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",wL," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",AL,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.initial_deposit_installments))+" Deposit ",1),SL,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",BL,[Object(l["createElementVNode"])("div",CL,[Object(l["createElementVNode"])("h6",_L,Object(l["toDisplayString"])(e.trip.title)+" (Trip)",1),PL]),Object(l["createElementVNode"])("div",IL,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"school_user"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[DL,TL],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ML,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",zL," £"+Object(l["toDisplayString"])(s.formattedPrice(e.trip.budget)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,FL)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",UL,[o.isPaymentMethod?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",LL,"Payment Method Not Found! please add the payment method first.")),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:o.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>s.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",qL)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",RL)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",HL," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,$L))),128)),o.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",QL,[JL,Object(l["createElementVNode"])("div",YL,[Object(l["createElementVNode"])("div",WL,[Object(l["createElementVNode"])("h6",XL,"£"+Object(l["toDisplayString"])(s.totalAmount()),1)])])])):o.dataLoaded?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ZL,GL)):Object(l["createCommentVNode"])("",!0),1==o.isLoading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",e$,"Checking out, please wait...")):(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:4},[o.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=e=>s.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment ")):Object(l["createCommentVNode"])("",!0),o.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[1]||(t[1]=e=>s.checkout("wallet")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet")):Object(l["createCommentVNode"])("",!0)],64))])])])])])])}Object(l["popScopeId"])();var a$={name:"billing-card",data(){return{isLoading:!1,isPaymentMethod:!0,userCards:"",dataLoaded:!1,user:"",cartItems:"",isSelected:0}},mounted(){this.getUser(),this.getCartItems(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getCartItems(){try{let e=await et.get("/getUserCartItems");e=e.data,this.cartItems=e,this.dataLoaded=!0}catch(e){console.log(e)}},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit_installments:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price))}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await et.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(!t&&"card"==e)return this.isPaymentMethod=!0,void(this.isPaymentMethod=!1);t="wallet"==e?null:t;let a={payment_method:t,type:e};try{this.isLoading=!0,await et.post("/checkout",a),this.isLoading=!1,this.snackbarMsg("Checkout Successful"),this.$router.push({name:"Dashboard"}),this.isPaymentMethod=!0}catch(l){this.isLoading=!1,this.$snackbar.add({type:"error",text:"Something went wrong",background:"white"}),console.log(l)}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await et.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};a("6b9d");const l$=We()(a$,[["render",t$],["__scopeId","data-v-a769ea3a"]]);var c$=l$;const o$={class:"row"},s$={class:"col-xl-8 col-lg-8 col-md-8"},n$={class:"card"},r$={class:"card-header pb-0 px-3 d-flex justify-content-between"},i$=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Menu",-1),d$=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#f513ca"},class:"me-3 text-white fw-5 border-0 p-2 border-radius-lg"}," Add Menu ",-1),m$=Object(l["createStaticVNode"])('<div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">ATA Rice</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li></ul></div>',1),b$=Object(l["createStaticVNode"])('<div class="col-xl-4 col-lg-4 col-md-4"><div class="card"><div class="card-header pb-0 px-3"><h6 class="mb-0">Favourite</h6></div><div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li></ul></div></div></div>',1);function p$(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",o$,[Object(l["createElementVNode"])("div",s$,[Object(l["createElementVNode"])("div",n$,[Object(l["createElementVNode"])("div",r$,[i$,Object(l["createVNode"])(n,{to:"/add-menu"},{default:Object(l["withCtx"])(()=>[d$]),_:1})]),m$])]),b$])}var u$={name:"billing-card"};const O$=We()(u$,[["render",p$]]);var h$=O$;Object(l["pushScopeId"])("data-v-d27ede50");const j$={class:"container-fluid py-4"},g$=Object(l["createElementVNode"])("div",{class:"row "},[Object(l["createElementVNode"])("div",{class:"col-12"},[Object(l["createElementVNode"])("div",{class:"card my-4"},[Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 "},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Menu")]),Object(l["createElementVNode"])("div",{class:"card-body px-0 pb-2"},[Object(l["createElementVNode"])("div",{class:"table-responsive p-0"},[Object(l["createElementVNode"])("div",{class:"row py-2 bg-white form-data border-radius-lg"},[Object(l["createElementVNode"])("div",{class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("div",{class:"card card-plain"},[Object(l["createElementVNode"])("div",{class:"card-body"},[Object(l["createElementVNode"])("form",{role:"form"},[Object(l["createElementVNode"])("div",{class:"row mb-1"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Item Name"),Object(l["createElementVNode"])("input",{class:"input-box title-input",id:"name",type:"text",placeholder:"name",name:"name"})]),Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description"),Object(l["createElementVNode"])("br"),Object(l["createElementVNode"])("textarea",{class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"})])]),Object(l["createElementVNode"])("div",{class:"row p-2"},[Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"price",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Available Seats"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Available Seats",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Funds"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"funds",name:"name"})])])])])])])])])])])])])],-1),f$=[g$];function E$(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",j$,f$)}Object(l["popScopeId"])();var V$={name:"",components:{},mounted(){},data(){return{}},methods:{}};a("19b8");const N$=We()(V$,[["render",E$],["__scopeId","data-v-d27ede50"]]);var x$=N$;const y$={class:"card mt-4 card-height"},v$={class:"card-header pb-3 p-3"},k$={class:"row",style:{width:"100%"}},w$={class:"col-12"},A$={class:"d-flex justify-content-between border-radius-lg pt-4"},S$=Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"TOP-UP",-1),B$=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn add-card-btn mb-3 trips-btn w-100  text-white fw-5 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus me-2"}),Object(l["createTextVNode"])(" Add New Card ")],-1),C$=Object(l["createElementVNode"])("div",{class:"row",style:{width:"100%"}},[Object(l["createElementVNode"])("div",{class:"col-12 d-flex align-items-center"},[Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"}," In this section, you can top-up the user's wallet by adding a specified amount to their balance. Additionally, you can add a new payment method, such as a credit or debit card, to the user's account for future transactions. This functionality ensures that users have convenient payment options and sufficient funds available for seamless purchases. ")])],-1),_$={class:"card-body p-3"},P$={class:"row d-flex justify-content-between"},I$={class:"col-md-6 mb-md-0 mb-4"},D$=["onClick"],T$={key:0,class:"w-10 me-3 mb-0",src:DC.a,alt:"logo"},M$={key:1,class:"w-10 me-3 mb-0",src:ot.a,alt:"logo"},z$={class:"mb-0"},F$=["onClick"],U$=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1),L$={class:"amount-radio"},$$={class:"top-up-row"},q$={class:"mb-1",style:{display:"flex"}},R$=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount25"},"£25.00",-1),H$={class:"top-up-row"},Q$={class:"mb-1",style:{display:"flex"}},J$=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount50"},"£50.00",-1),Y$={class:"top-up-row"},W$={class:"mb-1",style:{display:"flex"}},X$=Object(l["createElementVNode"])("label",{class:"",style:{"margin-top":"-3px"},for:"amount100"},"£100.00",-1),Z$={class:"mb-1 amount-container",style:{display:"flex"}},K$=Object(l["createElementVNode"])("div",{class:"col-md-5"},null,-1),G$={class:"conteiner"};function eq(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",y$,[Object(l["createElementVNode"])("div",v$,[Object(l["createElementVNode"])("div",k$,[Object(l["createElementVNode"])("div",w$,[Object(l["createElementVNode"])("div",A$,[S$,Object(l["createVNode"])(n,{to:{name:"add_card"}},{default:Object(l["withCtx"])(()=>[B$]),_:1})])])]),C$]),Object(l["createElementVNode"])("div",_$,[Object(l["createElementVNode"])("div",P$,[Object(l["createElementVNode"])("div",I$,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:o.isSelected===t},"mb-1 card card-body border card-plain border-radius-lg d-flex align-items-right flex-row"]),onClick:e=>s.toggleSelection(t,e),style:{width:"300px"}},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",T$)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",M$)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",z$," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1),Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,F$),U$],10,D$))),128)),Object(l["createElementVNode"])("div",L$,[Object(l["createElementVNode"])("div",$$,[Object(l["createElementVNode"])("span",q$,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount25",class:"me-1",type:"radio","onUpdate:modelValue":t[0]||(t[0]=e=>o.selected_amount=e),name:"amount",value:"25"},null,512),[[l["vModelRadio"],o.selected_amount]]),R$])]),Object(l["createElementVNode"])("div",H$,[Object(l["createElementVNode"])("span",Q$,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount50",class:"me-1",type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>o.selected_amount=e),name:"amount",value:"50"},null,512),[[l["vModelRadio"],o.selected_amount]]),J$])]),Object(l["createElementVNode"])("div",Y$,[Object(l["createElementVNode"])("span",W$,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount100",class:"me-1",type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>o.selected_amount=e),name:"amount",value:"100"},null,512),[[l["vModelRadio"],o.selected_amount]]),X$])]),Object(l["createElementVNode"])("span",Z$,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onKeyup:t[3]||(t[3]=e=>o.selected_amount=null),"onUpdate:modelValue":t[4]||(t[4]=e=>s.formattedBalance=e),class:"me-1 amount-input",type:"text",name:"gender",placeholder:"1.00"},null,544),[[l["vModelText"],s.formattedBalance]])])])]),K$,Object(l["createElementVNode"])("div",G$,[Object(l["createElementVNode"])("button",{onClick:t[5]||(t[5]=(...e)=>s.addBalance&&s.addBalance(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn top-up-btn p-3 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Add Balance ")])])])])}var tq={name:"payment-card",components:{},mounted(){this.$globalHelper.buttonColor();let e=localStorage.getItem("user");this.user=JSON.parse(e),this.getCustomerPaymentMethods()},computed:{formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},data(){return{user:"",selected_amount:"",externalAccounts:"",addedBalance:"",userCards:"",isSelected:0,img1:ot.a,img2:DC.a,showModal:!1}},methods:{confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},async addBalance(){let e,t="";e=this.$route.params.id?this.$route.params.id:this.user.id;let a=null==this.selected_amount?this.addedBalance:this.selected_amount,l=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(""==a)return void this.snackbarMsg("Please select the amount","error");if("super_admin"==this.user.role||"organization_admin"==this.user.role||"staff"==this.user.role)if("staff"==this.user.role&&this.user.id==e){if(t="/payment/initiate",!l)return void this.snackbarMsg("Payment Method Not Found","error")}else t="/adminTopUp",l=null;else if(t="/payment/initiate",!l)return void this.snackbarMsg("Payment Method Not Found","error");let c={user_id:e,amount:a,payment_method:l,type:"top_up"};try{await et.post(t,c),this.snackbarMsg("Balance Added Successfully")}catch(o){console.log(o)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await et.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await et.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")}}};a("e1a8");const aq=We()(tq,[["render",eq]]);var lq=aq;Object(l["pushScopeId"])("data-v-418ca843");const cq={class:"card"},oq=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),sq={class:"card-body row"},nq={class:"col-md-5"},rq=Object(l["createStaticVNode"])('<div class="row d-flex" data-v-418ca843><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex" data-v-418ca843><p class="text-dark" data-v-418ca843>Your Payment Information</p></div></div><div id="card-element" class="StripeElement" data-v-418ca843></div><div class="row d-flex mt-1" data-v-418ca843><div class="col-md-5 bg-white name-row p-2 holder_name" data-v-418ca843><label data-v-418ca843>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2" data-v-418ca843></div></div>',3),iq={class:"row d-flex"},dq={class:"col-md-5 ms-auto"},mq=["onClick"],bq={key:0,class:"w-10 me-3 mb-0",src:DC.a,alt:"logo"},pq={key:1,class:"w-10 me-3 mb-0",src:ot.a,alt:"logo"},uq={class:"mb-0"},Oq=["onClick"],hq=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1);function jq(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",cq,[oq,Object(l["createElementVNode"])("div",sq,[Object(l["createElementVNode"])("div",nq,[rq,Object(l["createElementVNode"])("div",iq,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>s.submitPaymentMethod&&s.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"save_btn mx-auto me-3 w-50 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])]),Object(l["createElementVNode"])("div",dq,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:Object(l["normalizeClass"])([{selected:e.isSelected===a}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:t=>e.toggleSelection(a,t)},["visa"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",bq)):Object(l["createCommentVNode"])("",!0),"mastercard"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",pq)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",uq," **** **** **** "+Object(l["toDisplayString"])(t.card.last4),1),Object(l["createElementVNode"])("i",{onClick:e=>s.confirmDelete(t.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,Oq),hq],10,mq))),128))])])])])}Object(l["popScopeId"])();var gq={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},data(){return{userCards:"",user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},includeStripe(e,t){let a=document,l="script",c=a.createElement(l),o=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),o.parentNode.insertBefore(c,o)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await et.post("/createCard",l),this.getCustomerPaymentMethods()}catch(c){console.log(c)}},async removePaymentMethod(e){let t={user_id:this.user.id,payment_method:e};try{await et.post("/removePaymentMethod",t),this.removeFromList(e)}catch(a){console.log(a)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await et.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("1704");const fq=We()(gq,[["render",jq],["__scopeId","data-v-418ca843"]]);var Eq=fq;const Vq={class:"card"},Nq=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),xq={class:"card-body"},yq=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white mb-2"></div></div>',3),vq={class:"row d-flex justify-content-center"};function kq(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",Vq,[Nq,Object(l["createElementVNode"])("div",xq,[yq,Object(l["createElementVNode"])("div",vq,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>s.submitPaymentMethod&&s.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"me-3 w-35 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var wq={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.$globalHelper.buttonColor()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),o=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),o.parentNode.insertBefore(c,o)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await et.post("/createCard",l),this.$router.push({name:"payment_account"})}catch(c){console.log(c)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("f737");const Aq=We()(wq,[["render",kq]]);var Sq=Aq;const Bq={class:"container-fluid"},Cq={class:"row"},_q={class:"col-12"},Pq={class:"card"},Iq={class:"d-flex justify-content-between  border-radius-lg pt-4"},Dq=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"COURSES",-1),Tq=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),Mq=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Courses section, you can manage course information by adding, editing, or deleting courses. Additionally, you can view and update the "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" list of students enrolled in each course. This functionality helps management of courses and enrolled students. ")])],-1),zq={class:"filter-container ms-2"},Fq={class:"row",style:{width:"100%"}},Uq={class:"col-4"},Lq={style:{display:"flex"}},$q=["value"],qq={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},Rq=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),Hq=Object(l["createTextVNode"])(" Export To XLS "),Qq=[Rq,Hq],Jq={class:"card-body px-0 pb-2"},Yq={class:"table-responsive p-0 student-table"},Wq={ref:"table",class:"table align-items-center mb-0"},Xq=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Code "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Level "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Action ")])],-1),Zq={key:0},Kq=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),Gq=[Kq],eR={class:"text-xs  text-center font-weight-bold mb-0"},tR={class:"d-flex"},aR={class:"text-xs font-weight-bold mb-0"},lR=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),cR={class:"text-xs font-weight-bold mb-0"},oR={class:"text-xs font-weight-bold mb-0"},sR={class:"align-middle text-center text-sm"},nR={class:"badge badge-sm bg-gradient-success"},rR={class:"align-middle text-center"},iR=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),dR=["onClick"],mR={class:"row"},bR={class:"col-md-12 col-lg-12"},pR={class:"pagination-container"},uR={class:"entries-dropdown"},OR=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),hR=["value"],jR={class:"pagination-wrapper"},gR={class:"pagination"},fR=["onClick"];function ER(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Bq,[Object(l["createElementVNode"])("div",Cq,[Object(l["createElementVNode"])("div",_q,[Object(l["createElementVNode"])("div",Pq,[Object(l["createElementVNode"])("div",Iq,[Dq,s.userPermissions.create?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-course"}},{default:Object(l["withCtx"])(()=>[Tq]),_:1})):Object(l["createCommentVNode"])("",!0)]),Mq,Object(l["createElementVNode"])("div",zq,[Object(l["createElementVNode"])("div",Fq,[Object(l["createElementVNode"])("div",Uq,[Object(l["createElementVNode"])("span",Lq,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterCourses&&s.filterCourses(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterCourses&&s.filterCourses(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,$q))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",qq,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},Qq)])])]),Object(l["createElementVNode"])("div",Jq,[Object(l["createElementVNode"])("div",Yq,[Object(l["createElementVNode"])("table",Wq,[Xq,Object(l["createElementVNode"])("tbody",null,[0===o.allCourse.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Zq,Gq)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allCourse,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",eR,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"enrolled-students",params:{id:e.CourseCode}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",tR,[Object(l["createElementVNode"])("p",aR,Object(l["toDisplayString"])(e.CourseCode),1),lR])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",cR,Object(l["toDisplayString"])(e.CourseDescription),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",oR,Object(l["toDisplayString"])(e.CourseLevel),1)]),Object(l["createElementVNode"])("td",sR,[Object(l["createElementVNode"])("span",nR,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",rR,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_course?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-course",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[iR]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,dR)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",mR,[Object(l["createElementVNode"])("div",bR,[Object(l["createElementVNode"])("div",pR,[Object(l["createElementVNode"])("div",uR,[OR,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemsPerPage=e),onChange:t[6]||(t[6]=e=>s.getAllCourses(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,hR))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",jR,[Object(l["createElementVNode"])("ul",gR,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getAllCourses(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getAllCourses(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllCourses(e),href:"#"},Object(l["toDisplayString"])(e),9,fR)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getAllCourses(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getAllCourses(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var VR={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllCourses(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_course"),this.$globalHelper.buttonColor()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",filterBy:"Course Code",allFields:["Course Name","Course Code","Course Level"],allCourse:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteCourse(e)})},exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"courses.xlsx")},async filterCourses(){if(""==this.filterBy&&""==this.seachString)return void this.getAllCourses();if(""!=this.filterBy&&""==this.seachString)return void this.getAllCourses();let e={type:this.filterBy,value:this.seachString,status:"Active"};try{const t=await et.post("/filterCourses",e);this.allCourse=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllCourses(e=null){try{let t={page:"",entries_per_page:this.itemsPerPage};t.page=e;let a="/getAllCourses";const l=await et.post(a,t);this.allCourse=l.data.data.data,this.totalRows=l.data.pagination.total,this.currentPage=l.data.pagination.current_page,this.perPage=l.data.pagination.per_page,this.totalPages=l.data.pagination.last_page}catch(t){console.log(t)}},async deleteCourse(e){try{await et.delete("/deleteCourse/"+e),this.removeCourseFromList(e),this.snackbarMsg("Course Successfully Deleted")}catch(t){console.log(t)}},removeCourseFromList(e){const t=this.allCourse.findIndex(t=>t.id===e);this.allCourse.splice(t,1)},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)}}};a("a95f");const NR=We()(VR,[["render",ER]]);var xR=NR;Object(l["pushScopeId"])("data-v-0e2b24ef");const yR={class:"container-fluid py-4"},vR={class:"row"},kR={class:"col-12"},wR={class:"card my-4"},AR={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},SR=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Course",-1),BR=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),CR={class:"card-body px-0 pb-2"},_R={key:0,class:"mb-3 change-pass-alert"},PR=Object(l["createElementVNode"])("br",null,null,-1),IR={class:"table-responsive p-0"},DR={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},TR={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},MR={class:"form-bg container p-4"},zR=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),FR={class:"card card-plain"},UR={class:"card-body"},LR={role:"form"},$R={class:"mb-1"},qR=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),RR={class:"mb-1"},HR=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),QR={class:"mb-1"},JR=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Name",-1),YR={class:"mb-1"},WR=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),XR=Object(l["createElementVNode"])("br",null,null,-1),ZR=["value"],KR={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},GR={class:""};function eH(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yR,[Object(l["createElementVNode"])("div",vR,[Object(l["createElementVNode"])("div",kR,[Object(l["createElementVNode"])("div",wR,[Object(l["createElementVNode"])("div",AR,[SR,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[BR]),_:1})]),Object(l["createElementVNode"])("div",CR,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_R,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),PR]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",IR,[Object(l["createElementVNode"])("div",DR,[Object(l["createElementVNode"])("div",TR,[Object(l["createElementVNode"])("div",MR,[zR,Object(l["createElementVNode"])("div",FR,[Object(l["createElementVNode"])("div",UR,[Object(l["createElementVNode"])("form",LR,[Object(l["createElementVNode"])("div",$R,[qR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],o.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",RR,[HR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],o.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",QR,[JR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newCourse.CourseDescription=e),type:"email",placeholder:"Course Name",name:"CourseDescription"},null,512),[[l["vModelText"],o.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",YR,[WR,XR,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,ZR))),128))],512),[[l["vModelSelect"],o.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",KR,[Object(l["createElementVNode"])("div",GR,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>s.saveNewCourse&&s.saveNewCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Course ")])])])])])])])])])}Object(l["popScopeId"])();var tH={name:"",components:{},mounted(){this.getUser(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Ns()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewCourse(){this.isError=!1;try{await et.post("/createCourse",this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("eb29");const aH=We()(tH,[["render",eH],["__scopeId","data-v-0e2b24ef"]]);var lH=aH;Object(l["pushScopeId"])("data-v-24cbe91c");const cH={class:"container-fluid py-4"},oH={class:"row"},sH={class:"col-12"},nH={class:"card my-4"},rH={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},iH=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Course",-1),dH=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),mH={class:"card-body px-0 pb-2"},bH={key:0,class:"mb-3 change-pass-alert"},pH=Object(l["createElementVNode"])("br",null,null,-1),uH={class:"table-responsive p-0"},OH={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},hH={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},jH={class:"form-bg container p-4"},gH=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),fH={class:"card card-plain"},EH={class:"card-body"},VH={role:"form"},NH={class:"mb-1"},xH=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),yH={class:"mb-1"},vH=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),kH={class:"mb-1"},wH=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Name",-1),AH={class:"mb-1"},SH=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),BH=Object(l["createElementVNode"])("br",null,null,-1),CH=["value"],_H={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},PH={class:""};function IH(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",cH,[Object(l["createElementVNode"])("div",oH,[Object(l["createElementVNode"])("div",sH,[Object(l["createElementVNode"])("div",nH,[Object(l["createElementVNode"])("div",rH,[iH,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[dH]),_:1})]),Object(l["createElementVNode"])("div",mH,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bH,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),pH]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",uH,[Object(l["createElementVNode"])("div",OH,[Object(l["createElementVNode"])("div",hH,[Object(l["createElementVNode"])("div",jH,[gH,Object(l["createElementVNode"])("div",fH,[Object(l["createElementVNode"])("div",EH,[Object(l["createElementVNode"])("form",VH,[Object(l["createElementVNode"])("div",NH,[xH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],o.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",yH,[vH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],o.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",kH,[wH,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newCourse.CourseDescription=e),type:"email",placeholder:"Course Name",name:"CourseDescription"},null,512),[[l["vModelText"],o.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",AH,[SH,BH,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,CH))),128))],512),[[l["vModelSelect"],o.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",_H,[Object(l["createElementVNode"])("div",PH,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>s.updateCourse&&s.updateCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Course ")])])])])])])])])])}Object(l["popScopeId"])();var DH={name:"",components:{},mounted(){this.getUser(),this.editCourse(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},isError:!1,validationErrors:"",formValidation:"",availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Ns()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editCourse(){let e=this.$route.params.id;try{const t=await et.get("/editCourse/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newCourse.CourseCode=t.CourseCode,this.newCourse.CourseLevel=t.CourseLevel,this.newCourse.CourseDescription=t.CourseDescription,this.newCourse.status=t.status)},async updateCourse(){let e=this.$route.params.id;try{await et.put("/updateCourse/"+e,this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("d858");const TH=We()(DH,[["render",IH],["__scopeId","data-v-24cbe91c"]]);var MH=TH;const zH={class:"container-fluid"},FH={class:"row"},UH={class:"col-12"},LH={class:"card"},$H={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},qH=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ENROLLED STUDENTS",-1),RH=Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"},null,-1),HH=Object(l["createTextVNode"])(" New "),QH=[RH,HH],JH=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Enrolled Students section, you can view a list of students currently enrolled in a course. You have the ability to manage course enrollments "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" by adding new students or removing existing ones. ")])],-1),YH={class:"filter-container ms-2"},WH={class:"row",style:{width:"100%"}},XH={class:"col-4"},ZH={style:{display:"flex"}},KH=["value"],GH={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},eQ=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),tQ=Object(l["createTextVNode"])(" Export To XLS "),aQ=[eQ,tQ],lQ=Object(l["createElementVNode"])("div",null,null,-1),cQ={class:"card-body px-0 pb-2"},oQ={class:"table-responsive p-0 student-table"},sQ={ref:"table",class:"table align-items-center mb-0"},nQ=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),rQ={class:"align-middle text-center text-sm"},iQ={class:"text-xs font-weight-bold mb-0"},dQ={class:"text-xs font-weight-bold mb-0"},mQ={class:"text-xs mb-0",style:{"font-size":"8px"}},bQ={class:"align-middle text-center"},pQ={class:"text-secondary text-xs font-weight-bold"},uQ={class:"align-middle text-center"},OQ=["onClick"],hQ={class:"row"},jQ={class:"col-md-12 col-lg-12"},gQ={class:"pagination-container"},fQ={class:"entries-dropdown"},EQ=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),VQ=["value"],NQ={class:"pagination-wrapper"},xQ={class:"pagination"},yQ=["onClick"];function vQ(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("Enroll");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",zH,[Object(l["createElementVNode"])("div",FH,[Object(l["createElementVNode"])("div",UH,[Object(l["createElementVNode"])("div",LH,[Object(l["createElementVNode"])("div",$H,[qH,s.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=e=>o.showModal=!0),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},QH)):Object(l["createCommentVNode"])("",!0)]),JH,Object(l["createElementVNode"])("div",YH,[Object(l["createElementVNode"])("div",WH,[Object(l["createElementVNode"])("div",XH,[Object(l["createElementVNode"])("span",ZH,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[1]||(t[1]=(...e)=>s.filterStudents&&s.filterStudents(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[3]||(t[3]=(...e)=>s.filterStudents&&s.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[4]||(t[4]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,KH))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",GH,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.exportTableToXLS())},aQ)])])]),lQ,Object(l["createElementVNode"])("div",cQ,[Object(l["createElementVNode"])("div",oQ,[Object(l["createElementVNode"])("table",sQ,[nQ,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",rQ,[Object(l["createElementVNode"])("p",iQ,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",dQ,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),Object(l["createElementVNode"])("p",mQ,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",bQ,[Object(l["createElementVNode"])("span",pQ,Object(l["toDisplayString"])(e.schoolName),1)]),Object(l["createElementVNode"])("td",uQ,[Object(l["createElementVNode"])("span",null,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:t=>s.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,OQ)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",hQ,[Object(l["createElementVNode"])("div",jQ,[Object(l["createElementVNode"])("div",gQ,[Object(l["createElementVNode"])("div",fQ,[EQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.itemsPerPage=e),onChange:t[7]||(t[7]=e=>s.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,VQ))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",NQ,[Object(l["createElementVNode"])("ul",xQ,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,yQ)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])]),Object(l["createVNode"])(n,{show:o.showModal,task:e.task,onClose:t[12]||(t[12]=e=>o.showModal=!1),onUpdateStudents:s.getAllStudents},null,8,["show","task","onUpdateStudents"])])}Object(l["pushScopeId"])("data-v-2d36253a");const kQ={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},wQ={class:"modal-dialog"},AQ={class:"modal-content"},SQ={class:"modal-header"},BQ=Object(l["createElementVNode"])("h6",{class:"h5 text-sm modal-title"},"Enroll Student to this Course",-1),CQ=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),_Q=[CQ],PQ={class:"pt-4 modal-body"},IQ=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),DQ={class:"mb-4 input-group"},TQ=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),MQ={key:0,class:"alert alert-success"},zQ={class:"text-end"};function FQ(e,t,a,c,o,s){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kQ,[Object(l["createElementVNode"])("div",wQ,[Object(l["createElementVNode"])("div",AQ,[Object(l["createElementVNode"])("div",SQ,[BQ,Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e)),"aria-label":"Close"},_Q)]),Object(l["createElementVNode"])("div",PQ,[IQ,Object(l["createElementVNode"])("div",DQ,[TQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>o.StudentID=e),class:"form-control",placeholder:"Enter Student ID",type:"text"},null,512),[[l["vModelText"],o.StudentID]])]),o.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",MQ,Object(l["toDisplayString"])(o.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",zQ,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>s.saveChanges&&s.saveChanges(...e)),class:"m-1 btn btn-primary"}," Save "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var UQ={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},computed:{},mounted(){this.$globalHelper.buttonColor()},data(){return{StudentID:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},closeModal(){this.$emit("close")},async saveChanges(){this.isError=!1;let e={StudentID:this.StudentID,CourseCode:this.$route.params.id};try{await et.post("/enrollStudent",e),this.snackbarMsg("Student Enrolled Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors;for(let e=0;e<this.validationErrors.length;e++)this.snackbarMsg(this.validationErrors[e])}this.closeModal(),this.$emit("update-students")}}};a("457f");const LQ=We()(UQ,[["render",FQ],["__scopeId","data-v-2d36253a"]]);var $Q=LQ,qQ={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStudents()},updated(){this.$permissions.redirectIfNotAllowed("view_student"),this.$globalHelper.buttonColor()},components:{Enroll:$Q},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Student Id",seachString:"",allFields:["Student Id"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"students_table.xlsx")},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Student will be dropped from course and you won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e=this.$route.params.id,t={type:this.filterBy,value:this.seachString,course_code:e};try{const e=await et.post("/filterCourseStudents",t);this.allStudents=e.data,this.totalRows=e.data.total,this.currentPage=e.data.current_page,this.perPage=e.per_page,this.totalPages=e.data.last_page}catch(a){console.log(a)}},async getAllStudents(e=null){try{let t={CourseCode:this.$route.params.id,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await et.post("/getCourseStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(t){console.log(t)}},async deleteStudent(e){let t={StudentID:e,CourseCode:this.$route.params.id};try{await et.post("/removeEnrolledStudent",t),this.getAllStudents(),this.snackbarMsg("Student Removed Successfully")}catch(a){let e=a.response.data.errors;for(let t=0;t<e.length;t++)this.snackbarMsg(e[t])}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("2990");const RQ=We()(qQ,[["render",vQ]]);var HQ=RQ;const QQ={class:"container-fluid"},JQ={class:"row"},YQ={class:"col-12"},WQ={class:"card"},XQ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},ZQ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ADMINS",-1),KQ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),GQ=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Here, you can add organization admins who can manage the entire portal. Multiple admins can be assigned, each with different"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" roles and permissions.")])],-1),eJ={class:"card-body px-0 pb-2"},tJ={class:"table-responsive p-0"},aJ={class:"table align-items-center mb-0"},lJ=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Role "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),cJ={key:0},oJ=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),sJ=[oJ],nJ={class:"align-middle text-center text-sm"},rJ={class:"text-xs font-weight-bold mb-0"},iJ={class:"text-xs font-weight-bold mb-0"},dJ={class:"text-xs font-weight-bold mb-0"},mJ={class:"align-middle text-center"},bJ={class:"text-xs font-weight-bold mb-0"},pJ={class:"align-middle text-center"},uJ={class:"text-secondary text-xs font-weight-bold"},OJ={class:"align-middle text-center text-sm"},hJ={class:"badge badge-sm bg-gradient-success"},jJ={class:"align-middle text-center"},gJ=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),fJ=["onClick"];function EJ(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QQ,[Object(l["createElementVNode"])("div",JQ,[Object(l["createElementVNode"])("div",YQ,[Object(l["createElementVNode"])("div",WQ,[Object(l["createElementVNode"])("div",XQ,[ZQ,Object(l["createVNode"])(n,{to:{name:"add-organization-admins"}},{default:Object(l["withCtx"])(()=>[KQ]),_:1})]),GQ,Object(l["createElementVNode"])("div",eJ,[Object(l["createElementVNode"])("div",tJ,[Object(l["createElementVNode"])("table",aJ,[lJ,Object(l["createElementVNode"])("tbody",null,[0===o.allAdmins.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",cJ,sJ)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allAdmins,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",nJ,[Object(l["createElementVNode"])("p",rJ,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",iJ,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",dJ,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",mJ,[Object(l["createElementVNode"])("p",bJ,Object(l["toDisplayString"])(e.user_role.role.name),1)]),Object(l["createElementVNode"])("td",pJ,[Object(l["createElementVNode"])("span",uJ,Object(l["toDisplayString"])(e.organization_admin&&e.organization_admin.organization?e.organization_admin.organization.name:"-"),1)]),Object(l["createElementVNode"])("td",OJ,[Object(l["createElementVNode"])("span",hJ,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",jJ,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization-admin",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[gJ]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,fJ)])])]))),128))])])])])])])])])}var VJ={name:"tables",mounted(){this.setColor(),this.getAllAdmins(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_admin")},data(){return{allAdmins:"",schools:6}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganizationAdmin(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},async getAllAdmins(){try{const e=await et.get("/getAllOrganizationAdmins");this.allAdmins=e.data}catch(e){console.log(e)}},async deleteOrganizationAdmin(e){try{await et.delete("/deleteOrganizationAdmin/"+e),this.removeOrganizationAdminFromList(e),this.snackbarMsg("Successfully Deleted")}catch(t){console.log(t)}},removeOrganizationAdminFromList(e){const t=this.allAdmins.findIndex(t=>t.id===e);this.allAdmins.splice(t,1)}}};a("2dbd");const NJ=We()(VJ,[["render",EJ]]);var xJ=NJ;Object(l["pushScopeId"])("data-v-9f457e52");const yJ={class:"container-fluid py-4"},vJ={class:"row"},kJ={class:"col-12"},wJ={class:"card my-4"},AJ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},SJ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Create Admin",-1),BJ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),CJ={class:"card-body px-0 pb-2"},_J={class:"table-responsive p-0"},PJ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},IJ={key:0,class:"mb-3 change-pass-alert"},DJ=Object(l["createElementVNode"])("br",null,null,-1),TJ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},MJ={class:"form-bg container p-4"},zJ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),FJ={class:"card card-plain"},UJ={class:"card-body"},LJ={role:"form"},$J={class:"mb-1"},qJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),RJ={key:0,class:"text-danger error-txt"},HJ={class:"mb-1"},QJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),JJ={key:0,class:"text-danger error-txt"},YJ={class:"mb-1"},WJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),XJ={key:0,class:"text-danger error-txt"},ZJ={class:"mb-1"},KJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),GJ={key:0,class:"text-danger error-txt"},eY={class:"mb-1"},tY=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),aY={key:0,class:"text-danger error-txt"},lY={class:"mb-1"},cY=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),oY=Object(l["createElementVNode"])("br",null,null,-1),sY=["value"],nY={key:0,class:"text-danger error-txt"},rY={class:"mb-1"},iY=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),dY=Object(l["createElementVNode"])("br",null,null,-1),mY=["value"],bY={key:0,class:"text-danger error-txt"},pY={class:"mb-1"},uY=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),OY=Object(l["createElementVNode"])("br",null,null,-1),hY=["value"],jY={key:0,class:"text-danger error-txt"},gY={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},fY={class:""};function EY(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yJ,[Object(l["createElementVNode"])("div",vJ,[Object(l["createElementVNode"])("div",kJ,[Object(l["createElementVNode"])("div",wJ,[Object(l["createElementVNode"])("div",AJ,[SJ,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[BJ]),_:1})]),Object(l["createElementVNode"])("div",CJ,[Object(l["createElementVNode"])("div",_J,[Object(l["createElementVNode"])("div",PJ,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",IJ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),DJ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",TJ,[Object(l["createElementVNode"])("div",MJ,[zJ,Object(l["createElementVNode"])("div",FJ,[Object(l["createElementVNode"])("div",UJ,[Object(l["createElementVNode"])("form",LJ,[Object(l["createElementVNode"])("div",$J,[qJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newAdmin.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",RJ,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",HJ,[QJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newAdmin.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",JJ,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",YJ,[WJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newAdmin.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",XJ,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ZJ,[KJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newAdmin.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],o.newAdmin.password]]),""!==o.formValidation&&""!==o.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",GJ,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eY,[tY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],o.newAdmin.password_confirmation]]),""!==o.formValidation&&""!==o.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",aY,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lY,[cY,oY,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,sY))),128))],512),[[l["vModelSelect"],o.newAdmin.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nY,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",rY,[iY,dY,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,mY)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],o.newAdmin.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bY,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pY,[uY,OY,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,hY))),128))],512),[[l["vModelSelect"],o.newAdmin.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jY,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",gY,[Object(l["createElementVNode"])("div",fY,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.saveNewAdmin&&s.saveNewAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var VY={name:"",components:{},mounted(){this.getAllOrganizations(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:"",role:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_admin");let e=!1,t="";t=Ns()(this.newAdmin);for(let a in this.newAdmin)""===this.newAdmin[a]||void 0===this.newAdmin[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await et.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async saveNewAdmin(){if(!this.validateForm())try{let e=await et.post("/createOrganizationAdmin",this.newAdmin);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await et.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await et.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("a86a");const NY=We()(VY,[["render",EY],["__scopeId","data-v-9f457e52"]]);var xY=NY;Object(l["pushScopeId"])("data-v-3c7089d6");const yY={class:"container-fluid py-4"},vY={class:"row"},kY={class:"col-12"},wY={class:"card my-4"},AY={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},SY=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Admin",-1),BY=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),CY={class:"card-body px-0 pb-2"},_Y={class:"table-responsive p-0"},PY={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},IY={key:0,class:"mb-3 change-pass-alert"},DY=Object(l["createElementVNode"])("br",null,null,-1),TY={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},MY={class:"form-bg container p-4"},zY=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),FY={class:"card card-plain"},UY={class:"card-body"},LY={role:"form"},$Y={class:"mb-1"},qY=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),RY={key:0,class:"text-danger error-txt"},HY={class:"mb-1"},QY=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),JY={key:0,class:"text-danger error-txt"},YY={class:"mb-1"},WY=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),XY={key:0,class:"text-danger error-txt"},ZY={class:"mb-1"},KY=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),GY=Object(l["createElementVNode"])("br",null,null,-1),eW=["value"],tW={key:0,class:"text-danger error-txt"},aW={class:"mb-1"},lW=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),cW=Object(l["createElementVNode"])("br",null,null,-1),oW=["value"],sW={key:0,class:"text-danger error-txt"},nW={class:"mb-1"},rW=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),iW=Object(l["createElementVNode"])("br",null,null,-1),dW=["value"],mW={key:0,class:"text-danger error-txt"},bW={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},pW={class:"form-bg container p-4"},uW=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),OW=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),hW={class:"card card-plain"},jW={class:"card-body"},gW={role:"form"},fW={class:"mb-1"},EW=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),VW={class:"mb-1"},NW=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),xW={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},yW={class:""};function vW(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yY,[Object(l["createElementVNode"])("div",vY,[Object(l["createElementVNode"])("div",kY,[Object(l["createElementVNode"])("div",wY,[Object(l["createElementVNode"])("div",AY,[SY,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[BY]),_:1})]),Object(l["createElementVNode"])("div",CY,[Object(l["createElementVNode"])("div",_Y,[Object(l["createElementVNode"])("div",PY,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",IY,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),DY]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",TY,[Object(l["createElementVNode"])("div",MY,[zY,Object(l["createElementVNode"])("div",FY,[Object(l["createElementVNode"])("div",UY,[Object(l["createElementVNode"])("form",LY,[Object(l["createElementVNode"])("div",$Y,[qY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newAdmin.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",RY,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",HY,[QY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newAdmin.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",JY,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",YY,[WY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newAdmin.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",XY,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ZY,[KY,GY,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>o.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,eW))),128))],512),[[l["vModelSelect"],o.newAdmin.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",tW,"Organisation is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",aW,[lW,cW,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>o.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,oW)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],o.newAdmin.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",sW,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",nW,[rW,iW,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,dW))),128))],512),[[l["vModelSelect"],o.newAdmin.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mW,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",bW,[Object(l["createElementVNode"])("div",pW,[uW,OW,Object(l["createElementVNode"])("div",hW,[Object(l["createElementVNode"])("div",jW,[Object(l["createElementVNode"])("form",gW,[Object(l["createElementVNode"])("div",fW,[EW,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newAdmin.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newAdmin.password]])]),Object(l["createElementVNode"])("div",VW,[NW,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>o.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newAdmin.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",xW,[Object(l["createElementVNode"])("div",yW,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.updateAdmin&&s.updateAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var kW={name:"",components:{},mounted(){this.getAllRoles(),this.getAllOrganizations(),this.editOrganizationAdmin(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",status:"",role:"",password:"",password_confirmation:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_admin");let e=!1,t="";t=Ns()(this.newAdmin);for(let a in this.newAdmin)""!==this.newAdmin[a]&&void 0!==this.newAdmin[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await et.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async editOrganizationAdmin(){let e=this.$route.params.id;try{const t=await et.get("/editOrganizationAdmin/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAdmin.organization_id=t.organization_admin.organization_id,this.newAdmin.first_name=t.first_name,this.newAdmin.last_name=t.last_name,this.newAdmin.email=t.email,this.newAdmin.status=t.status,this.newAdmin.role=t.user_role.role.name)},async updateAdmin(){if(this.validateForm())console.log(this.formValidation);else try{let e=this.$route.params.id;await et.put("/updateOrganizationAdmin/"+e,this.newAdmin),this.isError=!1,this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Updated Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await et.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await et.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("b909");const wW=We()(kW,[["render",vW],["__scopeId","data-v-3c7089d6"]]);var AW=wW;const SW={class:"container-fluid"},BW={class:"row"},CW={class:"col-12"},_W={class:"card px-3"},PW={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},IW=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STAFF",-1),DW=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-2 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),TW=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee staff accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each staff. ")])],-1),MW={class:"filter-container ms-2"},zW={class:"row",style:{width:"100%"}},FW={class:"col-4"},UW={style:{display:"flex"}},LW=["value"],$W={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"10px"}},qW=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),RW=Object(l["createTextVNode"])(" Export To XLS "),HW=[qW,RW],QW={class:"card-body px-0 pb-2"},JW={class:"table-responsive p-0"},YW={ref:"table",class:"table align-items-center mb-0"},WW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),XW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),ZW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),KW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),GW=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," Balance ",-1),eX={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},tX=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," TopUp ",-1),aX=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),lX=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),cX={key:0},oX=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),sX=[oX],nX={class:"text-xs  text-center font-weight-bold mb-0"},rX={class:"text-xs font-weight-bold mb-0"},iX={class:"text-xs font-weight-bold mb-0"},dX={class:"text-xs text-center font-weight-bold mb-0"},mX={class:"ms-4 text-secondary text-xs font-weight-bold"},bX={key:0,class:"align-middle text-center"},pX=Object(l["createElementVNode"])("i",{class:"fas fa-donate fs-5 me-2"},null,-1),uX={key:1,class:"align-middle text-center"},OX=["onClick"],hX={class:"align-middle text-center text-sm"},jX={class:"badge badge-sm bg-gradient-success"},gX={class:"align-middle text-center"},fX=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),EX=["onClick"],VX={class:"row"},NX={class:"col-md-12 col-lg-12"},xX={class:"pagination-container"},yX={class:"entries-dropdown"},vX=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),kX=["value"],wX={class:"pagination-wrapper"},AX={class:"pagination"},SX=["onClick"];function BX(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",SW,[Object(l["createElementVNode"])("div",BW,[Object(l["createElementVNode"])("div",CW,[Object(l["createElementVNode"])("div",_W,[Object(l["createElementVNode"])("div",PW,[IW,s.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-staff"}},{default:Object(l["withCtx"])(()=>[DW]),_:1})):Object(l["createCommentVNode"])("",!0)]),TW,Object(l["createElementVNode"])("div",MW,[Object(l["createElementVNode"])("div",zW,[Object(l["createElementVNode"])("div",FW,[Object(l["createElementVNode"])("span",UW,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterStaff&&s.filterStaff(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterStaff&&s.filterStaff(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,LW))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",$W,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},HW)])])]),Object(l["createElementVNode"])("div",QW,[Object(l["createElementVNode"])("div",JW,[Object(l["createElementVNode"])("table",YW,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[WW,XW,ZW,KW,GW,s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",eX," Wallet ")):Object(l["createCommentVNode"])("",!0),tX,aX,lX])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",cX,sX)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",nX,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",rX,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",iX,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",dX,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("span",mX,"£"+Object(l["toDisplayString"])(s.formattedPrice(e.balance?e.balance:0)),1)]),s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",bX,[Object(l["createVNode"])(n,{to:{name:"balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[pX]),_:2},1032,["to"])])):Object(l["createCommentVNode"])("",!0),s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",uX,[Object(l["createElementVNode"])("i",{onClick:t=>s.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,OX)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",hX,[Object(l["createElementVNode"])("span",jX,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",gX,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-staff",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[fX]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,EX)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",VX,[Object(l["createElementVNode"])("div",NX,[Object(l["createElementVNode"])("div",xX,[Object(l["createElementVNode"])("div",yX,[vX,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemsPerPage=e),onChange:t[6]||(t[6]=e=>s.getAllStaff(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,kX))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",wX,[Object(l["createElementVNode"])("ul",AX,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getAllStaff(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,SX)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getAllStaff(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getAllStaff(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var CX={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStaff(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_staff"),this.$globalHelper.buttonColor()},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],seachString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"staff_table.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStaff(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await et.post("/getAllStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await et.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.user.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.seachString)return void this.getAllStaff();let e={type:this.filterBy,value:this.seachString,status:"active"};try{const t=await et.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("507d");const _X=We()(CX,[["render",BX]]);var PX=_X;const IX={class:"container-fluid"},DX={class:"row"},TX={class:"col-12"},MX={class:"card px-3"},zX=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED STAFF"),Object(l["createElementVNode"])("small",{class:"page-description ms-2"},[Object(l["createTextVNode"])("Every archived staff can be found in this table. Here, you can manage archived staff accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),FX={class:"card-body px-0 pb-2"},UX={class:"filter-container mb-1 ms-2",style:{"margin-top":"-11px"}},LX={class:"row",style:{width:"100%"}},$X={class:"col-4"},qX={style:{display:"flex"}},RX=["value"],HX={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},QX=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),JX=Object(l["createTextVNode"])(" Export To XLS "),YX=[QX,JX],WX={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},XX=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),ZX=Object(l["createTextVNode"])(" Bulk Restore "),KX=[XX,ZX],GX={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},eZ=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),tZ=Object(l["createTextVNode"])(" Bulk Delete "),aZ=[eZ,tZ],lZ={class:"table-responsive p-0"},cZ={ref:"table",class:"table align-items-center mb-0"},oZ={class:""},sZ={class:"form-check",style:{"margin-left":"-20px"}},nZ=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),rZ=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),iZ=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),dZ=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),mZ=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),bZ=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),pZ={key:0},uZ=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),OZ=[uZ],hZ={class:"align-middle text-center text-sm"},jZ={class:"form-check"},gZ=["checked","onChange"],fZ=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),EZ={class:"text-xs  text-center font-weight-bold mb-0"},VZ={class:"text-xs font-weight-bold mb-0"},NZ={class:"text-xs font-weight-bold mb-0"},xZ={class:"text-xs text-center font-weight-bold mb-0"},yZ={class:"align-middle text-center text-sm"},vZ={class:"badge badge-sm bg-gradient-success"},kZ={class:"row"},wZ={class:"col-md-12 col-lg-12"},AZ={class:"pagination-container"},SZ={class:"entries-dropdown"},BZ=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),CZ=["value"],_Z={class:"pagination-wrapper"},PZ={class:"pagination"},IZ=["onClick"];function DZ(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",IX,[Object(l["createElementVNode"])("div",DX,[Object(l["createElementVNode"])("div",TX,[Object(l["createElementVNode"])("div",MX,[zX,Object(l["createElementVNode"])("div",FX,[Object(l["createElementVNode"])("div",UX,[Object(l["createElementVNode"])("div",LX,[Object(l["createElementVNode"])("div",$X,[Object(l["createElementVNode"])("span",qX,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterStaff&&s.filterStaff(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterStaff&&s.filterStaff(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,RX))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",HX,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},YX)]),Object(l["createElementVNode"])("div",WX,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.confirmAction("restore"))},KX)]),Object(l["createElementVNode"])("div",GX,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.confirmAction("delete"))},aZ)):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",lZ,[Object(l["createElementVNode"])("table",cZ,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",oZ,[Object(l["createElementVNode"])("div",sZ,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),nZ])]),rZ,iZ,dZ,mZ,bZ])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",pZ,OZ)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",hZ,[Object(l["createElementVNode"])("div",jZ,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.user.id),onChange:t=>s.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,gZ),fZ])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",EZ,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",VZ,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",NZ,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",xZ,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",yZ,[Object(l["createElementVNode"])("span",vZ,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)]),Object(l["createElementVNode"])("div",kZ,[Object(l["createElementVNode"])("div",wZ,[Object(l["createElementVNode"])("div",AZ,[Object(l["createElementVNode"])("div",SZ,[BZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getAllStaff(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,CZ))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",_Z,[Object(l["createElementVNode"])("ul",PZ,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getAllStaff(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,IZ)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getAllStaff(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getAllStaff(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var TZ={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStaff(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_staff")},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],selectall:!1,selectedRecords:[],seachString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{exportTableToXLS(){const e=this.$refs.table,t=gO["a"].table_to_sheet(e),a=gO["a"].book_new();gO["a"].book_append_sheet(a,t,"Sheet1"),gO["b"](a,"archived_staff.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStaff.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await et.post("/bulkDeleteStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await et.post("/bulkRestoreStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){Kc.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the staff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await et.post("/archivedStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await et.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.seachString)return void this.getAllStaff();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await et.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("0c56");const MZ=We()(TZ,[["render",DZ]]);var zZ=MZ;Object(l["pushScopeId"])("data-v-2487ca5b");const FZ={class:"container-fluid py-4"},UZ={class:"row"},LZ={class:"col-12"},$Z={class:"card my-4"},qZ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},RZ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Staff",-1),HZ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),QZ={class:"card-body px-0 pb-2"},JZ={class:"table-responsive p-0"},YZ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},WZ={key:0,class:"mb-3 change-pass-alert"},XZ=Object(l["createElementVNode"])("br",null,null,-1),ZZ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},KZ={class:"form-bg container p-4"},GZ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),eK={class:"card card-plain"},tK={class:"card-body"},aK={role:"form"},lK={class:"mb-1"},cK=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),oK={key:0,class:"text-danger error-txt"},sK={class:"mb-1"},nK=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),rK={key:0,class:"text-danger error-txt"},iK={class:"mb-1"},dK=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),mK={key:0,class:"text-danger error-txt"},bK={class:"mb-1"},pK=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),uK={key:0,class:"text-danger error-txt"},OK={class:"mb-1"},hK=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),jK={key:0,class:"text-danger error-txt"},gK={class:"mb-1"},fK=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),EK=Object(l["createElementVNode"])("br",null,null,-1),VK=["value"],NK={key:0,class:"text-danger error-txt"},xK={class:"mb-1"},yK=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance ",-1),vK={class:"mb-1"},kK=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),wK=Object(l["createElementVNode"])("br",null,null,-1),AK=["value"],SK={key:0,class:"text-danger error-txt"},BK={class:"mb-1"},CK=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),_K=Object(l["createElementVNode"])("br",null,null,-1),PK=["value"],IK={key:0,class:"text-danger error-txt"},DK={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},TK={class:""};function MK(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",FZ,[Object(l["createElementVNode"])("div",UZ,[Object(l["createElementVNode"])("div",LZ,[Object(l["createElementVNode"])("div",$Z,[Object(l["createElementVNode"])("div",qZ,[RZ,Object(l["createVNode"])(n,{to:{name:"list-staff"}},{default:Object(l["withCtx"])(()=>[HZ]),_:1})]),Object(l["createElementVNode"])("div",QZ,[Object(l["createElementVNode"])("div",JZ,[Object(l["createElementVNode"])("div",YZ,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",WZ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),XZ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",ZZ,[Object(l["createElementVNode"])("div",KZ,[GZ,Object(l["createElementVNode"])("div",eK,[Object(l["createElementVNode"])("div",tK,[Object(l["createElementVNode"])("form",aK,[Object(l["createElementVNode"])("div",lK,[cK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStaff.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",oK,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sK,[nK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStaff.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rK,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",iK,[dK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStaff.staff_id]]),""!==o.formValidation&&""!==o.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mK,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",bK,[pK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],o.newStaff.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uK,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",OK,[hK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStaff.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jK,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",gK,[fK,EK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,VK))),128))],512),[[l["vModelSelect"],o.newStaff.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NK,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xK,[yK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[6]||(t[6]=e=>s.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],s.formattedBalance]])]),Object(l["createElementVNode"])("div",vK,[kK,wK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>o.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.name},Object(l["toDisplayString"])(e.name),9,AK))),128))],512),[[l["vModelSelect"],o.newStaff.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",SK,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",BK,[CK,_K,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,PK))),128))],512),[[l["vModelSelect"],o.newStaff.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",IK,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",DK,[Object(l["createElementVNode"])("div",TK,[Object(l["createElementVNode"])("button",{onClick:t[9]||(t[9]=(...e)=>s.saveNewStaff&&s.saveNewStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Staff ")])])])])])])])])])}Object(l["popScopeId"])();var zK={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_staff")},computed:{formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",last_name:"",email:"",status:"",role:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_staff");let e=!1,t="";t=Ns()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&void 0!==this.newStaff[a]||"balance"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await et.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStaff(){if(!this.validateForm())try{await et.post("/createStaff",this.newStaff),this.isError=!1,this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newStaff.first_name+" "+this.newStaff.last_name,a={user_id:e,name:t,email:this.newStaff.email};try{await et.post("/createCustomer",a)}catch(l){console.log(l)}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await et.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("dca3");const FK=We()(zK,[["render",MK],["__scopeId","data-v-2487ca5b"]]);var UK=FK;Object(l["pushScopeId"])("data-v-ae2bde28");const LK={class:"container-fluid py-4"},$K={class:"row"},qK={class:"col-12"},RK={class:"card my-4"},HK={class:"d-flex justify-content-between border-radius-lg pt-4"},QK=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Staff",-1),JK=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),YK={class:"card-body px-0 pb-2"},WK={class:"table-responsive p-0"},XK={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},ZK={key:0,class:"mb-3 change-pass-alert"},KK=Object(l["createElementVNode"])("br",null,null,-1),GK={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},eG={class:"form-bg container p-4"},tG=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),aG={class:"card card-plain"},lG={class:"card-body"},cG={role:"form"},oG={class:"mb-1"},sG=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),nG={key:0,class:"text-danger error-txt"},rG={class:"mb-1"},iG=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),dG={key:0,class:"text-danger error-txt"},mG={class:"mb-1"},bG=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),pG={key:0,class:"text-danger error-txt"},uG={class:"mb-1"},OG=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),hG={key:0,class:"text-danger error-txt"},jG={class:"mb-1"},gG=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),fG={key:0,class:"text-danger error-txt"},EG={class:"mb-1"},VG=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),NG=Object(l["createElementVNode"])("br",null,null,-1),xG=["value"],yG={key:0,class:"text-danger error-txt"},vG={class:"mb-1"},kG=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance ",-1),wG={class:"mb-1"},AG=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),SG={class:"mb-1"},BG=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),CG=Object(l["createElementVNode"])("br",null,null,-1),_G=["value"],PG={key:0,class:"text-danger error-txt"},IG={class:"mb-1"},DG=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),TG=Object(l["createElementVNode"])("br",null,null,-1),MG=["value"],zG={key:0,class:"text-danger error-txt"},FG={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},UG={class:"form-bg container p-4"},LG=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),$G=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),qG={class:"card card-plain"},RG={class:"card-body"},HG={role:"form"},QG={class:"mb-1"},JG=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),YG={class:"mb-1"},WG=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),XG={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},ZG={class:""};function KG(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LK,[Object(l["createElementVNode"])("div",$K,[Object(l["createElementVNode"])("div",qK,[Object(l["createElementVNode"])("div",RK,[Object(l["createElementVNode"])("div",HK,[QK,Object(l["createVNode"])(n,{to:{name:"list-staff"}},{default:Object(l["withCtx"])(()=>[JK]),_:1})]),Object(l["createElementVNode"])("div",YK,[Object(l["createElementVNode"])("div",WK,[Object(l["createElementVNode"])("div",XK,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ZK,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),KK]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",GK,[Object(l["createElementVNode"])("div",eG,[tG,Object(l["createElementVNode"])("div",aG,[Object(l["createElementVNode"])("div",lG,[Object(l["createElementVNode"])("form",cG,[Object(l["createElementVNode"])("div",oG,[sG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStaff.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nG,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",rG,[iG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStaff.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dG,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",mG,[bG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStaff.staff_id]]),""!==o.formValidation&&""!==o.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pG,"Staff ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",uG,[OG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],o.newStaff.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",hG,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",jG,[gG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStaff.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fG,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EG,[VG,NG,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,xG))),128))],512),[[l["vModelSelect"],o.newStaff.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yG,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",vG,[kG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[6]||(t[6]=e=>s.formattedBalance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],s.formattedBalance]])]),Object(l["createElementVNode"])("div",wG,[AG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[7]||(t[7]=e=>s.formattedAmount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],s.formattedAmount]])]),Object(l["createElementVNode"])("div",SG,[BG,CG,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[8]||(t[8]=e=>o.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.name},Object(l["toDisplayString"])(e.name),9,_G))),128))],512),[[l["vModelSelect"],o.newStaff.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",PG,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",IG,[DG,TG,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,MG))),128))],512),[[l["vModelSelect"],o.newStaff.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zG,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",FG,[Object(l["createElementVNode"])("div",UG,[LG,$G,Object(l["createElementVNode"])("div",qG,[Object(l["createElementVNode"])("div",RG,[Object(l["createElementVNode"])("form",HG,[Object(l["createElementVNode"])("div",QG,[JG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[10]||(t[10]=e=>o.newStaff.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newStaff.password]])]),Object(l["createElementVNode"])("div",YG,[WG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[11]||(t[11]=e=>o.newStaff.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newStaff.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",XG,[Object(l["createElementVNode"])("div",ZG,[Object(l["createElementVNode"])("button",{onClick:t[12]||(t[12]=(...e)=>s.updateStaff&&s.updateStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Staff ")])])])])])])])])])}Object(l["popScopeId"])();var GG={name:"",components:{},mounted(){this.getUser(),this.editStaff(),this.getSchools(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_staff")},computed:{formattedAmount:{get(){return parseFloat(this.newStaff.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.add_amount=t}},formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",user:"",availableCountries:["UK","USA","Canada"],newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",balance:"",add_amount:"",last_name:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:"",password:"",password_confirmation:"",role:""},validationErrors:"",isError:!1,formValidation:"",availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_staff");let e=!1,t="";t=Ns()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&null!==this.newStaff[a]||"phone"===a||"country"===a||"city"===a||"address"===a||"zip"===a||"balance"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await et.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStaff(){let e=this.$route.params.id;try{const t=await et.get("/editStaff/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStaff.school_id=t.school_id,this.newStaff.staff_id=t.staff_id,this.newStaff.mifare_id=t.mifare_id,this.newStaff.first_name=t.user.first_name,this.newStaff.last_name=t.user.last_name,this.newStaff.email=t.user.email,this.newStaff.phone=t.user.phone,this.newStaff.country=t.user.country,this.newStaff.city=t.user.city,this.newStaff.zip=t.user.zip,this.newStaff.address=t.user.address,this.newStaff.status=t.user.status,this.newStaff.role=t.user.user_role.role.name,this.newStaff.balance=this.formattedPrice(t.balance.ballance))},async updateStaff(){if(this.validateForm())return;let e=this.$route.params.id;try{await et.put("/updateStaff/"+e,this.newStaff),this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await et.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("d36c");const e1=We()(GG,[["render",KG],["__scopeId","data-v-ae2bde28"]]);var t1=e1;const a1={class:"card"},l1={class:"card-body pt-4 p-3"},c1={class:"list-group"},o1={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},s1={class:"info-width d-flex flex-column"},n1={class:"row"},r1=Object(l["createStaticVNode"])('<div class="col-md-8 col-sm-8"><div><h6 class="mb-3 text-sm text-dark"> Muhammad Anees </h6><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Phone:</span><span class="text-dark ms-2 font-weight-bold"> +92347193809 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Email:</span><span class="text-dark ms-2 font-weight-bold"> anees@example.com </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Staff ID:</span><span class="text-dark ms-2 font-weight-bold"> satff349328 </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Site:</span><span class="text-dark ms-2 font-weight-bold"> XEPAY Site </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Country:</span><span class="text-dark ms-2 font-weight-bold"> United Kingdom (UK) </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">City:</span><span class="text-dark ms-2 font-weight-bold"> Birmingham </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Post Code/Zip Code:</span><span class="text-dark ms-2 font-weight-bold"> 3231223 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Address:</span><span class="text-dark ms-2 font-weight-bold"> 3673 Edington Drive </span></span></div></div>',1),i1={class:"col-md-4 col-sm-4"},d1=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," PERMISSIONS ",-1),m1=Object(l["createElementVNode"])("small",{class:"text-xs"},"Muhammad Anees has following permissions",-1),b1={class:"permissions mt-3"},p1={class:"switch-container mt-2 me-5"},u1=["onChange","checked","id"],O1=["for"],h1={class:"permission-name text-uppercase"};function j1(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",a1,[Object(l["createElementVNode"])("div",l1,[Object(l["createElementVNode"])("div",c1,[Object(l["createElementVNode"])("div",o1,[Object(l["createElementVNode"])("div",s1,[Object(l["createElementVNode"])("div",n1,[r1,Object(l["createElementVNode"])("div",i1,[d1,m1,Object(l["createElementVNode"])("div",b1,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},[Object(l["createElementVNode"])("div",p1,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>s.updatePermission(e.id),checked:s.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,u1),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,O1)]),Object(l["createElementVNode"])("span",h1,Object(l["toDisplayString"])(e.name),1)]))),128))])])])])])])])])}var g1={name:"billing-card",mounted(){this.getAllPermissions(),this.getUserPermissions()},data(){return{allPermissions:"",userPermissions:[]}},methods:{async getAllPermissions(){try{const e=await et.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await et.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.userPermissions.some(t=>t.permission_id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await et.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("fa86");const f1=We()(g1,[["render",j1]]);var E1=f1;const V1={class:"container-fluid"},N1={class:"row"},x1={class:"col-12"},y1={class:"card"},v1={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},k1=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PARENTS",-1),w1=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),A1=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Parents section, you can manage parent or carer accounts by adding, editing, or deleting them. Additionally, you can link each parent to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("the students they are responsible for. This functionality helps keep parent information up to date. ")])],-1),S1={class:"card-body px-0 pb-2"},B1={class:"table-responsive p-0"},C1={class:"table align-items-center mb-0"},_1=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),P1={key:0},I1=Object(l["createElementVNode"])("td",{colspan:"5",class:"text-center"}," No data available. ",-1),D1=[I1],T1={class:"text-xs  text-center font-weight-bold mb-0"},M1={class:"d-flex"},z1={class:"text-xs font-weight-bold mb-0"},F1=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),U1={class:"text-xs font-weight-bold mb-0"},L1={class:"align-middle text-center text-sm"},$1={class:"badge badge-sm bg-gradient-success"},q1={class:"align-middle text-center"},R1=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),H1=["onClick"],Q1={class:"row"},J1={class:"col-md-12 col-lg-12"},Y1={class:"pagination-container"},W1={class:"entries-dropdown"},X1=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),Z1=["value"],K1={class:"pagination-wrapper"},G1={class:"pagination"},e0=["onClick"];function t0(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",V1,[Object(l["createElementVNode"])("div",N1,[Object(l["createElementVNode"])("div",x1,[Object(l["createElementVNode"])("div",y1,[Object(l["createElementVNode"])("div",v1,[k1,s.userPermissions.create?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-parent"}},{default:Object(l["withCtx"])(()=>[w1]),_:1})):Object(l["createCommentVNode"])("",!0)]),A1,Object(l["createElementVNode"])("div",S1,[Object(l["createElementVNode"])("div",B1,[Object(l["createElementVNode"])("table",C1,[_1,Object(l["createElementVNode"])("tbody",null,[0===o.allParent.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",P1,D1)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allParent,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",T1,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"add-childrens",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",M1,[Object(l["createElementVNode"])("p",z1,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),F1])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",U1,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",L1,[Object(l["createElementVNode"])("span",$1,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",q1,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-parent",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[R1]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,H1)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])]),Object(l["createElementVNode"])("div",Q1,[Object(l["createElementVNode"])("div",J1,[Object(l["createElementVNode"])("div",Y1,[Object(l["createElementVNode"])("div",W1,[X1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.itemsPerPage=e),onChange:t[1]||(t[1]=t=>e.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,Z1))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",K1,[Object(l["createElementVNode"])("ul",G1,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[2]||(t[2]=t=>e.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=t=>e.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,class:Object(l["normalizeClass"])({active:o.currentPage===t})},[Object(l["createElementVNode"])("a",{onClick:a=>e.getAllStudents(t),href:"#"},Object(l["toDisplayString"])(t),9,e0)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[4]||(t[4]=t=>e.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[5]||(t[5]=t=>e.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var a0={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllParents(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,allParent:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteParent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllParents(e){let t={page:e,entries_per_page:this.itemsPerPage};try{let e="/getAllParents";"organization_admin"==this.user.role&&(e="/getAllParents/"+this.user.id);const a=await et.post(e,t);this.allParent=a.data.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(a){console.log(a)}},async deleteParent(e){try{await et.delete("/deleteParent/"+e),this.removeParentFromList(e),this.snackbarMsg("Parent Deleted")}catch(t){console.log(t)}},removeParentFromList(e){const t=this.allParent.findIndex(t=>t.id===e);this.allParent.splice(t,1)}}};a("a4cd");const l0=We()(a0,[["render",t0]]);var c0=l0;Object(l["pushScopeId"])("data-v-8f0e2a1c");const o0={class:"container-fluid py-4"},s0={class:"row"},n0={class:"col-12"},r0={class:"card my-4"},i0={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},d0=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Parent",-1),m0=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),b0={class:"card-body px-0 pb-2"},p0={class:"table-responsive p-0"},u0={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},O0={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},h0={class:"form-bg container p-4"},j0=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),g0={class:"card card-plain"},f0={class:"card-body"},E0={role:"form"},V0={class:"mb-1"},N0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),x0={class:"mb-1"},y0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),v0={class:"mb-1"},k0=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),w0={class:"mb-1"},A0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),S0=Object(l["createElementVNode"])("br",null,null,-1),B0=["value"],C0={key:0,class:"text-danger error-txt"},_0={class:"mb-1"},P0=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),I0=Object(l["createElementVNode"])("br",null,null,-1),D0=["value"],T0={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},M0={class:"form-bg container p-4"},z0=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password Information",-1),F0={class:"card card-plain"},U0={class:"card-body"},L0={role:"form"},$0={class:"mb-1"},q0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),R0={class:"mb-1"},H0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),Q0={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},J0={class:""};function Y0(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",o0,[Object(l["createElementVNode"])("div",s0,[Object(l["createElementVNode"])("div",n0,[Object(l["createElementVNode"])("div",r0,[Object(l["createElementVNode"])("div",i0,[d0,Object(l["createVNode"])(n,{to:{name:"list-parent"}},{default:Object(l["withCtx"])(()=>[m0]),_:1})]),Object(l["createElementVNode"])("div",b0,[Object(l["createElementVNode"])("div",p0,[Object(l["createElementVNode"])("div",u0,[Object(l["createElementVNode"])("div",O0,[Object(l["createElementVNode"])("div",h0,[j0,Object(l["createElementVNode"])("div",g0,[Object(l["createElementVNode"])("div",f0,[Object(l["createElementVNode"])("form",E0,[Object(l["createElementVNode"])("div",V0,[N0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newParent.first_name]])]),Object(l["createElementVNode"])("div",x0,[y0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newParent.last_name]])]),Object(l["createElementVNode"])("div",v0,[k0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newParent.email]])]),Object(l["createElementVNode"])("div",w0,[A0,S0,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>o.newParent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,B0))),128))],512),[[l["vModelSelect"],o.newParent.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",C0,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_0,[P0,I0,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,D0))),128))],512),[[l["vModelSelect"],o.newParent.status]])])])])])])]),Object(l["createElementVNode"])("div",T0,[Object(l["createElementVNode"])("div",M0,[z0,Object(l["createElementVNode"])("div",F0,[Object(l["createElementVNode"])("div",U0,[Object(l["createElementVNode"])("form",L0,[Object(l["createElementVNode"])("div",$0,[q0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>o.newParent.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],o.newParent.password]])]),Object(l["createElementVNode"])("div",R0,[H0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],o.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",Q0,[Object(l["createElementVNode"])("div",J0,[Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>s.saveNewParent&&s.saveNewParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Parent ")])])])])])])])])])}Object(l["popScopeId"])();var W0={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.userPermissions.create||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newParent:{student_id:"",first_name:"",last_name:"",email:"",school_id:"",password:"",password_confirmation:"",status:""},availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Ns()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"phone"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewParent(){try{let e=await et.post("/createParent",this.newParent);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newStudent.first_name+" "+this.newStudent.last_name,a={user_id:e,name:t,email:this.newStudent.email};try{await et.post("/createCustomer",a)}catch(l){console.log(l)}},async getStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await et.post("/getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async getSchools(){try{let e="/getAllSchools";e="organization_admin"==this.user.role?"/getAllSchools/"+this.user.id:"/getAllSchools";const t=await et.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("66b5");const X0=We()(W0,[["render",Y0],["__scopeId","data-v-8f0e2a1c"]]);var Z0=X0;Object(l["pushScopeId"])("data-v-2ea812ce");const K0={class:"container-fluid py-4"},G0={class:"row"},e2={class:"col-12"},t2={class:"card my-4"},a2=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Parent")],-1),l2={class:"card-body px-0 pb-2"},c2={class:"table-responsive p-0"},o2={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},s2={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},n2={class:"form-bg container p-4"},r2=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),i2={class:"card card-plain"},d2={class:"card-body"},m2={role:"form"},b2={class:"mb-1"},p2=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),u2={key:0,class:"text-danger error-txt"},O2={class:"mb-1"},h2=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),j2={key:0,class:"text-danger error-txt"},g2={class:"mb-1"},f2=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),E2={key:0,class:"text-danger error-txt"},V2={class:"mb-1"},N2=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),x2=Object(l["createElementVNode"])("br",null,null,-1),y2=["value"],v2={key:0,class:"text-danger error-txt"},k2={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},w2={class:"form-bg container p-4"},A2=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),S2=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),B2={class:"card card-plain"},C2={class:"card-body"},_2={role:"form"},P2={class:"mb-1"},I2=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),D2={class:"mb-1"},T2=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),M2={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},z2={class:""};function F2(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",K0,[Object(l["createElementVNode"])("div",G0,[Object(l["createElementVNode"])("div",e2,[Object(l["createElementVNode"])("div",t2,[a2,Object(l["createElementVNode"])("div",l2,[Object(l["createElementVNode"])("div",c2,[Object(l["createElementVNode"])("div",o2,[Object(l["createElementVNode"])("div",s2,[Object(l["createElementVNode"])("div",n2,[r2,Object(l["createElementVNode"])("div",i2,[Object(l["createElementVNode"])("div",d2,[Object(l["createElementVNode"])("form",m2,[Object(l["createElementVNode"])("div",b2,[p2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newParent.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",u2,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",O2,[h2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newParent.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",j2,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",g2,[f2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newParent.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",E2,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",V2,[N2,x2,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,y2))),128))],512),[[l["vModelSelect"],o.newParent.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",v2,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",k2,[Object(l["createElementVNode"])("div",w2,[A2,S2,Object(l["createElementVNode"])("div",B2,[Object(l["createElementVNode"])("div",C2,[Object(l["createElementVNode"])("form",_2,[Object(l["createElementVNode"])("div",P2,[I2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newParent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newParent.password]])]),Object(l["createElementVNode"])("div",D2,[T2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>o.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",M2,[Object(l["createElementVNode"])("div",z2,[Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=(...e)=>s.updateParent&&s.updateParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var U2={name:"",components:{},mounted(){this.getUser(),this.editParent(),this.getStudents(),this.$globalHelper.buttonColor()},updated(){this.userPermissions.edit||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newParent:{first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:""},validationErrors:"",formValidation:"",availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Ns()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editParent(){let e=this.$route.params.id;try{const t=await et.get("/editParent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newParent.student_id=t.student_id,this.newParent.first_name=t.first_name,this.newParent.last_name=t.last_name,this.newParent.email=t.email,this.newParent.status=t.status)},async updateParent(){let e=this.$route.params.id;try{await et.put("/updateParent/"+e,this.newParent),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Updated Successfuly")}catch(t){console.log(t)}},async getStudents(){try{let e="/getAllStudents";"organization_admin"==this.user.role&&(e="/getAllStudents/"+this.user.id);const t=await et.get(e);this.allStudents=t.data}catch(e){console.log(e)}}}};a("52e2");const L2=We()(U2,[["render",F2],["__scopeId","data-v-2ea812ce"]]);var $2=L2;const q2={class:"card"},R2={class:"card-body pt-4 p-3"},H2={class:"list-group"},Q2={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},J2={class:"info-width d-flex flex-column"},Y2={class:"row"},W2={class:"col-md-8 col-sm-8"},X2={class:"row"},Z2={class:"col-md-9 col-sm-9"},K2={role:"form"},G2={class:"mb-1"},e4=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Student Email",-1),t4={class:"col-md-3 col-sm-3"},a4=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Childrens ",-1),l4=["onClick"],c4={class:"text-sm fw-5"},o4=Object(l["createElementVNode"])("br",null,null,-1),s4={class:"text-sm"},n4={class:"text-dark ms-2 font-weight-bold"},r4=["onClick"];function i4(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",q2,[Object(l["createElementVNode"])("div",R2,[Object(l["createElementVNode"])("div",H2,[Object(l["createElementVNode"])("div",Q2,[Object(l["createElementVNode"])("div",J2,[Object(l["createElementVNode"])("div",Y2,[Object(l["createElementVNode"])("div",W2,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",X2,[Object(l["createElementVNode"])("div",Z2,[Object(l["createElementVNode"])("form",K2,[Object(l["createElementVNode"])("div",G2,[e4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.studentEmail=e),class:"input-box",id:"name",type:"text",placeholder:"Enter Student Email",name:"student_email"},null,512),[[l["vModelText"],o.studentEmail]])])])]),Object(l["createElementVNode"])("div",t4,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.addChildren&&s.addChildren(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Student ")])]),a4,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:Object(l["normalizeClass"])([{"selected-role":o.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>s.toggleSelection(e.id,t)},[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",c4,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1),o4,Object(l["createElementVNode"])("p",s4,Object(l["toDisplayString"])(e.student.email),1)]),Object(l["createElementVNode"])("span",n4,[Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,r4)])],10,l4))),128))])])])])])])])])}var d4={name:"billing-card",mounted(){this.getChildrens(),this.$globalHelper.buttonColor()},updated(){},data(){return{childrens:"",permissionsOfRole:"",isSelected:"",isEdit:null,studentEmail:"",roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){Kc.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteChildren(e)})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async addChildren(){let e=this.$route.params.id,t={student_email:this.studentEmail,parent_id:e};try{await et.post("/addStudentToParent",t),this.getChildrens(),this.snackbarMsg("Children Added Successfully")}catch(a){console.log(a)}},async getChildrens(){let e=this.$route.params.id;try{const t=await et.get("getChildrensOfParent/"+e);this.childrens=t.data}catch(t){console.log(t)}},async deleteChildren(e){try{await et.get("deleteChildren/"+e),this.getChildrens(),this.snackbarMsg("Children Removed Successfully")}catch(t){console.log(t)}}}};a("2b98");const m4=We()(d4,[["render",i4]]);var b4=m4;const p4={class:"container-fluid py-4"},u4={class:"row"},O4={class:"col-12"},h4={class:"card my-4"},j4=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Childrens")],-1),g4={class:"card-body px-0 pb-2"},f4={class:"table-responsive p-0"},E4={class:"table align-items-center mb-0"},V4=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Transactions "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Ballance "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Status ")])],-1),N4={class:"align-middle text-center text-sm"},x4={class:"text-xs font-weight-bold mb-0"},y4={class:"text-xs font-weight-bold mb-0"},v4={class:"text-xs font-weight-bold mb-0"},k4={class:"align-middle text-center"},w4={class:"text-secondary text-xs font-weight-bold"},A4={class:"align-middle text-center"},S4={class:"text-secondary text-xs font-weight-bold"},B4={class:"align-middle text-center"},C4=["onClick"],_4={class:"align-middle text-center"},P4=Object(l["createElementVNode"])("i",{class:"fas fa-donate me-2"},null,-1),I4={class:"align-middle text-center text-sm"},D4={class:"badge badge-sm bg-gradient-success"};function T4(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",p4,[Object(l["createElementVNode"])("div",u4,[Object(l["createElementVNode"])("div",O4,[Object(l["createElementVNode"])("div",h4,[j4,Object(l["createElementVNode"])("div",g4,[Object(l["createElementVNode"])("div",f4,[Object(l["createElementVNode"])("table",E4,[V4,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",N4,[Object(l["createElementVNode"])("p",x4,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",y4,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",v4,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",k4,[Object(l["createElementVNode"])("span",w4,Object(l["toDisplayString"])(e.school.title),1)]),Object(l["createElementVNode"])("td",A4,[Object(l["createElementVNode"])("span",S4,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",B4,[Object(l["createElementVNode"])("i",{onClick:t=>s.transactionHistoryNav(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"swap_horizontal_circle",8,C4)]),Object(l["createElementVNode"])("td",_4,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"student-balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[P4]),_:2},1032,["to"])])]),Object(l["createElementVNode"])("td",I4,[Object(l["createElementVNode"])("span",D4,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])])])])])])])])}var M4={name:"tables",mounted(){this.getUser(),this.getAllStudents()},data(){return{allStudents:"",schools:6,user:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await et.post("getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async deleteStudent(e){try{await et.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("2409");const z4=We()(M4,[["render",T4]]);var F4=z4;const U4={class:"container-fluid py-4"},L4={class:"row"},$4={class:"col-12"},q4={class:"card my-4"},R4={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},H4=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Attributes",-1),Q4=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Attribute ",-1),J4={class:"card-body px-0 pb-2"},Y4={class:"table-responsive p-0"},W4={class:"table align-items-center mb-0"},X4=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase  text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),Z4={class:"text-xs  text-center font-weight-bold mb-0"},K4={class:"text-xs font-weight-bold mb-0"},G4={class:"align-middle text-center"},e5=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),t5=["onClick"];function a5(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",U4,[Object(l["createElementVNode"])("div",L4,[Object(l["createElementVNode"])("div",$4,[Object(l["createElementVNode"])("div",q4,[Object(l["createElementVNode"])("div",R4,[H4,s.userPermissions.create_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-attribute"}},{default:Object(l["withCtx"])(()=>[Q4]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",J4,[Object(l["createElementVNode"])("div",Y4,[Object(l["createElementVNode"])("table",W4,[X4,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allAttributes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Z4,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",K4,Object(l["toDisplayString"])(e.name),1)]),Object(l["createElementVNode"])("td",G4,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-attribute",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[e5]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_attribute?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.deleteAttribute(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,t5)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var l5={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("view_attribute")},computed:{...Object(Qe["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{allAttributes:"",schools:6,user:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllAttributes(){try{const e=await et.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},async deleteAttribute(e){try{await et.delete("/deleteAttribute/"+e),this.removeAttributeFromList(e),this.snackbarMsg("Attribute Deleted Successfully")}catch(t){console.log(t)}},removeAttributeFromList(e){const t=this.allAttributes.findIndex(t=>t.id===e);this.allAttributes.splice(t,1)}}};a("e33f");const c5=We()(l5,[["render",a5]]);var o5=c5;Object(l["pushScopeId"])("data-v-bfa38f8e");const s5={class:"container-fluid py-4"},n5={class:"row"},r5={class:"col-12"},i5={class:"card my-4"},d5={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},m5=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Attribute",-1),b5=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),p5={class:"card-body px-0 pb-2"},u5={class:"table-responsive p-0"},O5={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},h5={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},j5={class:"form-bg container p-4"},g5={class:"card card-plain"},f5={class:"card-body"},E5={role:"form"},V5={class:"mb-1"},N5=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),x5={key:0,class:"text-danger error-txt"},y5={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},v5={class:""};function k5(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",s5,[Object(l["createElementVNode"])("div",n5,[Object(l["createElementVNode"])("div",r5,[Object(l["createElementVNode"])("div",i5,[Object(l["createElementVNode"])("div",d5,[m5,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[b5]),_:1})]),Object(l["createElementVNode"])("div",p5,[Object(l["createElementVNode"])("div",u5,[Object(l["createElementVNode"])("div",O5,[Object(l["createElementVNode"])("div",h5,[Object(l["createElementVNode"])("div",j5,[Object(l["createElementVNode"])("div",g5,[Object(l["createElementVNode"])("div",f5,[Object(l["createElementVNode"])("form",E5,[Object(l["createElementVNode"])("div",V5,[N5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newAttribute.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",x5,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",y5,[Object(l["createElementVNode"])("div",v5,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.saveNewAttribute&&s.saveNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var w5={name:"",components:{},mounted(){this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("create_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_attribute");let e=!1,t="";t=Ns()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewAttribute(){if(!this.validateForm()){this.newAttribute.user_role=this.user.role;try{await et.post("/createAttribute",this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}},async getAllOrganizations(){try{const e=await et.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("94d7");const A5=We()(w5,[["render",k5],["__scopeId","data-v-bfa38f8e"]]);var S5=A5;Object(l["pushScopeId"])("data-v-5310274d");const B5={class:"container-fluid py-4"},C5={class:"row"},_5={class:"col-12"},P5={class:"card my-4"},I5={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},D5=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Attribute",-1),T5=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),M5={class:"card-body px-0 pb-2"},z5={class:"table-responsive p-0"},F5={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},U5={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},L5={class:"form-bg container p-4"},$5={class:"card card-plain"},q5={class:"card-body"},R5={role:"form"},H5={class:"mb-1"},Q5=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),J5={key:0,class:"text-danger error-txt"},Y5={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},W5={class:""};function X5(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",B5,[Object(l["createElementVNode"])("div",C5,[Object(l["createElementVNode"])("div",_5,[Object(l["createElementVNode"])("div",P5,[Object(l["createElementVNode"])("div",I5,[D5,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[T5]),_:1})]),Object(l["createElementVNode"])("div",M5,[Object(l["createElementVNode"])("div",z5,[Object(l["createElementVNode"])("div",F5,[Object(l["createElementVNode"])("div",U5,[Object(l["createElementVNode"])("div",L5,[Object(l["createElementVNode"])("div",$5,[Object(l["createElementVNode"])("div",q5,[Object(l["createElementVNode"])("form",R5,[Object(l["createElementVNode"])("div",H5,[Q5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newAttribute.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",J5,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",Y5,[Object(l["createElementVNode"])("div",W5,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.updateNewAttribute&&s.updateNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var Z5={name:"",components:{},mounted(){this.editAttribute(),this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("edit_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_attribute");let e=!1,t="";t=Ns()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async updateNewAttribute(){if(this.validateForm())return;this.newAttribute.user_role=this.user.role;let e=this.$route.params.id;try{await et.put("/updateAttribute/"+e,this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors}},async editAttribute(){let e=this.$route.params.id;try{const t=await et.get("/editAttribute/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAttribute.organization_id=t.organization_id,this.newAttribute.name=t.name)},async getAllOrganizations(){try{const e=await et.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("8a36");const K5=We()(Z5,[["render",X5],["__scopeId","data-v-5310274d"]]);var G5=K5;const e3={class:"card"},t3={class:"card-body pt-4 p-3"},a3={class:"list-group"},l3={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},c3={class:"info-width d-flex flex-column"},o3={class:"row"},s3={class:"col-md-8 col-sm-8"},n3={class:"row"},r3={class:"col-md-10 col-sm-10"},i3=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"MANAGE ROLES & PERMISSIONS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"}," In the Roles and Permissions section, you can manage user roles and can assign specific permissions to each role. This functionality ensures that users have the appropriate access levels based on their role, improving security and operational efficiency. ")],-1),d3={role:"form"},m3={class:"mb-1"},b3=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Role Name",-1),p3={class:"col-md-2 col-sm-2"},u3=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Roles List ",-1),O3=["onClick"],h3={class:"text-sm fw-5"},j3={key:0,class:"text-dark ms-2 font-weight-bold"},g3=["onClick"],f3=["onClick"],E3={class:"col-md-4 col-sm-4"},V3=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," ROLE PERMISSIONS ",-1),N3=Object(l["createElementVNode"])("small",{class:"text-xs"},"This Role has following permissions",-1),x3={class:"permissions-container mt-3"},y3={key:0,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},v3={class:"switch-container mt-2 me-5"},k3=["onChange","checked","id"],w3=["for"],A3={class:"permissions text-uppercase"};function S3(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",e3,[Object(l["createElementVNode"])("div",t3,[Object(l["createElementVNode"])("div",a3,[Object(l["createElementVNode"])("div",l3,[Object(l["createElementVNode"])("div",c3,[Object(l["createElementVNode"])("div",o3,[Object(l["createElementVNode"])("div",s3,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",n3,[Object(l["createElementVNode"])("div",r3,[i3,Object(l["createElementVNode"])("form",d3,[Object(l["createElementVNode"])("div",m3,[b3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.roleName=e),class:"input-box",id:"name",type:"text",placeholder:"Role Name",name:"name"},null,512),[[l["vModelText"],o.roleName]])])])]),Object(l["createElementVNode"])("div",p3,[null!=o.isEdit&&""!=o.roleName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=(...e)=>s.updateRole&&s.updateRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Update ")):Object(l["createCommentVNode"])("",!0),""==o.roleName||null==o.isEdit?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[2]||(t[2]=(...e)=>s.createRole&&s.createRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Role ")):Object(l["createCommentVNode"])("",!0)])]),u3,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:Object(l["normalizeClass"])([{"selected-role":o.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>(s.toggleSelection(e.id,t),s.getPermissionsOfRole(e.id))},[Object(l["createElementVNode"])("span",h3,Object(l["toDisplayString"])(e.name),1),"super_admin"==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",j3,[Object(l["createElementVNode"])("i",{onClick:t=>s.editRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,g3),Object(l["createElementVNode"])("i",{onClick:t=>s.deleteRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,f3)])):Object(l["createCommentVNode"])("",!0)],10,O3)):Object(l["createCommentVNode"])("",!0)],64))),128))])]),Object(l["createElementVNode"])("div",E3,[V3,N3,Object(l["createElementVNode"])("div",x3,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[s.checkIfAdmin(e)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",y3,[Object(l["createElementVNode"])("div",v3,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>s.givePermission(e.name),checked:s.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,k3),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,w3)]),Object(l["createElementVNode"])("span",A3,Object(l["toDisplayString"])(e.name),1)])):Object(l["createCommentVNode"])("",!0)],64))),128))])])])])])])])])}var B3={name:"billing-card",mounted(){this.getAllRoles(),this.getAllPermissions(),this.getUserPermissions(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("roles")},data(){return{permissionsOfRole:"",isSelected:"",isEdit:null,roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},watch:{allRoles(e,t){console.log(e,t),this.isSelected=e[0]?e[0].id:"",this.getPermissionsOfRole()}},computed:{checkPermissionsOfRole(){return this.permissionsOfRole}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},checkIfAdmin(e){let t=!1,a=["create_admin","view_admin","edit_admin","delete_admin","roles"],l=[];return this.allRoles.filter(c=>{c.id==this.isSelected&&(t="Admin"==c.name||("Associate Admin"==c.name?!a.includes(e.name):!a.includes(e.name)&&!l.includes(e.name)))}),t},async getAllRoles(){try{const e=await et.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async createRole(){let e={name:this.roleName};try{await et.post("createRole",e),this.snackbarMsg("Role Created"),this.getAllRoles()}catch(t){console.log(t)}},async editRole(e){this.allRoles.filter(t=>{t.id==e&&(this.roleName=t.name,this.isEdit=e)})},async updateRole(){let e={name:this.roleName};try{await et.put("updateRole/"+this.isEdit,e),this.snackbarMsg("Role Updated"),this.getAllRoles(),this.isEdit=null,this.roleName=""}catch(t){console.log(t)}},async deleteRole(e){try{await et.delete("deleteRole/"+e),this.getAllRoles(),this.snackbarMsg("Role Deleted")}catch(t){console.log(t)}},async getAllPermissions(){try{const e=await et.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getPermissionsOfRole(e=null){null==e&&(e=this.isSelected);try{const t=await et.get("getPermissionsOfaRole/"+e);this.permissionsOfRole=t.data;let a=Ns()(this.allPermissions);this.allPermissions=null,this.allPermissions=a}catch(t){console.log(t)}},async givePermission(e){let t={permission:e};try{await et.post("givePermission/"+this.isSelected,t)}catch(a){console.log(a)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await et.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.checkPermissionsOfRole.some(t=>t.id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await et.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("4e40");const C3=We()(B3,[["render",S3]]);var _3=C3;const P3={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function I3(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-view");return Object(l["openBlock"])(),Object(l["createElementBlock"])("main",P3,[Object(l["createVNode"])(n)])}var D3={name:"DefaultLayout",components:{},methods:{...Object(Qe["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object(Qe["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};a("566d");const T3=We()(D3,[["render",I3]]);var M3=T3;const z3=[{path:"/auth/callback",name:"AuthCallback",component:Tn},{path:"/",name:"/",redirect:"/dashboard",meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:so,meta:{title:"Dashboard",requiresAuth:!0}},{path:"/organizations",name:"organizations",component:M3,meta:{title:"Organizations",requiresAuth:!0},children:[{path:"/organizations",name:"list-organizations",component:UE},{path:"/organizations/add",name:"add-organizations",component:PV},{path:"/organizations/:id",name:"edit-organization",component:kN}]},{path:"/organizations-admins",name:"organizations-admins",component:M3,meta:{title:"Organizations Admins",requiresAuth:!0},children:[{path:"/organizations-admins",name:"list-organization-admins",component:xJ},{path:"/add-organizations-admins",name:"add-organization-admins",component:xY},{path:"/edit-organizations-admin/:id",name:"edit-organization-admin",component:AW}]},{path:"/schools",name:"schools",component:M3,meta:{title:"Schools",requiresAuth:!0},children:[{path:"/schools",name:"list-schools",component:Ji},{path:"/schools/add",name:"add-school",component:Qm},{path:"/schools/edit-schools/:id",name:"edit-school",component:Xb},{path:"/archived/schools",name:"archived-schools",component:$d},{path:"/schools/settings/:id",name:"settings-school",component:vp},{path:"/school/addCard/:id",name:"card-school",component:Ip}]},{path:"/students",name:"students",component:M3,meta:{title:"Students",requiresAuth:!0},children:[{path:"/students",name:"list-students",component:VO},{path:"/student/add",name:"add-student",component:_j},{path:"/student/:id",name:"edit-student",component:Yg},{path:"/students/archived",name:"archived-students",component:Sh},{path:"/student-billing/:id",name:"student-billing",component:xf}]},{path:"/balance/:id?",name:"balance",component:oE},{path:"/attributes",name:"attributes",component:M3,meta:{title:"Student Attributes",requiresAuth:!0},children:[{path:"/attributes",name:"list-attributes",component:o5},{path:"/attributes/add",name:"add-attribute",component:S5},{path:"/attributes/edit/:id",name:"edit-attribute",component:G5}]},{path:"/staff",name:"staff",component:M3,meta:{title:"Staff",requiresAuth:!0},children:[{path:"/staff",name:"list-staff",component:PX},{path:"/staff/add",name:"add-staff",component:UK},{path:"/staff/edit/:id",name:"edit-staff",component:t1},{path:"/staff/archived",name:"archived-staff",component:zZ},{path:"/staff/details/:id",name:"detail-staff",component:E1}]},{path:"/parent",name:"parent",component:M3,meta:{title:"Parent",requiresAuth:!0},children:[{path:"/parents",name:"list-parent",component:c0},{path:"/parents/add",name:"add-parent",component:Z0},{path:"/parents/edit/:id",name:"edit-parent",component:$2},{path:"/childrens/:id",name:"add-childrens",component:b4}]},{path:"/course",name:"course",component:M3,meta:{title:"Course",requiresAuth:!0},children:[{path:"/courses",name:"list-courses",component:xR},{path:"/course/add",name:"add-course",component:lH},{path:"/course/edit/:id",name:"edit-course",component:MH},{path:"/course/enrolled-students/:id",name:"enrolled-students",component:HQ}]},{path:"/payment",name:"payment",component:M3,meta:{title:"Payment Account",requiresAuth:!0},children:[{path:"/payment_method/:id?",name:"payment_method",component:Eq},{path:"/payment_account/:id?",name:"payment_account",component:lq},{path:"/add_card",name:"add_card",component:Sq}]},{path:"/transactions-history",name:"transactions",component:M3,meta:{title:"Purchase",requiresAuth:!0},children:[{path:"/transaction-history",name:"transaction-history",component:eS},{path:"/purchase-history",name:"purchase-history",component:FS},{path:"/purchases",name:"purchases-admin",component:$B},{path:"/refunds",name:"refund",component:CP},{path:"/installments",name:"installments",component:PC},{path:"/pay-installment/:id",name:"pay-installment",component:A_}]},{path:"/support",component:M3,meta:{title:"Support",requiresAuth:!0},children:[{path:"",name:"support",component:XP}]},{path:"/shop-items",name:"shop",component:M3,meta:{title:"Shop",requiresAuth:!0},children:[{path:"/shop-items",name:"shop-items",component:CD},{path:"/shop-items/add",name:"add-items",component:Xz},{path:"/shop-items/edit/:id",name:"edit-shop-items",component:aL},{path:"/shop-items/archived",name:"archived-shop-items",component:RT}]},{path:"/checkout",name:"checkout",component:M3,meta:{title:"Checkout",requiresAuth:!0},children:[{path:"/cart-checkout",name:"cart-checkout",component:c$}]},{path:"/trips",name:"trips",component:M3,meta:{title:"Trips",requiresAuth:!0},children:[{path:"/trips",name:"list-trips",component:Nx},{path:"/add-trips",name:"add-trips",component:kk},{path:"/edit-trips/:id",name:"edit-trips",component:Bw},{path:"/participants-trips/:id",name:"participants-trips",component:tA}]},{path:"/roles",name:"roles",component:M3,meta:{title:"Roles",requiresAuth:!0},children:[{path:"/roles",name:"list-roles",component:_3}]},{path:"/meals",name:"meals",component:M3,meta:{title:"Meals",requiresAuth:!0},children:[{path:"/meals",name:"list-meals",component:h$},{path:"/add-menu",name:"add-menu",component:x$}]},{path:"/childrens",name:"childrens",component:M3,meta:{title:"Childrens",requiresAuth:!0},children:[{path:"/childrens",name:"list-childrens",component:F4}]},{path:"/payments",name:"payments",component:M3,meta:{title:"Payments",requiresAuth:!0},children:[{path:"/active-payments",name:"list-active-payments",component:""},{path:"/historical-payments",name:"list-historical-payments",component:""}]},{path:"/profile",name:"Profile",component:vs,meta:{requiresAuth:!0}},{path:"/sign-in",name:"SignIn",component:pn},{path:"/forgot-password",name:"ForgotPassword",component:er},{path:"/reset-password/:email/:otp",name:"ResetPassword",component:Vr},{path:"/sign-up",name:"SignUp",component:di}],F3=Object(ll["a"])({history:Object(ll["b"])("/"),routes:z3,linkActiveClass:"active"});F3.beforeEach((e,t,a)=>{document.title=e.meta.title||"StudentPay",e.meta.requiresAuth&&!localStorage.getItem("token")?a({name:"SignIn"}):!localStorage.getItem("token")||"SignIn"!==e.name&&"Register"!==e.name?a():a({name:"Dashboard"})});var U3=F3,L3=(a("6a5d"),a("46d4"),a("5aea"),a("b945"),a("9e17"),{install(){}}),$3=a("fe63");a("6340"),a("f38d");const q3={install(e){const t=Object(l["ref"])({create:!1,edit:!1,delete:!1,view:!1,create_admin:!1,delete_admin:!1,view_admin:!1,edit_admin:!1,create_site:!0,view_site:!1,edit_site:!0,delete_site:!1,create_student:!1,delete_student:!1,view_student:!1,edit_student:!1,create_staff:!1,delete_staff:!1,view_staff:!1,edit_staff:!1,create_course:!1,view_course:!1,edit_course:!1,delete_course:!1,create_shop:!0,delete_shop:!1,view_shop:!0,edit_shop:!0,transaction_history:!0,purchase_history:!1,pending_installments:!1,refunds:!1,roles:!1,topup:!1,wallet:!1}),a=e=>{const a=JSON.parse(localStorage.getItem("user"));a&&"super_admin"===a.role?Object.keys(t.value).forEach(e=>{t.value[e]=!0}):Object.keys(t.value).forEach(a=>{t.value[a]=e.includes(a)})},c=a=>{const l=e.config.globalProperties.$router;t.value[a]||l.go(-1)};e.config.globalProperties.$permissions={userPermissions:t,checkIfPermission:a,redirectIfNotAllowed:c},e.provide("permissions",e.config.globalProperties.$permissions),Object(l["watch"])(()=>e.config.globalProperties.$store.getters.getPermissions,(t,a)=>{console.log(a),e.config.globalProperties.$permissions.checkIfPermission(t)})}};var R3=q3;const H3={install(e){const t=Object(l["ref"])({BASE_URL:"https://stagingapi.student-pay.co.uk"});e.config.globalProperties.$env_vars=t.value,e.provide("env_vars",e.config.globalProperties.env_vars)}};var Q3=H3;const J3={install(e){const t=()=>{const t="null"!==e.config.globalProperties.$store.getters.getBrandingSetting.primary_color?e.config.globalProperties.$store.getters.getBrandingSetting.primary_color:"#010A21",a=document.querySelectorAll(".btn");a.forEach(e=>{e.style.backgroundColor=t});const l=document.querySelectorAll(".pagination li.active a");l.forEach(e=>{e.style.backgroundColor=t})};e.config.globalProperties.$globalHelper={buttonColor:t}}};var Y3=J3;const W3=Object(l["createApp"])(Pa);W3.config.globalProperties.$msalInstance={},W3.config.globalProperties.$emitter=new Da.a,W3.use(al),W3.use($3["a"]),W3.component("vue3-snackbar",$3["b"]),W3.use(U3,W3),W3.use(L3),W3.use(xk.a),W3.use(R3),W3.use(Q3),W3.use(Y3),W3.mount("#app")},"59bb":function(e,t,a){},"5aea":function(e,t,a){},"5c86":function(e,t,a){"use strict";a("fd49")},"5e03":function(e,t,a){},"5f86":function(e,t,a){},6150:function(e,t,a){e.exports=a.p+"img/ivana-square.a1900888.jpg"},"62b9":function(e,t,a){},"66b5":function(e,t,a){"use strict";a("04e1")},"6a07":function(e,t,a){e.exports=a.p+"img/background.19e62050.jpg"},"6a5d":function(e,t,a){},"6b61":function(e,t,a){},"6b9d":function(e,t,a){"use strict";a("e27b")},7497:function(e,t,a){"use strict";a("a512")},"756a":function(e,t,a){"use strict";a("6b61")},"7b9a":function(e,t,a){e.exports=a.p+"img/StudentPay-logo.627241f4.png"},"7ed5":function(e,t,a){},"80d2":function(e,t,a){"use strict";a("11e8")},8202:function(e,t,a){e.exports=a.p+"img/team-2.90c40d0c.jpg"},8908:function(e,t,a){"use strict";a("49fa")},"8a36":function(e,t,a){"use strict";a("539e")},"8bb8":function(e,t,a){},"8fb1":function(e,t,a){"use strict";a("b3d0")},"90d4":function(e,t,a){"use strict";a("dae8")},"94d7":function(e,t,a){"use strict";a("a145")},"98ae":function(e,t,a){"use strict";a("a1a0")},"99e5":function(e,t,a){},"9bb4":function(e,t,a){"use strict";a("8bb8")},"9c6f":function(e,t,a){"use strict";a("fca7")},"9ce0":function(e,t,a){},"9d09":function(e,t,a){},"9e17":function(e,t,a){},a145:function(e,t,a){},a1a0:function(e,t,a){},a432:function(e,t,a){},a4cd:function(e,t,a){"use strict";a("3d83")},a512:function(e,t,a){},a86a:function(e,t,a){"use strict";a("4b51")},a95f:function(e,t,a){"use strict";a("1acb")},a973:function(e,t,a){},a9b7:function(e,t,a){"use strict";a("5f86")},aa68:function(e,t,a){e.exports=a.p+"img/visa.98edc46d.png"},aaa2:function(e,t,a){"use strict";a("5e03")},aded:function(e,t,a){},af17:function(e,t,a){e.exports=a.p+"img/marie.a60473a0.jpg"},b0e7:function(e,t,a){"use strict";a("e3f4")},b107:function(e,t,a){e.exports=a.p+"img/logo-slack.07d7b8e1.svg"},b18b:function(e,t,a){},b34a:function(e,t,a){e.exports=a.p+"img/home-decor-1.decbdadf.jpg"},b3d0:function(e,t,a){},b794:function(e,t,a){"use strict";a("1559")},b795:function(e,t,a){},b842:function(e,t,a){},b8de:function(e,t,a){e.exports=a.p+"img/logo-xd.46bbd281.svg"},b909:function(e,t,a){"use strict";a("b795")},b945:function(e,t){window.onload=function(){for(var e=document.querySelectorAll(".btn"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target,a=t.querySelector(".ripple");a=document.createElement("span"),a.classList.add("ripple"),a.style.width=a.style.height=Math.max(t.offsetWidth,t.offsetHeight)+"px",t.appendChild(a),a.style.left=e.offsetX-a.offsetWidth/2+"px",a.style.top=e.offsetY-a.offsetHeight/2+"px",a.classList.add("ripple"),setTimeout((function(){a.parentElement.removeChild(a)}),600)}),!1)}},b94f:function(e,t,a){},bab5:function(e,t,a){},bbe0:function(e,t,a){e.exports=a.p+"img/dashboard2.3de49aaf.jpg"},bdd3:function(e,t,a){},bea3:function(e,t,a){},bfca:function(e,t,a){},c1d2:function(e,t,a){"use strict";a("9d09")},c7c0:function(e,t,a){e.exports=a.p+"img/team-3.a539dfc6.jpg"},ca92:function(e,t,a){"use strict";a("2805")},cad8:function(e,t,a){"use strict";a("a973")},ccd2:function(e,t,a){"use strict";a("01c2")},cf0c:function(e,t,a){"use strict";a("aded")},d15c:function(e,t,a){e.exports=a.p+"img/trip.85ea72dc.jpg"},d36c:function(e,t,a){"use strict";a("99e5")},d3a1:function(e,t,a){},d858:function(e,t,a){"use strict";a("7ed5")},dae8:function(e,t,a){},dca3:function(e,t,a){"use strict";a("b842")},dcd4:function(e,t,a){"use strict";a("33ac")},e0bc:function(e,t,a){"use strict";a("2e1b")},e1a8:function(e,t,a){"use strict";a("2e54")},e243:function(e,t,a){"use strict";a("2aa5")},e27b:function(e,t,a){},e33f:function(e,t,a){"use strict";a("d3a1")},e3f4:function(e,t,a){},e6f0:function(e,t,a){"use strict";a("43be")},e935:function(e,t,a){"use strict";a("b18b")},e978:function(e,t,a){},eb29:function(e,t,a){"use strict";a("59bb")},ed52:function(e,t,a){"use strict";a("bdd3")},f35e:function(e,t,a){e.exports=a.p+"img/team-4.16a9baef.jpg"},f5b4:function(e,t,a){},f737:function(e,t,a){"use strict";a("256f")},f914:function(e,t,a){},fa86:function(e,t,a){"use strict";a("55ff")},fca7:function(e,t,a){},fd49:function(e,t,a){},fd84:function(e,t,a){"use strict";a("bab5")},ff6f:function(e,t,a){"use strict";a("5014")}});
//# sourceMappingURL=app.6f80c5df.js.map