(function(e){function t(t){for(var l,s,n=t[0],r=t[1],i=t[2],m=0,b=[];m<n.length;m++)s=n[m],Object.prototype.hasOwnProperty.call(c,s)&&c[s]&&b.push(c[s][0]),c[s]=0;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);d&&d(t);while(b.length)b.shift()();return o.push.apply(o,i||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],l=!0,n=1;n<a.length;n++){var r=a[n];0!==c[r]&&(l=!1)}l&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var l={},c={app:0},o=[];function s(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=l,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)s.d(a,l,function(t){return e[t]}.bind(null,l));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var i=0;i<n.length;i++)t(n[i]);var d=r;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"02a2":function(e,t,a){},"04e1":function(e,t,a){},"04ef":function(e,t,a){},"0515":function(e,t,a){},"057e":function(e,t,a){"use strict";a("3a0d")},"09df":function(e,t,a){},"0b3c":function(e,t,a){"use strict";a("2357")},"0c19":function(e,t,a){},"0c56":function(e,t,a){"use strict";a("1b5c")},"0d0e":function(e,t,a){"use strict";a("22bc")},"100b":function(e,t,a){},"142a":function(e,t,a){"use strict";a("09df")},1444:function(e,t,a){},"14f2":function(e,t,a){},1504:function(e,t,a){"use strict";a("44d9")},"15bb":function(e,t,a){},1704:function(e,t,a){"use strict";a("02a2")},"176c":function(e,t,a){},"18e4":function(e,t,a){},"190c":function(e,t,a){e.exports=a.p+"img/down-arrow-white.157f6258.svg"},"19b8":function(e,t,a){"use strict";a("a432")},"1b5c":function(e,t,a){},"228f":function(e,t,a){},"22bc":function(e,t,a){},2357:function(e,t,a){},2398:function(e,t,a){},2409:function(e,t,a){"use strict";a("14f2")},"264c":function(e,t,a){e.exports=a.p+"img/mastercard.e1efc600.png"},"26be":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAsASURBVHic7d0xb1RnFoDh49FKoKzpY4mKjiJl5A5FiCqSBdT8ApfUG1GgbE3JL6DGCCnVCkXpUMoUdK6QnB6DTOUtxt4FAgQB9gje55GmuTNjn2q+d+7M3G/t8PBwPsTzK5tnZubyzFydmYszs3F0W/+gPwB8dv/8z+O1Vf7/rZ3rH/YCApyE/ZnZO7o9mZkHM/Po4bX7Lz/kyWt/FwDPr2xuzMytmbkxM+c+aVTgsxIAwBuezcy9mbn98Nr9vfc98J0B8PzK5tmZ+Wlmbs7MN597QuDTCQDgHV7MzJ2Z+fnhtfsHb3vA4m0Hn1/Z/HZmfp2Zf43FHwC+NN/Mcg3/dWvn+rdve8BfAuD5lc3vZub3mdk82dkAgBO2OTO/b+1c/+7NO14LgKN3/r/MzPlTGgwAOFnnZ+aXN88E/C8Ajj7z3xmLPwB8bc7PzM7WzvWzxwdePQPw0zjtDwBfq81ZrvUzcxQARz/1u7mqiQCAU3Fza+f6xsz/zwDcGt/2B4Cv3TezXPNncXSFvxurnQcAOCU3tnaun1nM8vK+rvAHAA3nZubyYpbX9gcAOq4uZrmxDwDQcXExyx39AICODQEAAD0bi5lZX/UUAMCpWn/rboAAwNdNAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIWjs8PFz1DADAKXMGAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAoH9cuLt/uOohgI+zu72+ttIBfjvr9QO+UM4AAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQtJiZ/VUPAQCcqv3FzOytegoA4FTtCQAA6NlbzMyTVU8BAJyqJ4uZebDqKQCAU/VgMTOPZubZqicBAE7Fs5l5tNjdXn85M/dWPQ0AcCruzaWDl8fXAbg9My9WOQ0AcOJezHLNX14IaHd7fW9m7qxyIgDgxN2ZSwd7M69fCfDnmXm8mnkAgBP2eJZr/cy8EgC72+sHM3NtZp6uYCgA4OQ8nZlrc+ng4PjAa3sB7G6v/zkzP44IAICvxdOZ+XEuHfz56sG/bAa0u73+x8x8Pz4OAIAv3eOZ+X4uHfzx5h1v3Q3w6EzADzPz7/HrAAD40ryY5Rr+w5vv/I+tHR4evvcvXLi7vzEzt2bmxsyc+9wTAh9vd3t9baUD/Hb2/S8gwGl7Nstr+9w+/rb/u/xtABy7cHf/zMxcnpmrM3NxZjaObuufNCrw0QQApO3PckO/vVnu6/NgZh7NpYOXH/Lk/wKQAq5eW3YI8AAAAABJRU5ErkJggg=="},"26db":function(e,t,a){"use strict";a("c690")},2805:function(e,t,a){},"281f":function(e,t,a){e.exports=a.p+"img/logo-invision.43586d43.svg"},"2adb":function(e,t,a){"use strict";a("9ce0")},"2b98":function(e,t,a){"use strict";a("f5b4")},"2d39":function(e,t,a){e.exports=a.p+"img/kal-visuals-square.779cce2b.jpg"},"2dbd":function(e,t,a){"use strict";a("62b9")},"2e1b":function(e,t,a){},"2e77":function(e,t,a){e.exports=a.p+"img/logo-spotify.4bb67532.svg"},"2f67":function(e,t,a){"use strict";a("dfd9")},"2fcd":function(e,t,a){"use strict";a("40a5")},"2ffa":function(e,t,a){},"30fe":function(e,t,a){"use strict";a("228f")},3470:function(e,t,a){},3492:function(e,t,a){"use strict";a("a1ac")},"350a":function(e,t,a){e.exports=a.p+"img/team-1.0e461794.jpg"},3615:function(e,t,a){},"37f7":function(e,t,a){e.exports=a.p+"img/logo-atlassian.0569965a.svg"},"3a0d":function(e,t,a){},"3c57":function(e,t,a){"use strict";a("70e0")},"3d83":function(e,t,a){},"3dfe":function(e,t,a){e.exports=a.p+"img/logo-jira.09288465.svg"},"40a5":function(e,t,a){},"40bd":function(e,t,a){e.exports=a.p+"img/bruce-mars.0c440467.jpg"},"40fa":function(e,t,a){"use strict";a("0c19")},"43be":function(e,t,a){},"44d9":function(e,t,a){},"457f":function(e,t,a){"use strict";a("1444")},4678:function(e,t,a){var l={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=o(e);return a(t)}function o(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}c.keys=function(){return Object.keys(l)},c.resolve=o,e.exports=c,c.id="4678"},"46d4":function(e,t,a){},4753:function(e,t,a){e.exports=a.p+"img/home-decor-2.249f600c.jpg"},"4aee":function(e,t,a){"use strict";a("18e4")},"4b51":function(e,t,a){},"4dd6":function(e,t,a){},"4e40":function(e,t,a){"use strict";a("3615")},"506d":function(e,t,a){"use strict";a("15bb")},"52d6":function(e,t,a){e.exports=a.p+"img/down-arrow-dark.601cff39.svg"},"52e2":function(e,t,a){"use strict";a("0515")},"532f":function(e,t,a){e.exports=a.p+"img/home-decor-3.2d98a7aa.jpg"},"539e":function(e,t,a){},"55ff":function(e,t,a){},"566d":function(e,t,a){"use strict";a("e978")},"56d7":function(e,t,a){"use strict";a.r(t);var l=a("7a23");const c={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function o(e,t,a,o,s,n){const r=Object(l["resolveComponent"])("sidenav"),i=Object(l["resolveComponent"])("navbar"),d=Object(l["resolveComponent"])("router-view"),m=Object(l["resolveComponent"])("app-footer"),b=Object(l["resolveComponent"])("configurator"),p=Object(l["resolveComponent"])("vue3-snackbar");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[e.showSidenav?(Object(l["openBlock"])(),Object(l["createBlock"])(r,{key:0,custom_class:e.color,class:Object(l["normalizeClass"])([e.isRTL?"fixed-end":"fixed-start"])},null,8,["custom_class","class"])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("main",c,[e.showNavbar?(Object(l["openBlock"])(),Object(l["createBlock"])(i,{key:0,class:Object(l["normalizeClass"])([e.isNavFixed?e.navbarFixed:"",e.isAbsolute?e.absolute:""]),color:e.isAbsolute?"text-white opacity-8":"",minNav:e.navbarMinimize},null,8,["class","color","minNav"])):Object(l["createCommentVNode"])("",!0),Object(l["createVNode"])(d),Object(l["withDirectives"])(Object(l["createVNode"])(m,null,null,512),[[l["vShow"],e.showFooter]]),Object(l["createVNode"])(b,{toggle:e.toggleConfigurator,class:Object(l["normalizeClass"])([e.showConfig?"show":"",e.hideConfigButton?"d-none":""])},null,8,["toggle","class"])]),Object(l["createVNode"])(p,{top:"",right:"",duration:3e3})],64)}var s=a("7b9a"),n=a.n(s);const r={class:"sidenav-header"},i=Object(l["createElementVNode"])("i",{class:"top-0 p-3 cursor-pointer fas fa-times text-secondary opacity-5 position-absolute end-0 d-none d-xl-none","aria-hidden":"true",id:"iconSidenav"},null,-1),d={class:"m-0 navbar-brand",href:"/"},m={key:0,class:"d-flex flex-column justify-content-center align-items-center",style:{"margin-top":"-21px"}},b=["src"],p=Object(l["createElementVNode"])("p",{class:"ms-2 font-weight-bold text-white",style:{"font-size":"15px","margin-right":"20px","margin-top":"4px"}},"StudentPay Portal",-1),u=Object(l["createElementVNode"])("br",null,null,-1),O={key:1,src:n.a,class:"navbar-brand-img h-100",alt:"main_logo"};function h(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("sidenav-list");return Object(l["openBlock"])(),Object(l["createElementBlock"])("aside",{id:"sidenav-main",class:Object(l["normalizeClass"])(["sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 ms-3",`${e.isRTL?"me-3 rotate-caret fixed-end":"fixed-start ms-3"} ${e.sidebarType}`])},[Object(l["createElementVNode"])("div",r,[i,Object(l["createElementVNode"])("a",d,["null"!==e.getBrandingSetting.logo?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",m,[Object(l["createElementVNode"])("img",{src:o.StudentPayLogo,class:"navbar-brand-img branding-logo h-50",alt:""},null,8,b),p,u])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",O))])]),Object(l["createVNode"])(n)],2)}const j={class:"w-auto collapse navbar-collapse vh-100",id:"sidenav-collapse-main"},g={class:"navbar-nav"},f={class:"nav-item"},E=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"dashboard",-1),V=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),N=["onClick"],x=Object(l["createElementVNode"])("div",{class:"select"},null,-1),y={class:"text-white ms-1 ps-1"},v={key:1,class:"nav-item"},k=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),w={key:2,class:"nav-item"},S=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),A={key:0,class:"nav-item"},B=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"admin_panel_settings",-1),C={key:4,class:"nav-item"},_=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#schools"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Sites "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),P={id:"schools",class:"collapse"},I={class:"nav nav-sm flex-column"},D={class:"nav-item"},T=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),M=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Sites List",-1),z={class:"nav-item"},F=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),U=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Sites",-1),L={key:5,class:"nav-item"},$=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"security",-1),q={key:6,class:"nav-item"},R=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#projectsExample"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Students "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),H={id:"projectsExample",class:"collapse"},Q={class:"nav nav-sm flex-column"},J={class:"nav-item"},Y=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),W=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Students List",-1),X={class:"nav-item"},Z=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),K=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Students",-1),G={key:7,class:"nav-item"},ee=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#staffNav"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"portrait"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Staff "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),te={id:"staffNav",class:"collapse"},ae={class:"nav nav-sm flex-column"},le={class:"nav-item"},ce=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),oe=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Staff List",-1),se={class:"nav-item"},ne=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),re=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Staff",-1),ie={key:8,class:"nav-item"},de=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people",-1),me={key:0,class:"nav-item"},be=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#courses"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Courses "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),pe={id:"courses",class:"collapse"},ue={class:"nav nav-sm flex-column"},Oe={class:"nav-item"},he=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),je=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"All Courses",-1),ge={key:1,class:"nav-item"},fe=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#product_types"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"category"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Product Types "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),Ee={id:"product_types",class:"collapse"},Ve={class:"nav nav-sm flex-column"},Ne={class:"nav-item"},xe=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),ye=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Product Types",-1),ve={key:0,class:"nav-item"},ke=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#shop"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Shop "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),we={id:"shop",class:"collapse"},Se={class:"nav nav-sm flex-column"},Ae={class:"nav-item"},Be=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),Ce=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Shop Items",-1),_e={class:"nav-item"},Pe=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),Ie=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Items",-1),De={key:3,class:"nav-item"},Te=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Me={key:4,class:"nav-item"},ze=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),Fe={key:5,class:"nav-item"},Ue=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Le={key:10,class:"nav-item"},$e=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),qe={key:11,class:"nav-item"},Re=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),He={key:12,class:"nav-item"},Qe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),Je={key:0,class:"nav-item"},Ye=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),We={key:14,class:"nav-item"},Xe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"settings",-1),Ze={key:15,class:"nav-item"},Ke=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"support_agent",-1);function Ge(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("sidenav-collapse"),r=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",j,[Object(l["createElementVNode"])("ul",g,[Object(l["createElementVNode"])("li",f,[Object(l["createVNode"])(n,{to:{name:"Dashboard"},"aria-controls":"",collapse:!1,collapseRef:"dashboard",navText:"Dashboard"},{icon:Object(l["withCtx"])(()=>[E]),_:1})]),o.user&&"parent"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createVNode"])(n,{to:{name:"list-childrens"},"aria-controls":"",collapse:!1,collapseRef:"childrens",navText:"My Childrens"},{icon:Object(l["withCtx"])(()=>[V]),_:1}),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,onClick:t=>s.selectChildren(e.student.id),class:"nav-item d-flex student"},[x,Object(l["createElementVNode"])("small",y,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1)],8,N))),128))],64)):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",v,[Object(l["createVNode"])(n,{to:{name:"payment_account"},"aria-controls":"",collapse:!1,collapseRef:"topup",navText:"Topup"},{icon:Object(l["withCtx"])(()=>[k]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",w,[Object(l["createVNode"])(n,{to:{name:"list-organizations"},"aria-controls":"",collapse:!1,collapseRef:"organizations",navText:"Organisations"},{icon:Object(l["withCtx"])(()=>[S]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[s.userPermissions.view_admin?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",A,[Object(l["createVNode"])(n,{to:{name:"list-organization-admins"},"aria-controls":"",collapse:!1,collapseRef:"organization-admins",navText:"Organisation Admins"},{icon:Object(l["withCtx"])(()=>[B]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.userPermissions.view_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",C,[_,Object(l["createElementVNode"])("div",P,[Object(l["createElementVNode"])("ul",I,[Object(l["createElementVNode"])("li",D,[Object(l["createVNode"])(r,{to:{name:"list-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[T,M]),_:1})]),Object(l["createElementVNode"])("li",z,[Object(l["createVNode"])(r,{to:{name:"archived-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[F,U]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),s.userPermissions.roles?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",L,[Object(l["createVNode"])(n,{to:{name:"list-roles"},"aria-controls":"",collapse:!1,collapseRef:"roles",navText:"Roles & Permissions"},{icon:Object(l["withCtx"])(()=>[$]),_:1})])):Object(l["createCommentVNode"])("",!0),s.userPermissions.view_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",q,[R,Object(l["createElementVNode"])("div",H,[Object(l["createElementVNode"])("ul",Q,[Object(l["createElementVNode"])("li",J,[Object(l["createVNode"])(r,{to:{name:"list-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Y,W]),_:1})]),Object(l["createElementVNode"])("li",X,[Object(l["createVNode"])(r,{to:{name:"archived-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Z,K]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),s.userPermissions.view_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",G,[ee,Object(l["createElementVNode"])("div",te,[Object(l["createElementVNode"])("ul",ae,[Object(l["createElementVNode"])("li",le,[Object(l["createVNode"])(r,{to:{name:"list-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ce,oe]),_:1})]),Object(l["createElementVNode"])("li",se,[Object(l["createVNode"])(r,{to:{name:"archived-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ne,re]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),"staff"!==o.user.role&&"student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ie,[Object(l["createVNode"])(n,{to:{name:"list-parent"},"aria-controls":"",collapse:!1,collapseRef:"parents",navText:"Parents"},{icon:Object(l["withCtx"])(()=>[de]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"parent"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:9},[s.userPermissions.view_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",me,[be,Object(l["createElementVNode"])("div",pe,[Object(l["createElementVNode"])("ul",ue,[Object(l["createElementVNode"])("li",Oe,[Object(l["createVNode"])(r,{to:{name:"list-courses"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[he,je]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),o.user&&"student"!==o.user.role&&o.user&&"staff"!==o.user.role&&o.user&&"parent"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ge,[fe,Object(l["createElementVNode"])("div",Ee,[Object(l["createElementVNode"])("ul",Ve,[Object(l["createElementVNode"])("li",Ne,[Object(l["createVNode"])(r,{to:{name:"product-types"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[xe,ye]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),o.user&&"student"!==o.user.role&&o.user&&"staff"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[s.userPermissions.view_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ve,[ke,Object(l["createElementVNode"])("div",we,[Object(l["createElementVNode"])("ul",Se,[Object(l["createElementVNode"])("li",Ae,[Object(l["createVNode"])(r,{to:{name:"shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Be,Ce]),_:1})]),Object(l["createElementVNode"])("li",_e,[Object(l["createVNode"])(r,{to:{name:"archived-shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Pe,Ie]),_:1})])])])])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.userPermissions.purchase_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",De,[Object(l["createVNode"])(n,{to:{name:"purchases-admin"},"aria-controls":"",collapse:!1,collapseRef:"purchasesadmin",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[Te]),_:1})])):Object(l["createCommentVNode"])("",!0),s.userPermissions.pending_installments?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Me,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Instalments"},{icon:Object(l["withCtx"])(()=>[ze]),_:1})])):Object(l["createCommentVNode"])("",!0),s.userPermissions.refunds?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Fe,[Object(l["createVNode"])(n,{to:{name:"refund"},"aria-controls":"",collapse:!1,collapseRef:"refunds",navText:"Refunds"},{icon:Object(l["withCtx"])(()=>[Ue]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Le,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Instalments"},{icon:Object(l["withCtx"])(()=>[$e]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",qe,[Object(l["createVNode"])(n,{to:{name:"purchase-history"},"aria-controls":"",collapse:!1,collapseRef:"purchase history",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[Re]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||o.user&&"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",He,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Qe]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"student"!==o.user.role&&o.user&&"staff"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:13},[s.userPermissions.transaction_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Je,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Ye]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.user&&"student"!=o.user.role&&"staff"!=o.user.role&&"parent"!=o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",We,[Object(l["createVNode"])(n,{to:{name:"configurations"},"aria-controls":"",collapse:!1,collapseRef:"configurations",navText:"Configurations"},{icon:Object(l["withCtx"])(()=>[Xe]),_:1})])):Object(l["createCommentVNode"])("",!0),o.user&&"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ze,[Object(l["createVNode"])(n,{to:{name:"support"},"aria-controls":"",collapse:!1,collapseRef:"support",navText:"Support"},{icon:Object(l["withCtx"])(()=>[Ke]),_:1})])):Object(l["createCommentVNode"])("",!0)])])}function et(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(n,Object(l["mergeProps"])({"data-bs-toggle":a.collapse?"collapse":"",to:a.collapse?"#"+a.collapseRef:a.collapseRef,"aria-controls":a.collapseRef,"aria-expanded":o.isExpanded,class:["nav-link",s.getRoute()===a.collapseRef?"active bg-gradient-#573078":""]},e.$attrs,{onClick:t[0]||(t[0]=e=>o.isExpanded=!o.isExpanded)}),{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["text-center d-flex align-items-center justify-content-center",e.isRTL?" ms-2":"me-2"])},[Object(l["renderSlot"])(e.$slots,"icon")],2),Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["nav-link-text",e.isRTL?" me-1":"ms-1"])},Object(l["toDisplayString"])(a.navText),3)]),_:3},16,["data-bs-toggle","to","aria-controls","aria-expanded","class"]),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(o.isExpanded?"collapse show":"collapse")},[Object(l["renderSlot"])(e.$slots,"list")],2)],64)}var tt=a("5502"),at={name:"SidenavCollapse",props:{collapseRef:{type:String,required:!0},navText:{type:String,required:!0},collapse:{type:Boolean,default:!0}},data(){return{isExpanded:!1}},methods:{getRoute(){const e=this.$route.path.split("/");return e[1]}},computed:{...Object(tt["e"])(["isRTL","color"])}},lt=a("6b0d"),ct=a.n(lt);const ot=ct()(at,[["render",et]]);var st=ot,nt=a("cee4");const rt=nt["a"].create({baseURL:"https://stagingapi.student-pay.co.uk/api"});rt.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),rt.interceptors.response.use(e=>{const t=e.headers["new-access-token"];return t&&localStorage.setItem("token",t),e},e=>Promise.reject(e));var it=rt,dt={name:"SidenavList",props:{cardBg:String},updated(){},mounted(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e)),this.setActiveColor(),this.getChildrens()},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{childrens:"",user:"",title:"StudentPay",controls:"dashboardsExamples",isActive:"active"}},methods:{async getChildrens(){if(this.user&&"parent"==this.user.role){let t=this.user.id;try{const e=await it.get("getChildrensOfParent/"+t);this.childrens=e.data}catch(e){console.log(e)}}},async selectChildren(e){if(this.user&&"parent"==this.user.role){let a=this.user.id,l={parent_id:a,student_id:e};try{let e=await it.post("/selectChildren",l),t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let c=e.data.primary_color,o=e.data.secondary_color,s=e.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",o),localStorage.setItem("logo",s);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){console.log(t)}}},setActiveColor(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";document.querySelector(".sidenav-header").style.setProperty("--navheader-bg-color",e),document.querySelector(".navbar-nav").style.setProperty("--nav-bg-color",e),document.querySelector("#sidenav-collapse-main").style.setProperty("--nav-bg-color",e)},buttonColor(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";const t=document.querySelectorAll(".btn");console.log("btn",t),t.forEach(t=>{t.style.backgroundColor=e})},navLegacy(e){this.$router.push({name:e})},isActiveRoute(e){return this.$route.name===e}},components:{SidenavCollapse:st}};a("edea");const mt=ct()(dt,[["render",Ge]]);var bt=mt,pt=a("264c"),ut=a.n(pt),Ot={name:"index",components:{SidenavList:bt},mounted(){this.setLogo()},data(){return{logo:ut.a,logoDark:ut.a,StudentPayLogo:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),...Object(tt["e"])(["isRTL","sidebarType","isDarkMode"])},methods:{setLogo(){this.StudentPayLogo=this.$env_vars.BASE_URL+this.getBrandingSetting.logo}}};a("da94");const ht=ct()(Ot,[["render",h]]);var jt=ht;const gt={class:"fixed-plugin"};function ft(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",gt)}function Et(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-dark, .breadcrumb .text-dark"),o=document.querySelectorAll("strong.text-dark"),s=document.querySelectorAll("a.nav-link.text-dark"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-100"),i=document.querySelectorAll(".btn.btn-link.text-dark, .material-icons.text-dark"),d=document.querySelectorAll(".card.border"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.add("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("dark")&&(t[p].classList.remove("dark"),t[p].classList.add("light"));for(p=0;p<m.length;p++)m[p].classList.contains("blur")&&m[p].classList.remove("blur","shadow-blur");for(p=0;p<a.length;p++)a[p].classList.contains("dark")&&(a[p].classList.remove("dark"),a[p].classList.add("light"));for(p=0;p<l.length;p++)l[p].classList.contains("text-dark")&&(l[p].classList.remove("text-dark"),l[p].classList.add("text-white"));for(p=0;p<c.length;p++)c[p].classList.contains("text-dark")&&(c[p].classList.remove("text-dark"),c[p].classList.add("text-white"));for(p=0;p<o.length;p++)o[p].classList.contains("text-dark")&&(o[p].classList.remove("text-dark"),o[p].classList.add("text-white"));for(p=0;p<s.length;p++)s[p].classList.contains("text-dark")&&(s[p].classList.remove("text-dark"),s[p].classList.add("text-white"));for(p=0;p<n.length;p++)n[p].classList.contains("text-secondary")&&(n[p].classList.remove("text-secondary"),n[p].classList.add("text-white"),n[p].classList.add("opacity-8"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-100")&&(r[p].classList.remove("bg-gray-100"),r[p].classList.add("bg-gray-600"));for(p=0;p<i.length;p++)i[p].classList.remove("text-dark"),i[p].classList.add("text-white");for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#fff");for(p=0;p<d.length;p++)d[p].classList.add("border-dark")}function Vt(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-white, .breadcrumb .text-white"),o=document.querySelectorAll("strong.text-white"),s=document.querySelectorAll("a.nav-link.text-white"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-600"),i=document.querySelectorAll(".btn.btn-link.text-white, .material-icons.text-white"),d=document.querySelectorAll(".card.border.border-dark"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.remove("dark-version"),e.classList.remove("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("light")&&(t[p].classList.add("dark"),t[p].classList.remove("light"));for(p=0;p<a.length;p++)a[p].classList.contains("light")&&(a[p].classList.add("dark"),a[p].classList.remove("light"));for(p=0;p<m.length;p++)m[p].classList.add("blur","shadow-blur");for(p=0;p<l.length;p++)l[p].classList.contains("text-white")&&(l[p].classList.remove("text-white"),l[p].classList.add("text-dark"));for(p=0;p<c.length;p++)!c[p].classList.contains("text-white")||c[p].closest(".sidenav")||c[p].closest(".card.bg-gradient-dark")||(c[p].classList.remove("text-white"),c[p].classList.add("text-dark"));for(p=0;p<o.length;p++)o[p].classList.contains("text-white")&&(o[p].classList.remove("text-white"),o[p].classList.add("text-dark"));for(p=0;p<s.length;p++)s[p].classList.contains("text-white")&&!s[p].closest(".sidenav")&&(s[p].classList.remove("text-white"),s[p].classList.add("text-dark"));for(p=0;p<n.length;p++)n[p].classList.contains("text-white")&&(n[p].classList.remove("text-white"),n[p].classList.remove("opacity-8"),n[p].classList.add("text-dark"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-600")&&(r[p].classList.remove("bg-gray-600"),r[p].classList.add("bg-gray-100"));for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#252f40");for(p=0;p<i.length;p++)i[p].closest(".card.bg-gradient-dark")||(i[p].classList.remove("text-white"),i[p].classList.add("text-dark"));for(p=0;p<d.length;p++)d[p].classList.remove("border-dark")}var Nt={name:"configurator",props:["toggle"],methods:{...Object(tt["d"])(["navbarMinimize","navbarFixed"]),...Object(tt["b"])(["setColor"]),sidebarColor(e="success"){document.querySelector("#sidenav-main").setAttribute("data-color",e),this.setColor(e)},sidebar(e){this.$store.state.sidebarType=e},setNavbarFixed(){"Profile"===this.$route.name&&"All Projects"===this.$route.name||(this.$store.state.isNavFixed=!this.$store.state.isNavFixed)},darkMode(){if(this.$store.state.isDarkMode)return this.$store.state.isDarkMode=!1,void Vt();this.$store.state.isDarkMode=!0,Et()},sidenavTypeOnResize(){let e=document.querySelector("#btn-transparent"),t=document.querySelector("#btn-white");window.innerWidth<1200?(e.classList.add("disabled"),t.classList.add("disabled")):(e.classList.remove("disabled"),t.classList.remove("disabled"))}},computed:{...Object(tt["e"])(["isRTL","sidebarType"]),sidenavResponsive(){return this.sidenavTypeOnResize}},beforeMount(){this.$store.state.isTransparent="bg-transparent",window.addEventListener("resize",this.sidenavTypeOnResize),window.addEventListener("load",this.sidenavTypeOnResize)}};const xt=ct()(Nt,[["render",ft]]);var yt=xt;const vt={class:"px-3 py-1 container-fluid"},kt={key:0,class:"organization-name mt-2 me-2"},wt={key:1,class:"organization-name mt-2 me-2"},St=Object(l["createElementVNode"])("h5",null,"Super Admin",-1),At=[St],Bt={key:0,class:"change-pass-alert pt-1",style:{"padding-right":"5px",display:"flex"}},Ct={class:"pass-text"},_t=Object(l["createTextVNode"])("For security reasons, we kindly ask you to change your password, "),Pt=Object(l["createElementVNode"])("span",{class:"click-link ms-2"},"click here",-1),It=Object(l["createTextVNode"])(" to change the password"),Dt={class:"navbar-nav justify-content-end"},Tt={class:"position-relative d-inline-block"},Mt=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"},"shopping_cart",-1),zt={key:0,class:"custom-badge position-absolute top-0 start-100 translate-middle rounded-pill bg-danger"},Ft={class:"cart px-2 py-3 cart-dropdown dropdown-menu dropdown-menu-end me-sm-n4","aria-labelledby":"dropdownMenuButton"},Ut={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},Lt={class:"d-flex flex-column"},$t={class:"mb-3 text-sm text-dark"},qt={key:0},Rt=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs text-dark"},null,-1),Ht={class:"ms-auto text-end"},Qt={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},Jt=["onClick"],Yt={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},Wt={class:"d-flex flex-column"},Xt={class:"mb-3 text-sm text-dark"},Zt=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs text-dark"},null,-1),Kt={class:"ms-auto text-end"},Gt={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},ea=["onClick"],ta={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},aa={key:1,class:"list-group-item border-0 d-flex align-items-center justify-content-center p-4 mb-2 bg-warning-100 text-warning border-radius-lg"},la={key:0},ca={key:1},oa=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"}," account_circle ",-1),sa=[oa],na={key:0,class:"menu_item mb-2"},ra={class:"dropdown-item border-radius-md",href:"javascript:;"},ia={class:"py-1 d-flex"},da={class:"d-flex flex-column justify-content-center"},ma={class:"d-flex align-items-center"},ba=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),pa={class:"ms-1 pt-2 text-sm font-weight-normal"},ua={class:"font-weight-bold"},Oa={class:""},ha={key:1,class:"menu_item mb-2"},ja={class:"dropdown-item border-radius-md",href:"javascript:;"},ga={class:"py-1 d-flex"},fa={class:"d-flex flex-column justify-content-center"},Ea={class:"d-flex align-items-center"},Va=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),Na={class:"ms-1 pt-2 text-sm font-weight-normal"},xa={class:"font-weight-bold"},ya={class:""},va={class:"menu_item mb-2"},ka=Object(l["createElementVNode"])("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},[Object(l["createElementVNode"])("div",{class:"py-1 d-flex"},[Object(l["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center"},[Object(l["createElementVNode"])("span",{class:"d-flex  align-items-center"},[Object(l["createElementVNode"])("i",{class:"fas fa-wallet "}),Object(l["createElementVNode"])("h6",{class:"ms-1 pt-2 text-sm font-weight-normal"},[Object(l["createElementVNode"])("span",{class:"font-weight-bold"},"Wallet")])])])])],-1),wa={class:"menu_item mb-2"},Sa=Object(l["createStaticVNode"])('<div class="py-1 d-flex"><div class="d-flex flex-column justify-content-center"><span class="d-flex align-items-center"><i class="fas fa-power-off pb-0"></i><h6 class="ms-1 pt-2 text-sm font-weight-normal"><span class="font-weight-bold">Logout</span></h6></span></div></div>',1),Aa=[Sa],Ba={class:"nav-item d-xl-none ps-3 d-flex align-items-center"},Ca=Object(l["createElementVNode"])("div",{class:"sidenav-toggler-inner"},[Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"})],-1),_a=[Ca];function Pa(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("nav",Object(l["mergeProps"])({class:"shadow-none navbar navbar-main navbar-expand-lg border-radius-xl"},e.$attrs,{id:"navbarBlur","data-scroll":"true",class:e.isAbsolute?"mt-4":"mt-0"}),[Object(l["createElementVNode"])("div",vt,["super_admin"!=o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kt,[Object(l["createElementVNode"])("h5",null,Object(l["toDisplayString"])(o.organization_name),1)])):Object(l["createCommentVNode"])("",!0),"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",wt,At)):Object(l["createCommentVNode"])("",!0),"Profile"!=s.currentRouteName?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[o.passwordStatus?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Bt,[Object(l["createElementVNode"])("small",Ct,[_t,Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[Pt]),_:1}),It])]))],64)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mt-2 collapse navbar-collapse mt-sm-0 me-md-0 me-sm-4",e.isRTL?"px-0":"me-sm-4"]),id:"navbar"},[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pe-md-3 d-flex align-items-center",e.isRTL?"me-md-auto":"ms-md-auto"])},null,2),Object(l["createElementVNode"])("ul",Dt,["staff"==o.user.role||"student"==o.user.role||"parent"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:0,class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{onClick:t[0]||(t[0]=(...e)=>s.getCartItems&&s.getCartItems(...e)),href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",o.showCart?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[Object(l["createElementVNode"])("div",Tt,[Mt,e.getCartItemCounter&&e.getCartItemCounter>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",zt,Object(l["toDisplayString"])(e.getCartItemCounter),1)):Object(l["createCommentVNode"])("",!0)])],2),Object(l["createElementVNode"])("ul",Ft,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.cartItemsList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ut,[Object(l["createElementVNode"])("div",Lt,[Object(l["createElementVNode"])("h6",$t,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item?e.shop_item.name:"")+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",qt,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Rt]),Object(l["createElementVNode"])("div",Ht,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Qt," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item?e.shop_item.price:0)),1),Object(l["createElementVNode"])("i",{onClick:Object(l["withModifiers"])(t=>s.removeItemFromCart(e.id),["stop"]),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,Jt)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.cartItemsList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Yt,[Object(l["createElementVNode"])("div",Wt,[Object(l["createElementVNode"])("h6",Xt,Object(l["toDisplayString"])(e.trip?e.trip.title:"")+" (Trip)",1),Zt]),Object(l["createElementVNode"])("div",Kt,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Gt," £"+Object(l["toDisplayString"])(s.formattedPrice(e.trip?e.trip.budget:0)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,ea)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),o.cartItemsList.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ta,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>s.navCheckout()),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 trips-btn w-100 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Checkout ")])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",aa,[o.isLoading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",la,"Loading......")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ca,"Cart is empty"))]))])],2)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",o.showMenu?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:t[2]||(t[2]=e=>o.showProfile=!o.showProfile)},sa,2),Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["px-2 py-3 dropdown-menu dropdown-menu-end me-sm-n4",o.showMenu?"show":""]),"aria-labelledby":"dropdownMenuButton",onClick:t[4]||(t[4]=e=>o.showMenu=!o.showMenu)},["staff"!==o.user.role&&"student"!==o.user.role&&"parent"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",na,[Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("a",ra,[Object(l["createElementVNode"])("div",ia,[Object(l["createElementVNode"])("div",da,[Object(l["createElementVNode"])("span",ma,[ba,Object(l["createElementVNode"])("h6",pa,[Object(l["createElementVNode"])("span",ua,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(o.user.first_name)+" "+Object(l["toDisplayString"])(o.user.last_name)+" ",1),Object(l["createElementVNode"])("small",Oa,"("+Object(l["toDisplayString"])(s.userRole)+")",1)])])])])])])]),_:1})])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ha,[Object(l["createElementVNode"])("a",ja,[Object(l["createElementVNode"])("div",ga,[Object(l["createElementVNode"])("div",fa,[Object(l["createElementVNode"])("span",Ea,[Va,Object(l["createElementVNode"])("h6",Na,[Object(l["createElementVNode"])("span",xa,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(o.user.first_name)+" "+Object(l["toDisplayString"])(o.user.last_name)+" ",1),Object(l["createElementVNode"])("small",ya,"("+Object(l["toDisplayString"])(s.userRole)+")",1)])])])])])])])),Object(l["createElementVNode"])("li",va,[Object(l["createVNode"])(n,{to:{name:"balance"}},{default:Object(l["withCtx"])(()=>[ka]),_:1})]),Object(l["createElementVNode"])("li",wa,[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=(...e)=>s.signOut&&s.signOut(...e)),class:"dropdown-item border-radius-md",href:"javascript:;"},Aa)])],2)],2),Object(l["createElementVNode"])("li",Ba,[Object(l["createElementVNode"])("a",{href:"#",onClick:t[5]||(t[5]=(...e)=>s.toggleSidebar&&s.toggleSidebar(...e)),class:"p-0 nav-link text-body lh-1",id:"iconNavbarSidenav"},_a)])])],2)])],16)}var Ia={name:"navbar",data(){return{cartItemsCount:null,branding_settings:{primary_color:"",secondary_color:"",logo:""},isLoading:!1,passwordStatus:"",cartItemsList:"",user:"",organization_name:"",showCart:!1,showMenu:!1,showProfile:!1}},props:["minNav","color"],created(){this.minNav},mounted(){this.getUser(),this.isUpdatedRecently(),this.getOrganizationName(),this.getUserRolePermissions(),this.$globalHelper.buttonColor(),this.countUserCartItems()},updated(){this.$globalHelper.buttonColor()},methods:{...Object(tt["b"])(["updateRemovedItem","updatePermissions","updateCartItemCounter"]),...Object(tt["d"])(["navbarMinimize","toggleConfigurator"]),toggleSidebar(){this.navbarMinimize()},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getUserPermissions(){let e=this.user.id;try{let t=await it.get("getUserPermissions/"+e);t=t.data,this.formattPermissions(t)}catch(t){console.log(t)}},async getUserRolePermissions(){let e=this.user.id;try{let t=await it.get("getUserRolePermissions/"+e);t=t.data,this.restructurePermissions(t)}catch(t){console.log(t)}},formattPermissions(e){let t=[];e.filter(e=>{t.push(e.permission_name)}),this.updatePermissions(t)},restructurePermissions(e){let t=[];e.filter(e=>{t.push(e.name)}),this.updatePermissions(t)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},isUpdatedRecently(){let e=localStorage.getItem("user");e=JSON.parse(e);const t=new Date(e.created_at),a=new Date(e.updated_at);this.passwordStatus=a>t},async signOut(){try{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("primary_color"),localStorage.removeItem("secondary_color"),localStorage.removeItem("logo"),this.$router.push({name:"SignIn"}),await it.post("/logout",localStorage.getItem("token"))}catch(e){console.log(e)}},async getOrganizationName(){if("super_admin"==this.user.role)return;let e={user_id:this.user.id,role:this.user.role};try{const t=await it.post("/getOrganizationName",e);this.organization_name=t.data.organization_name}catch(t){console.log(t)}},async getCartItems(){this.isLoading=!0,this.cartItemsList="";try{const e=await it.get("/getUserCartItems");this.cartItemsList=e.data}catch(e){console.log(e)}this.isLoading=!1},async countUserCartItems(){try{let e=await it.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},async removeItemFromCart(e){let t={item_id:e};try{await it.post("/removeItemFromCart",t),this.removeItemFromList(e),this.countUserCartItems()}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItemsList.findIndex(t=>t.id===e);this.cartItemsList.splice(t,1),this.snackbarMsg("Item Removed Successfully")},navCheckout(){this.$router.push({name:"cart-checkout"})}},components:{},computed:{...Object(tt["c"])(["getCartItemCounter"]),...Object(tt["e"])(["isRTL","isAbsolute"]),currentRouteName(){return this.$route.name},userRole(){return"super_admin"==this.user.role?"Admin":"school_user"==this.user.role?"School":this.user.role}}};a("b4cc");const Da=ct()(Ia,[["render",Pa]]);var Ta=Da;const Ma={class:"py-3 footer"};function za(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("footer",Ma)}var Fa={name:"app-footer"};const Ua=ct()(Fa,[["render",za]]);var La=Ua,$a={name:"App",components:{Sidenav:jt,Configurator:yt,Navbar:Ta,AppFooter:La},methods:{...Object(tt["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object(tt["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};const qa=ct()($a,[["render",o]]);var Ra=qa,Ha=a("c0e2"),Qa=a.n(Ha);const Ja={user:localStorage.getItem("user"),accessToken:localStorage.getItem("token"),userPermissions:[]},Ya={getPermissions(e){return e.userPermissions}},Wa={setPermissions(e,t){e.userPermissions=t}},Xa={updatePermissions({commit:e},t){e("setPermissions",t)}};var Za={state:Ja,mutations:Wa,actions:Xa,getters:Ya};const Ka={organizationList:null},Ga={getOrganizationList(e){return e.organizationList}},el={setOrganizationList(e,t){e.organizationList=t}},tl={updateOrganizationList({commit:e},t){e("setOrganizationList",t)}};var al={state:Ka,mutations:el,actions:tl,getters:Ga};const ll={cartItemCounter:null},cl={getCartItemCounter(e){return e.cartItemCounter}},ol={setCartItemCounter(e,t){e.cartItemCounter=t}},sl={updateCartItemCounter({commit:e},t){e("setCartItemCounter",t)}};var nl={state:ll,mutations:ol,actions:sl,getters:cl};const rl={brandingSetting:{primary_color:"null"!=localStorage.getItem("primary_color")?localStorage.getItem("primary_color"):"#010A21",secondary_color:"null"!=localStorage.getItem("secondary_color")?localStorage.getItem("secondary_color"):"#010A21",logo:localStorage.getItem("logo")}},il={getBrandingSetting(e){return e.brandingSetting}},dl={setBrandingSetting(e,t){e.brandingSetting=t}},ml={updateBrandingSetting({commit:e},t){e("setBrandingSetting",t)}};var bl={state:rl,mutations:dl,actions:ml,getters:il};const pl={filterString:{filterBy:"",searchString:""}},ul={getFilterString(e){return e.filterString}},Ol={setFilterString(e,t){e.filterString=t}},hl={updateFilterString({commit:e},t){e("setFilterString",t)}};var jl={state:pl,mutations:Ol,actions:hl,getters:ul},gl=Object(tt["a"])({modules:{auth:Za,organization:al,cart:nl,settings:bl,filterstate:jl},state:{hideConfigButton:!1,isPinned:!0,showConfig:!1,sidebarType:"bg-gradient-dark",isRTL:!1,color:"success",isNavFixed:!1,isAbsolute:!1,showNavs:!0,showSidenav:!0,showNavbar:!0,showFooter:!0,showMain:!0,isDarkMode:!1,navbarFixed:"position-sticky blur shadow-blur left-auto top-1 z-index-sticky px-0 mx-4",absolute:"position-absolute px-4 mx-0 w-100 z-index-2"},mutations:{toggleConfigurator(e){e.showConfig=!e.showConfig},navbarMinimize(e){const t=document.querySelector(".g-sidenav-show");t.classList.contains("g-sidenav-pinned")?(t.classList.remove("g-sidenav-pinned"),e.isPinned=!0):(t.classList.add("g-sidenav-pinned"),e.isPinned=!1)},navbarFixed(e){!1===e.isNavFixed?e.isNavFixed=!0:e.isNavFixed=!1},toggleEveryDisplay(e){e.showNavbar=!e.showNavbar,e.showSidenav=!e.showSidenav,e.showFooter=!e.showFooter},toggleHideConfig(e){e.hideConfigButton=!e.hideConfigButton},color(e,t){e.color=t}},actions:{setColor({commit:e},t){e("color",t)},test({commit:e},t){alert("TestHello"),e("color",t)}},getters:{}}),fl=a("6c02"),El=a("bbe0"),Vl=a.n(El);const Nl={class:"py-4 container-fluid"},xl={class:"row mb-4"},yl={class:"col-lg-12 position-relative z-index-2"},vl={class:"row"},kl={key:0,class:"col-lg-3 col-md-6 col-sm-6"},wl={class:"col-lg-3 col-md-6 col-sm-6"},Sl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Al={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Bl={class:"col-lg-3 col-md-6 col-sm-6"},Cl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},_l={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Pl={key:2,class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Il={key:0,class:"row mt-4"},Dl=Object(l["createElementVNode"])("div",{class:"col-lg-12 col-md-12 col-sm-12"},[Object(l["createElementVNode"])("img",{src:Vl.a,style:{width:"100%",height:"95%","border-radius":"20px","box-shadow":"0px 0px 2px #CCCCCC"}})],-1),Tl=[Dl];function Ml(e,t,a,c,o,s){var n,r,i,d;const m=Object(l["resolveComponent"])("mini-statistics-card"),b=Object(l["resolveComponent"])("UserShop");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Nl,[Object(l["createElementVNode"])("div",xl,[Object(l["createElementVNode"])("div",yl,[Object(l["createElementVNode"])("div",vl,["student"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[null!=o.studentHistory.fsm_balance||void 0!=o.studentHistory.fsm_balance?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kl,[Object(l["createVNode"])(m,{title:{text:"FSM Balance",value:"£"+s.formattedPrice(null!==(n=o.studentHistory.fsm_balance)&&void 0!==n?n:0)},detail:"FSM Balance",icon:{name:"credit_card",color:"text-white",background:"primary"}},null,8,["title"])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",wl,[Object(l["createVNode"])(m,{title:{text:"Current Balance",value:"£"+s.formattedPrice(null!==(r=o.studentHistory.current_balance)&&void 0!==r?r:0)},detail:"Current Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title"])]),Object(l["createElementVNode"])("div",Sl,[Object(l["createVNode"])(m,{title:{text:"Monthly",value:"£"+s.formattedPrice(null!==(i=o.studentHistory.last_month)&&void 0!==i?i:0)},detail:"This Month Transactions",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",Al,[Object(l["createVNode"])(m,{title:{text:"Weekly",value:"£"+s.formattedPrice(null!==(d=o.studentHistory.last_week)&&void 0!==d?d:0)},detail:"This Week Transactions",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"parent"!==o.user.role&&"student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("div",Bl,[Object(l["createVNode"])(m,{title:{text:s.isAdmin?"Total Figures":"Total Balance",value:"£"+s.formattedPrice(o.userBallance?o.userBallance:0)},detail:s.isAdmin?"Total Figures":"Total Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title","detail"])]),Object(l["createElementVNode"])("div",Cl,[Object(l["createVNode"])(m,{title:{text:"Total Sites",value:o.totalSchool?o.totalSchool:0},detail:"Total Sites",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",_l,[Object(l["createVNode"])(m,{title:{text:"Total Students",value:o.totalStudents?o.totalStudents:0},detail:"Total Students",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"parent"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Pl,[Object(l["createVNode"])(m,{title:{text:"Transactions",value:"£"+s.formattedPrice(o.totalTransactions?o.totalTransactions:0)},detail:"Total Transactions",icon:{name:"weekend",color:"text-white",background:"info"}},null,8,["title"])])):Object(l["createCommentVNode"])("",!0)]),"student"!==o.user.role&&"staff"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Il,Tl)):Object(l["createCommentVNode"])("",!0),"staff"==o.user.role||"student"==o.user.role?(Object(l["openBlock"])(),Object(l["createBlock"])(b,{key:1})):Object(l["createCommentVNode"])("",!0)])])])}const zl={class:"card-header p-3 pt-2"},Fl={class:"text-sm mb-0 text-capitalize"},Ul={class:"mb-0"},Ll=Object(l["createElementVNode"])("hr",{class:"dark horizontal my-0"},null,-1),$l=["innerHTML"];function ql(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["card mb-2",a.directionReverse?o.reverseDirection:""])},[Object(l["createElementVNode"])("div",zl,[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["icon icon-lg icon-shape shadow text-center border-radius-xl mt-n4 position-absolute",`bg-gradient-${a.icon.background} shadow-${a.icon.background}`])},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(["material-icons opacity-10",a.icon.color]),"aria-hidden":"true"},Object(l["toDisplayString"])(a.icon.name),3)],2),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pt-1",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",Fl,Object(l["toDisplayString"])(a.title.text),1),Object(l["createElementVNode"])("h4",Ul,Object(l["toDisplayString"])(a.title.value),1)],2)]),Ll,Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["card-footer p-3",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",{class:"mb-0",innerHTML:a.detail},null,8,$l)],2)],2)}var Rl={name:"MiniStatisticsCard",data(){return{reverseDirection:"flex-row-reverse justify-content-between"}},props:{title:{type:Object,required:!0,text:String,value:[Number,String]},detail:{type:String,default:""},icon:{type:Object,required:!0,name:String,color:String,background:String,default:()=>({color:"text-white",background:"success"})},directionReverse:{type:Boolean,default:!1}},computed:{...Object(tt["e"])(["isRTL"])}};const Hl=ct()(Rl,[["render",ql]]);var Ql=Hl,Jl=a("b8de"),Yl=a.n(Jl),Wl=a("37f7"),Xl=a.n(Wl),Zl=a("b107"),Kl=a.n(Zl),Gl=a("2e77"),ec=a.n(Gl),tc=a("3dfe"),ac=a.n(tc),lc=a("281f"),cc=a.n(lc),oc=a("350a"),sc=a.n(oc),nc=a("8202"),rc=a.n(nc),ic=a("c7c0"),dc=a.n(ic),mc=a("f35e"),bc=a.n(mc);const pc={class:" py-4"},uc={class:"row"},Oc={class:"col-12"},hc={class:"card my-4"},jc={class:"card-body px-0 pb-2"},gc={class:"table-responsive p-0"},fc=Object(l["createElementVNode"])("span",{class:""},[Object(l["createElementVNode"])("h6",{class:"ms-4 text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"ms-4 page-description"},[Object(l["createTextVNode"])(" In the Shop Item section, you can search and add items to your cart. Once you're ready, you can proceed to checkout and complete your purchase by "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("making a payment. This seamless process ensures a smooth shopping experience from selection to payment. ")])],-1),Ec={class:"filter-container ms-4 mb-2"},Vc={style:{display:"flex"}},Nc=["value"],xc={class:"card-body pt-1 p-3"},yc={class:"container-fluid mt-1"},vc={class:"col-md-8"},kc={class:"d-flex flex-column"},wc={class:"d-flex"},Sc={class:"mb-3 text-sm"},Ac={key:0,style:{"font-size":"12px !important"},class:" text-sm ms-2"},Bc=["src"],Cc={class:"trip-description mt-2"},_c={class:"col-md-4"},Pc={class:"ms-auto text-start"},Ic={class:"me-3 trip-dates"},Dc=Object(l["createElementVNode"])("br",null,null,-1),Tc={class:"d-flex  align-items-start text-success text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},Mc=Object(l["createElementVNode"])("br",null,null,-1),zc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},Fc={key:0,class:"text-success"},Uc={key:1,class:"text-danger"},Lc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},$c=Object(l["createElementVNode"])("span",{class:"text-warning"},"Active Payment Plan",-1),qc=Object(l["createTextVNode"])(" ( "),Rc={key:0},Hc={key:1},Qc={key:2},Jc=Object(l["createTextVNode"])(" ) "),Yc=Object(l["createElementVNode"])("br",null,null,-1),Wc=Object(l["createElementVNode"])("br",null,null,-1),Xc=Object(l["createElementVNode"])("br",null,null,-1),Zc={key:0},Kc=Object(l["createElementVNode"])("br",null,null,-1),Gc={key:0,class:"mt-0"},eo=["onClick"],to=Object(l["createElementVNode"])("br",null,null,-1),ao={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},lo=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),co=[lo],oo={class:"row"},so={class:"col-md-12 col-lg-12"},no={class:"pagination-container"},ro={class:"entries-dropdown"},io=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),mo=["value"],bo={class:"pagination-wrapper"},po={class:"pagination"},uo=["onClick"];function Oo(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pc,[Object(l["createElementVNode"])("div",uc,[Object(l["createElementVNode"])("div",Oc,[Object(l["createElementVNode"])("div",hc,[Object(l["createElementVNode"])("div",jc,[Object(l["createElementVNode"])("div",gc,[Object(l["createElementVNode"])("div",null,[fc,Object(l["createElementVNode"])("div",Ec,[Object(l["createElementVNode"])("span",Vc,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Nc))),128))],544),[[l["vModelSelect"],o.filterBy]])])])]),Object(l["createElementVNode"])("div",xc,[Object(l["createElementVNode"])("div",yc,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",vc,[Object(l["createElementVNode"])("div",kc,[Object(l["createElementVNode"])("span",wc,[Object(l["createElementVNode"])("h6",Sc,Object(l["toDisplayString"])(t.name),1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ac,"("+Object(l["toDisplayString"])(t.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,8,Bc),Object(l["createElementVNode"])("small",Cc,Object(l["toDisplayString"])(t.detail),1)])]),Object(l["createElementVNode"])("div",_c,[Object(l["createElementVNode"])("div",Pc,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Ic,"From "+Object(l["toDisplayString"])(s.formatDateString(t.valid_from))+" To "+Object(l["toDisplayString"])(s.formatDateString(t.valid_to)),1)]),Dc,Object(l["createElementVNode"])("div",Tc," Price - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price)),1),Mc,Object(l["createElementVNode"])("div",zc,[t.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Fc,"Available")):Object(l["createCommentVNode"])("",!0),0==t.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Uc,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Lc,[$c,qc,"full_payment"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Rc,"Full Payment")):Object(l["createCommentVNode"])("",!0),"installments"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Hc,"Instalments")):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Qc,"Instalments And Deposit")):Object(l["createCommentVNode"])("",!0),Jc,Yc,"installments"==t.payment_plan||"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[Object(l["createElementVNode"])("span",null,"Total Installments: "+Object(l["toDisplayString"])(t.payment?t.payment.total_installments:""),1),Wc,Object(l["createElementVNode"])("span",null,"Amount Per Instalment: £"+Object(l["toDisplayString"])(s.formattedAmount(t.payment?t.payment.amount_per_installment:0)),1),Xc,t.payment&&t.payment.initial_deposit?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Zc,"Initial Deposit: £"+Object(l["toDisplayString"])(s.formattedAmount(t.payment?t.payment.initial_deposit:0)),1)):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0)]),Kc,t.quantity>0||null==t.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Gc,[Object(l["createElementVNode"])("button",{onClick:e=>s.addToCart(t.id),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,eo)])):Object(l["createCommentVNode"])("",!0),to])])]))),128))],64))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ao,co)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",oo,[Object(l["createElementVNode"])("div",so,[Object(l["createElementVNode"])("div",no,[Object(l["createElementVNode"])("div",ro,[io,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.itemsPerPage=e),onChange:t[5]||(t[5]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,mo))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",bo,[Object(l["createElementVNode"])("ul",po,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,uo)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var ho=a("3d20"),jo=a.n(ho),go=a("c1df"),fo=a.n(go),Eo={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop"),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Name",allFields:["Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{...Object(tt["b"])(["updateCartItemCounter"]),confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getShopItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await it.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await it.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await it.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart"),this.countUserCartItems()}catch(l){console.log(l)}},async countUserCartItems(){try{let e=await it.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=fo()(e),a=t.format("DD MMMM YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("c160");const Vo=ct()(Eo,[["render",Oo]]);var No=Vo,xo={name:"dashboard-default",data(){return{studentHistory:"",totalTransactions:"",totalSchool:"",totalStudents:"",user:"",userBallance:"",logoXD:Yl.a,team1:sc.a,team2:rc.a,team3:dc.a,team4:bc.a,logoAtlassian:Xl.a,logoSlack:Kl.a,logoSpotify:ec.a,logoJira:ac.a,logoInvision:cc.a}},mounted(){this.getUser(),this.getStudentBalance(),this.getTotalSchools(),this.getTotalStudents(),this.getTotalTransactions(),this.getStudentHistory()},computed:{isAdmin(){return"staff"!==this.user.role||"student"!==this.user.role}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getStudentBalance(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e;try{let t=await it.get("/getStudentBalance/"+e.id);t=t.data,this.userBallance=t}catch(t){console.log(t)}},async getStudentHistory(){if("student"==this.user.role)try{let e=await it.get("/studentDashboard");e=e.data,this.studentHistory=e}catch(e){console.log(e)}},async getTotalSchools(){try{let e=await it.get("/totalSchools");e=e.data,this.totalSchool=e}catch(e){console.log(e)}},async getTotalStudents(){try{let e=await it.get("/getTotalStudents");e=e.data,this.totalStudents=e}catch(e){console.log(e)}},async getTotalTransactions(){try{let e=await it.get("/getTotalTransactions");e=e.data,this.totalTransactions=e}catch(e){console.log(e)}}},components:{MiniStatisticsCard:Ql,UserShop:No}};const yo=ct()(xo,[["render",Ml]]);var vo=yo,ko=a("40bd"),wo=a.n(ko);const So={class:"container-fluid"},Ao=Object(l["createElementVNode"])("div",{class:"page-header min-height-300 border-radius-xl mt-4",style:{"background-image":"url('https://images.unsplash.com/photo-1531512073830-ba890ca4eba2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80')"}},[Object(l["createElementVNode"])("span",{class:"mask bg-gradient-success opacity-6"})],-1),Bo={class:"card card-body mx-3 mx-md-4 mt-n6"},Co={class:"row gx-4"},_o=Object(l["createElementVNode"])("div",{class:"col-auto"},[Object(l["createElementVNode"])("div",{class:"avatar avatar-xl position-relative"},[Object(l["createElementVNode"])("img",{src:wo.a,alt:"profile_image",class:"shadow-sm w-100 border-radius-lg"})])],-1),Po={class:"col-auto my-auto"},Io={class:"h-100"},Do={class:"mb-1"},To={class:"d-flex"},Mo={class:"mb-0 font-weight-normal text-sm"},zo={class:"d-flex"},Fo={class:"text-xs"},Uo=Object(l["createElementVNode"])("div",{class:"mx-auto mt-3 col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0"},[Object(l["createElementVNode"])("div",{class:"nav-wrapper position-relative end-0"})],-1),Lo={class:"row"},$o={class:"mt-3 row"},qo={class:"col-12 col-md-6 col-xl-6 position-relative"},Ro={class:"card card-plain h-100"},Ho=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Profile Settings")],-1),Qo={class:"p-3 card-body"},Jo={class:"list-group"},Yo={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Wo={class:"col-md-5 mx-auto bg-white new-pass p-2"},Xo=Object(l["createElementVNode"])("label",null,"First Name",-1),Zo={key:0,class:"err-txt text-danger error-txt"},Ko=Object(l["createElementVNode"])("br",null,null,-1),Go=Object(l["createElementVNode"])("label",null,"Last Name",-1),es={key:1,class:"err-txt text-danger error-txt"},ts=Object(l["createElementVNode"])("br",null,null,-1),as=Object(l["createElementVNode"])("label",null,"Email",-1),ls={key:2,class:"err-txt text-danger error-txt"},cs=Object(l["createElementVNode"])("br",null,null,-1),os=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),ss={class:"mt-4 col-12 col-xl-6 mt-xl-0"},ns={class:"card card-plain h-100"},rs=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Change Password")],-1),is={class:"p-3 card-body"},ds={class:"list-group"},ms={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},bs={class:"col-md-5 mx-auto bg-white new-pass p-2"},ps=Object(l["createElementVNode"])("label",null,"Old Password",-1),us={key:0,class:"err-txt text-danger error-txt"},Os=Object(l["createElementVNode"])("br",null,null,-1),hs=Object(l["createElementVNode"])("label",null,"New Password",-1),js={key:1,class:"err-txt text-danger error-txt"},gs=Object(l["createElementVNode"])("br",null,null,-1),fs=Object(l["createElementVNode"])("label",null,"Confirm New Password",-1),Es={key:2,class:"err-txt text-danger error-txt"},Vs=Object(l["createElementVNode"])("br",null,null,-1);function Ns(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",So,[Ao,Object(l["createElementVNode"])("div",Bo,[Object(l["createElementVNode"])("div",Co,[_o,Object(l["createElementVNode"])("div",Po,[Object(l["createElementVNode"])("div",Io,[Object(l["createElementVNode"])("h5",Do,Object(l["toDisplayString"])(o.user.first_name)+" "+Object(l["toDisplayString"])(o.user.last_name),1),Object(l["createElementVNode"])("span",To,[Object(l["createElementVNode"])("p",Mo,"Role: "+Object(l["toDisplayString"])(o.user.role),1)]),Object(l["createElementVNode"])("span",zo,[Object(l["createElementVNode"])("small",Fo,"Email: "+Object(l["toDisplayString"])(o.user.email?o.user.email:"-"),1)])])]),Uo]),Object(l["createElementVNode"])("div",Lo,[Object(l["createElementVNode"])("div",$o,[Object(l["createElementVNode"])("div",qo,[Object(l["createElementVNode"])("div",Ro,[Ho,Object(l["createElementVNode"])("div",Qo,[Object(l["createElementVNode"])("ul",Jo,[Object(l["createElementVNode"])("li",Yo,[Object(l["createElementVNode"])("div",Wo,[Xo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.updateData.first_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.updateData.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Zo,"First Name is required")):Object(l["createCommentVNode"])("",!0),Ko,Go,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.updateData.last_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.updateData.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",es,"Last Name is required")):Object(l["createCommentVNode"])("",!0),ts,as,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.updateData.email=e),id:"card-holder-name",type:"email",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.updateData.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ls,"Email is required")):Object(l["createCommentVNode"])("",!0),cs,Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>s.updateSettings()),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),os]),Object(l["createElementVNode"])("div",ss,[Object(l["createElementVNode"])("div",ns,[rs,Object(l["createElementVNode"])("div",is,[Object(l["createElementVNode"])("ul",ds,[Object(l["createElementVNode"])("li",ms,[Object(l["createElementVNode"])("div",bs,[ps,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.changePassword.old_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.changePassword.old_password]]),""!==o.passwordValidationForm&&""!==o.passwordValidationForm["old_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",us,"Old Password is required")):Object(l["createCommentVNode"])("",!0),Os,hs,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.changePassword.new_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.changePassword.new_password]]),""!==o.passwordValidationForm&&""!==o.passwordValidationForm["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",js,"New Password is required")):Object(l["createCommentVNode"])("",!0),gs,fs,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.changePassword.new_password_confirmation=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.changePassword.new_password_confirmation]]),""!==o.passwordValidationForm&&""!==o.passwordValidationForm["new_password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Es,"Confirm Password is required")):Object(l["createCommentVNode"])("",!0),Vs,Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>s.changeUserPassword&&s.changeUserPassword(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Save ")])])])])])])])])])])}var xs=a("2d39"),ys=a.n(xs),vs=a("af17"),ks=a.n(vs),ws=a("6150"),Ss=a.n(ws),As=a("b34a"),Bs=a.n(As),Cs=a("4753"),_s=a.n(Cs),Ps=a("532f"),Is=a.n(Ps);function Ds(){var e=document.querySelectorAll(".nav-pills");function t(){e.forEach((function(e,t){var l=document.createElement("div"),c=e.querySelector("li:first-child .nav-link"),o=c.cloneNode();o.innerHTML="-",l.classList.add("moving-tab","position-absolute","nav-link"),l.appendChild(o),e.appendChild(l);e.getElementsByTagName("li").length;l.style.padding="0px",l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px, 0px, 0px)",l.style.transition=".5s ease",e.onmouseover=function(t){let c=a(t),o=c.closest("li");if(o){let t=Array.from(o.closest("ul").children),a=t.indexOf(o)+1;e.querySelector("li:nth-child("+a+") .nav-link").onclick=function(){l=e.querySelector(".moving-tab");let c=0;if(e.classList.contains("flex-column")){for(var s=1;s<=t.indexOf(o);s++)c+=e.querySelector("li:nth-child("+s+")").offsetHeight;l.style.transform="translate3d(0px,"+c+"px, 0px)",l.style.height=e.querySelector("li:nth-child("+s+")").offsetHeight}else{for(s=1;s<=t.indexOf(o);s++)c+=e.querySelector("li:nth-child("+s+")").offsetWidth;l.style.transform="translate3d("+c+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+a+")").offsetWidth+"px"}}}}}))}function a(e){return e=e||window.event,e.target||e.srcElement}setTimeout((function(){t()}),100),window.addEventListener("resize",(function(t){e.forEach((function(e,t){e.querySelector(".moving-tab").remove();var a=document.createElement("div"),l=e.querySelector(".nav-link.active").cloneNode();l.innerHTML="-",a.classList.add("moving-tab","position-absolute","nav-link"),a.appendChild(l),e.appendChild(a),a.style.padding="0px",a.style.transition=".5s ease";let c=e.querySelector(".nav-link.active").parentElement;if(c){let t=Array.from(c.closest("ul").children),l=t.indexOf(c)+1,s=0;if(e.classList.contains("flex-column")){for(var o=1;o<=t.indexOf(c);o++)s+=e.querySelector("li:nth-child("+o+")").offsetHeight;a.style.transform="translate3d(0px,"+s+"px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px",a.style.height=e.querySelector("li:nth-child("+o+")").offsetHeight}else{for(o=1;o<=t.indexOf(c);o++)s+=e.querySelector("li:nth-child("+o+")").offsetWidth;a.style.transform="translate3d("+s+"px, 0px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px"}}})),window.innerWidth<991?e.forEach((function(e,t){if(!e.classList.contains("flex-column")){e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),o=(c.indexOf(t),0);for(var a=1;a<=c.indexOf(t);a++)o+=e.querySelector("li:nth-child("+a+")").offsetHeight;var l=document.querySelector(".moving-tab");l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px,"+o+"px, 0px)"}})):e.forEach((function(e,t){if(e.classList.contains("on-resize")){e.classList.remove("flex-column","on-resize"),e.classList.add("flex-row");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),o=c.indexOf(t)+1,s=0;for(var a=1;a<=c.indexOf(t);a++)s+=e.querySelector("li:nth-child("+a+")").offsetWidth;var l=document.querySelector(".moving-tab");l.style.transform="translate3d("+s+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+o+")").offsetWidth+"px"}}))})),window.innerWidth<991&&e.forEach((function(e,t){e.classList.contains("flex-row")&&(e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize"))}))}var Ts=a("4989"),Ms=a.n(Ts);function zs(){var e=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));e.map((function(e){return new Ms.a.Tooltip(e)}))}var Fs=a("0644"),Us=a.n(Fs),Ls={name:"profile-overview",data(){return{updateData:"",passwordValidationForm:"",formValidation:"",user:"",changePassword:{old_password:"",new_password:"",new_password_confirmation:""},showMenu:!1,sophie:ys.a,marie:ks.a,ivana:Ss.a,peterson:bc.a,nick:dc.a,img1:Bs.a,team1:sc.a,team2:rc.a,team3:dc.a,team4:bc.a,img2:_s.a,img3:Is.a}},components:{},mounted(){this.$store.state.isAbsolute=!0,Ds(),zs(),this.getUser()},beforeUnmount(){this.$store.state.isAbsolute=!1},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,this.updateData=Us()(this.user),"student"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||this.$router.go(-1)},async changeUserPassword(){if(this.validatePasswordForm())return;let e=localStorage.getItem("user");e=JSON.parse(e);let t={user_id:e.id,old_password:this.changePassword.old_password,new_password:this.changePassword.new_password,new_password_confirmation:this.changePassword.new_password_confirmation};if(t.new_password!=t.old_password)try{const e=await it.post("/changePassword",t);this.snackbarMsg("Password changed successfully!"),localStorage.removeItem("user"),localStorage.removeItem("token"),this.$router.push({name:"SignIn"}),console.log(e)}catch(a){console.log(a)}else this.snackbarMsg("New password can not be the same as old password!","error")},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},validateForm(){let e=!1,t="";t=Us()(this.updateData);for(let a in this.updateData)""!==this.updateData[a]&&void 0!==this.updateData[a]||"first_name"!=a&&"last_name"!=a&&"email"!=a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async updateSettings(){if(this.validateForm())return;let e={first_name:this.updateData.first_name,last_name:this.updateData.last_name,email:this.updateData.email};try{const t=await it.post("/profileSettings",e);this.snackbarMsg("Profile Updated successfully!"),this.updateUserData(e),console.log(t)}catch(t){console.log(t)}},updateUserData(e){this.user.first_name=e.first_name,this.user.last_name=e.last_name,this.user.email=e.email;let t=localStorage.getItem("user"),a=JSON.parse(t);a.first_name=e.first_name,a.last_name=e.last_name,a.email=e.email,localStorage.setItem("user",JSON.stringify(a)),window.location.reload()},validatePasswordForm(){let e=!1,t="";t=Us()(this.changePassword);for(let a in this.changePassword)""===this.changePassword[a]||void 0===this.changePassword[a]?(t[a]="is required",e=!0):t[a]="";return this.passwordValidationForm=t,e}}};a("40fa");const $s=ct()(Ls,[["render",Ns]]);var qs=$s,Rs=a("26be"),Hs=a.n(Rs);Object(l["pushScopeId"])("data-v-64c592b1");const Qs=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),Js={class:"container my-auto"},Ys={class:"row"},Ws={class:"col-lg-4 col-md-8 col-12 mx-auto"},Xs={class:"card z-index-0 fadeIn3 fadeInBottom"},Zs=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),Ks={class:"card-body"},Gs={key:0,class:"text-danger"},en={class:"mb-3"},tn={key:0,class:"text-danger error-txt"},an={class:"d-flex"},ln=["type"],cn={key:1,class:"text-danger error-txt"},on={class:"text-center"},sn=Object(l["createTextVNode"])("Sign in"),nn={class:"mt-4 text-sm text-success text-center"},rn=Object(l["createTextVNode"])("Forgot Password ?"),dn=Object(l["createElementVNode"])("br",null,null,-1),mn=Object(l["createElementVNode"])("br",null,null,-1),bn=Object(l["createElementVNode"])("img",{class:"me-2",style:{width:"12px",height:"12px"},src:Hs.a},null,-1),pn=Object(l["createElementVNode"])("small",{class:"mslogin"},"SignIn with Microsoft",-1),un=[bn,pn];function On(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[Qs,Object(l["createElementVNode"])("div",Js,[Object(l["createElementVNode"])("div",Ys,[Object(l["createElementVNode"])("div",Ws,[Object(l["createElementVNode"])("div",Xs,[Zs,Object(l["createElementVNode"])("div",Ks,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gs,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",en,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],s.credentials.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",tn,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",an,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.password=e),placeholder:"Password",type:s.showPassword?"text":"password",label:"Password",name:"password"},null,8,ln),[[l["vModelDynamic"],s.credentials.password]]),Object(l["createElementVNode"])("span",{onClick:t[2]||(t[2]=(...e)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...e)),class:"eye-icon",style:{"margin-left":"-25px","margin-top":"7px"}},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(s.showPassword?"fas fa-eye":"fas fa-eye-slash")},null,2)])]),""!==s.formValidation&&""!==s.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cn,"Password is required")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",on,[Object(l["createVNode"])(i,{class:"my-4 mb-2 custom-signin-btn",onClick:n.signIn,style:{"background-color":"#573078 !important"},fullWidth:""},{default:Object(l["withCtx"])(()=>[sn]),_:1},8,["onClick"])]),Object(l["createElementVNode"])("p",nn,[Object(l["createVNode"])(d,{to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[rn]),_:1}),dn,mn,Object(l["createElementVNode"])("span",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin-link mt-3"},un)])])])])])])],4)],64)}function hn(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("nav",{class:Object(l["normalizeClass"])(["top-0 navbar navbar-expand-lg position-absolute z-index-3",a.isBlur?a.isBlur:"shadow-none my-2 navbar-transparent w-100"])},null,2)])}Object(l["popScopeId"])();var jn=a("190c"),gn=a.n(jn),fn=a("52d6"),En=a.n(fn),Vn={name:"navbar",data(){return{downArrWhite:gn.a,downArrBlack:En.a}},props:{btnBackground:String,isBlur:String,darkMode:{type:Boolean,default:!1}},computed:{darkModes(){return{"text-dark":this.darkMode}}}};const Nn=ct()(Vn,[["render",hn]]);var xn=Nn;function yn(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{class:Object(l["normalizeClass"])(["btn mb-0",s.getClasses(a.variant,a.color,a.size,a.fullWidth,a.active)])},[Object(l["renderSlot"])(e.$slots,"default")],2)}var vn={name:"MaterialButton",props:{color:{type:String,default:"success"},size:{type:String,default:"md"},variant:{type:String,default:"fill"},fullWidth:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},methods:{getClasses:(e,t,a,l,c)=>{let o,s,n,r;return o="gradient"===e?"bg-gradient-"+t:"outline"===e?"btn-outline-"+t:"btn-"+t,s=a?"btn-"+a:null,n=l?"w-100":null,r=c?"active":null,`${o} ${s} ${n} ${r}`}}};const kn=ct()(vn,[["render",yn]]);var wn=kn,Sn={name:"sign-in",components:{Navbar:xn,MaterialButton:wn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},async created(){},mounted(){},data(){return{unauthorized:!1,formValidation:"",showPassword:!1,credentials:{email:"",password:""}}},methods:{...Object(tt["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},togglePasswordVisibility(){this.showPassword=!this.showPassword},validateForm(){let e=!1,t="";t=Us()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async signIn(){if(!this.validateForm())try{const e=await it.post("/login",this.credentials);let t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let l=e.data.primary_color,c=e.data.secondary_color,o=e.data.logo;localStorage.setItem("primary_color",l),localStorage.setItem("secondary_color",c),localStorage.setItem("logo",o);const s=this.$router.resolve({name:"/"}).href;window.location.href=s}catch(e){401==e.response.status&&(this.unauthorized=!0)}}}};a("0d0e");const An=ct()(Sn,[["render",On],["__scopeId","data-v-64c592b1"]]);var Bn=An;Object(l["pushScopeId"])("data-v-406525b8");const Cn=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),_n={class:"container my-auto"},Pn={class:"row"},In={class:"col-lg-4 col-md-8 col-12 mx-auto"},Dn={class:"card z-index-0 fadeIn3 fadeInBottom"},Tn=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),Mn={class:"card-body"},zn={key:0,class:"text-danger"},Fn={class:"mb-3"},Un={key:0,class:"text-danger error-txt"},Ln={class:"mb-3"},$n={key:0,class:"text-danger error-txt"},qn={class:"text-center"},Rn=Object(l["createTextVNode"])("Sign in"),Hn={class:"mt-4 text-sm text-success text-center"},Qn=Object(l["createTextVNode"])("Forgot Password ?"),Jn=Object(l["createElementVNode"])("br",null,null,-1),Yn=Object(l["createElementVNode"])("br",null,null,-1),Wn=Object(l["createElementVNode"])("small",{class:"mslogin"},"SignIn with Microsoft",-1);function Xn(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[Cn,Object(l["createElementVNode"])("div",_n,[Object(l["createElementVNode"])("div",Pn,[Object(l["createElementVNode"])("div",In,[Object(l["createElementVNode"])("div",Dn,[Tn,Object(l["createElementVNode"])("div",Mn,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zn,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Fn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],s.credentials.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Un,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Ln,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.password=e),placeholder:"Password",type:"password",label:"Password",name:"password"},null,512),[[l["vModelText"],s.credentials.password]]),""!==s.formValidation&&""!==s.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$n,"Password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qn,[Object(l["createVNode"])(i,{class:"my-4 mb-2",style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[Rn]),_:1})]),Object(l["createElementVNode"])("p",Hn,[Object(l["createVNode"])(d,{to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[Qn]),_:1}),Jn,Yn,Object(l["createElementVNode"])("span",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin-link mt-3"},[Object(l["createElementVNode"])("img",{onClick:t[2]||(t[2]=(...t)=>e.MSSignIn&&e.MSSignIn(...t)),class:"me-2",style:{width:"12px",height:"12px"},src:Hs.a}),Wn])])])])])])])],4)],64)}Object(l["popScopeId"])();var Zn={name:"sign-in",components:{Navbar:xn,MaterialButton:wn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},mounted(){const e=this.$route.query.code;e&&this.signIn(e)},data(){return{unauthorized:!1,formValidation:"",credentials:{email:"",password:""}}},methods:{...Object(tt["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},async SignOut(){await this.$msalInstance.logout({}).then(()=>{this.$emitter.emit("logout","logging out")}).catch(e=>{console.error(e)})},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})},async signIn(e){try{const t=await it.post("/auth_callback",{code:e});let a=t.data?t.data.user:null,l=t.data?t.data.access_token:null;localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",l);let c=t.data.primary_color,o=t.data.secondary_color,s=t.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",o),localStorage.setItem("logo",s);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){500==t.response.status&&(this.snackbarMsg("user was not found in StudentPay Portal!"),window.location.href="https://login.microsoftonline.com/cb811789-d752-4ec2-8215-356e22c04d4f/oauth2/v2.0/logout?post_logout_redirect_uri="+encodeURIComponent("https://staging.student-pay.co.uk/sign-in"))}}}};a("c1d2");const Kn=ct()(Zn,[["render",Xn],["__scopeId","data-v-406525b8"]]);var Gn=Kn;const er=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),tr={class:"container my-auto"},ar={class:"row"},lr={class:"col-lg-4 col-md-8 col-12 mx-auto"},cr={class:"card z-index-0 fadeIn3 fadeInBottom"},or=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:"border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Forgot Password")])],-1),sr={class:"card-body"},nr={key:0,class:"text-danger"},rr={key:0,class:"text-danger error-txt"},ir={key:1,class:"mb-3"},dr={key:0,class:"text-danger error-txt"},mr={class:"text-center"},br=Object(l["createTextVNode"])("Next"),pr=Object(l["createElementVNode"])("p",{class:"mt-4 text-sm text-success text-center"},null,-1);function ur(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[er,Object(l["createElementVNode"])("div",tr,[Object(l["createElementVNode"])("div",ar,[Object(l["createElementVNode"])("div",lr,[Object(l["createElementVNode"])("div",cr,[or,Object(l["createElementVNode"])("div",sr,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nr,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mb-3",{"mb-5 mt-5":!1===s.isOTP}])},[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],s.credentials.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rr,"email is required")):Object(l["createCommentVNode"])("",!0)],2),s.isOTP?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ir,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.otp=e),id:"otp",placeholder:"otp",type:"otp",label:"OTP",name:"otp"},null,512),[[l["vModelText"],s.otp]]),""!==s.formValidation&&""!==s.formValidation["otp"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dr,"otp is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",mr,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.requestOtp,style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[br]),_:1},8,["onClick"])]),pr])])])])])],4)],64)}var Or={name:"sign-in",components:{Navbar:xn,MaterialButton:wn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{unauthorized:!1,isOTP:!1,formValidation:"",otp:"",credentials:{email:""}}},methods:{...Object(tt["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Us()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async requestOtp(){if(this.isOTP)this.verifyOtp();else if(!this.validateForm())try{const e=await it.post("/forgot_password",this.credentials);this.isOTP=!0,console.log(e)}catch(e){console.log(e)}},async verifyOtp(){if(this.validateForm())return;let e={email:"",otp:""};e.email=this.credentials.email,e.otp=this.otp;try{return await it.post("/forgot_password_verify_otp",e),void this.$router.push({name:"ResetPassword",params:{email:this.credentials.email,otp:this.otp}})}catch(t){console.log(t)}}}};const hr=ct()(Or,[["render",ur]]);var jr=hr;const gr=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),fr={class:"container my-auto"},Er={class:"row"},Vr={class:"col-lg-4 col-md-8 col-12 mx-auto"},Nr={class:"card z-index-0 fadeIn3 fadeInBottom"},xr=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Reset Password")])],-1),yr={class:"card-body"},vr={key:0,class:"text-danger"},kr={class:"mb-3"},wr={key:0,class:"text-danger error-txt"},Sr={class:"mb-3"},Ar={key:0,class:"text-danger error-txt"},Br={class:"text-center"},Cr=Object(l["createTextVNode"])("Reset"),_r={class:"mt-4 text-sm text-success text-center"},Pr=Object(l["createElementVNode"])("small",{class:"text-success text-gradient font-weight-bold"},"Go back to ",-1),Ir=Object(l["createTextVNode"])("SignIn");function Dr(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[gr,Object(l["createElementVNode"])("div",fr,[Object(l["createElementVNode"])("div",Er,[Object(l["createElementVNode"])("div",Vr,[Object(l["createElementVNode"])("div",Nr,[xr,Object(l["createElementVNode"])("div",yr,[s.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vr,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",kr,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>s.credentials.new_password=e),placeholder:"password",type:"password",label:"Password",name:"pass"},null,512),[[l["vModelText"],s.credentials.new_password]]),""!==s.formValidation&&""!==s.formValidation["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",wr,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Sr,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"otp","onUpdate:modelValue":t[1]||(t[1]=e=>s.credentials.new_password_confirmation=e),placeholder:"confirm password",type:"password",label:"Confirm Password",name:"password"},null,512),[[l["vModelText"],s.credentials.new_password_confirmation]]),""!==s.formValidation&&""!==s.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ar,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Br,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.setNewPassword,variant:"gradient",color:"success",fullWidth:""},{default:Object(l["withCtx"])(()=>[Cr]),_:1},8,["onClick"])]),Object(l["createElementVNode"])("p",_r,[Pr,Object(l["createVNode"])(d,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold",style:{"background-color":"#573078"}},{default:Object(l["withCtx"])(()=>[Ir]),_:1})])])])])])])],4)],64)}var Tr={components:{Navbar:xn,MaterialButton:wn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{email:"",unauthorized:!1,formValidation:"",isOTP:!1,credentials:{email:"",otp:"",new_password:"",new_password_confirmation:""}}},methods:{...Object(tt["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Us()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async setNewPassword(){if(this.validateForm())return;this.credentials.email=this.$route.params.email,this.credentials.otp=this.$route.params.otp;let e=this.credentials;try{await it.post("/set_new_password",e),this.$router.push({name:"SignIn"})}catch(t){console.log(t)}}}};const Mr=ct()(Tr,[["render",Dr]]);var zr=Mr;const Fr={class:"bg-white"},Ur=Object(l["createElementVNode"])("div",{class:"container top-0 position-sticky z-index-sticky"},[Object(l["createElementVNode"])("div",{class:"row"},[Object(l["createElementVNode"])("div",{class:"col-12"})])],-1),Lr={class:"mt-0 main-content"},$r={class:"page-header min-vh-100"},qr={class:"container"},Rr={class:"row"},Hr={class:"col-6 d-lg-flex d-none h-100 my-auto pe-0 ps-0 position-absolute top-0 start-0 text-center justify-content-center flex-column"},Qr={class:"col-xl-4 col-lg-5 col-md-7 d-flex flex-column ms-auto me-auto ms-lg-auto me-lg-5"},Jr={class:"card card-plain"},Yr=Object(l["createElementVNode"])("div",{class:"pb-0 card-header bg-transparent mb-4"},[Object(l["createElementVNode"])("h4",{class:"font-weight-bolder"},"Sign Up"),Object(l["createElementVNode"])("p",{class:"mb-0"}," Enter your email and password to register ")],-1),Wr={class:"card-body"},Xr={role:"form"},Zr={class:"mb-3"},Kr={class:"mb-3"},Gr={class:"mb-3"},ei=Object(l["createTextVNode"])(" I agree the "),ti=Object(l["createElementVNode"])("a",{href:"../../../pages/privacy.html",class:"text-dark font-weight-bolder"},"Terms and Conditions",-1),ai={class:"text-center"},li=Object(l["createTextVNode"])("Sign Up"),ci={class:"px-1 pt-0 text-center card-footer px-lg-2"},oi={class:"mx-auto mb-4 text-sm"},si=Object(l["createTextVNode"])(" Don't have an account? "),ni=Object(l["createTextVNode"])("Sign In");function ri(e,t,c,o,s,n){const r=Object(l["resolveComponent"])("material-input"),i=Object(l["resolveComponent"])("material-checkbox"),d=Object(l["resolveComponent"])("material-button"),m=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Fr,[Ur,Object(l["createElementVNode"])("main",Lr,[Object(l["createElementVNode"])("section",null,[Object(l["createElementVNode"])("div",$r,[Object(l["createElementVNode"])("div",qr,[Object(l["createElementVNode"])("div",Rr,[Object(l["createElementVNode"])("div",Hr,[Object(l["createElementVNode"])("div",{class:"position-relative h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center",width:"100%"}])},null,4)]),Object(l["createElementVNode"])("div",Qr,[Object(l["createElementVNode"])("div",Jr,[Yr,Object(l["createElementVNode"])("div",Wr,[Object(l["createElementVNode"])("form",Xr,[Object(l["createElementVNode"])("div",Zr,[Object(l["createVNode"])(r,{id:"name",type:"text",label:"Name",name:"name",size:"lg"})]),Object(l["createElementVNode"])("div",Kr,[Object(l["createVNode"])(r,{id:"email",type:"email",label:"Email",name:"email",size:"lg"})]),Object(l["createElementVNode"])("div",Gr,[Object(l["createVNode"])(r,{id:"password",type:"password",label:"Password",name:"password",size:"lg"})]),Object(l["createVNode"])(i,{id:"flexCheckDefault",class:"font-weight-light",checked:""},{default:Object(l["withCtx"])(()=>[ei,ti]),_:1}),Object(l["createElementVNode"])("div",ai,[Object(l["createVNode"])(d,{class:"mt-4",variant:"gradient",color:"success",fullWidth:"",size:"lg"},{default:Object(l["withCtx"])(()=>[li]),_:1})])])]),Object(l["createElementVNode"])("div",ci,[Object(l["createElementVNode"])("p",oi,[si,Object(l["createVNode"])(m,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold"},{default:Object(l["withCtx"])(()=>[ni]),_:1})])])])])])])])])])])}const ii=["id","type","name","value","placeholder","isRequired","disabled"];function di(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["input-group",`input-group-${a.variant} ${s.getStatus(a.error,a.success)}`])},[Object(l["createElementVNode"])("label",{class:Object(l["normalizeClass"])("static"===a.variant?"":"form-label")},Object(l["toDisplayString"])(a.label),3),Object(l["createElementVNode"])("input",{id:a.id,type:a.type,class:Object(l["normalizeClass"])(["form-control",s.getClasses(a.size)]),name:a.name,value:a.value,placeholder:a.placeholder,isRequired:a.isRequired,disabled:a.disabled},null,10,ii)],2)}function mi(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}if(0!=document.querySelectorAll(".input-group").length){var bi=document.querySelectorAll("input.form-control");bi.forEach(e=>mi(e,{onfocus:"focused(this)",onfocusout:"defocused(this)"}))}function pi(){for(var e=document.querySelectorAll("input"),t=0;t<e.length;t++)e[t].hasAttribute("value")&&e[t].parentElement.classList.add("is-filled"),e[t].addEventListener("focus",(function(e){this.parentElement.classList.add("is-focused")}),!1),e[t].onkeyup=function(e){""!=this.value?this.parentElement.classList.add("is-filled"):this.parentElement.classList.remove("is-filled")},e[t].addEventListener("focusout",(function(e){""!=this.value&&this.parentElement.classList.add("is-filled"),this.parentElement.classList.remove("is-focused")}),!1)}var ui={name:"MaterialInput",props:{variant:{type:String,default:"outline"},label:{type:String,default:""},size:{type:String,default:"default"},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:""},id:{type:String,required:!0},value:{type:String,default:""},placeholder:{type:String,default:""},type:{type:String,default:"text"},isRequired:{type:Boolean,default:!1}},mounted(){pi()},methods:{getClasses:e=>{let t;return t=e?"form-control-"+e:null,t},getStatus:(e,t)=>{let a;return a=t?"is-valid":e?"is-invalid":null,a}}};const Oi=ct()(ui,[["render",di]]);var hi=Oi;const ji={class:"form-check p-0"},gi=["id","name","checked"],fi=["for"];function Ei(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ji,[Object(l["createElementVNode"])("input",{id:a.id,class:"form-check-input",type:"checkbox",name:a.name,checked:a.checked},null,8,gi),Object(l["createElementVNode"])("label",{for:a.id,class:"custom-control-label"},[Object(l["renderSlot"])(e.$slots,"default")],8,fi)])}var Vi={name:"MaterialCheckbox",props:{name:{type:String,default:""},id:{type:String,default:""},checked:Boolean}};const Ni=ct()(Vi,[["render",Ei]]);var xi=Ni;const yi=document.getElementsByTagName("body")[0];var vi={name:"sign-up",components:{MaterialInput:hi,MaterialCheckbox:xi,MaterialButton:wn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig(),yi.classList.remove("bg-gray-100")},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig(),yi.classList.add("bg-gray-100")},methods:{...Object(tt["d"])(["toggleEveryDisplay","toggleHideConfig"])}};const ki=ct()(vi,[["render",ri]]);var wi=ki;const Si={class:"container-fluid"},Ai={class:"row"},Bi={class:"col-12"},Ci={class:"card"},_i={class:"d-flex justify-content-between border-radius-lg pt-4"},Pi=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"SITES",-1),Ii=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),Di=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:" me-4 page-description"},[Object(l["createTextVNode"])(" In the Sites section, you can manage school by adding, editing, or deleting them. Additionally, you can track and update "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" the number of teachers and students associated with each site. This functionality ensures accurate and up-to-date information about each site. ")])],-1),Ti={class:"card-body px-0 pb-2"},Mi={class:"table-responsive p-0"},zi={class:"table align-items-center mb-0"},Fi=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Staff "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),Ui={key:0},Li=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),$i=[Li],qi={class:"align-middle text-center text-sm"},Ri={class:"text-xs font-weight-bold mb-0"},Hi={class:"d-flex"},Qi={class:"text-xs font-weight-bold mb-0"},Ji=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),Yi={class:"text-xs font-weight-bold mb-0"},Wi={class:"text-xs font-weight-bold mb-0"},Xi={class:"align-middle text-center"},Zi={class:"text-secondary text-xs font-weight-bold"},Ki={class:"align-middle text-center"},Gi={class:"text-secondary text-xs font-weight-bold"},ed={class:"align-middle text-center"},td={class:"text-secondary text-xs font-weight-bold"},ad={class:"align-middle text-center text-sm"},ld={class:"badge badge-sm bg-gradient-success"},cd={class:"align-middle text-center"},od=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),sd=["onClick"];function nd(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Si,[Object(l["createElementVNode"])("div",Ai,[Object(l["createElementVNode"])("div",Bi,[Object(l["createElementVNode"])("div",Ci,[Object(l["createElementVNode"])("div",_i,[Pi,s.userPermissions.create_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-school"}},{default:Object(l["withCtx"])(()=>[Ii]),_:1})):Object(l["createCommentVNode"])("",!0)]),Di,Object(l["createElementVNode"])("div",Ti,[Object(l["createElementVNode"])("div",Mi,[Object(l["createElementVNode"])("table",zi,[Fi,Object(l["createElementVNode"])("tbody",null,[0===o.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Ui,$i)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",qi,[Object(l["createElementVNode"])("p",Ri,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",Hi,[Object(l["createElementVNode"])("p",Qi,Object(l["toDisplayString"])(e.title),1),Ji])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Yi,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Wi,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",Xi,[Object(l["createElementVNode"])("span",Zi,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",Ki,[Object(l["createElementVNode"])("span",Gi,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",ed,[Object(l["createElementVNode"])("span",td,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",ad,[Object(l["createElementVNode"])("span",ld,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",cd,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[od]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,sd)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var rd={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{allSchools:"",schools:6,user:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await it.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await it.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("0b3c");const id=ct()(rd,[["render",nd]]);var dd=id;const md={class:"container-fluid"},bd={class:"row"},pd={class:"col-12"},ud={class:"card"},Od=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"ARCHIVED SITES")],-1),hd=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:" me-4 page-description"},[Object(l["createTextVNode"])(" In the Archived Sites section, you can view and restore archived school locations. The details displayed include the student count and teacher count "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" for each archived site. This allows you to manage and review historical site data effectively. ")])],-1),jd={class:"card-body px-0 pb-2"},gd=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),fd=Object(l["createTextVNode"])(" Bulk Restore "),Ed=[gd,fd],Vd={class:"table-responsive p-0"},Nd={class:"table align-items-center mb-0"},xd={class:""},yd={class:"form-check",style:{"margin-left":"-20px"}},vd=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),kd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID ",-1),wd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name ",-1),Sd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),Ad=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country ",-1),Bd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation ",-1),Cd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Teachers ",-1),_d=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students ",-1),Pd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),Id={key:0},Dd=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),Td=[Dd],Md={class:"align-middle text-center text-sm"},zd={class:"form-check"},Fd=["checked","onChange"],Ud=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Ld={class:"align-middle text-center text-sm"},$d={class:"text-xs font-weight-bold mb-0"},qd={class:"d-flex"},Rd={class:"text-xs font-weight-bold mb-0"},Hd=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),Qd={class:"text-xs font-weight-bold mb-0"},Jd={class:"text-xs font-weight-bold mb-0"},Yd={class:"align-middle text-center"},Wd={class:"text-secondary text-xs font-weight-bold"},Xd={class:"align-middle text-center"},Zd={class:"text-secondary text-xs font-weight-bold"},Kd={class:"align-middle text-center"},Gd={class:"text-secondary text-xs font-weight-bold"},em={class:"align-middle text-center text-sm"},tm={class:"badge badge-sm bg-gradient-success"};function am(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",md,[Object(l["createElementVNode"])("div",bd,[Object(l["createElementVNode"])("div",pd,[Object(l["createElementVNode"])("div",ud,[Od,hd,Object(l["createElementVNode"])("div",jd,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[0]||(t[0]=e=>s.confirmAction("restore"))},Ed),Object(l["createElementVNode"])("div",Vd,[Object(l["createElementVNode"])("table",Nd,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",xd,[Object(l["createElementVNode"])("div",yd,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[1]||(t[1]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),vd])]),kd,wd,Sd,Ad,Bd,Cd,_d,Pd])]),Object(l["createElementVNode"])("tbody",null,[0===o.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Id,Td)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Md,[Object(l["createElementVNode"])("div",zd,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.id),onChange:t=>s.selectRecord(e.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,Fd),Ud])]),Object(l["createElementVNode"])("td",Ld,[Object(l["createElementVNode"])("p",$d,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",qd,[Object(l["createElementVNode"])("p",Rd,Object(l["toDisplayString"])(e.title),1),Hd])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Qd,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Jd,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",Yd,[Object(l["createElementVNode"])("span",Wd,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",Xd,[Object(l["createElementVNode"])("span",Zd,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",Kd,[Object(l["createElementVNode"])("span",Gd,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",em,[Object(l["createElementVNode"])("span",tm,Object(l["toDisplayString"])(e.status),1)])]))),128))])])])])])])])])}var lm={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getAllSchools(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{selectall:!1,selectedRecords:[],allSchools:"",schools:6,user:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{confirmAction(e){jo.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&"restore"==e&&this.bulkRestore()})},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await it.post("/bulkRestoreSchools",e);this.snackbarMsg(t.data.message),this.getAllSchools()}else this.snackbarMsg("Error: data not selected")},selectAll(){this.selectedRecords=[],this.allSchools.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/archivedSchools";"organization_admin"==this.user.role&&(e="/archivedSchools/"+this.user.id);const t=await it.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await it.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("ca92");const cm=ct()(lm,[["render",am]]);var om=cm;Object(l["pushScopeId"])("data-v-057bb13a");const sm={class:"container-fluid py-4"},nm={class:"row"},rm={class:"col-12"},im={class:"card my-4"},dm={class:"d-flex justify-content-between  border-radius-lg pt-4 "},mm=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Site",-1),bm=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 px-4 py-2 border-radius-lg"}," Back ",-1),pm={class:"card-body px-0 pb-2"},um={class:"table-responsive p-0"},Om={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},hm={key:0,class:"mb-3 change-pass-alert"},jm=Object(l["createElementVNode"])("br",null,null,-1),gm={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},fm={class:"form-bg container p-4 ms-2"},Em={class:"card card-plain"},Vm={class:"card-body"},Nm={role:"form"},xm={class:"mb-1"},ym=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),vm={key:0,class:"text-danger error-txt"},km={class:"mb-1"},wm=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),Sm={key:0,class:"text-danger error-txt"},Am={class:"mb-1"},Bm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),Cm={key:0,class:"text-danger error-txt"},_m={class:"mb-1"},Pm=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),Im={key:0,class:"text-danger error-txt"},Dm={class:"mb-1"},Tm=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),Mm={key:0,class:"text-danger error-txt"},zm={class:"mb-1"},Fm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),Um=Object(l["createElementVNode"])("br",null,null,-1),Lm=["value"],$m={key:0,class:"text-danger error-txt"},qm={class:"mb-1"},Rm=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),Hm=Object(l["createElementVNode"])("br",null,null,-1),Qm=["value"],Jm={key:0,class:"text-danger error-txt"},Ym={class:"mb-1"},Wm=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),Xm={key:0,class:"text-danger error-txt"},Zm={class:"mb-1"},Km=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),Gm={key:0,class:"text-danger error-txt"},eb={class:"mb-1"},tb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),ab=Object(l["createElementVNode"])("br",null,null,-1),lb=["value"],cb={key:0,class:"text-danger error-txt"},ob={class:"mt-4 d-flex justify-content-center"};function sb(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",sm,[Object(l["createElementVNode"])("div",nm,[Object(l["createElementVNode"])("div",rm,[Object(l["createElementVNode"])("div",im,[Object(l["createElementVNode"])("div",dm,[mm,Object(l["createVNode"])(n,{to:{name:"list-schools"}},{default:Object(l["withCtx"])(()=>[bm]),_:1})]),Object(l["createElementVNode"])("div",pm,[Object(l["createElementVNode"])("div",um,[Object(l["createElementVNode"])("div",Om,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hm,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),jm]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",gm,[Object(l["createElementVNode"])("div",fm,[Object(l["createElementVNode"])("div",Em,[Object(l["createElementVNode"])("div",Vm,[Object(l["createElementVNode"])("form",Nm,[Object(l["createElementVNode"])("div",xm,[ym,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],o.newSchool.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vm,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",km,[wm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],o.newSchool.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Sm,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Am,[Bm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newSchool.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Cm,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_m,[Pm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],o.newSchool.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Im,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Dm,[Tm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newSchool.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Mm,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zm,[Fm,Um,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Lm))),128))],512),[[l["vModelSelect"],o.newSchool.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$m,"Organisation is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qm,[Rm,Hm,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Qm))),128))],512),[[l["vModelSelect"],o.newSchool.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jm,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Ym,[Wm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>o.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newSchool.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xm,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Zm,[Km,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>o.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],o.newSchool.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Gm,"ZIP code is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eb,[tb,ab,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,lb))),128))],512),[[l["vModelSelect"],o.newSchool.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cb,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ob,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>s.saveNewSchool&&s.saveNewSchool(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var nb={name:"",components:{},mounted(){this.getUser(),this.getOrganizations(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_site");let e=!1,t="";t=Us()(this.newSchool);for(let a in this.newSchool)""!==this.newSchool[a]&&void 0!==this.newSchool[a]||"organization_id"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewSchool(){if(!this.validateForm())try{let e="/createSchool";"organization_admin"==this.user.role&&(e="/createSchool/"+this.user.id),await it.post(e,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Saved Successfuly"),this.isError=!1}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}},async getOrganizations(){try{const e=await it.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("de13");const rb=ct()(nb,[["render",sb],["__scopeId","data-v-057bb13a"]]);var ib=rb;Object(l["pushScopeId"])("data-v-8fc9cd78");const db={class:"container-fluid py-4"},mb={class:"row"},bb={class:"col-12"},pb={class:"card my-4"},ub={class:"d-flex justify-content-between border-radius-lg pt-4"},Ob=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Site",-1),hb=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),jb={class:"card-body px-0 pb-2"},gb={class:"table-responsive p-0"},fb={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Eb={key:0,class:"mb-3 change-pass-alert"},Vb=Object(l["createElementVNode"])("br",null,null,-1),Nb={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},xb={class:"form-bg container p-4 ms-2"},yb={class:"card card-plain"},vb={class:"card-body"},kb={role:"form"},wb={class:"mb-1"},Sb=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),Ab={key:0,class:"text-danger error-txt"},Bb={class:"mb-1"},Cb=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),_b={key:0,class:"text-danger error-txt"},Pb={class:"mb-1"},Ib=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),Db={key:0,class:"text-danger error-txt"},Tb={class:"mb-1"},Mb=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),zb={key:0,class:"text-danger error-txt"},Fb={class:"mb-1"},Ub=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),Lb={key:0,class:"text-danger error-txt"},$b={key:0,class:"mb-1"},qb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),Rb=Object(l["createElementVNode"])("br",null,null,-1),Hb=["value"],Qb={key:0,class:"text-danger error-txt"},Jb={class:"mb-1"},Yb=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),Wb=Object(l["createElementVNode"])("br",null,null,-1),Xb=["value"],Zb={key:0,class:"text-danger error-txt"},Kb={class:"mb-1"},Gb=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),ep={key:0,class:"text-danger error-txt"},tp={class:"mb-1"},ap=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),lp={key:0,class:"text-danger error-txt"},cp={class:"mb-1"},op=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),sp=Object(l["createElementVNode"])("br",null,null,-1),np=["value"],rp={key:0,class:"text-danger error-txt"},ip={class:"mt-4 d-flex justify-content-center"};function dp(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",db,[Object(l["createElementVNode"])("div",mb,[Object(l["createElementVNode"])("div",bb,[Object(l["createElementVNode"])("div",pb,[Object(l["createElementVNode"])("div",ub,[Ob,Object(l["createVNode"])(n,{to:{name:"list-schools"}},{default:Object(l["withCtx"])(()=>[hb]),_:1})]),Object(l["createElementVNode"])("div",jb,[Object(l["createElementVNode"])("div",gb,[Object(l["createElementVNode"])("div",fb,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Eb,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Vb]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Nb,[Object(l["createElementVNode"])("div",xb,[Object(l["createElementVNode"])("div",yb,[Object(l["createElementVNode"])("div",vb,[Object(l["createElementVNode"])("form",kb,[Object(l["createElementVNode"])("div",wb,[Sb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],o.newSchool.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ab,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Bb,[Cb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],o.newSchool.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_b,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Pb,[Ib,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newSchool.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Db,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Tb,[Mb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],o.newSchool.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zb,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Fb,[Ub,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newSchool.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Lb,"Address is required")):Object(l["createCommentVNode"])("",!0)]),"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",$b,[qb,Rb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Hb))),128))],512),[[l["vModelSelect"],o.newSchool.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qb,"Organization is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Jb,[Yb,Wb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Xb))),128))],512),[[l["vModelSelect"],o.newSchool.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Zb,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Kb,[Gb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>o.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newSchool.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ep,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",tp,[ap,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>o.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],o.newSchool.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",lp,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",cp,[op,sp,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,np))),128))],512),[[l["vModelSelect"],o.newSchool.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rp,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ip,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>s.updateData&&s.updateData(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn ms-3 text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var mp={name:"",components:{},mounted(){this.getUser(),this.editSchool(),this.getOrganizations(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],schoolData:"",newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_site");let e=!1,t="";t=Us()(this.newSchool);for(let a in this.newSchool)""===this.newSchool[a]||void 0===this.newSchool[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editSchool(){let e=this.$route.params.id;try{const t=await it.get("/editSchool/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newSchool.organization_id=t.organization_id,this.newSchool.website=t.website,this.newSchool.title=t.title,this.newSchool.website=t.website,this.newSchool.email=t.email,this.newSchool.phone=t.phone,this.newSchool.country=t.country,this.newSchool.city=t.city,this.newSchool.state=t.state,this.newSchool.zip=t.zip,this.newSchool.address=t.address,this.newSchool.status=t.status,this.newSchool.description=t.description)},async updateData(){if(this.validateForm())return;let e=this.$route.params.id;try{let t="/updateSchool/"+e;"organization_admin"==this.user.role&&(t="/updateSchool/"+e+"/"+this.user.id),await it.put(t,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getOrganizations(){try{const e=await it.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("9c6f");const bp=ct()(mp,[["render",dp],["__scopeId","data-v-8fc9cd78"]]);var pp=bp;Object(l["pushScopeId"])("data-v-1ae2038f");const up={class:"row"},Op={class:"col text-end"},hp={class:"row"},jp={class:"col-12 col-md-6 col-xl-6 position-relative"},gp={class:"card card-plain h-100"},fp=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Branding Settings")],-1),Ep={class:"p-3 card-body"},Vp={class:"list-group"},Np={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},xp={class:"col-md-5 mx-auto bg-white new-pass p-2"},yp=Object(l["createElementVNode"])("label",null,"Primary Color",-1),vp=Object(l["createElementVNode"])("br",null,null,-1),kp=Object(l["createElementVNode"])("label",null,"Secondary Color",-1),wp=Object(l["createElementVNode"])("br",null,null,-1),Sp=Object(l["createElementVNode"])("label",null,"Logo",-1),Ap=["src"],Bp=Object(l["createElementVNode"])("br",null,null,-1),Cp=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),_p={class:"col-12 col-md-5 col-xl-6 position-relative"},Pp={class:"card card-plain h-100"},Ip=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Finance Coordinator Email")],-1),Dp={class:"p-3 card-body"},Tp={class:"list-group"},Mp={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},zp={class:"col-md-5 mx-auto bg-white new-pass p-2"},Fp=Object(l["createElementVNode"])("label",null,"Email",-1),Up=Object(l["createElementVNode"])("br",null,null,-1);function Lp(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",up,[Object(l["createElementVNode"])("div",Op,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ")])]),Object(l["createElementVNode"])("div",hp,[Object(l["createElementVNode"])("div",jp,[Object(l["createElementVNode"])("div",gp,[fp,Object(l["createElementVNode"])("div",Ep,[Object(l["createElementVNode"])("ul",Vp,[Object(l["createElementVNode"])("li",Np,[Object(l["createElementVNode"])("div",xp,[yp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.branding.primaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.branding.primaryColor]]),vp,kp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.branding.SecondaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.branding.SecondaryColor]]),wp,Sp,Object(l["createElementVNode"])("input",{onChange:t[3]||(t[3]=(...e)=>s.onFileChange&&s.onFileChange(...e)),id:"card-holder-name",type:"file",class:"bg-white w-100  mb-2"},null,32),o.imageUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:o.imageUrl,height:"60",width:"60",alt:"Selected Image"},null,8,Ap)):Object(l["createCommentVNode"])("",!0),Bp,Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=e=>s.updateBranding()),style:{"font-size":"12px","background-color":"#573078"},class:"btn p-2 mb-3 mt-2 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),Cp]),Object(l["createElementVNode"])("div",_p,[Object(l["createElementVNode"])("div",Pp,[Ip,Object(l["createElementVNode"])("div",Dp,[Object(l["createElementVNode"])("ul",Tp,[Object(l["createElementVNode"])("li",Mp,[Object(l["createElementVNode"])("div",zp,[Fp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.finance_coordinator_email=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.finance_coordinator_email]]),Up,Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=e=>s.updateFinanceCoordiantorEmail()),style:{"font-size":"12px","background-color":"#573078"},class:"btn save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Save ")])])])])])])])])}Object(l["popScopeId"])();var $p={mounted(){this.getSettings(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"])},data(){return{dataLoaded:!1,userCards:"",imageUrl:null,selectedFile:null,finance_coordinator_email:null,branding:{primaryColor:"",SecondaryColor:"",logo:""}}},methods:{addCard(){let e=this.$route.params.id;this.$router.push({name:"card-school",params:{id:e}})},onFileChange(e){const t=e.target.files[0];t&&(this.imageUrl=URL.createObjectURL(t),this.selectedFile=t)},async getSettings(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e);try{let e=await it.post("/getSettings",t);this.branding.primaryColor=Us()(e.data.primary_color),this.branding.SecondaryColor=Us()(e.data.secondary_color),this.imageUrl=this.$env_vars.BASE_URL+e.data.logo,this.finance_coordinator_email=e.data.finance_coordinator_email}catch(a){console.log(a)}},async updateBranding(){let e=this.$route.params.id;const t=new FormData;t.append("logo",this.selectedFile),t.append("primary_color",this.branding.primaryColor),t.append("secondary_color",this.branding.SecondaryColor),t.append("school_id",e);try{await it.post("/storebranding",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async updateFinanceCoordiantorEmail(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e),t.append("finance_coordinator_email",this.finance_coordinator_email);try{await it.post("/updateFinanceCoordiantorEmail",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t,type:"school"};try{const e=await it.post("/getPaymentMethods",a);this.userCards=e.data.data,this.dataLoaded=!0}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await it.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})}}};a("a13f");const qp=ct()($p,[["render",Lp],["__scopeId","data-v-1ae2038f"]]);var Rp=qp;const Hp={class:"card"},Qp=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),Jp={class:"card-body"},Yp=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2"></div></div>',3),Wp={class:"row d-flex justify-content-center"};function Xp(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",Hp,[Qp,Object(l["createElementVNode"])("div",Jp,[Yp,Object(l["createElementVNode"])("div",Wp,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>s.submitPaymentMethod&&s.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"btn me-3 w-20 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var Zp={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.$globalHelper.buttonColor()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),o=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),o.parentNode.insertBefore(c,o)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=this.$route.params.id,a={card_token:e,school_id:t};try{await it.post("/createSchoolCard",a),this.$router.push({name:"settings-school",params:{id:t}})}catch(l){console.log(l),this.snackbarMsg("Something Went Wrong")}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("1504");const Kp=ct()(Zp,[["render",Xp]]);var Gp=Kp;const eu={class:"container-fluid"},tu={class:"row"},au={class:"col-12"},lu={class:"card px-3"},cu={class:"d-flex justify-content-between  border-radius-lg pt-4"},ou=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STUDENTS",-1),su=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-2 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),nu=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee student accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each student. ")])],-1),ru={class:"filter-container"},iu={class:"row"},du={class:"col-6"},mu={style:{display:"flex"}},bu=["value"],pu={class:"col-12 col-md-3 col-sm-6",style:{"padding-top":"10px"}},uu=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),Ou=Object(l["createTextVNode"])(" Export To XLS "),hu=[uu,Ou],ju={class:"col-12 col-md-3 col-sm-6",style:{"padding-top":"10px"}},gu=Object(l["createElementVNode"])("i",{class:"fas fa-credit-card payment-icon me-1"},null,-1),fu=Object(l["createTextVNode"])(" Bulk Topup "),Eu=[gu,fu],Vu={class:"card-body px-0 pb-2"},Nu={class:"table-responsive p-0 student-table"},xu={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"0px !important"}},yu={class:"thead"},vu={class:"pe-5"},ku={class:"form-check",style:{"margin-left":"0px !important"}},wu=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Su=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),Au=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),Bu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),Cu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),_u=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," FSM ",-1),Pu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Balance ",-1),Iu={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},Du={key:1,class:"text-center text-uppercase text-xxs font-weight-bolder"},Tu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),Mu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),zu={key:0},Fu=Object(l["createElementVNode"])("td",{colspan:"11",class:"text-center"}," No data available. ",-1),Uu=[Fu],Lu={class:"text-sm"},$u={class:"form-check",style:{"margin-left":"17px !important"}},qu=["checked","onChange"],Ru=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Hu={class:"align-middle text-center text-sm"},Qu={class:"text-xs font-weight-bold mb-0"},Ju={class:"text-xs font-weight-bold mb-0"},Yu={class:"text-xs font-weight-bold mb-0"},Wu={class:"text-xs mb-0",style:{"font-size":"8px"}},Xu={class:"align-middle text-center"},Zu={class:"text-secondary text-xs font-weight-bold"},Ku={class:"align-middle text-center"},Gu={class:"align-middle text-center"},eO={class:"text-secondary text-xs font-weight-bold"},tO={key:0,class:"align-middle text-center"},aO=["onClick"],lO={key:1,class:"align-middle text-center"},cO=["onClick"],oO={class:"align-middle text-center text-sm"},sO={class:"badge badge-sm bg-gradient-success"},nO={class:"align-middle text-center"},rO=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),iO=["onClick"],dO={class:"row"},mO={class:"col-md-12 col-lg-12"},bO={class:"pagination-container"},pO={class:"entries-dropdown"},uO=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),OO=["value"],hO={class:"pagination-wrapper"},jO={class:"pagination"},gO=["onClick"];function fO(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("BulkTopup");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",eu,[Object(l["createElementVNode"])("div",tu,[Object(l["createElementVNode"])("div",au,[Object(l["createElementVNode"])("div",lu,[Object(l["createElementVNode"])("div",cu,[ou,s.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-student"}},{default:Object(l["withCtx"])(()=>[su]),_:1})):Object(l["createCommentVNode"])("",!0)]),nu,Object(l["createElementVNode"])("div",null,[Object(l["createVNode"])(r,{show:o.showModal,task:e.task,onClose:t[0]||(t[0]=e=>o.showModal=!1),onUpdateTask:s.updateAmount},null,8,["show","task","onUpdateTask"]),Object(l["createElementVNode"])("div",ru,[Object(l["createElementVNode"])("div",iu,[Object(l["createElementVNode"])("div",du,[Object(l["createElementVNode"])("span",mu,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"ms-2 input-box filter-box",onKeyup:t[1]||(t[1]=(...e)=>s.filterStudents&&s.filterStudents(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>o.searchString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.searchString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[3]||(t[3]=(...e)=>s.filterStudents&&s.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[4]||(t[4]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,bu))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",pu,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.exportTableToXLS())},hu)]),Object(l["createElementVNode"])("div",ju,[s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.showModal=!0)},Eu)):Object(l["createCommentVNode"])("",!0)])])])]),Object(l["createElementVNode"])("div",Vu,[Object(l["createElementVNode"])("div",Nu,[Object(l["createElementVNode"])("table",xu,[Object(l["createElementVNode"])("thead",yu,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",vu,[Object(l["createElementVNode"])("div",ku,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),wu])]),Su,Au,Bu,Cu,_u,Pu,s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",Iu," Wallet ")):Object(l["createCommentVNode"])("",!0),s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",Du," Topup ")):Object(l["createCommentVNode"])("",!0),Tu,Mu])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",zu,Uu)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Lu,[Object(l["createElementVNode"])("div",$u,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.user.id),onChange:t=>s.selectRecord(e.user_id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,qu),Ru])]),Object(l["createElementVNode"])("td",Hu,[Object(l["createElementVNode"])("p",Qu,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Ju,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Yu,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",Wu,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",Xu,[Object(l["createElementVNode"])("span",Zu,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",Ku,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["text-secondary text-xs font-weight-bold",null===e.fsm_amount?"text-danger":"text-success"])},Object(l["toDisplayString"])(null!==e.fsm_amount?"£"+s.formattedPrice(e.fsm_amount):"No FSM"),3)]),Object(l["createElementVNode"])("td",Gu,[Object(l["createElementVNode"])("span",eO,"£"+Object(l["toDisplayString"])(s.formattedPrice(e.user.balance?e.user.balance.ballance:0)),1)]),s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",tO,[Object(l["createElementVNode"])("i",{onClick:t=>s.gotoBallance(e.user.id),class:"hover-pointer fas fa-donate fs-5 me-2"},null,8,aO)])):Object(l["createCommentVNode"])("",!0),s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",lO,[Object(l["createElementVNode"])("i",{onClick:t=>s.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,cO)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",oO,[Object(l["createElementVNode"])("span",sO,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",nO,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-student",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[rO]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,iO)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",dO,[Object(l["createElementVNode"])("div",mO,[Object(l["createElementVNode"])("div",bO,[Object(l["createElementVNode"])("div",pO,[uO,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,OO))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",hO,[Object(l["createElementVNode"])("ul",jO,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,gO)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])}Object(l["pushScopeId"])("data-v-268f943f");const EO={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},VO={class:"modal-dialog modal-dialog-centered"},NO={class:"modal-content"},xO={class:"modal-header"},yO=Object(l["createElementVNode"])("h5",{class:"h5 modal-title"},"Bulk Topup",-1),vO=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),kO=[vO],wO={class:"pt-4 modal-body"},SO=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),AO={class:"mb-4 input-group"},BO=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),CO={key:0,class:"alert alert-success"},_O={class:"text-end"};function PO(e,t,a,c,o,s){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",EO,[Object(l["createElementVNode"])("div",VO,[Object(l["createElementVNode"])("div",NO,[Object(l["createElementVNode"])("div",xO,[yO,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e)),"aria-label":"Close"},kO)]),Object(l["createElementVNode"])("div",wO,[SO,Object(l["createElementVNode"])("div",AO,[BO,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>o.addedBalance=e),class:"form-control",placeholder:"Topup amount",type:"number",min:"0"},null,512),[[l["vModelText"],o.addedBalance]])]),o.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",CO,Object(l["toDisplayString"])(o.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",_O,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>s.saveChanges&&s.saveChanges(...e)),class:"m-1 btn btn-primary"}," Topup "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var IO={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},mounted(){this.$globalHelper.buttonColor()},computed:{},data(){return{addedBalance:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},saveChanges(){this.$emit("update-task",this.addedBalance),this.closeModal(),this.addedBalance=null}}};a("30fe");const DO=ct()(IO,[["render",PO],["__scopeId","data-v-268f943f"]]);var TO=DO,MO=a("25ca"),zO={name:"tables",mounted(){this.setColor(),this.getUser(),this.getFilterString.filterBy?(this.filterBy=this.getFilterString.filterBy,this.searchString=this.getFilterString.searchString,this.filterStudents()):this.getAllStudents(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_student"),this.$globalHelper.buttonColor()},components:{BulkTopup:TO},beforeRouteLeave(e,t,a){if("payment_account"!==e.name&&"balance"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Name",searchString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(tt["c"])(["getBrandingSetting","getFilterString"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(tt["b"])(["updateFilterString"]),topUps(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/payment_account/"+e)},gotoBallance(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/balance/"+e)},exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"students_table.xlsx")},async updateAmount(e){this.topUpAmount=e;let t=[];this.selectedRecords.filter(e=>{e.value&&t.push(e.id)});let a={topup_amount:this.topUpAmount,students:t};if(t.length&&null!=this.topUpAmount)try{const e=await it.post("/bulkTopUp",a);this.snackbarMsg(e.data.message),this.getAllStudents(),this.selectedRecords=[],this.topUpAmount=null,this.selectall=!1}catch(l){console.log(l)}else this.$snackbar.add({type:"error",text:"Please select the students and enter amount!",background:"white"})},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t?t.value=!1:this.selectedRecords.push({id:e,value:!0})},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.searchString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.searchString)return void this.getAllStudents();let e={type:this.filterBy,value:this.searchString,status:"active"};try{const t=await it.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await it.post("getAllStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await it.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("8de3");const FO=ct()(zO,[["render",fO]]);var UO=FO;const LO={class:"container-fluid"},$O={class:"row"},qO={class:"col-12"},RO={class:"card px-3"},HO=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-2"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED-STUDENTS"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Every archived student can be found in this table. Here, you can manage archived student accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),QO={class:"card-body px-0 pb-2"},JO={class:"filter-container mb-1",style:{"margin-top":"-11px"}},YO={class:"row",style:{width:"100%"}},WO={class:"col-4"},XO={style:{display:"flex"}},ZO=["value"],KO={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"10px"}},GO=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon"},null,-1),eh=Object(l["createTextVNode"])(" Export To XLS "),th=[GO,eh],ah={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"10px"}},lh=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon"},null,-1),ch=Object(l["createTextVNode"])(" Bulk Restore "),oh=[lh,ch],sh={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"10px"}},nh=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon"},null,-1),rh=Object(l["createTextVNode"])(" Bulk Delete "),ih=[nh,rh],dh={class:"table-responsive p-0 student-table"},mh={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"0px !important"}},bh={class:""},ph={class:"form-check",style:{"margin-left":"-20px"}},uh=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Oh=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),hh=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),jh=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),gh=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),fh=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),Eh={key:0},Vh=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),Nh=[Vh],xh={class:"align-middle text-center text-sm"},yh={class:"form-check"},vh=["checked","onChange"],kh=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),wh={class:"align-middle text-center text-sm"},Sh={class:"text-xs font-weight-bold mb-0"},Ah={class:"text-xs font-weight-bold mb-0"},Bh={class:"text-xs font-weight-bold mb-0"},Ch={class:"text-xs mb-0",style:{"font-size":"8px"}},_h={class:"align-middle text-center"},Ph={class:"text-secondary text-xs font-weight-bold"},Ih={class:"align-middle text-center text-sm"},Dh={class:"badge badge-sm bg-gradient-success"},Th={class:"row"},Mh={class:"col-md-12 col-lg-12"},zh={class:"pagination-container"},Fh={class:"entries-dropdown"},Uh=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),Lh=["value"],$h={class:"pagination-wrapper"},qh={class:"pagination"},Rh=["onClick"];function Hh(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LO,[Object(l["createElementVNode"])("div",$O,[Object(l["createElementVNode"])("div",qO,[Object(l["createElementVNode"])("div",RO,[HO,Object(l["createElementVNode"])("div",QO,[Object(l["createElementVNode"])("div",JO,[Object(l["createElementVNode"])("div",YO,[Object(l["createElementVNode"])("div",WO,[Object(l["createElementVNode"])("span",XO,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"ms-2 input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterStudents&&s.filterStudents(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterStudents&&s.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,ZO))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",KO,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},th)]),Object(l["createElementVNode"])("div",ah,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.confirmAction("restore"))},oh)]),Object(l["createElementVNode"])("div",sh,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.confirmAction("delete"))},ih)):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",dh,[Object(l["createElementVNode"])("table",mh,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",bh,[Object(l["createElementVNode"])("div",ph,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),uh])]),Oh,hh,jh,gh,fh])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Eh,Nh)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",xh,[Object(l["createElementVNode"])("div",yh,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.user.id),onChange:t=>s.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,vh),kh])]),Object(l["createElementVNode"])("td",wh,[Object(l["createElementVNode"])("p",Sh,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Ah,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Bh,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",Ch,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",_h,[Object(l["createElementVNode"])("span",Ph,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",Ih,[Object(l["createElementVNode"])("span",Dh,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",Th,[Object(l["createElementVNode"])("div",Mh,[Object(l["createElementVNode"])("div",zh,[Object(l["createElementVNode"])("div",Fh,[Uh,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,Lh))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",$h,[Object(l["createElementVNode"])("ul",qh,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,Rh)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])}var Qh={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStudents(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_student")},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,selectall:!1,selectedRecords:[],filterBy:"Name",seachString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"archived_students.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await it.post("/bulkDeleteStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await it.post("/bulkRestoreStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){jo.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await it.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await it.post("archivedStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await it.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("2adb");const Jh=ct()(Qh,[["render",Hh]]);var Yh=Jh;Object(l["pushScopeId"])("data-v-6a0120de");const Wh={class:"container-fluid py-4"},Xh={class:"row"},Zh={class:"col-12"},Kh={class:"card my-4"},Gh={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},ej=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Student",-1),tj=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),aj={class:"card-body px-0 pb-2"},lj={class:"table-responsive p-0"},cj={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},oj={key:0,class:"mb-3 change-pass-alert"},sj=Object(l["createElementVNode"])("br",null,null,-1),nj={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},rj={class:"form-bg container p-4"},ij=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),dj={class:"card card-plain"},mj={class:"card-body"},bj={role:"form"},pj={class:"mb-1"},uj=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Oj={key:0,class:"text-danger error-txt"},hj={class:"mb-1"},jj=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),gj={key:0,class:"text-danger error-txt"},fj={class:"mb-1"},Ej=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Vj={key:0,class:"text-danger error-txt"},Nj={class:"mb-1"},xj=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),yj={key:0,class:"text-danger error-txt"},vj={class:"mb-1"},kj=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),wj={key:0,class:"text-danger error-txt"},Sj={class:"mb-1"},Aj=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Bj=Object(l["createElementVNode"])("br",null,null,-1),Cj=["value"],_j={key:0,class:"text-danger error-txt"},Pj={class:"mb-1"},Ij=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Dj=Object(l["createElementVNode"])("br",null,null,-1),Tj=["value"],Mj={key:0,class:"text-danger error-txt"},zj={class:"mb-1"},Fj=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Uj=Object(l["createElementVNode"])("br",null,null,-1),Lj=["value"],$j={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},qj={class:""};function Rj(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Wh,[Object(l["createElementVNode"])("div",Xh,[Object(l["createElementVNode"])("div",Zh,[Object(l["createElementVNode"])("div",Kh,[Object(l["createElementVNode"])("div",Gh,[ej,Object(l["createVNode"])(n,{to:{name:"list-students"}},{default:Object(l["withCtx"])(()=>[tj]),_:1})]),Object(l["createElementVNode"])("div",aj,[Object(l["createElementVNode"])("div",lj,[Object(l["createElementVNode"])("div",cj,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oj,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),sj]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",nj,[Object(l["createElementVNode"])("div",rj,[ij,Object(l["createElementVNode"])("div",dj,[Object(l["createElementVNode"])("div",mj,[Object(l["createElementVNode"])("form",bj,[Object(l["createElementVNode"])("div",pj,[uj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStudent.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Oj,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hj,[jj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStudent.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gj,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",fj,[Ej,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStudent.student_id=e),type:"text",placeholder:"Student ID",name:"student_id"},null,512),[[l["vModelText"],o.newStudent.student_id]]),""!==o.formValidation&&""!==o.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Vj,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Nj,[xj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStudent.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],o.newStudent.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yj,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",vj,[kj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStudent.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",wj,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Sj,[Aj,Bj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,Cj))),128))],512),[[l["vModelSelect"],o.newStudent.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_j,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Pj,[Ij,Dj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Tj))),128))],512),[[l["vModelSelect"],o.newStudent.fsm]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Mj,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zj,[Fj,Uj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Lj))),128))],512),[[l["vModelSelect"],o.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",$j,[Object(l["createElementVNode"])("div",qj,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.saveNewStudent&&s.saveNewStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Student")])])])])])])])])])}Object(l["popScopeId"])();var Hj={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_student")},computed:{formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{selected:null,fsm:[!1,!0],availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",multiValue:"",newStudent:{mifare_id:"",school_id:"",student_id:"",attribute_id:"",attributes:[],first_name:"",last_name:"",email:"",status:"",fsm:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_student");let e=!1,t="";t=Us()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&void 0!==this.newStudent[a]||"attribute_id"===a||"date_of_birth"===a||"add_amount"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStudent(){if(!this.validateForm())try{await it.post("/createStudent",this.newStudent),this.isError=!1,this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await it.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("26db");const Qj=ct()(Hj,[["render",Rj],["__scopeId","data-v-6a0120de"]]);var Jj=Qj;Object(l["pushScopeId"])("data-v-1d405672");const Yj={class:"container-fluid py-4"},Wj={class:"row"},Xj={class:"col-12"},Zj={class:"card my-4"},Kj={class:"d-flex justify-content-between border-radius-lg pt-4"},Gj=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Student",-1),eg=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),tg={class:"card-body px-0 pb-2"},ag={class:"table-responsive p-0"},lg={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},cg={key:0,class:"mb-3 change-pass-alert"},og=Object(l["createElementVNode"])("br",null,null,-1),sg={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},ng={class:"form-bg container p-4"},rg=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),ig={class:"card card-plain"},dg={class:"card-body"},mg={role:"form"},bg={class:"mb-1"},pg=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),ug={key:0,class:"text-danger error-txt"},Og={class:"mb-1"},hg=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),jg={key:0,class:"text-danger error-txt"},gg={class:"mb-1"},fg=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Eg={key:0,class:"text-danger error-txt"},Vg={class:"mb-1"},Ng=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),xg={key:0,class:"text-danger error-txt"},yg={class:"mb-1"},vg=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),kg={key:0,class:"text-danger error-txt"},wg={class:"mb-1"},Sg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Ag=Object(l["createElementVNode"])("br",null,null,-1),Bg=["value"],Cg={key:0,class:"text-danger error-txt"},_g={class:"mb-1"},Pg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Ig=Object(l["createElementVNode"])("br",null,null,-1),Dg=["value"],Tg={key:0,class:"text-danger error-txt"},Mg={class:"mb-1"},zg=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),Fg={class:"mb-1"},Ug=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Lg=Object(l["createElementVNode"])("br",null,null,-1),$g=["value"],qg={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},Rg={class:"form-bg container p-4"},Hg=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),Qg=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),Jg={class:"card card-plain"},Yg={class:"card-body"},Wg={role:"form"},Xg={class:"mb-1"},Zg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),Kg={class:"mb-1"},Gg=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),ef={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},tf={class:""};function af(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Yj,[Object(l["createElementVNode"])("div",Wj,[Object(l["createElementVNode"])("div",Xj,[Object(l["createElementVNode"])("div",Zj,[Object(l["createElementVNode"])("div",Kj,[Gj,Object(l["createVNode"])(n,{to:{name:"list-students"}},{default:Object(l["withCtx"])(()=>[eg]),_:1})]),Object(l["createElementVNode"])("div",tg,[Object(l["createElementVNode"])("div",ag,[Object(l["createElementVNode"])("div",lg,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",cg,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),og]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",sg,[Object(l["createElementVNode"])("div",ng,[rg,Object(l["createElementVNode"])("div",ig,[Object(l["createElementVNode"])("div",dg,[Object(l["createElementVNode"])("form",mg,[Object(l["createElementVNode"])("div",bg,[pg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStudent.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ug,"first name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Og,[hg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStudent.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jg,"last name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",gg,[fg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStudent.mifare_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStudent.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Eg," MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Vg,[Ng,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStudent.student_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStudent.student_id]]),""!==o.formValidation&&""!==o.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xg," student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",yg,[vg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStudent.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",kg,"email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",wg,[Sg,Ag,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,Bg))),128))],512),[[l["vModelSelect"],o.newStudent.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Cg,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_g,[Pg,Ig,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Dg))),128))],512),[[l["vModelSelect"],o.newStudent.fsm]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Tg,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Mg,[zg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[7]||(t[7]=e=>o.newStudent.add_amount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],o.newStudent.add_amount]])]),Object(l["createElementVNode"])("div",Fg,[Ug,Lg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,$g))),128))],512),[[l["vModelSelect"],o.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",qg,[Object(l["createElementVNode"])("div",Rg,[Hg,Qg,Object(l["createElementVNode"])("div",Jg,[Object(l["createElementVNode"])("div",Yg,[Object(l["createElementVNode"])("form",Wg,[Object(l["createElementVNode"])("div",Xg,[Zg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[9]||(t[9]=e=>o.newStudent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newStudent.password]])]),Object(l["createElementVNode"])("div",Kg,[Gg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[10]||(t[10]=e=>o.newStudent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newStudent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",ef,[Object(l["createElementVNode"])("div",tf,[Object(l["createElementVNode"])("button",{onClick:t[11]||(t[11]=(...e)=>s.updateStudent&&s.updateStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var lf={name:"",components:{},mounted(){this.getUser(),this.editStudent(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_student")},computed:{formattedAmount:{get(){return parseFloat(this.newStudent.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.add_amount=t}},formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{availableCountries:["UK","USA","Canada"],user:"",formValidation:"",isError:!1,validationErrors:"",fsm:[!1,!0],newStudent:{school_id:"",student_id:"",add_amount:"",mifare_id:"",first_name:"",last_name:"",email:"",status:"",password:"",password_confirmation:"",fsm:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_student");let e=!1,t="";t=Us()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&null!==this.newStudent[a]||"date_of_birth"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStudent(){let e=this.$route.params.id;try{const t=await it.get("/editStudent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStudent.school_id=t.school_id,this.newStudent.student_id=t.student_id,this.newStudent.mifare_id=t.mifare_id,this.newStudent.first_name=t.user.first_name,this.newStudent.last_name=t.user.last_name,this.newStudent.email=t.user.email,this.newStudent.status=t.user.status,this.newStudent.fsm=0!=t.fsm_activated)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async updateStudent(){if(this.validateForm())return;let e=this.$route.params.id;try{await it.put("/updateStudent/"+e,this.newStudent),this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await it.get(e);this.allSchools=t.data}catch(e){console.log(e)}},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})}}};a("2fcd");const cf=ct()(lf,[["render",af],["__scopeId","data-v-1d405672"]]);var of=cf;const sf={class:"container-fluid py-4"},nf={class:"row"},rf={class:"col-12"},df={class:"card my-4"},mf={class:"card-body px-0 pb-2"},bf={class:"table-responsive p-0"},pf={class:"filter-container"},uf=Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,-1),Of=Object(l["createElementVNode"])("option",{value:"",disabled:"",selected:""},"Filter",-1),hf=["value"],jf=Object(l["createElementVNode"])("i",{class:"fas fa-filter filter-icon me-1"},null,-1),gf={class:"table align-items-center mb-0"},ff=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Type "),Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Amount "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Date "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Action ")])],-1),Ef={class:"align-middle text-center"},Vf={class:"text-xs text-secondary mb-0"},Nf={class:"align-middle text-center"},xf={class:"d-flex justify-content-center"},yf={key:0,class:"fas fa-plus fa-xs text-success me-2","aria-hidden":"true"},vf={key:1,class:"fas fa-minus fa-xs text-danger me-2","aria-hidden":"true"},kf={class:"text-xs text-secondary mb-0"},wf={class:"align-middle text-center"},Sf={class:"text-secondary text-xs "},Af={class:"align-middle text-center text-sm"},Bf=["onClick"];function Cf(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",sf,[Object(l["createElementVNode"])("div",nf,[Object(l["createElementVNode"])("div",rf,[Object(l["createElementVNode"])("div",df,[Object(l["createElementVNode"])("div",mf,[Object(l["createElementVNode"])("div",bf,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",pf,[uf,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box filter-type-btn","onUpdate:modelValue":t[0]||(t[0]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[Of,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,hf))),128))],512),[[l["vModelSelect"],o.filterBy]]),jf])]),Object(l["createElementVNode"])("table",gf,[ff,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Ef,[Object(l["createElementVNode"])("p",Vf,Object(l["toDisplayString"])(e.type),1)]),Object(l["createElementVNode"])("td",Nf,[Object(l["createElementVNode"])("span",xf,["top_up"==e.type||"admin_top_up"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",yf)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",vf)),Object(l["createElementVNode"])("p",kf,"£"+Object(l["toDisplayString"])(s.formattedPrice(e.amount)),1)])]),Object(l["createElementVNode"])("td",wf,[Object(l["createElementVNode"])("span",Sf,Object(l["toDisplayString"])(e.created_at.toString().split("T")[0]),1)]),Object(l["createElementVNode"])("td",Af,[Object(l["createElementVNode"])("i",{onClick:t=>s.deleteTransactionHistory(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,Bf)])]))),128))])])])])])])])])}var _f={name:"tables",mounted(){this.getTransactionHistory(),this.$globalHelper.buttonColor()},data(){return{transactionHistoryList:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getTransactionHistory(){let e,t;this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id);let a={user_id:t,admin_id:null};try{const e=await it.post("/getTransactionHistory",a);this.transactionHistoryList=e.data}catch(l){console.log(l)}},async deleteTransactionHistory(e){try{await it.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)}}};a("057e");const Pf=ct()(_f,[["render",Cf]]);var If=Pf;const Df={class:"card"},Tf={class:"card-body pt-4 p-3"},Mf={class:"row"},zf={class:"col text-start"},Ff=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),Uf=[Ff],Lf={class:"row"},$f={class:"col-md-12 col-sm-12"},qf={class:"list-group"},Rf={class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Hf={class:"d-flex flex-column"},Qf={class:"mb-3 text-sm text-white"},Jf={class:"wallet-info text-white mb-1 text-xs font-weight-bold"},Yf=Object(l["createTextVNode"])(" Current Balance: "),Wf={class:"wallet-info text-white font-weight-bold ms-sm-2"},Xf={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},Zf=Object(l["createTextVNode"])(" FSM Balance: "),Kf={class:"wallet-info text-white font-weight-bold ms-sm-2"},Gf={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},eE=Object(l["createTextVNode"])(" Phone: "),tE={class:"wallet-info text-white ms-sm-2 font-weight-bold"},aE={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},lE=Object(l["createTextVNode"])(" Email Address: "),cE={class:"wallet-info text-white ms-sm-2 font-weight-bold"},oE={class:"col-md-12 col-sm-12"},sE={class:"list-group"},nE={class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},rE={class:"d-flex flex-column"},iE=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm"},"Recent Transaction",-1),dE={class:"text-dark ms-sm-2 font-weight-bold"},mE=Object(l["createElementVNode"])("br",null,null,-1),bE=Object(l["createElementVNode"])("br",null,null,-1),pE={class:"text-dark font-weight-bold me-3"},uE={key:0,class:"recent-transactions mb-1 text-xs"},OE=Object(l["createElementVNode"])("span",{class:"text-warning ms-sm-2 font-weight-bold"},"No recent transactions.",-1),hE=[OE],jE={class:"row"},gE={class:"col-md-12 col-lg-12"},fE={class:"pagination-container"},EE={class:"entries-dropdown"},VE=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),NE=["value"],xE={class:"pagination-wrapper"},yE={class:"pagination"},vE=["onClick"];function kE(e,t,a,c,o,s){var n,r,i,d,m,b;return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Df,[Object(l["createElementVNode"])("div",Tf,[Object(l["createElementVNode"])("div",Mf,[Object(l["createElementVNode"])("div",zf,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},Uf)])]),Object(l["createElementVNode"])("div",Lf,[Object(l["createElementVNode"])("div",$f,[Object(l["createElementVNode"])("ul",qf,[Object(l["createElementVNode"])("li",Rf,[Object(l["createElementVNode"])("div",Hf,[Object(l["createElementVNode"])("h6",Qf,Object(l["toDisplayString"])(`${(null===(n=s.walletData.user)||void 0===n?void 0:n.first_name)||"-"} ${(null===(r=s.walletData.user)||void 0===r?void 0:r.last_name)||"-"}`),1),Object(l["createElementVNode"])("span",Jf,[Yf,Object(l["createElementVNode"])("span",Wf," £"+Object(l["toDisplayString"])(s.formattedPrice((null===(i=s.walletData)||void 0===i?void 0:i.ballance)||"0")),1)]),Object(l["createElementVNode"])("span",Xf,[Zf,Object(l["createElementVNode"])("span",Kf," £"+Object(l["toDisplayString"])(s.formattedPrice((null===(d=o.fsmAmount)||void 0===d?void 0:d.fsm_amount)||"0")),1)]),Object(l["createElementVNode"])("span",Gf,[eE,Object(l["createElementVNode"])("span",tE,Object(l["toDisplayString"])((null===(m=s.walletData.user)||void 0===m?void 0:m.phone)||"-"),1)]),Object(l["createElementVNode"])("span",aE,[lE,Object(l["createElementVNode"])("span",cE,Object(l["toDisplayString"])((null===(b=s.walletData.user)||void 0===b?void 0:b.email)||"-"),1)])])])])]),Object(l["createElementVNode"])("div",oE,[Object(l["createElementVNode"])("ul",sE,[Object(l["createElementVNode"])("li",nE,[Object(l["createElementVNode"])("div",rE,[iE,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.transactions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"recent-transactions mb-1 text-xs"},[Object(l["createElementVNode"])("span",dE,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(s.transactionType(e.type))+" ",1),mE,Object(l["createElementVNode"])("small",null,Object(l["toDisplayString"])(s.formatDate(e.created_at)),1)]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["font-weight-bold me-3",{"text-success":"top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type,"text-danger":!("top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type)}])},Object(l["toDisplayString"])("top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"+":"-")+" £"+Object(l["toDisplayString"])(s.formattedPrice(e.amount)),3),bE,Object(l["createElementVNode"])("small",pE,Object(l["toDisplayString"])("top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"Received":"Spent"),1)])]))),128)),0==o.transactions.length&&o.isTransactions?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",uE,hE)):Object(l["createCommentVNode"])("",!0)])])])])]),Object(l["createElementVNode"])("div",jE,[Object(l["createElementVNode"])("div",gE,[Object(l["createElementVNode"])("div",fE,[Object(l["createElementVNode"])("div",EE,[VE,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.itemsPerPage=e),onChange:t[2]||(t[2]=e=>s.getTransactionHistory(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,NE))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",xE,[Object(l["createElementVNode"])("ul",yE,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=e=>s.getTransactionHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[4]||(t[4]=e=>s.getTransactionHistory(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getTransactionHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,vE)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[5]||(t[5]=e=>s.getTransactionHistory(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>s.getTransactionHistory(o.totalPages)),href:"#"},"»")],2)])])])])])])])}var wE={name:"billing-card",mounted(){this.getUserId(),this.getWallet(),this.getFSMamount(),this.getTransactionHistory(),this.$globalHelper.buttonColor()},beforeRouteEnter(e,t,a){a(e=>{e.fromRoute=t.name})},beforeRouteLeave(e,t,a){if("list-students"===e.name&&"list-students"===this.fromRoute||"list-staff"===e.name&&"list-staff"===this.fromRoute)a();else{let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}},data(){return{fromRoute:"",fsmAmount:"",isTransactions:!1,transactions:"",user_id:"",user:"",wallet:"",perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),walletData(){return this.wallet},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(tt["b"])(["updateFilterString"]),transactionType(e){let t="";return"top_up"==e?t="Top Up":"admin_top_up"==e?t="Top Up (Admin)":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUserId(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";document.querySelector(".list-group .list-group-item").style.setProperty("--nav-bg-color",e);let t=localStorage.getItem("user");t=JSON.parse(t),this.$route.params.id?this.user_id=this.$route.params.id:this.user_id=t.id},async getWallet(){try{const e=await it.get("/getWallet/"+this.user_id);this.wallet=e.data}catch(e){console.log(e)}},async getFSMamount(){try{const e=await it.get("/getAmountFSM/"+this.user_id);this.fsmAmount=e.data}catch(e){console.log(e)}},async getTransactionHistory(e=null){let t={user_id:this.user_id,admin_id:null,page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getTransactionHistory",t);this.transactions=e.data.data.data,this.isTransactions=!0,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},formatDate(e){const t=fo()(e);return t.format("MMM D, YYYY,   HH:mm:ss")}}};a("8d32");const SE=ct()(wE,[["render",kE]]);var AE=SE;const BE={class:"container-fluid"},CE={class:"row"},_E={class:"col-12"},PE={class:"card px-1"},IE={class:"d-flex justify-content-between border-radius-lg pt-4 "},DE=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ORGANISATIONS",-1),TE=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),ME=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},"Here, you can add organizations such as ETC. Each organization can have multiple sites associated with it, all belonging to the same organization.")],-1),zE={class:"card-body px-0 pb-2"},FE={class:"table-responsive p-0"},UE={class:"table align-items-center mb-0"},LE=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Organisation Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"},"Action")])],-1),$E={key:0},qE=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),RE=[qE],HE={class:"align-middle text-center text-sm"},QE={class:"text-xs font-weight-bold mb-0"},JE={class:"d-flex px-2"},YE={class:"d-flex flex-column justify-content-center"},WE={class:"text-xs text-secondary mb-0"},XE={class:"d-flex px-2 "},ZE={class:"d-flex flex-column justify-content-center"},KE={class:"text-xs text-secondary mb-0 "},GE={class:"d-flex px-2"},eV={class:"d-flex flex-column justify-content-center"},tV={class:"text-xs text-secondary  mb-0"},aV={class:"align-middle text-center text-sm"},lV={class:"badge badge-sm bg-gradient-success"},cV={class:"align-middle text-center"},oV=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),sV=["onClick"];function nV(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",BE,[Object(l["createElementVNode"])("div",CE,[Object(l["createElementVNode"])("div",_E,[Object(l["createElementVNode"])("div",PE,[Object(l["createElementVNode"])("div",IE,[DE,Object(l["createVNode"])(n,{to:{name:"add-organizations"}},{default:Object(l["withCtx"])(()=>[TE]),_:1})]),ME,Object(l["createElementVNode"])("div",zE,[Object(l["createElementVNode"])("div",FE,[Object(l["createElementVNode"])("table",UE,[LE,Object(l["createElementVNode"])("tbody",null,[0===o.organizationsData.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",$E,RE)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.organizationsData,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",HE,[Object(l["createElementVNode"])("p",QE,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",JE,[Object(l["createElementVNode"])("div",YE,[Object(l["createElementVNode"])("h6",WE,Object(l["toDisplayString"])(e.name),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",XE,[Object(l["createElementVNode"])("div",ZE,[Object(l["createElementVNode"])("h6",KE,Object(l["toDisplayString"])(e.email),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",GE,[Object(l["createElementVNode"])("div",eV,[Object(l["createElementVNode"])("h6",tV,Object(l["toDisplayString"])(e.country),1)])])]),Object(l["createElementVNode"])("td",aV,[Object(l["createElementVNode"])("span",lV,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",cV,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[oV]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,sV)])])]))),128))])])])])])])])])}var rV={name:"organizations",metaInfo:{title:"Organizations"},mounted(){this.setColor(),this.getOrganizations(),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"])},data(){return{organizationsData:"",schools:6}},methods:{confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganization(e)})},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},setListData(){this.updateOrganizationList(this.organizationsData)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getOrganizations(){try{const e=await it.get("/getAllOrganizations");this.organizationsData=e.data}catch(e){console.log(e)}},async deleteOrganization(e){try{await it.delete("/deleteOrganization/"+e),this.removeOrganizationFromList(e),this.snackbarMsg("Organization Deleted")}catch(t){console.log(t)}},removeOrganizationFromList(e){const t=this.organizationsData.findIndex(t=>t.id===e);this.organizationsData.splice(t,1)}}};a("e0bc");const iV=ct()(rV,[["render",nV]]);var dV=iV;Object(l["pushScopeId"])("data-v-73711a6d");const mV={class:"container-fluid py-4"},bV={class:"row"},pV={class:"col-12"},uV={class:"card my-4"},OV={class:"d-flex justify-content-between border-radius-lg pt-4"},hV=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Organisation",-1),jV=Object(l["createElementVNode"])("button",{style:{"font-size":"12px"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),gV={class:"card-body px-0 pb-2"},fV={class:"table-responsive p-0"},EV={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},VV={key:0,class:"mb-3 change-pass-alert"},NV=Object(l["createElementVNode"])("br",null,null,-1),xV={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},yV={class:"form-bg container p-4 ms-2"},vV={class:"card card-plain"},kV={class:"card-body"},wV={class:"mb-1"},SV=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),AV={key:0,class:"text-danger error-txt"},BV={class:"mb-1"},CV=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),_V={key:0,class:"text-danger error-txt"},PV={class:"mb-1"},IV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),DV={key:0,class:"text-danger error-txt"},TV={class:"mb-1"},MV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),zV={key:0,class:"text-danger error-txt"},FV={class:"mb-1"},UV=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),LV=Object(l["createElementVNode"])("br",null,null,-1),$V=["value"],qV={key:0,class:"text-danger error-txt"},RV={class:"mb-1"},HV=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),QV={key:0,class:"text-danger error-txt"},JV={class:"mb-1"},YV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),WV={key:0,class:"text-danger error-txt"},XV={class:"mb-1"},ZV=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),KV={key:0,class:"text-danger error-txt"},GV={class:"d-flex justify-content-center"};function eN(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",mV,[Object(l["createElementVNode"])("div",bV,[Object(l["createElementVNode"])("div",pV,[Object(l["createElementVNode"])("div",uV,[Object(l["createElementVNode"])("div",OV,[hV,Object(l["createVNode"])(n,{to:{name:"list-organizations"}},{default:Object(l["withCtx"])(()=>[jV]),_:1})]),Object(l["createElementVNode"])("div",gV,[Object(l["createElementVNode"])("div",fV,[Object(l["createElementVNode"])("div",EV,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",VV,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),NV]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",xV,[Object(l["createElementVNode"])("div",yV,[Object(l["createElementVNode"])("div",vV,[Object(l["createElementVNode"])("div",kV,[Object(l["createElementVNode"])("div",wV,[SV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>o.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newOrganization.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",AV,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",BV,[CV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],o.newOrganization.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_V,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",PV,[IV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newOrganization.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",DV,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",TV,[MV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],o.newOrganization.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zV,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",FV,[UV,LV,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>o.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,$V))),128))],512),[[l["vModelSelect"],o.newOrganization.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",qV,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",RV,[HV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"city","onUpdate:modelValue":t[5]||(t[5]=e=>o.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newOrganization.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",QV,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",JV,[YV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],o.newOrganization.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",WV,"Postocode/Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",XV,[ZV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>o.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newOrganization.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",KV,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",GV,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.saveNewOrganization&&s.saveNewOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var tN={name:"",components:{},mounted(){this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getOrganizationList"])},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Us()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async saveNewOrganization(){if(!this.validateForm())try{await it.post("/createOrganization",this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Saved"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("7497");const aN=ct()(tN,[["render",eN],["__scopeId","data-v-73711a6d"]]);var lN=aN;Object(l["pushScopeId"])("data-v-8a5c53d2");const cN={class:"container-fluid py-4"},oN={class:"row"},sN={class:"col-12"},nN={class:"card my-4"},rN={class:"d-flex justify-content-between  border-radius-lg pt-4"},iN=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Organisation",-1),dN=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),mN={class:"card-body px-0 pb-2"},bN={class:"table-responsive p-0"},pN={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},uN={key:0,class:"mb-3 change-pass-alert"},ON=Object(l["createElementVNode"])("br",null,null,-1),hN={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},jN={class:"form-bg container p-4 ms-2"},gN={class:"card card-plain"},fN={class:"card-body"},EN={class:"mb-1"},VN=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),NN={key:0,class:"text-danger error-txt"},xN={class:"mb-1"},yN=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),vN={key:0,class:"text-danger error-txt"},kN={class:"mb-1"},wN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),SN={key:0,class:"text-danger error-txt"},AN={class:"mb-1"},BN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),CN={key:0,class:"text-danger error-txt"},_N={class:"mb-1"},PN=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),IN=Object(l["createElementVNode"])("br",null,null,-1),DN=["value"],TN={key:0,class:"text-danger error-txt"},MN={class:"mb-1"},zN=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),FN={key:0,class:"text-danger error-txt"},UN={class:"mb-1"},LN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),$N={key:0,class:"text-danger error-txt"},qN={class:"mb-1"},RN=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),HN={key:0,class:"text-danger error-txt"},QN={class:"d-flex justify-content-center"};function JN(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",cN,[Object(l["createElementVNode"])("div",oN,[Object(l["createElementVNode"])("div",sN,[Object(l["createElementVNode"])("div",nN,[Object(l["createElementVNode"])("div",rN,[iN,Object(l["createVNode"])(n,{to:{name:"list-organizations"}},{default:Object(l["withCtx"])(()=>[dN]),_:1})]),Object(l["createElementVNode"])("div",mN,[Object(l["createElementVNode"])("div",bN,[Object(l["createElementVNode"])("div",pN,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",uN,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),ON]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",hN,[Object(l["createElementVNode"])("div",jN,[Object(l["createElementVNode"])("div",gN,[Object(l["createElementVNode"])("div",fN,[Object(l["createElementVNode"])("div",EN,[VN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>o.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newOrganization.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",NN,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xN,[yN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],o.newOrganization.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vN,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",kN,[wN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],o.newOrganization.phone]]),""!==o.formValidation&&""!==o.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",SN,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",AN,[BN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],o.newOrganization.website]]),""!==o.formValidation&&""!==o.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",CN,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_N,[PN,IN,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>o.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,DN))),128))],512),[[l["vModelSelect"],o.newOrganization.country]]),""!==o.formValidation&&""!==o.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",TN,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",MN,[zN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>o.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],o.newOrganization.city]]),""!==o.formValidation&&""!==o.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",FN,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",UN,[LN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],o.newOrganization.zip]]),""!==o.formValidation&&""!==o.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$N,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qN,[RN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>o.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],o.newOrganization.address]]),""!==o.formValidation&&""!==o.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",HN,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",QN,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.updateOrganization&&s.updateOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var YN={name:"",props:["data"],components:{},mounted(){this.editOrganization(),this.$globalHelper.buttonColor()},computed:{},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Us()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async editOrganization(){let e=this.$route.params.id;try{const t=await it.get("/editOrganization/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newOrganization.name=t.name,this.newOrganization.website=t.website,this.newOrganization.email=t.email,this.newOrganization.phone=t.phone,this.newOrganization.country=t.country,this.newOrganization.city=t.city,this.newOrganization.state=t.state,this.newOrganization.zip=t.zip,this.newOrganization.address=t.address,this.newOrganization.founded_date=t.founded_date,this.newOrganization.description=t.description)},async updateOrganization(){if(this.validateForm())return;let e=this.$route.params.id;try{await it.put("/updateOrganization/"+e,this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("e6f0");const WN=ct()(YN,[["render",JN],["__scopeId","data-v-8a5c53d2"]]);var XN=WN,ZN=a("d15c"),KN=a.n(ZN);const GN={class:"card"},ex={class:"card-header pb-0 px-3"},tx={class:"d-flex justify-content-between"},ax=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Trips",-1),lx={class:"card-body pt-1 p-3"},cx={class:"container-fluid mt-1"},ox={class:"col-md-8"},sx={class:"d-flex flex-column"},nx={class:"mb-3 text-sm"},rx=Object(l["createElementVNode"])("img",{src:KN.a,alt:"profile_image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,-1),ix={class:"trip-description mt-2"},dx={class:"col-md-4"},mx={class:"ms-auto text-start"},bx={class:"me-3 trip-dates"},px=Object(l["createElementVNode"])("br",null,null,-1),ux={class:"me-3 trip-dates"},Ox={class:"me-3 trip-dates"},hx=Object(l["createElementVNode"])("br",null,null,-1),jx=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Age Group - 16-20")],-1),gx=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Booking Open")],-1),fx=Object(l["createElementVNode"])("br",null,null,-1),Ex={class:"me-3 trip-dates"},Vx=Object(l["createElementVNode"])("br",null,null,-1),Nx={key:0},xx={class:"me-3 trip-dates"},yx={class:"d-flex  align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},vx=Object(l["createElementVNode"])("br",null,null,-1),kx=["onClick"],wx=Object(l["createTextVNode"])(" Participants "),Sx=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"arrow_forward",-1),Ax=[wx,Sx],Bx=Object(l["createElementVNode"])("br",null,null,-1),Cx={class:"mt-0"},_x=["onClick"],Px=["onClick"],Ix={key:2,class:"mt-0"},Dx=Object(l["createElementVNode"])("div",{class:"cart-status"},"Added To Cart",-1),Tx=[Dx],Mx={key:3,class:"mt-0"},zx=["onClick"],Fx=Object(l["createElementVNode"])("br",null,null,-1),Ux={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Lx=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No trips found!",-1),$x=[Lx];function qx(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",GN,[Object(l["createElementVNode"])("div",ex,[Object(l["createElementVNode"])("div",tx,[ax,s.userPermissions.create_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},["super_admin"==o.user.role||"organization_admin"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=(...e)=>s.redirectToAddTrips&&s.redirectToAddTrips(...e)),to:{name:"add-trips"},style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-10  text-white fw-5 p-2 border-radius-lg"},"Add Trips")):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",lx,[Object(l["createElementVNode"])("div",cx,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allTrips,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",ox,[Object(l["createElementVNode"])("div",sx,[Object(l["createElementVNode"])("h6",nx,Object(l["toDisplayString"])(e.title),1),rx,Object(l["createElementVNode"])("small",ix,Object(l["toDisplayString"])(e.description),1)])]),Object(l["createElementVNode"])("div",dx,[Object(l["createElementVNode"])("div",mx,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",bx,"From "+Object(l["toDisplayString"])(s.formatDateString(e.start_date))+" To "+Object(l["toDisplayString"])(s.formatDateString(e.end_date)),1)]),px,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",ux,"Total Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Ox,"Available Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),hx,jx,gx,fx,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Ex,Object(l["toDisplayString"])(e.accomodation_details?e.accomodation_details:"-"),1)]),Vx,"super_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Nx,[Object(l["createElementVNode"])("small",xx,"Organization: "+Object(l["toDisplayString"])(e.organization?e.organization.name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",yx," Trip Cost - £"+Object(l["toDisplayString"])(s.formattedAmount(e.budget)),1),vx,"super_admin"==o.user.role||"organization_admin"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("button",{onClick:t=>s.navLegacy("participants-trips",{id:e.id}),style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"d-flex justify-content-around align-items-center me-3 trips-btn w-50  text-white fw-5 p-2 border-radius-lg"},Ax,8,kx),Bx,Object(l["createElementVNode"])("div",Cx,[s.userPermissions.edit_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t=>s.editTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Edit ",8,_x)):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t=>s.deleteTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Delete ",8,Px)):Object(l["createCommentVNode"])("",!0)])],64)):Object(l["createCommentVNode"])("",!0),null!==e.cart&&"student"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ix,Tx)):Object(l["createCommentVNode"])("",!0),null==e.cart&&"student"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Mx,[Object(l["createElementVNode"])("button",{onClick:t=>s.addTripToCart(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,zx)])):Object(l["createCommentVNode"])("",!0),Fx])])]))),128)),0==o.allTrips.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ux,$x)):Object(l["createCommentVNode"])("",!0)])])])}var Rx={name:"billing-card",data(){return{user:"",allTrips:""}},mounted(){this.getUser(),this.getAllTrips()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_trip")},watch:{getRemovedItem(e,t){console.log(t),"trip"==e&&this.getAllTrips()}},computed:{...Object(tt["c"])(["getRemovedItem","getPermissions"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{...Object(tt["b"])(["updateRemovedItem"]),snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},navLegacy(e,t){this.$router.push({name:e,params:t})},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t},async addTripToCart(e){let t={trip_id:e};try{await it.post("/addTripToCart",t),await this.getAllTrips(),this.snackbarMsg("Successfuly Added Trip To Cart")}catch(a){console.log(a)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},redirectToAddTrips(){this.$router.push({name:"add-trips"})},async getAllTrips(){try{const e=await it.get("/getAllTrips");this.allTrips=e.data,this.updateRemovedItem(null)}catch(e){console.log(e)}},async deleteTrip(e){try{await it.delete("/deleteTrip/"+e),this.removeTripFromList(e),this.snackbarMsg("Trip Deleted Successfuly")}catch(t){console.log(t)}},removeTripFromList(e){const t=this.allTrips.findIndex(t=>t.id===e);this.allTrips.splice(t,1)},formatDateString(e){const t=fo()(e),a=t.format("DD MMMM YYYY");return a},editTrip(e){this.$router.push("/edit-trips/"+e)}}};a("b0e7");const Hx=ct()(Rx,[["render",qx]]);var Qx=Hx;Object(l["pushScopeId"])("data-v-2a8f2351");const Jx={class:"container-fluid py-4"},Yx={class:"row "},Wx={class:"col-12"},Xx={class:"card my-4"},Zx={class:"d-flex justify-content-between  border-radius-lg pt-4 "},Kx=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Trips",-1),Gx=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),ey={class:"card-body px-0 pb-2"},ty={class:"table-responsive p-0"},ay={class:"row py-2 bg-white form-data border-radius-lg"},ly={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},cy={class:"form-bg container p-4 ms-2"},oy={class:"card card-plain"},sy={class:"card-body"},ny={role:"form"},ry={class:"row mb-1"},iy={class:"mb-1"},dy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Image",-1),my={class:"mb-1"},by=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),py={key:0,class:"text-danger error-txt"},uy={class:"mb-1"},Oy=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),hy=Object(l["createElementVNode"])("br",null,null,-1),jy={key:0,class:"text-danger error-txt"},gy={class:"row p-2"},fy={class:"col-xl-4 col-lg-4 col-md-4"},Ey={class:"mb-1"},Vy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),Ny={key:0,class:"text-danger error-txt"},xy={class:"col-xl-4 col-lg-4 col-md-4"},yy={class:"mb-1"},vy=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),ky=Object(l["createElementVNode"])("br",null,null,-1),wy=["value"],Sy={key:0,class:"text-danger error-txt"},Ay={class:"col-xl-4 col-lg-4 col-md-4"},By={class:"mb-1"},Cy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),_y={key:0,class:"text-danger error-txt"},Py={class:"col-xl-4 col-lg-4 col-md-4"},Iy={class:"mb-1"},Dy=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),Ty={key:0,class:"text-danger error-txt"},My={class:"col-xl-4 col-lg-4 col-md-4"},zy={class:"mb-1"},Fy=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),Uy={key:0,class:"text-danger error-txt"},Ly={class:"col-xl-4 col-lg-4 col-md-4"},$y={class:"mb-1"},qy=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),Ry={key:0,class:"text-danger error-txt"},Hy={class:"row p-2"},Qy=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),Jy={class:"col-xl-4 col-lg-4 col-md-4"},Yy={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},Wy=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),Xy={class:"checkbox-container mt-2 me-5"},Zy=["checked"],Ky=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),Gy={class:"col-xl-4 col-lg-4 col-md-4"},ev={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},tv=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit",-1),av={class:"checkbox-container mt-2 me-5"},lv=["checked"],cv=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),ov={class:"col-xl-4 col-lg-4 col-md-4"},sv={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},nv=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Manual Payment",-1),rv={class:"checkbox-container mt-2 me-5"},iv=["checked"],dv=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),mv={key:0,class:"row p-2"},bv={class:"col-xl-4 col-lg-4 col-md-4"},pv={class:"mb-1"},uv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),Ov={key:0,class:"text-danger error-txt"},hv={class:"col-xl-4 col-lg-4 col-md-4"},jv={class:"mb-1"},gv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),fv={key:0,class:"text-danger error-txt"},Ev={class:"col-xl-4 col-lg-4 col-md-4"},Vv={class:"mb-1"},Nv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),xv={key:0,class:"text-danger error-txt"},yv={class:"col-xl-4 col-lg-4 col-md-4"},vv={class:"mb-1"},kv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),wv={key:0,class:"text-danger error-txt"},Sv={class:"mb-1"},Av={class:"input-label",for:"enrollment_date"},Bv=["onUpdate:modelValue"],Cv={key:0,class:"text-danger error-txt"},_v={key:1,class:"row p-2"},Pv={class:"col-xl-4 col-lg-4 col-md-4"},Iv={class:"mb-1"},Dv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Deposit",-1),Tv={key:0,class:"text-danger error-txt"},Mv={class:"col-xl-4 col-lg-4 col-md-4"},zv={class:"mb-1"},Fv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Deposit",-1),Uv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,-1),Lv={key:0,class:"text-danger error-txt"},$v={class:"col-xl-4 col-lg-4 col-md-4"},qv={class:"mb-1"},Rv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Deposit",-1),Hv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Deposit",name:"name"},null,-1),Qv={key:0,class:"text-danger error-txt"},Jv={class:"col-xl-4 col-lg-4 col-md-4"},Yv={class:"mb-1"},Wv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),Xv=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),Zv={key:0,class:"text-danger error-txt"},Kv={class:"col-xl-4 col-lg-4 col-md-4"},Gv={class:"mb-1"},ek=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Deposit",-1),tk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),ak={key:0,class:"text-danger error-txt"},lk={key:2,class:"row p-2"},ck={class:"col-xl-4 col-lg-4 col-md-4"},ok={class:"mb-1"},sk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Amount",-1),nk={key:0,class:"text-danger error-txt"},rk={class:"col-xl-4 col-lg-4 col-md-4"},ik={class:"mb-1"},dk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Amount",-1),mk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Amount",name:"name"},null,-1),bk={key:0,class:"text-danger error-txt"},pk={class:"col-xl-4 col-lg-4 col-md-4"},uk={class:"mb-1"},Ok=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Amount",-1),hk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Amount",name:"name"},null,-1),jk={key:0,class:"text-danger error-txt"},gk={class:"col-xl-4 col-lg-4 col-md-4"},fk={class:"mb-1"},Ek=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Amount",-1),Vk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),Nk={key:0,class:"text-danger error-txt"},xk={class:"col-xl-4 col-lg-4 col-md-4"},yk={class:"mb-1"},vk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Amount",-1),kk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),wk={key:0,class:"text-danger error-txt"},Sk={class:"col-xl-4 col-lg-4 col-md-4"},Ak={class:"mb-1"},Bk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Comments",-1),Ck=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"cash and card payments are accepted",name:"name"},null,-1),_k={key:0,class:"text-danger error-txt"},Pk={class:"mb-1"},Ik=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),Dk=Object(l["createElementVNode"])("br",null,null,-1),Tk={class:"mt-4"};function Mk(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("DropZone"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Jx,[Object(l["createElementVNode"])("div",Yx,[Object(l["createElementVNode"])("div",Wx,[Object(l["createElementVNode"])("div",Xx,[Object(l["createElementVNode"])("div",Zx,[Kx,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[Gx]),_:1})]),Object(l["createElementVNode"])("div",ey,[Object(l["createElementVNode"])("div",ty,[Object(l["createElementVNode"])("div",ay,[Object(l["createElementVNode"])("div",ly,[Object(l["createElementVNode"])("div",cy,[Object(l["createElementVNode"])("div",oy,[Object(l["createElementVNode"])("div",sy,[Object(l["createElementVNode"])("form",ny,[Object(l["createElementVNode"])("div",ry,[Object(l["createElementVNode"])("div",iy,[dy,Object(l["createVNode"])(r,{maxFiles:Number(1),url:"http://localhost:8080",uploadOnDrop:!0,multipleUpload:!1,parallelUpload:1},null,8,["maxFiles"])]),Object(l["createElementVNode"])("div",my,[by,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],o.newTrip.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",py,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",uy,[Oy,hy,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],o.newTrip.description]]),""!==o.formValidation&&""!==o.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jy,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",gy,[Object(l["createElementVNode"])("div",fy,[Object(l["createElementVNode"])("div",Ey,[Vy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],o.newTrip.total_seats]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ny,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",xy,[Object(l["createElementVNode"])("div",yy,[vy,ky,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,wy))),128))],512),[[l["vModelSelect"],o.newTrip.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Sy,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ay,[Object(l["createElementVNode"])("div",By,[Cy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],o.newTrip.accomodation_details]]),""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_y,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Py,[Object(l["createElementVNode"])("div",Iy,[Dy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.start_date]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ty,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",My,[Object(l["createElementVNode"])("div",zy,[Fy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.end_date]]),""!==o.formValidation&&""!==o.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Uy,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ly,[Object(l["createElementVNode"])("div",$y,[qy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ry,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",Hy,[Qy,Object(l["createElementVNode"])("div",Jy,[Object(l["createElementVNode"])("span",Yy,[Wy,Object(l["createElementVNode"])("div",Xy,[Object(l["createElementVNode"])("input",{checked:"installments"==o.paymentPlan,onChange:t[8]||(t[8]=e=>s.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,Zy),Ky])])]),Object(l["createElementVNode"])("div",Gy,[Object(l["createElementVNode"])("span",ev,[tv,Object(l["createElementVNode"])("div",av,[Object(l["createElementVNode"])("input",{checked:"deposit"==o.paymentPlan,onChange:t[9]||(t[9]=e=>s.changePaymentPlan("deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,lv),cv])])]),Object(l["createElementVNode"])("div",ov,[Object(l["createElementVNode"])("span",sv,[nv,Object(l["createElementVNode"])("div",rv,[Object(l["createElementVNode"])("input",{checked:"manual"==o.paymentPlan,onChange:t[10]||(t[10]=e=>s.changePaymentPlan("manual")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,iv),dv])])])]),"installments"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",mv,[Object(l["createElementVNode"])("div",bv,[Object(l["createElementVNode"])("div",pv,[uv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>o.installmentsPlan.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.total_installments]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ov,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",hv,[Object(l["createElementVNode"])("div",jv,[gv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>o.installmentsPlan.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.amount_per_installment]]),""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fv,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ev,[Object(l["createElementVNode"])("div",Vv,[Nv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>o.installmentsPlan.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.initial_deposit]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",yv,[Object(l["createElementVNode"])("div",vv,[kv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.installmentsPlan.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsPlan.initial_deposit_due_date]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",wv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),o.installmentsPlan.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsPlan.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",Sv,[Object(l["createElementVNode"])("label",Av,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>o.installmentsPlan.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,Bv),[[l["vModelText"],o.installmentsPlan.other_installments_due_date[t]]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Cv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"deposit"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_v,[Object(l["createElementVNode"])("div",Pv,[Object(l["createElementVNode"])("div",Iv,[Dv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Deposit",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Tv,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Mv,[Object(l["createElementVNode"])("div",zv,[Fv,Uv,""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Lv,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",$v,[Object(l["createElementVNode"])("div",qv,[Rv,Hv,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Jv,[Object(l["createElementVNode"])("div",Yv,[Wv,Xv,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Zv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Kv,[Object(l["createElementVNode"])("div",Gv,[ek,tk,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ak,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),"manual"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lk,[Object(l["createElementVNode"])("div",ck,[Object(l["createElementVNode"])("div",ok,[sk,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Amount",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nk,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",rk,[Object(l["createElementVNode"])("div",ik,[dk,mk,""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bk,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",pk,[Object(l["createElementVNode"])("div",uk,[Ok,hk,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",gk,[Object(l["createElementVNode"])("div",fk,[Ek,Vk,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Nk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",xk,[Object(l["createElementVNode"])("div",yk,[vk,kk,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",wk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Sk,[Object(l["createElementVNode"])("div",Ak,[Bk,Ck,""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_k,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Pk,[Ik,Dk,Object(l["createVNode"])(i,{label:"Attributes",options:o.allAttributes,onInput:s.handleAttributes,placeholder:"Attributes"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",Tk,[Object(l["createElementVNode"])("button",{onClick:t[17]||(t[17]=Object(l["withModifiers"])((...e)=>s.saveNewTrip&&s.saveNewTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])(),Object(l["pushScopeId"])("data-v-58ff6324");const zk=["onClick"],Fk=["placeholder"],Uk={key:0,class:"dropdown"},Lk=["onClick"];function $k(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.selectedOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"tag"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name)+" ",1),Object(l["createElementVNode"])("span",{onClick:e=>s.removeTag(t),class:"remove-tag"},"×",8,zk)]))),128)),Object(l["createElementVNode"])("div",null,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>o.inputValue=e),onInput:t[1]||(t[1]=(...e)=>s.filterOptions&&s.filterOptions(...e)),onKeydown:t[2]||(t[2]=Object(l["withKeys"])(Object(l["withModifiers"])((...e)=>s.addTag&&s.addTag(...e),["prevent"]),["enter"])),onFocus:t[3]||(t[3]=(...e)=>s.showOptions&&s.showOptions(...e)),placeholder:a.placeholder,onBlur:t[4]||(t[4]=(...e)=>s.hideDropdown&&s.hideDropdown(...e))},null,40,Fk),[[l["vModelText"],o.inputValue]]),o.showDropdown?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Uk,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.filteredOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,onClick:t=>s.selectOption(e),class:"option-width"},Object(l["toDisplayString"])(e.name),9,Lk))),128))])):Object(l["createCommentVNode"])("",!0)])])}Object(l["popScopeId"])();var qk={props:{label:{type:String,required:!0},options:{type:Array,required:!0},placeholder:{type:String,default:"Pelase select"},value:{type:Array,default:()=>[]}},data(){return{selectedOptions:this.value,inputValue:"",showDropdown:!1}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.inputValue.toLowerCase())&&!this.isSelected(e))}},watch:{value(e){this.selectedOptions=e}},methods:{addTag(e){const t=e;console.log(t),t&&!this.isSelected(t)&&(this.selectedOptions.push(t),this.$emit("input",this.selectedOptions),this.inputValue="")},removeTag(e){this.selectedOptions.splice(e,1),this.$emit("input",this.selectedOptions)},filterOptions(){this.showDropdown=!0},showOptions(){this.showDropdown=!0},hideDropdown(){setTimeout(()=>{this.showDropdown=!1},800)},selectOption(e){console.log(e),this.addTag(e),this.showDropdown=!1},isSelected(e){return this.selectedOptions.some(t=>t.name===e.name)}}};a("ed52");const Rk=ct()(qk,[["render",$k],["__scopeId","data-v-58ff6324"]]);var Hk=Rk,Qk=a("cd1f"),Jk=a.n(Qk),Yk={name:"",components:{MultiSelect:Hk,DropZone:Qk["DropZone"]},mounted(){this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("create_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{paymentPlan:"",installmentsPlan:{total_installments:"",amount_per_installment:"",initial_deposit:"",initial_deposit_due_date:"",other_installments_due_date:[]},depositPlan:{total:"",final_deposit:"",initial_deposit:""},manualPlan:{total:"",final_deposit:"",initial_deposit:""},allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await it.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},validateForm(){this.$permissions.redirectIfNotAllowed("create_trip");let e=!1,t="";t=Us()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},async saveNewTrip(){if(!this.validateForm()){await this.addPaymentPlan();try{await it.post("/createTrip",this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Saved Successfuly")}catch(e){console.log(e)}}},addPaymentPlan(){"installments"==this.paymentPlan&&(this.newTrip.payment_plan="installments",this.newTrip={...this.newTrip,...this.installmentsPlan})},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await it.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("cad8");const Wk=ct()(Yk,[["render",Mk],["__scopeId","data-v-2a8f2351"]]);var Xk=Wk;Object(l["pushScopeId"])("data-v-109a06c8");const Zk={class:"container-fluid py-4"},Kk={class:"row "},Gk={class:"col-12"},ew={class:"card my-4"},tw={class:"d-flex justify-content-between  border-radius-lg pt-4 "},aw=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Trip",-1),lw=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),cw={class:"card-body px-0 pb-2"},ow={class:"table-responsive p-0"},sw={class:"row py-2 bg-white form-data border-radius-lg"},nw={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},rw={class:"form-bg container p-4 ms-2"},iw={class:"card card-plain"},dw={class:"card-body"},mw={role:"form"},bw={class:"row mb-1"},pw={class:"mb-1"},uw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),Ow={key:0,class:"text-danger error-txt"},hw={class:"mb-1"},jw=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),gw=Object(l["createElementVNode"])("br",null,null,-1),fw={key:0,class:"text-danger error-txt"},Ew={class:"row p-2"},Vw={class:"col-xl-4 col-lg-4 col-md-4"},Nw={class:"mb-1"},xw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),yw={key:0,class:"text-danger error-txt"},vw={class:"col-xl-4 col-lg-4 col-md-4"},kw={class:"mb-1"},ww=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),Sw=Object(l["createElementVNode"])("br",null,null,-1),Aw=["value"],Bw={key:0,class:"text-danger error-txt"},Cw={class:"col-xl-4 col-lg-4 col-md-4"},_w={class:"mb-1"},Pw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),Iw={key:0,class:"text-danger error-txt"},Dw={class:"col-xl-4 col-lg-4 col-md-4"},Tw={class:"mb-1"},Mw=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),zw={key:0,class:"text-danger error-txt"},Fw={class:"col-xl-4 col-lg-4 col-md-4"},Uw={class:"mb-1"},Lw=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),$w={key:0,class:"text-danger error-txt"},qw={class:"col-xl-4 col-lg-4 col-md-4"},Rw={class:"mb-1"},Hw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),Qw={key:0,class:"text-danger error-txt"},Jw={class:"mb-1"},Yw=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),Ww=Object(l["createElementVNode"])("br",null,null,-1),Xw={class:"mt-4"};function Zw(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Zk,[Object(l["createElementVNode"])("div",Kk,[Object(l["createElementVNode"])("div",Gk,[Object(l["createElementVNode"])("div",ew,[Object(l["createElementVNode"])("div",tw,[aw,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[lw]),_:1})]),Object(l["createElementVNode"])("div",cw,[Object(l["createElementVNode"])("div",ow,[Object(l["createElementVNode"])("div",sw,[Object(l["createElementVNode"])("div",nw,[Object(l["createElementVNode"])("div",rw,[Object(l["createElementVNode"])("div",iw,[Object(l["createElementVNode"])("div",dw,[Object(l["createElementVNode"])("form",mw,[Object(l["createElementVNode"])("div",bw,[Object(l["createElementVNode"])("div",pw,[uw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],o.newTrip.title]]),""!==o.formValidation&&""!==o.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ow,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hw,[jw,gw,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],o.newTrip.description]]),""!==o.formValidation&&""!==o.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fw,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ew,[Object(l["createElementVNode"])("div",Vw,[Object(l["createElementVNode"])("div",Nw,[xw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],o.newTrip.total_seats]]),""!==o.formValidation&&""!==o.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yw,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",vw,[Object(l["createElementVNode"])("div",kw,[ww,Sw,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Aw))),128))],512),[[l["vModelSelect"],o.newTrip.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Bw,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Cw,[Object(l["createElementVNode"])("div",_w,[Pw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],o.newTrip.accomodation_details]]),""!==o.formValidation&&""!==o.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Iw,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Dw,[Object(l["createElementVNode"])("div",Tw,[Mw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.start_date]]),""!==o.formValidation&&""!==o.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zw,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Fw,[Object(l["createElementVNode"])("div",Uw,[Lw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],o.newTrip.end_date]]),""!==o.formValidation&&""!==o.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$w,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",qw,[Object(l["createElementVNode"])("div",Rw,[Hw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],s.formattedPrice]]),""!==o.formValidation&&""!==o.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qw,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",Jw,[Yw,Ww,Object(l["createVNode"])(r,{label:"Attributes",value:o.selectedAttrs,options:o.allAttributes,onInput:s.handleAttributes,placeholder:"Attributes"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",Xw,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=Object(l["withModifiers"])((...e)=>s.updateTrip&&s.updateTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var Kw={name:"",components:{MultiSelect:Hk},mounted(){this.editTrip(),this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("edit_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",selectedAttrs:[],newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await it.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}this.allAttributes.map(e=>{this.newTrip.attributes.includes(e.id)&&this.selectedAttrs.push(e)})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_trip");let e=!1,t="";t=Us()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async updateTrip(){if(this.validateForm())return;let e=this.$route.params.id;try{await it.put("/updateTrip/"+e,this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Updated Successfuly")}catch(t){console.log(t)}},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await it.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}},async editTrip(){let e=this.$route.params.id;try{let t=await it.get("/findTrip/"+e);t=t.data,this.setTrip(t)}catch(t){console.log(t)}},setTrip(e){this.newTrip.title=e.title,this.newTrip.description=e.description,this.newTrip.total_seats=e.total_booking,this.newTrip.accomodation_details=e.accomodation_details,this.newTrip.start_date=this.formatDateString(e.start_date),this.newTrip.end_date=this.formatDateString(e.end_date),this.newTrip.total_funds=e.budget,this.newTrip.organization_id=e.organization_id,this.newTrip.attributes=e.attributes},formatDateString(e){const t=fo()(e),a=t.format("YYYY-MM-DD");return a}}};a("9bb4");const Gw=ct()(Kw,[["render",Zw],["__scopeId","data-v-109a06c8"]]);var eS=Gw;const tS={class:"container-fluid py-4"},aS={class:"row"},lS={class:"col-12"},cS={class:"card my-4"},oS={class:"card-body px-0 pb-2"},sS={class:"table-responsive p-0"},nS=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"}),Object(l["createElementVNode"])("small",{style:{"font-size":"12px","font-weight":"bold"},class:" me-3 text-dark fw-5 border-0 py-2 px-4 border-radius-lg"}," Trip Participants ")])],-1),rS={class:"table align-items-center mb-0"},iS=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Participation Status ")])],-1),dS={class:"align-middle text-center"},mS={class:"text-secondary text-xs font-weight-bold"},bS={class:"align-middle text-center"},pS={class:"text-secondary text-xs "},uS={class:"align-middle text-center"},OS={class:"text-secondary text-xs "},hS={class:"align-middle text-center"},jS={class:"text-secondary text-xs "},gS={class:"align-middle text-center text-sm"},fS={class:"badge badge-sm bg-gradient-success"},ES={class:"align-middle text-center text-sm"},VS={class:"badge badge-sm bg-gradient-success"};function NS(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",tS,[Object(l["createElementVNode"])("div",aS,[Object(l["createElementVNode"])("div",lS,[Object(l["createElementVNode"])("div",cS,[Object(l["createElementVNode"])("div",oS,[Object(l["createElementVNode"])("div",sS,[nS,Object(l["createElementVNode"])("table",rS,[iS,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allParticipants,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",dS,[Object(l["createElementVNode"])("span",mS,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",bS,[Object(l["createElementVNode"])("span",pS,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",uS,[Object(l["createElementVNode"])("span",OS,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",hS,[Object(l["createElementVNode"])("span",jS,Object(l["toDisplayString"])(e.school),1)]),Object(l["createElementVNode"])("td",gS,[Object(l["createElementVNode"])("span",fS,Object(l["toDisplayString"])(e.payment_status),1)]),Object(l["createElementVNode"])("td",ES,[Object(l["createElementVNode"])("span",VS,Object(l["toDisplayString"])(e.participation_status),1)])]))),128))])])])])])])])])}var xS={name:"tables",mounted(){this.getUser(),this.getTripParticipants()},data(){return{allParticipants:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getTripParticipants(){let e=this.$route.params.id;try{const t=await it.get("/getTripParticipants/"+e);this.allParticipants=t.data}catch(t){console.log(t)}}}};a("506d");const yS=ct()(xS,[["render",NS]]);var vS=yS;const kS={class:"container-fluid"},wS={class:"row"},SS={class:"col-12"},AS={class:"card px-3"},BS=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"TRANSACTION HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("The Transaction History section displays key details of each transaction, including the User, Type, Amount, and Date. This allows you to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" track all financial activities efficiently, providing a clear overview of each user's transactions over time.")])])],-1),CS={class:"card-body px-0 pb-2"},_S={class:"table-responsive p-0"},PS={class:"filter-container ms-2 mb-2"},IS={class:"row",style:{width:"100%"}},DS={class:"col-4",style:{"padding-top":"15px"}},TS={style:{display:"flex"}},MS=["placeholder"],zS=["value"],FS=Object(l["createElementVNode"])("div",{class:"col-4 col-md-4 col-sm-6",style:{"padding-top":"15px"}},null,-1),US={class:"col-4 col-md-4 col-sm-4 d-flex",style:{"padding-top":"15px"}},LS=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon",title:"Export to excel"},null,-1),$S=[LS],qS={class:"table-responsive p-0"},RS={ref:"table",class:"table align-items-center mb-0"},HS={key:0,class:"text-uppercase text-xxs font-weight-bolder"},QS=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Charge Details ",-1),JS=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Type ",-1),YS=Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-xxs font-weight-bolder ps-2"}," Amount ",-1),WS=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date ",-1),XS={key:0},ZS=Object(l["createElementVNode"])("td",{colspan:"8",class:"text-center"}," No data available. ",-1),KS=[ZS],GS={key:0},eA={class:"d-flex px-2 py-1"},tA=Object(l["createElementVNode"])("div",null,null,-1),aA={class:"d-flex flex-column justify-content-center"},lA={class:"text-xs text-secondary mb-0"},cA=Object(l["createElementVNode"])("br",null,null,-1),oA={class:"align-middle text-center"},sA={key:0,class:"text-xs text-secondary mb-0"},nA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Charge ID:",-1),rA=Object(l["createElementVNode"])("br",null,null,-1),iA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Card Brand:",-1),dA=Object(l["createElementVNode"])("br",null,null,-1),mA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Last 4 Digit:",-1),bA=Object(l["createElementVNode"])("br",null,null,-1),pA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Card Name:",-1),uA={key:1,class:"text-xs text-secondary mb-0"},OA={class:"align-middle text-center"},hA={class:"text-xs text-secondary mb-0"},jA={class:"align-middle text-center"},gA={class:"d-flex justify-content-center"},fA={class:"text-xs text-secondary mb-0"},EA={key:0,class:"text-success me-1",style:{"font-size":"15px","font-weight":"600"}},VA={key:1,class:"text-danger me-1",style:{"font-size":"15px","font-weight":"600"}},NA={class:"align-middle text-center"},xA={class:"text-secondary text-xs "},yA={class:"row"},vA={class:"col-md-12 col-lg-12"},kA={class:"pagination-container"},wA={class:"entries-dropdown"},SA=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),AA=["value"],BA={class:"pagination-wrapper"},CA={class:"pagination"},_A=["onClick"];function PA(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kS,[Object(l["createElementVNode"])("div",wS,[Object(l["createElementVNode"])("div",SS,[Object(l["createElementVNode"])("div",AS,[BS,Object(l["createElementVNode"])("div",CS,[Object(l["createElementVNode"])("div",_S,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",PS,[Object(l["createElementVNode"])("div",IS,[Object(l["createElementVNode"])("div",DS,[Object(l["createElementVNode"])("span",TS,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>s.filterTransactionHistory("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:s.computedPlaceholder,name:"address"},null,40,MS),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>s.filterTransactionHistory("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,zS))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),FS,Object(l["createElementVNode"])("div",US,[Object(l["createElementVNode"])("div",{class:"label-text bulk_topup me-3 d-flex",onClick:t[4]||(t[4]=e=>s.exportTableToXLS()),style:{"padding-top":"1px",width:"fit-content"}},$S),Object(l["createVNode"])(n,{onChange:t[5]||(t[5]=e=>s.filterTransactionHistory("daterange_search")),onClear:s.getTransactionHistory,value:o.time3,"onUpdate:value":t[6]||(t[6]=e=>o.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])])]),Object(l["createElementVNode"])("div",qS,[Object(l["createElementVNode"])("table",RS,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,["student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",HS," User ")):Object(l["createCommentVNode"])("",!0),QS,JS,YS,WS])]),Object(l["createElementVNode"])("tbody",null,[0===o.transactionHistoryList.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",XS,KS)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},["student"!==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",GS,[Object(l["createElementVNode"])("div",eA,[tA,Object(l["createElementVNode"])("div",aA,[Object(l["createElementVNode"])("p",lA,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name)+", ",1),cA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.user.email),1)])])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",oA,[e.charge_id?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",sA,[nA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.charge_id?e.charge_id:"__"),1),rA,iA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.card_brand?e.card_brand:"__"),1),dA,mA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.last_4?e.last_4:"__"),1),bA,pA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.card_holder_name?e.card_holder_name:"__"),1)])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",uA,"Wallet Transaction"))]),Object(l["createElementVNode"])("td",OA,[Object(l["createElementVNode"])("p",hA,Object(l["toDisplayString"])(s.transactionType(e.type)),1)]),Object(l["createElementVNode"])("td",jA,[Object(l["createElementVNode"])("span",gA,[Object(l["createElementVNode"])("p",fA,["top_up"==e.type||"admin_top_up"==e.type||"pos_refund"==e.type||"school_shop_refund"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",EA,"+ ")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",VA,"- ")),Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.amount)),1)])])]),Object(l["createElementVNode"])("td",NA,[Object(l["createElementVNode"])("span",xA,Object(l["toDisplayString"])(s.formatDate(e.created_at)),1)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",yA,[Object(l["createElementVNode"])("div",vA,[Object(l["createElementVNode"])("div",kA,[Object(l["createElementVNode"])("div",wA,[SA,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.itemsPerPage=e),onChange:t[8]||(t[8]=e=>s.getTransactionHistory(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,AA))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",BA,[Object(l["createElementVNode"])("ul",CA,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getTransactionHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getTransactionHistory(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getTransactionHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,_A)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getTransactionHistory(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getTransactionHistory(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var IA=a("7885"),DA=(a("bb17"),{components:{DatePicker:IA["a"]},name:"tables",mounted(){this.setColor(),this.getUser(),this.getTransactionHistory(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"satff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("transaction_history"),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"]),limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e},computedPlaceholder(){return"Date"===this.filterBy?"Sep 18, 2024":"Type to Search..."}},data(){return{time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,user:"",transactionHistoryList:"",seachString:"",filterBy:"User",allFields:["User","Amount"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},exportTableToXLS(){const e=this.$refs.table,t=e.cloneNode(!0),a=Array.from(t.querySelectorAll("th")).findIndex(e=>"User"===e.textContent.trim());if(-1!==a){const e=t.querySelector("tr"),l=e.children[a];l.textContent="User Name";const c=document.createElement("th");c.textContent="User Email",e.insertBefore(c,l.nextSibling),t.querySelectorAll("tr").forEach((e,t)=>{if(t>0){const t=e.children[a],l=t.textContent.split(",").map(e=>e.trim()),c=l[0],o=l.length>1?l[1]:"";t.textContent=c;const s=document.createElement("td");s.textContent=o,e.insertBefore(s,t.nextSibling)}})}const l=MO["a"].table_to_sheet(t),c=MO["a"].book_new();MO["a"].book_append_sheet(c,l,"Sheet1"),MO["b"](c,"transaction_history.xlsx")},transactionType(e){let t="";return"top_up"==e?t="Top Up":"admin_top_up"==e?t="Top Up (Admin)":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");this.user=JSON.parse(e)},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},async getTransactionHistory(e=null){let t=localStorage.getItem("user");t=JSON.parse(t);let a=null;"student"==t.role&&(a=t.id);let l={user_id:null,admin_id:null,role:null,page:e,entries_per_page:this.itemsPerPage};l.user_id=a,"organization_admin"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||(l.admin_id=this.user.id,l.role=this.user.role);try{const e=await it.post("getTransactionHistory",l);this.transactionHistoryList=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(c){console.log(c)}},async filterTransactionHistory(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getTransactionHistory();const a="daterange_search"===e?{type:"Date Range",value:t}:{type:this.filterBy,value:this.seachString};try{const e=await it.post("/filterTransactionHistory",a);this.transactionHistoryList=e.data}catch(l){console.log(l)}},async deleteTransactionHistory(e){try{await it.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)},formatDate(e){const t=fo()(e);return t.format("DD/MM/YYYY")}}});a("3492");const TA=ct()(DA,[["render",PA]]);var MA=TA;Object(l["pushScopeId"])("data-v-2aa82826");const zA={class:" py-4"},FA={class:"row"},UA={class:"col-12"},LA={class:"card my-4"},$A={class:"card-body px-0 pb-2"},qA={class:"table-responsive p-0"},RA=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"},[Object(l["createTextVNode"])("Purchase History section not only provides a clear overview of completed purchases but also allows users to initiate refund requests directly from the purchase history,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" streamlining the process for resolving payment issues.")])])])],-1),HA={class:"card-body pt-1 p-3"},QA={class:"container-fluid mt-1"},JA={class:"listNavigation__lists"},YA={class:"listNavigation__list"},WA={class:"list__item"},XA={href:"#",class:"item__link"},ZA={class:"item__icon"},KA=["src"],GA={class:"item__content"},eB={class:"label text-sm"},tB={class:"label text-success"},aB={key:0,class:"text-success text-sm"},lB={key:1,class:"text-success text-sm"},cB={key:2,class:"ms-1 text-primary text-sm"},oB=Object(l["createElementVNode"])("small",null," (Card Payment)",-1),sB=[oB],nB={key:3,class:"ms-1 text-warning text-sm"},rB=Object(l["createElementVNode"])("small",null," (Wallet Payment)",-1),iB=[rB],dB={key:4,class:"ms-5 text-warning text-sm"},mB=Object(l["createElementVNode"])("small",null,"(Refunded)",-1),bB=[mB],pB={class:"description"},uB={class:"me-3 trip-dates text-warning"},OB=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),hB={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},jB=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),gB=[jB];function fB(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",zA,[Object(l["createElementVNode"])("div",FA,[Object(l["createElementVNode"])("div",UA,[Object(l["createElementVNode"])("div",LA,[Object(l["createElementVNode"])("div",$A,[Object(l["createElementVNode"])("div",qA,[RA,Object(l["createElementVNode"])("div",HA,[Object(l["createElementVNode"])("div",QA,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",JA,[Object(l["createElementVNode"])("ul",YA,[Object(l["createElementVNode"])("li",WA,[Object(l["createElementVNode"])("a",XA,[Object(l["createElementVNode"])("div",ZA,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,KA)]),Object(l["createElementVNode"])("div",GA,[Object(l["createElementVNode"])("h4",eB,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1),Object(l["createElementVNode"])("p",tB,"Price - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price)),1),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",aB,[Object(l["createElementVNode"])("small",null," Fully Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",lB,[Object(l["createElementVNode"])("small",null,"Partially Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",cB,sB)):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",nB,iB)):Object(l["createCommentVNode"])("",!0),"refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",dB,bB)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",pB,"Detail: "+Object(l["toDisplayString"])(t.detail),1),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",uB,"Date "+Object(l["toDisplayString"])(s.formatDateString(t.created_at)),1)])]),OB])])])])]))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hB,gB)):Object(l["createCommentVNode"])("",!0)])])])])])])])])}Object(l["popScopeId"])();var EB={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{shopItems:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getMyPurchases",t);this.shopItems=e.data.data}catch(a){console.log(a)}},async deleteShopItem(e){try{await it.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await it.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=fo()(e),a=t.format("DD/MM/YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("998c");const VB=ct()(EB,[["render",fB],["__scopeId","data-v-2aa82826"]]);var NB=VB;const xB={class:"container-fluid"},yB={class:"row"},vB={class:"col-12"},kB={class:"card px-3"},wB=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description ms-3"},[Object(l["createTextVNode"])("The Purchase History section provides detailed records of each purchase, including the Item Name, Buyer Name, Price, Amount Paid,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" Payment Status, and Date of Purchase. This feature helps track all transactions, offering a clear and organized overview of past purchases.")])])],-1),SB={class:"card-body px-0 pb-2"},AB={class:"table-responsive p-0"},BB={class:"filter-container ms-2 mb-2"},CB={class:"row",style:{width:"100%"}},_B={class:"col-4",style:{"padding-top":"15px"}},PB={style:{display:"flex"}},IB=["value"],DB=Object(l["createElementVNode"])("div",{class:"col-4 col-md-4 col-sm-6",style:{"padding-top":"15px"}},null,-1),TB={class:"col-4 col-md-4 col-sm-4 d-flex",style:{"padding-top":"15px"}},MB=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon",title:"Export to excel"},null,-1),zB=[MB],FB={class:"table-responsive p-0"},UB={ref:"table",class:"table align-items-center mb-0"},LB=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Buyer "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Amount Paid "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Payment Method "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),$B={key:0},qB=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),RB=[qB],HB={class:"align-middle text-center"},QB={class:"text-secondary text-xs font-weight-bold"},JB={class:"align-middle text-center d-flex flex-column"},YB={class:"text-secondary text-xs"},WB={class:"text-secondary text-xs"},XB={class:"align-middle text-center"},ZB=["src"],KB={class:"text-secondary text-xs "},GB={class:"align-middle text-center"},eC={class:"text-secondary text-xs"},tC={class:"align-middle text-center"},aC={class:"text-secondary text-xs"},lC={class:"align-middle text-center"},cC={key:0,class:"text-success text-xs"},oC={key:1,class:"text-warning text-xs"},sC={class:"align-middle text-center text-sm"},nC={key:0,class:"badge badge-sm bg-gradient-danger"},rC={key:1,class:"badge badge-sm bg-gradient-success"},iC={class:"align-middle text-center text-sm"},dC={class:"align-middle text-center text-sm"},mC=["onClick"],bC={key:1,class:"badge badge-sm bg-gradient-success"},pC={class:"row"},uC={class:"col-md-12 col-lg-12"},OC={class:"pagination-container"},hC={class:"entries-dropdown"},jC=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),gC=["value"],fC={class:"pagination-wrapper"},EC={class:"pagination"},VC=["onClick"];function NC(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",xB,[Object(l["createElementVNode"])("div",yB,[Object(l["createElementVNode"])("div",vB,[Object(l["createElementVNode"])("div",kB,[wB,Object(l["createElementVNode"])("div",SB,[Object(l["createElementVNode"])("div",AB,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",BB,[Object(l["createElementVNode"])("div",CB,[Object(l["createElementVNode"])("div",_B,[Object(l["createElementVNode"])("span",PB,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>s.filterPurchaseHistory("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>s.filterPurchaseHistory("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"110px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,IB))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),DB,Object(l["createElementVNode"])("div",TB,[Object(l["createElementVNode"])("div",{class:"label-text bulk_topup me-3 d-flex",onClick:t[4]||(t[4]=e=>s.exportTableToXLS()),style:{"padding-top":"1px",width:"fit-content"}},zB),Object(l["createVNode"])(n,{onChange:t[5]||(t[5]=e=>s.filterPurchaseHistory("daterange_search")),onClear:s.getPurchaseHistory,value:o.time3,"onUpdate:value":t[6]||(t[6]=e=>o.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])])]),Object(l["createElementVNode"])("div",FB,[Object(l["createElementVNode"])("table",UB,[LB,Object(l["createElementVNode"])("tbody",null,[0===o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",$B,RB)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",HB,[Object(l["createElementVNode"])("span",QB,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",JB,[Object(l["createElementVNode"])("span",YB,Object(l["toDisplayString"])(t.buyer_name)+" ,",1),Object(l["createElementVNode"])("small",WB,Object(l["toDisplayString"])(t.buyer_email),1)]),Object(l["createElementVNode"])("td",XB,[t.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+t.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,ZB)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",KB,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",GB,[Object(l["createElementVNode"])("span",eC,"£"+Object(l["toDisplayString"])(s.formattedPrice(t.price)),1)]),Object(l["createElementVNode"])("td",tC,[Object(l["createElementVNode"])("span",aC,"£"+Object(l["toDisplayString"])(s.formattedPrice(t.amount_paid)),1)]),Object(l["createElementVNode"])("td",lC,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",cC,"Card Payment")):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",oC,"Wallet Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",sC,["partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",nC,"Partially Paid")):Object(l["createCommentVNode"])("",!0),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",rC,"Fully Paid")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",iC,Object(l["toDisplayString"])(s.formatDateString(t.created_at)),1),Object(l["createElementVNode"])("td",dC,[null==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,onClick:e=>s.confirmRefund(t.id),class:"badge badge-sm bg-gradient-danger",style:{cursor:"pointer"}},"Refund ->",8,mC)):Object(l["createCommentVNode"])("",!0),"refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",bC,"Refunded")):Object(l["createCommentVNode"])("",!0)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",pC,[Object(l["createElementVNode"])("div",uC,[Object(l["createElementVNode"])("div",OC,[Object(l["createElementVNode"])("div",hC,[jC,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.itemsPerPage=e),onChange:t[8]||(t[8]=e=>s.getPurchaseHistory(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,gC))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",fC,[Object(l["createElementVNode"])("ul",EC,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getPurchaseHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getPurchaseHistory(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getPurchaseHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,VC)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getPurchaseHistory(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getPurchaseHistory(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var xC={components:{DatePicker:IA["a"]},name:"tables",mounted(){this.setColor(),this.getUser(),this.getPurchaseHistory(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("purchase_history"),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Item Name",allFields:["Buyer","Item Name","Price","Amount Paid","Payment Status"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmRefund(e){jo.a.fire({title:"Are you sure?",text:"Paid Amount will be refunded and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, refund it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.refundActions(e)})},exportTableToXLS(){const e=this.$refs.table,t=e.cloneNode(!0),a=Array.from(t.querySelectorAll("th")).findIndex(e=>"Action"===e.textContent.trim());-1!==a&&t.querySelectorAll("tr").forEach(e=>e.deleteCell(a));const l=Array.from(t.querySelectorAll("th")).findIndex(e=>"Buyer"===e.textContent.trim());if(-1!==l){const e=t.querySelector("tr"),a=e.children[l];a.textContent="Buyer Name";const c=document.createElement("th");c.textContent="Buyer Email",e.insertBefore(c,a.nextSibling),t.querySelectorAll("tr").forEach((e,t)=>{if(t>0){const t=e.children[l],a=t.textContent.split(",").map(e=>e.trim()),c=a[0],o=a.length>1?a[1]:"";t.textContent=c;const s=document.createElement("td");s.textContent=o,e.insertBefore(s,t.nextSibling)}})}const c=MO["a"].table_to_sheet(t),o=MO["a"].book_new();MO["a"].book_append_sheet(o,c,"Sheet1"),MO["b"](o,"purchase_history.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async refundActions(e){let t={purchase_id:e};try{await it.post("/refundStatus",t),this.snackbarMsg("Successfuly Refunded!"),this.getPurchaseHistory()}catch(a){console.log(a),this.snackbarMsg("Something went wrong!")}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getPurchaseHistory(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getMyPurchases",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterPurchaseHistory(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getPurchaseHistory();const a="daterange_search"===e?{type:"Date Range",value:t}:{type:this.filterBy,value:this.seachString};try{const e=await it.post("/filterPurchaseHistory",a);this.shopItems=e.data,this.totalRows=e.data.total,this.currentPage=e.data.current_page,this.perPage=e.per_page,this.totalPages=e.data.last_page}catch(l){console.log(l)}},async deleteShopItem(e){try{await it.delete("/deleteShopItem/"+e),this.getPurchaseHistory(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=fo()(e),a=t.format("DD/MM/YYYY");return a},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await it.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("69e7");const yC=ct()(xC,[["render",NC]]);var vC=yC;const kC={class:""},wC={class:"row"},SC={class:"col-12"},AC={class:"card"},BC={class:"card-body px-0 pb-2"},CC={class:"table-responsive p-0"},_C=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PENDING INSTALMENTS",-1),PC=Object(l["createElementVNode"])("div",{class:"filter-container mb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"ms-4 page-description"}," In the Pending Instalments section, you can track and manage pending payments for students. This section allows you to view details of pending instalments. ")])],-1),IC={class:"filter-container ms-3 mb-2"},DC={class:"row",style:{width:"100%"}},TC={class:"col-4",style:{"padding-top":"15px"}},MC={style:{display:"flex"}},zC=["value"],FC=Object(l["createElementVNode"])("div",{class:"col-4 col-md-4 col-sm-6",style:{"padding-top":"15px"}},null,-1),UC={class:"col-4 col-md-4 col-sm-4",style:{"padding-top":"15px"}},LC={key:0,class:"card-body pt-1 p-3"},$C={class:"container-fluid mt-1"},qC=["onClick"],RC={class:"listNavigation__lists"},HC={class:"listNavigation__list"},QC={class:"list__item"},JC={href:"#",class:"item__link"},YC={class:"item__icon"},WC=["src"],XC={class:"item__content"},ZC={class:"label text-sm"},KC={class:"description text-success"},GC={class:"description text-success"},e_={class:"description text-success"},t_={class:"description"},a_={class:"description"},l_=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),c_={key:0,class:""},o_=Object(l["createElementVNode"])("h4",{class:"label text-sm"},"Buyer Information:",-1),s_={class:"label text-sm"},n_={class:"label text-sm"},r_=["onClick"],i_={key:0,class:"mb-5 pb-5"},d_={class:"ms-5 ps-3 text-success"},m_={class:"me-5 text-success"},b_={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},p_=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),u_=[p_],O_={key:1,class:"card-body pt-1 p-3"},h_={class:"container-fluid mt-1"},j_={class:"listNavigation__lists"},g_={class:"listNavigation__list"},f_={class:"list__item"},E_={href:"#",class:"item__link"},V_={class:"item__icon"},N_=["src"],x_={class:"item__content"},y_={class:"label text-sm"},v_={class:"label text-success"},k_={class:"description"},w_=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),S_={key:0,class:""},A_=Object(l["createElementVNode"])("h4",{class:"label text-sm text-warning"},"Buyer",-1),B_={class:"label text-sm"},C_={class:"label text-success"},__=["onClick"],P_={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},I_=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),D_=[I_],T_={class:"row"},M_={class:"col-md-12 col-lg-12"},z_={class:"pagination-container"},F_={class:"entries-dropdown"},U_=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),L_=["value"],$_={class:"pagination-wrapper"},q_={class:"pagination"},R_=["onClick"];function H_(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",kC,[Object(l["createElementVNode"])("div",wC,[Object(l["createElementVNode"])("div",SC,[Object(l["createElementVNode"])("div",AC,[Object(l["createElementVNode"])("div",BC,[Object(l["createElementVNode"])("div",CC,[_C,PC,Object(l["createElementVNode"])("div",IC,[Object(l["createElementVNode"])("div",DC,[Object(l["createElementVNode"])("div",TC,[Object(l["createElementVNode"])("span",MC,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>s.filterInstallments("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>s.filterInstallments("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,zC))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),FC,Object(l["createElementVNode"])("div",UC,[Object(l["createVNode"])(n,{onChange:t[4]||(t[4]=e=>s.filterInstallments("daterange_search")),onClear:s.getShopItems,value:o.time3,"onUpdate:value":t[5]||(t[5]=e=>o.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])]),"student"!=o.user.role&&"staff"!=o.user.role&&"parent"!=o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LC,[Object(l["createElementVNode"])("div",$C,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[Object(l["createElementVNode"])("div",{onClick:e=>s.openInstallment(t.id),class:"listNavigation"},[Object(l["createElementVNode"])("div",RC,[Object(l["createElementVNode"])("ul",HC,[Object(l["createElementVNode"])("li",QC,[Object(l["createElementVNode"])("a",JC,[Object(l["createElementVNode"])("div",YC,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,WC)]),Object(l["createElementVNode"])("div",XC,[Object(l["createElementVNode"])("h4",ZC,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1),Object(l["createElementVNode"])("div",KC,"Order Amount - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price)),1),Object(l["createElementVNode"])("div",GC,"Paid Amount - £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid?t.amount_paid:0)),1),Object(l["createElementVNode"])("div",e_,"Remaining Amount - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price-(t.amount_paid?t.amount_paid:0))),1),Object(l["createElementVNode"])("div",t_,"Purchase Id: #"+Object(l["toDisplayString"])(t.id),1),Object(l["createElementVNode"])("div",a_,"Purchase Date: "+Object(l["toDisplayString"])(s.formatDateString(t.purchase_date)),1)]),l_]),"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",c_,[o_,Object(l["createElementVNode"])("p",s_,Object(l["toDisplayString"])(t.buyer_name),1),Object(l["createElementVNode"])("p",n_,Object(l["toDisplayString"])(t.buyer_email),1)])):Object(l["createCommentVNode"])("",!0),"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:e=>s.payNow(t.id),style:{"font-size":"12px",width:"25% !important","background-color":"#573078"},class:"trips-btn btn text-white fw-2 py-2 px-1 border-radius-lg"}," Pay now",8,r_)):Object(l["createCommentVNode"])("",!0)])])])],8,qC),o.openedInstallment==t.id?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",i_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"d-flex justify-content-between"},[Object(l["createElementVNode"])("small",d_,"Installment-"+Object(l["toDisplayString"])(e.installment_no),1),Object(l["createElementVNode"])("small",m_,"Amount: £"+Object(l["toDisplayString"])(s.formattedAmount(e.installment_amount)),1)]))),128))])):Object(l["createCommentVNode"])("",!0)],64))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",b_,u_)):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),"student"==o.user.role||"staff"==o.user.role||"parent"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",O_,[Object(l["createElementVNode"])("div",h_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",j_,[Object(l["createElementVNode"])("ul",g_,[Object(l["createElementVNode"])("li",f_,[Object(l["createElementVNode"])("a",E_,[Object(l["createElementVNode"])("div",V_,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,N_)]),Object(l["createElementVNode"])("div",x_,[Object(l["createElementVNode"])("h4",y_,"Instalment No."+Object(l["toDisplayString"])(t.installment_no),1),Object(l["createElementVNode"])("p",v_,"Instalment Amount - £"+Object(l["toDisplayString"])(s.formattedAmount(t.installment_amount)),1),Object(l["createElementVNode"])("div",k_,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1)]),w_]),"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",S_,[A_,Object(l["createElementVNode"])("h4",B_,Object(l["toDisplayString"])(t.buyer_name),1),Object(l["createElementVNode"])("p",C_,Object(l["toDisplayString"])(t.buyer_email),1)])):Object(l["createCommentVNode"])("",!0),"student"==o.user.role||"staff"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:e=>s.payNow(t.id),style:{"font-size":"12px",width:"25% !important","background-color":"#573078"},class:"trips-btn btn text-white fw-2 py-2 px-1 border-radius-lg"}," Pay now",8,__)):Object(l["createCommentVNode"])("",!0)])])])]))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",P_,D_)):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",T_,[Object(l["createElementVNode"])("div",M_,[Object(l["createElementVNode"])("div",z_,[Object(l["createElementVNode"])("div",F_,[U_,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.itemsPerPage=e),onChange:t[7]||(t[7]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,L_))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",$_,[Object(l["createElementVNode"])("ul",q_,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,R_)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var Q_={components:{DatePicker:IA["a"]},name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("pending_installments"),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{openedInstallment:null,time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Buyer",allFields:["Buyer","Item Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formatDateString(e){const t=fo()(e),a=t.format("DD/MM/YYYY");return a},openInstallment(e){this.openedInstallment==e?this.openedInstallment=null:this.openedInstallment=e},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getMyInstallments",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterInstallments(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getShopItems();const a="daterange_search"===e?{type:"Date Range",value:t}:{type:this.filterBy,value:this.seachString};try{const e=await it.post("/filterInstallments",a);this.shopItems=e.data}catch(l){console.log(l)}},async deleteShopItem(e){try{await it.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},payNow(e){this.$router.push({name:"pay-installment",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await it.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("8a39");const J_=ct()(Q_,[["render",H_]]);var Y_=J_,W_=a("aa68"),X_=a.n(W_);const Z_={class:"row"},K_={class:"col-xl-12 col-lg-12 col-md-12"},G_={class:"card"},eP={class:"card-header pb-0 px-3 d-flex justify-content-between"},tP=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Pay Instalment",-1),aP=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),lP=[aP],cP={class:"card-body pt-4 p-3"},oP={class:"row"},sP={class:"list-group col-xl-6 col-lg-6 col-md-6"},nP={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},rP={class:"d-flex flex-column"},iP={class:"mb-3 text-sm"},dP={key:0},mP=Object(l["createElementVNode"])("br",null,null,-1),bP={key:1,class:"text-success"},pP={key:2,class:"text-success"},uP=Object(l["createTextVNode"])(" Instalments And Deposit "),OP=Object(l["createElementVNode"])("br",null,null,-1),hP=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},null,-1),jP={class:"ms-auto text-end"},gP=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),fP=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),EP={class:"ms-auto text-end"},VP={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},NP=["onClick"],xP=Object(l["createElementVNode"])("br",null,null,-1),yP={key:0,class:"text-success me-3"},vP={key:1,class:"text-success me-3"},kP=Object(l["createElementVNode"])("br",null,null,-1),wP={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},SP={class:"d-flex flex-column"},AP={class:"mb-3 text-sm"},BP=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs"},null,-1),CP={class:"ms-auto text-end"},_P=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),PP=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),IP={class:"ms-auto text-end"},DP={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},TP=["onClick"],MP={class:"col-md-5 ms-auto"},zP=["onClick"],FP={key:0,class:"w-10 me-3 mb-0",src:X_.a,alt:"logo"},UP={key:1,class:"w-10 me-3 mb-0",src:ut.a,alt:"logo"},LP={class:"mb-0"},$P={key:0,class:"text-sm text-warning mt-1"};function qP(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Z_,[Object(l["createElementVNode"])("div",K_,[Object(l["createElementVNode"])("div",G_,[Object(l["createElementVNode"])("div",eP,[tP,Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},lP)]),Object(l["createElementVNode"])("div",cP,[Object(l["createElementVNode"])("div",oP,[Object(l["createElementVNode"])("ul",sP,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",nP,[Object(l["createElementVNode"])("div",rP,[Object(l["createElementVNode"])("h6",iP,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",dP,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),mP,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",bP," Instalments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",pP,[uP,OP,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Installments) ",1)])):Object(l["createCommentVNode"])("",!0)]),hP]),Object(l["createElementVNode"])("div",jP,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[gP,fP],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EP,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",VP," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,NP),xP,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yP," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",vP,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.initial_deposit_installments))+" Deposit ",1),kP,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",wP,[Object(l["createElementVNode"])("div",SP,[Object(l["createElementVNode"])("h6",AP,Object(l["toDisplayString"])(e.trip.title)+" (Trip)",1),BP]),Object(l["createElementVNode"])("div",CP,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"school_user"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[_P,PP],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",IP,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",DP," £"+Object(l["toDisplayString"])(s.formattedPrice(e.trip.budget)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,TP)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",MP,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:o.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>s.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",FP)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",UP)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",LP," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,zP))),128)),Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>s.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment "),Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=e=>s.checkout("wallet_and_card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet Payment "),o.dataLoaded?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",$P,"In a Wallet & Card Payment, the wallet is charged first, and any remaining amount is charged to the card.")):Object(l["createCommentVNode"])("",!0)])])])])])])}var RP={name:"billing-card",data(){return{userCards:"",dataLoaded:!1,user:"",isSelected:0}},mounted(){this.getUser(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit_installments:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price))}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await it.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"",a=this.$route.params.id,l={payment_method:t,type:e,installment_id:a};try{await it.post("/payInstallment",l),this.snackbarMsg("Payment Successful"),this.$router.push({name:"installments"})}catch(c){console.log(c)}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await it.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};const HP=ct()(RP,[["render",qP]]);var QP=HP;const JP={class:""},YP={class:"row"},WP={class:"col-12"},XP={class:"card"},ZP={class:"card-body px-0 pb-2"},KP={class:"table-responsive p-0"},GP=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"REFUNDS",-1),eI=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"}," In the Refund section, you can view a list of processed refunds along with their details. ")],-1),tI={class:"filter-container mb-3"},aI={class:"row",style:{width:"100%"}},lI={class:"col-4",style:{"padding-top":"15px"}},cI={style:{display:"flex","margin-left":"20px"}},oI=["value"],sI=Object(l["createElementVNode"])("div",{class:"col-4 col-md-4 col-sm-6",style:{"padding-top":"15px"}},null,-1),nI={class:"col-4 col-md-4 col-sm-4",style:{"padding-top":"15px"}},rI={class:"card-body pt-1 p-3"},iI={class:"container-fluid mt-1"},dI={class:"row"},mI={class:"col-md-8"},bI={class:"d-flex flex-column"},pI={class:"d-flex"},uI=["src"],OI={class:"d-flex flex-column "},hI={class:"text-sm",style:{"margin-bottom":"0px !important"}},jI={key:0,style:{"font-size":"10px !important","font-weight":"400"},class:" text-sm"},gI={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"10px"}},fI={class:"me-3 trip-dates text-warning"},EI={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"10px"}},VI={class:"me-3 trip-dates text-warning"},NI={class:"me-2"},xI=Object(l["createTextVNode"])("Refunded to "),yI={class:"text-success"},vI={key:0},kI=Object(l["createTextVNode"])("Student-ID: "),wI={class:"text-success"},SI={key:1},AI=Object(l["createTextVNode"])("Staff-ID: "),BI={class:"text-success"},CI={class:"col-md-4"},_I={class:"ms-auto text-end me-3"},PI={class:"d-flex flex-column "},II={class:"text-danger text-gradient text-sm mt-1",style:{"font-size":"13px !important","font-weight":"600","line-height":"14px"}},DI={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"14px"}},TI={key:0,style:{"font-size":"13px"},class:"text-success"},MI={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"14px"}},zI={key:0,style:{"font-size":"13px"},class:"text-warning"},FI={style:{"font-size":"13px"},class:"text-white"},UI={key:0,class:"text-success"},LI={key:1,class:"text-success"},$I=Object(l["createElementVNode"])("hr",null,null,-1),qI={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},RI=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),HI=[RI],QI={class:"row"},JI={class:"col-md-12 col-lg-12"},YI={class:"pagination-container"},WI={class:"entries-dropdown"},XI=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),ZI=["value"],KI={class:"pagination-wrapper"},GI={class:"pagination"},eD=["onClick"];function tD(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",JP,[Object(l["createElementVNode"])("div",YP,[Object(l["createElementVNode"])("div",WP,[Object(l["createElementVNode"])("div",XP,[Object(l["createElementVNode"])("div",ZP,[Object(l["createElementVNode"])("div",KP,[GP,eI,Object(l["createElementVNode"])("div",tI,[Object(l["createElementVNode"])("div",aI,[Object(l["createElementVNode"])("div",lI,[Object(l["createElementVNode"])("span",cI,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>s.filterRefunds("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>s.filterRefunds("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,oI))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),sI,Object(l["createElementVNode"])("div",nI,[Object(l["createVNode"])(n,{onChange:t[4]||(t[4]=e=>s.filterRefunds("daterange_search")),onClear:s.getShopItems,value:o.time3,"onUpdate:value":t[5]||(t[5]=e=>o.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])]),Object(l["createElementVNode"])("div",rI,[Object(l["createElementVNode"])("div",iI,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[Object(l["createElementVNode"])("div",dI,[Object(l["createElementVNode"])("div",mI,[Object(l["createElementVNode"])("div",bI,[Object(l["createElementVNode"])("span",pI,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-10 h-10 me-3 border-radius-lg"},null,8,uI),Object(l["createElementVNode"])("div",OI,[Object(l["createElementVNode"])("h6",hI,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(t.name)+" ",1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jI," ("+Object(l["toDisplayString"])(t.product_type)+") ",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("span",gI,[Object(l["createElementVNode"])("small",fI,"Date "+Object(l["toDisplayString"])(s.formatDateString(t.created_at)),1)]),Object(l["createElementVNode"])("span",EI,[Object(l["createElementVNode"])("small",VI,[Object(l["createElementVNode"])("span",NI,[xI,Object(l["createElementVNode"])("span",yI,Object(l["toDisplayString"])(t.buyer_name)+",",1)]),"student"==t.buyer_role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",vI,[kI,Object(l["createElementVNode"])("span",wI,Object(l["toDisplayString"])(t.buyer_student_id),1)])):Object(l["createCommentVNode"])("",!0),"staff"==t.buyer_role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",SI,[AI,Object(l["createElementVNode"])("span",BI,Object(l["toDisplayString"])(t.buyer_staff_id),1)])):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",CI,[Object(l["createElementVNode"])("div",_I,[Object(l["createElementVNode"])("div",PI,[Object(l["createElementVNode"])("small",II," Price - £"+Object(l["toDisplayString"])(s.formattedAmount(t.price)),1),Object(l["createElementVNode"])("span",DI,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",TI,"Card Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("span",MI,[null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zI,"Wallet Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",FI,["fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",UI,"Fully Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",LI,"Partially Paid: £"+Object(l["toDisplayString"])(s.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0)])])])])]),$I],64))),128)),0==o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qI,HI)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",QI,[Object(l["createElementVNode"])("div",JI,[Object(l["createElementVNode"])("div",YI,[Object(l["createElementVNode"])("div",WI,[XI,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.itemsPerPage=e),onChange:t[7]||(t[7]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,ZI))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",KI,[Object(l["createElementVNode"])("ul",GI,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,eD)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var aD={components:{DatePicker:IA["a"]},name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("refunds"),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",filterBy:"Buyer",allFields:["Buyer"],seachString:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmAction(e,t){jo.a.fire({title:"Are you sure?",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Proceed!",customClass:{popup:"custom-swal"}}).then(a=>{a.isConfirmed&&this.refundActions(e,t)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getRefundRequest",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterRefunds(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getShopItems();const a="daterange_search"===e?{type:"Date Range",value:t}:{type:this.filterBy,value:this.seachString};try{const e=await it.post("/filterRefunds",a);this.shopItems=e.data}catch(l){console.log(l)}},async refundActions(e,t){let a={refund_status:t,refund_id:e};try{await it.post("/refundStatus",a),this.getShopItems(),this.snackbarMsg("Successfuly Refunded!")}catch(l){console.log(l),this.snackbarMsg("Something went wrong!")}},async deleteShopItem(e){try{await it.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await it.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=fo()(e),a=t.format("DD/MM/YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("c574");const lD=ct()(aD,[["render",tD]]);var cD=lD;Object(l["pushScopeId"])("data-v-9364ae48");const oD={class:"row"},sD={class:"col-md-12 col-sm-12"},nD={class:"support-form-container"},rD=Object(l["createElementVNode"])("h5",null,"Contact Support",-1),iD={class:"col-md-6 col-sm-12"},dD={key:0,class:"row mb-1 validation-errors bg-warning rounded p-1"},mD={class:"form-group"},bD=Object(l["createElementVNode"])("label",{for:"fullName",class:"input-label"},"Full Name",-1),pD={class:"form-group"},uD=Object(l["createElementVNode"])("label",{for:"email"},"Email",-1),OD={class:"form-group"},hD=Object(l["createElementVNode"])("label",{for:"subject"},"Subject",-1),jD={class:"form-group"},gD=Object(l["createElementVNode"])("label",{for:"message"},"Message",-1),fD=Object(l["createElementVNode"])("button",{type:"submit",class:"submit-button btn p-1 text-sm"},"Submit",-1);function ED(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oD,[Object(l["createElementVNode"])("div",sD,[Object(l["createElementVNode"])("div",nD,[Object(l["createElementVNode"])("form",{class:"support-form",onSubmit:t[4]||(t[4]=Object(l["withModifiers"])((...e)=>s.handleSubmit&&s.handleSubmit(...e),["prevent"]))},[rD,Object(l["createElementVNode"])("div",iD,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",dD,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",mD,[bD,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.form.fullName=e),type:"text",readonly:"",class:"input-box",id:"fullName",name:"fullName",required:""},null,512),[[l["vModelText"],o.form.fullName]])]),Object(l["createElementVNode"])("div",pD,[uD,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.form.email=e),type:"email",readonly:"",class:"input-box",id:"email",name:"email",required:""},null,512),[[l["vModelText"],o.form.email]])]),Object(l["createElementVNode"])("div",OD,[hD,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.form.subject=e),type:"text",class:"input-box",id:"subject",name:"subject",required:""},null,512),[[l["vModelText"],o.form.subject]])]),Object(l["createElementVNode"])("div",jD,[gD,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.form.message=e),id:"message",class:"input-area",name:"message",rows:"5",required:""},null,512),[[l["vModelText"],o.form.message]])])]),fD],32)])])])}Object(l["popScopeId"])();var VD={data(){return{isError:!1,validationErrors:"",user:"",form:{fullName:"",email:"",subject:"",message:""}}},mounted(){this.getUser(),this.$globalHelper.buttonColor()},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,"student"==e.role||"staff"==e.role?console.log(""):this.$router.go(-1),this.form.fullName=this.user.first_name+" "+this.user.last_name,this.form.email=this.user.email},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async handleSubmit(){try{await it.post("/sendSupportEmail",this.form),this.snackbarMsg("Message Sent Successfully!"),this.isError=!1,Object.keys(this.form).forEach(e=>this.form[e]="")}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("639d");const ND=ct()(VD,[["render",ED],["__scopeId","data-v-9364ae48"]]);var xD=ND;const yD={class:"container-fluid"},vD={class:"row"},kD={class:"col-12"},wD={class:"card ps-3"},SD={class:"d-flex justify-content-between border-radius-lg pt-4"},AD=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS",-1),BD=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),CD=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee Shop Items. You can add new items, delete or edit existing items, and update their quantity, status, "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" and price. This functionality ensures effective management of the shop items. ")])],-1),_D={class:"card-body px-0 pb-2"},PD={class:"table-responsive p-0"},ID={class:"filter-container ms-2 mb-2"},DD={class:"row",style:{width:"100%"}},TD={class:"col-4"},MD={style:{display:"flex"}},zD=["value"],FD={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},UD=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),LD=Object(l["createTextVNode"])(" Export To XLS "),$D=[UD,LD],qD={class:"table-responsive p-0"},RD={ref:"table",class:"table align-items-center mb-0"},HD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),QD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),JD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),YD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Sold Quantity ",-1),WD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Expiration Date ",-1),XD=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),ZD={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},KD=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),GD=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),eT={key:0},tT=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),aT=[tT],lT={class:"align-middle text-center"},cT={class:"text-secondary text-xs font-weight-bold"},oT={class:"align-middle text-center"},sT=["src"],nT={class:"text-secondary text-xs "},rT={class:"align-middle text-center"},iT={class:"text-secondary text-xs "},dT={class:"align-middle text-center"},mT={class:"text-secondary text-xs "},bT={class:"align-middle text-center"},pT={class:"text-secondary text-xs "},uT={class:"align-middle text-center"},OT={class:"text-secondary text-xs "},hT={key:0,class:"align-middle text-center"},jT={class:"text-secondary text-xs "},gT={class:"align-middle text-center text-sm"},fT={key:0,class:"badge badge-sm bg-gradient-danger"},ET={key:1,class:"badge badge-sm bg-gradient-success"},VT={key:2,class:"badge badge-sm bg-gradient-success"},NT={key:3,class:"badge badge-sm bg-gradient-danger"},xT={class:"align-middle text-center text-sm"},yT={key:0},vT=["onClick"],kT=["onClick"],wT={class:"row"},ST={class:"col-md-12 col-lg-12"},AT={class:"pagination-container"},BT={class:"entries-dropdown"},CT=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),_T=["value"],PT={class:"pagination-wrapper"},IT={class:"pagination"},DT=["onClick"];function TT(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("ProductOwner");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yD,[Object(l["createElementVNode"])("div",vD,[Object(l["createElementVNode"])("div",kD,[Object(l["createElementVNode"])("div",wD,[Object(l["createElementVNode"])("div",SD,[AD,s.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-items"}},{default:Object(l["withCtx"])(()=>[BD]),_:1})):Object(l["createCommentVNode"])("",!0)]),CD,Object(l["createElementVNode"])("div",_D,[Object(l["createElementVNode"])("div",PD,[Object(l["createElementVNode"])("div",ID,[Object(l["createElementVNode"])("div",DD,[Object(l["createElementVNode"])("div",TD,[Object(l["createElementVNode"])("span",MD,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,zD))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",FD,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},$D)])])]),Object(l["createElementVNode"])("div",qD,[Object(l["createElementVNode"])("table",RD,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[HD,QD,JD,YD,WD,XD,o.user&&"super_admin"==o.user.role||o.user&&"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",ZD," Shop ")):Object(l["createCommentVNode"])("",!0),KD,GD])]),Object(l["createElementVNode"])("tbody",null,[0===o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",eT,aT)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(a,c)=>{var n;return Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:c},[Object(l["createElementVNode"])("td",lT,[Object(l["createElementVNode"])("span",cT,Object(l["toDisplayString"])(a.id),1)]),Object(l["createElementVNode"])("td",oT,[a.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+a.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,sT)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",nT,Object(l["toDisplayString"])(a.name),1)]),Object(l["createElementVNode"])("td",rT,[Object(l["createElementVNode"])("span",iT,Object(l["toDisplayString"])(null!==(n=a.quantity)&&void 0!==n?n:"Unlimited"),1)]),Object(l["createElementVNode"])("td",dT,[Object(l["createElementVNode"])("span",mT,Object(l["toDisplayString"])(a.quantity_sold),1)]),Object(l["createElementVNode"])("td",bT,[Object(l["createElementVNode"])("span",pT,Object(l["toDisplayString"])(s.formatDate(a.valid_to)),1)]),Object(l["createElementVNode"])("td",uT,[Object(l["createElementVNode"])("span",OT,"£"+Object(l["toDisplayString"])(s.formattedPrice(a.price)),1)]),o.user&&"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",hT,[Object(l["createElementVNode"])("span",jT,Object(l["toDisplayString"])(t.shop_name?t.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",gT,["expired"==a.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",fT,"Expired")):null==a.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",ET,"Available")):a.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",VT,"Available")):0==a.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",NT,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",xT,[o.user&&"student"!=o.user.role&&"parent"!=o.user.role&&"staff"!=o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yT,[s.userPermissions.edit_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:e=>s.editShopItem(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,vT)):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:e=>s.confirmDelete(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,kT)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0)])])}),128))],64))),128))])],512)])]),Object(l["createVNode"])(r,{show:o.showModal,ownerData:o.ownerData,onClose:t[5]||(t[5]=e=>o.showModal=!1),onUpdateTask:e.updateAmount},null,8,["show","ownerData","onUpdateTask"]),Object(l["createElementVNode"])("div",wT,[Object(l["createElementVNode"])("div",ST,[Object(l["createElementVNode"])("div",AT,[Object(l["createElementVNode"])("div",BT,[CT,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.itemsPerPage=e),onChange:t[7]||(t[7]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,_T))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",PT,[Object(l["createElementVNode"])("ul",IT,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,DT)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}Object(l["pushScopeId"])("data-v-0c52248a");const MT={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},zT={class:"modal-dialog modal-dialog-centered",style:{width:"28%"}},FT={class:"modal-content"},UT={class:"modal-header"},LT=Object(l["createElementVNode"])("h5",{class:"h5 modal-title"},"Product Owner",-1),$T=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),qT=[$T],RT={class:"pt-4 modal-body"},HT=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),QT={class:"mb-4 input-group"},JT={class:"mb-4 input-group"},YT={key:0,class:"alert alert-success"},WT={class:"text-end"};function XT(e,t,a,c,o,s){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",MT,[Object(l["createElementVNode"])("div",zT,[Object(l["createElementVNode"])("div",FT,[Object(l["createElementVNode"])("div",UT,[LT,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e)),"aria-label":"Close"},qT)]),Object(l["createElementVNode"])("div",RT,[HT,Object(l["createElementVNode"])("div",QT,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>o.owner.product_owner_name=e),type:"email",class:"form-control border p-1",placeholder:"Name"},null,512),[[l["vModelText"],o.owner.product_owner_name]])]),Object(l["createElementVNode"])("div",JT,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[2]||(t[2]=e=>o.owner.product_owner_email=e),type:"email",class:"form-control border p-1",placeholder:"Email"},null,512),[[l["vModelText"],o.owner.product_owner_email]])]),o.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",YT,Object(l["toDisplayString"])(o.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",WT,[Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>s.saveChanges&&s.saveChanges(...e)),class:"m-1 btn btn-primary"}," Save "),Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var ZT={props:{show:{type:Boolean,required:!0},ownerData:{type:Object,required:!0}},mounted(){this.$globalHelper.buttonColor()},computed:{formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},data(){return{addedBalance:null,successMessage:"",owner:{product_owner_name:"",product_owner_email:""}}},watch:{ownerData:{handler(e){this.owner=e},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},async saveChanges(){try{const e="/productsOwner";await it.post(e,this.owner),this.snackbarMsg("Item Updated Successfuly")}catch(e){console.log(e)}this.$emit("update-task",this.addedBalance),this.closeModal()}}};a("4aee");const KT=ct()(ZT,[["render",XT],["__scopeId","data-v-0c52248a"]]);var GT=KT,eM={components:{ProductOwner:GT},name:"tables",mounted(){this.setColor(),this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_shop"),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{ownerData:"",showModal:!1,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",shopItems:"",user:"",filterBy:"Name",allFields:["Name","Quantity","Price"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{formatDate(e){const t=e,a=fo()(t).format("DD/MM/YYYY");return a},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"shop_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getShopItems",t);this.shopItems=e.data.data.data,console.log(this.shopItems);let a=this.shopItems[0];this.ownerData={product_owner_name:a.product_owner_name,product_owner_email:a.product_owner_email},this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await it.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await it.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await it.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("2f67");const tM=ct()(eM,[["render",TT]]);var aM=tM;const lM={class:"container-fluid"},cM={class:"row"},oM={class:"col-12"},sM={class:"card px-3"},nM=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"page-description"}," Every archived Item can be found in this table. Here, you can manage archived Shop Items. You can permanently delete them in bulk, restore them, or export the data to an Excel sheet ")])],-1),rM={class:"card-body px-0 pb-2"},iM={class:"table-responsive p-0"},dM={class:"filter-container ms-2 mb-2"},mM={class:"row",style:{width:"100%"}},bM={class:"col-4"},pM={style:{display:"flex"}},uM=["value"],OM={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},hM=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),jM=Object(l["createTextVNode"])(" Export To XLS "),gM=[hM,jM],fM={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},EM=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),VM=Object(l["createTextVNode"])(" Bulk Restore "),NM=[EM,VM],xM={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},yM=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),vM=Object(l["createTextVNode"])(" Bulk Delete "),kM=[yM,vM],wM={class:"table-responsive p-0"},SM={ref:"table",class:"table align-items-center mb-0"},AM={class:""},BM={class:"form-check",style:{"margin-left":"-20px"}},CM=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),_M=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),PM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),IM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),DM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),TM={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},MM=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),zM={key:0},FM=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),UM=[FM],LM={class:"align-middle text-center text-sm"},$M={class:"form-check"},qM=["checked","onChange"],RM=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),HM={class:"align-middle text-center"},QM={class:"text-secondary text-xs font-weight-bold"},JM={class:"align-middle text-center"},YM={class:"text-secondary text-xs "},WM={class:"align-middle text-center"},XM={class:"text-secondary text-xs "},ZM={class:"align-middle text-center"},KM={class:"text-secondary text-xs "},GM={key:0,class:"align-middle text-center"},ez={class:"text-secondary text-xs "},tz={class:"align-middle text-center text-sm"},az={class:"badge badge-sm bg-gradient-success"},lz={class:"row"},cz={class:"col-md-12 col-lg-12"},oz={class:"pagination-container"},sz={class:"entries-dropdown"},nz=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),rz=["value"],iz={class:"pagination-wrapper"},dz={class:"pagination"},mz=["onClick"];function bz(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lM,[Object(l["createElementVNode"])("div",cM,[Object(l["createElementVNode"])("div",oM,[Object(l["createElementVNode"])("div",sM,[nM,Object(l["createElementVNode"])("div",rM,[Object(l["createElementVNode"])("div",iM,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",dM,[Object(l["createElementVNode"])("div",mM,[Object(l["createElementVNode"])("div",bM,[Object(l["createElementVNode"])("span",pM,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterShopItems&&s.filterShopItems(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,uM))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",OM,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},gM)]),Object(l["createElementVNode"])("div",fM,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.confirmAction("restore"))},NM)]),Object(l["createElementVNode"])("div",xM,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.confirmAction("delete"))},kM)):Object(l["createCommentVNode"])("",!0)])])])]),Object(l["createElementVNode"])("div",wM,[Object(l["createElementVNode"])("table",SM,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",AM,[Object(l["createElementVNode"])("div",BM,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),CM])]),_M,PM,IM,DM,o.user&&"super_admin"==o.user.role||o.user&&"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",TM," Shop ")):Object(l["createCommentVNode"])("",!0),MM])]),Object(l["createElementVNode"])("tbody",null,[0===o.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",zM,UM)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.shopItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",LM,[Object(l["createElementVNode"])("div",$M,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(t.id),onChange:e=>s.selectRecord(t.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,qM),RM])]),Object(l["createElementVNode"])("td",HM,[Object(l["createElementVNode"])("span",QM,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",JM,[Object(l["createElementVNode"])("span",YM,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",WM,[Object(l["createElementVNode"])("span",XM,Object(l["toDisplayString"])(t.quantity?t.quantity:"Unlimited"),1)]),Object(l["createElementVNode"])("td",ZM,[Object(l["createElementVNode"])("span",KM,"£"+Object(l["toDisplayString"])(s.formattedPrice(t.price)),1)]),o.user&&"super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",GM,[Object(l["createElementVNode"])("span",ez,Object(l["toDisplayString"])(e.shop_name?e.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",tz,[Object(l["createElementVNode"])("span",az,Object(l["toDisplayString"])(t.status),1)])]))),128))],64))),128))])],512)])]),Object(l["createElementVNode"])("div",lz,[Object(l["createElementVNode"])("div",cz,[Object(l["createElementVNode"])("div",oz,[Object(l["createElementVNode"])("div",sz,[nz,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getShopItems(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,rz))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",iz,[Object(l["createElementVNode"])("ul",dz,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getShopItems(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,mz)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getShopItems(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getShopItems(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var pz={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getShopItems(),await this.selectAll()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop")},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["Name","Quantity","Price"],seachString:"",selectall:!1,selectedRecords:[],shopItems:"",user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"archived_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await it.post("/getArchivedItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await it.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await it.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},selectAll(){this.selectedRecords=[],this.shopItems[0].shop_items.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkRestore(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await it.post("/bulkRestoreItems",e),this.snackbarMsg("Successfully restored"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},async bulkDelete(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await it.post("/bulkDeleteItems",e),this.snackbarMsg("Successfully deleted"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await it.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},confirmAction(e){jo.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})}}};a("142a");const uz=ct()(pz,[["render",bz]]);var Oz=uz;Object(l["pushScopeId"])("data-v-33abc9ea");const hz={class:"container-fluid py-4"},jz={class:"row"},gz={class:"col-12"},fz={class:"card my-4"},Ez={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},Vz=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Shop Item",-1),Nz=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),xz={class:"card-body px-0 pb-2"},yz={class:"table-responsive p-0"},vz={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},kz={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},wz={class:"form-bg container p-4"},Sz={class:"card card-plain"},Az={class:"card-body"},Bz={role:"form"},Cz={key:0,class:"row mb-1 validation-errors"},_z={class:"row mb-1"},Pz={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},Iz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),Dz={key:0,class:"text-danger error-txt"},Tz={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},Mz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),zz={key:0,class:"text-danger error-txt"},Fz={class:"mb-1"},Uz=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),Lz={key:0,class:"text-danger error-txt"},$z={class:"row mb-1"},qz={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},Rz=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),Hz=Object(l["createElementVNode"])("br",null,null,-1),Qz={key:0,class:"text-danger error-txt"},Jz={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},Yz=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),Wz=Object(l["createElementVNode"])("br",null,null,-1),Xz={key:0,class:"text-danger error-txt"},Zz={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},Kz=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),Gz=Object(l["createElementVNode"])("br",null,null,-1),eF=["value"],tF={key:0,class:"text-danger error-txt"},aF={class:"row mb-1"},lF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},cF=Object(l["createElementVNode"])("label",{class:"input-label",for:"owner_email"},"Product Owner Email",-1),oF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},sF=Object(l["createElementVNode"])("label",{class:"input-label",for:"visibility"},"Visibility Options",-1),nF=Object(l["createElementVNode"])("br",null,null,-1),rF={class:"row mb-1"},iF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},dF=Object(l["createElementVNode"])("label",{class:"input-label",for:"colleges"},"Limit Colleges",-1),mF=Object(l["createElementVNode"])("br",null,null,-1),bF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},pF=Object(l["createElementVNode"])("label",{class:"input-label",for:"courses"},"Limit Courses",-1),uF=Object(l["createElementVNode"])("br",null,null,-1),OF={class:"row mb-1"},hF={class:"col-xl-6 col-lg-6 col-md-6"},jF={class:"mt-2 d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},gF=Object(l["createElementVNode"])("small",{class:"ms-2 me-3"},"Enable Quantity Limit",-1),fF={class:"checkbox-container mt-3 me-5"},EF=["checked"],VF=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),NF={key:1,class:"row mb-1"},xF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},yF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),vF={key:0,class:"text-danger error-txt"},kF={class:"row p-2"},wF=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),SF={class:"col-xl-4 col-lg-4 col-md-4"},AF={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},BF=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Instalments",-1),CF={class:"checkbox-container mt-2 me-5"},_F=["checked"],PF=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),IF={class:"col-xl-4 col-lg-4 col-md-4"},DF={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},TF=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Instalments",-1),MF={class:"checkbox-container mt-2 me-5"},zF=["checked"],FF=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),UF={class:"col-xl-4 col-lg-4 col-md-4"},LF={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},$F=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),qF={class:"checkbox-container mt-2 me-5"},RF=["checked"],HF=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),QF={key:2,class:"row p-2"},JF={class:"col-xl-4 col-lg-4 col-md-4"},YF={class:"mb-1"},WF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),XF={class:"col-xl-4 col-lg-4 col-md-4"},ZF={class:"mb-1"},KF=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),GF={class:"mb-1"},eU={class:"input-label",for:"enrollment_date"},tU=Object(l["createElementVNode"])("br",null,null,-1),aU={key:3,class:"row p-2"},lU={class:"col-xl-4 col-lg-4 col-md-4"},cU={class:"mb-1"},oU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),sU={class:"col-xl-4 col-lg-4 col-md-4"},nU={class:"mb-1"},rU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),iU={class:"col-xl-4 col-lg-4 col-md-4"},dU={class:"mb-1"},mU=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),bU={class:"col-xl-4 col-lg-4 col-md-4"},pU={class:"mb-1"},uU=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),OU={class:"mb-1"},hU={class:"input-label",for:"enrollment_date"},jU=Object(l["createElementVNode"])("br",null,null,-1),gU={class:"mb-1"},fU={class:"upload-container"},EU={key:0,class:"image-preview"},VU=["src"],NU=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),xU={for:"file-input",class:"file-input-label"},yU={key:0},vU={key:1},kU=Object(l["createElementVNode"])("br",null,null,-1),wU={key:0,class:"text-danger error-txt"},SU={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},AU={class:""};function BU(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("date-picker"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hz,[Object(l["createElementVNode"])("div",jz,[Object(l["createElementVNode"])("div",gz,[Object(l["createElementVNode"])("div",fz,[Object(l["createElementVNode"])("div",Ez,[Vz,Object(l["createVNode"])(n,{to:{name:"shop-items"}},{default:Object(l["withCtx"])(()=>[Nz]),_:1})]),Object(l["createElementVNode"])("div",xz,[Object(l["createElementVNode"])("div",yz,[Object(l["createElementVNode"])("div",vz,[Object(l["createElementVNode"])("div",kz,[Object(l["createElementVNode"])("div",wz,[Object(l["createElementVNode"])("div",Sz,[Object(l["createElementVNode"])("div",Az,[Object(l["createElementVNode"])("form",Bz,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Cz,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationError,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",_z,[Object(l["createElementVNode"])("div",Pz,[Iz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newItem.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Dz,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Tz,[Mz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>o.newItem.price=e),type:"number",step:"0.01",min:"0",placeholder:"price",name:"price"},null,512),[[l["vModelText"],o.newItem.price]]),""!==o.formValidation&&""!==o.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zz,"Price is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Fz,[Uz,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],o.newItem.detail]]),""!==o.formValidation&&""!==o.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Lz,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$z,[Object(l["createElementVNode"])("div",qz,[Rz,Hz,Object(l["createVNode"])(r,{value:o.newItem.valid_from,"onUpdate:value":t[3]||(t[3]=e=>o.newItem.valid_from=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[4]||(t[4]=e=>s.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==o.formValidation&&""!==o.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qz,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Jz,[Yz,Wz,Object(l["createVNode"])(r,{value:o.newItem.valid_to,"onUpdate:value":t[5]||(t[5]=e=>o.newItem.valid_to=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[6]||(t[6]=e=>s.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==o.formValidation&&""!==o.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xz,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Zz,[Kz,Gz,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>o.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.productTypesList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,eF))),128))],512),[[l["vModelSelect"],o.newItem.product_type]]),""!==o.formValidation&&""!==o.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",tF,"Shop is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",aF,[Object(l["createElementVNode"])("div",lF,[cF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"owner_email","onUpdate:modelValue":t[8]||(t[8]=e=>o.newItem.product_owner_email=e),type:"email",placeholder:"email",name:"owner_email"},null,512),[[l["vModelText"],o.newItem.product_owner_email]])]),Object(l["createElementVNode"])("div",oF,[sF,nF,Object(l["createVNode"])(i,{label:"Visibility Options",options:o.visibilityOptions,onInput:s.handleVisibility,placeholder:"Visibility Options"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",rF,[Object(l["createElementVNode"])("div",iF,[dF,mF,Object(l["createVNode"])(i,{label:"Visibility Options",options:o.schoolsList,onInput:s.handleColleges,placeholder:"Visibility Options"},null,8,["options","onInput"])]),Object(l["createElementVNode"])("div",bF,[pF,uF,Object(l["createVNode"])(i,{label:"Visibility Options",options:o.coursesList,onInput:s.handleCourses,placeholder:"Limit Courses"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",OF,[Object(l["createElementVNode"])("div",hF,[Object(l["createElementVNode"])("span",jF,[gF,Object(l["createElementVNode"])("div",fF,[Object(l["createElementVNode"])("input",{checked:o.isQuantityEnabled,onChange:t[9]||(t[9]=e=>o.isQuantityEnabled=!o.isQuantityEnabled),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,EF),VF])])])]),o.isQuantityEnabled?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",NF,[Object(l["createElementVNode"])("div",xF,[yF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[10]||(t[10]=e=>o.newItem.quantity=e),min:"0",type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],o.newItem.quantity]]),""!==o.formValidation&&""!==o.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vF,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",kF,[wF,Object(l["createElementVNode"])("div",SF,[Object(l["createElementVNode"])("span",AF,[BF,Object(l["createElementVNode"])("div",CF,[Object(l["createElementVNode"])("input",{checked:"installments"==o.paymentPlan,onChange:t[11]||(t[11]=e=>s.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,_F),PF])])]),Object(l["createElementVNode"])("div",IF,[Object(l["createElementVNode"])("span",DF,[TF,Object(l["createElementVNode"])("div",MF,[Object(l["createElementVNode"])("input",{checked:"deposit"==o.paymentPlan,onChange:t[12]||(t[12]=e=>s.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,zF),FF])])]),Object(l["createElementVNode"])("div",UF,[Object(l["createElementVNode"])("span",LF,[$F,Object(l["createElementVNode"])("div",qF,[Object(l["createElementVNode"])("input",{checked:"manual"==o.paymentPlan,onChange:t[13]||(t[13]=e=>s.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,RF),HF])])])]),"installments"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QF,[Object(l["createElementVNode"])("div",JF,[Object(l["createElementVNode"])("div",YF,[WF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.installmentsAndDeposit.total_installments=e),onInput:t[15]||(t[15]=(...e)=>s.handleIntegerInput&&s.handleIntegerInput(...e)),class:"input-box",id:"name",step:"1",type:"number",min:"0",placeholder:"Total Instalments",name:"name"},null,544),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",XF,[Object(l["createElementVNode"])("div",ZF,[KF,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",GF,[Object(l["createElementVNode"])("label",eU,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),tU,Object(l["createVNode"])(r,{value:o.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>s.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==o.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",aU,[Object(l["createElementVNode"])("div",lU,[Object(l["createElementVNode"])("div",cU,[oU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>o.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Instalments",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",sU,[Object(l["createElementVNode"])("div",nU,[rU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",iU,[Object(l["createElementVNode"])("div",dU,[mU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>o.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",bU,[Object(l["createElementVNode"])("div",pU,[uU,Object(l["createVNode"])(r,{value:o.installmentsAndDeposit.initial_deposit_due_date,"onUpdate:value":t[20]||(t[20]=e=>o.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value"])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",OU,[Object(l["createElementVNode"])("label",hU,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),jU,Object(l["createVNode"])(r,{value:o.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>s.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",gU,[Object(l["createElementVNode"])("div",fU,[o.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",EU,[Object(l["createElementVNode"])("img",{src:o.imageFileUrl,alt:"Image Preview"},null,8,VU)])):Object(l["createCommentVNode"])("",!0),NU,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[21]||(t[21]=(...e)=>s.handleImageUpload&&s.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",xU,[e.mageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",vU,Object(l["toDisplayString"])(o.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yU,"Choose a file"))])]),kU,""!==o.formValidation&&""!==o.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",wU,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",SU,[Object(l["createElementVNode"])("div",AU,[Object(l["createElementVNode"])("button",{onClick:t[22]||(t[22]=(...e)=>s.saveNewItem&&s.saveNewItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var CU={name:"",components:{MultiSelect:Hk,DatePicker:IA["a"]},mounted(){this.getUser(),this.getAllShops(),this.getSchools(),this.getAllCourses(),this.getProductTypes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_shop")},computed:{},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))}},data(){return{isQuantityEnabled:!1,debounceTimeout:null,paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:"",other_installments_due_date:[]},schoolsList:null,coursesList:null,productTypesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:null,formValidation:"",allAttributes:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",allShops:"",productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],user:"",validationError:"",isError:!1,newItem:{name:"",price:"",quantity:"",product_type:"",detail:"",shop_id:"",image:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitColleges:null,limitCourses:null,product_owner_email:null},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{validateExpiryDate(){const{valid_from:e,valid_to:t}=this.newItem;if(e&&t){const a=new Date(e),l=new Date(t);a>=l&&(this.newItem.valid_to=null)}},validateInstallmentDate(e){const t=this.installmentsAndDeposit.other_installments_due_date;if(e>0&&t[e]){const a=new Date(t[e-1]),l=new Date(t[e]),c=l>a;c||t.splice(e,1)}},handleIntegerInput(e){const t=e.target.value;t&&!Number.isInteger(Number(t))&&(this.installmentsAndDeposit.total_installments=Math.floor(t))},handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await it.get(e);this.coursesList=t.data}catch(e){console.log(e)}},async getProductTypes(){try{let e="/getProductTypesForDropdown";const t=await it.get(e);this.productTypesList=t.data}catch(e){console.log(e)}},async getSchools(){try{let e=await it.get("/getAllSchoolsCourses");this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},validateForm(){this.$permissions.redirectIfNotAllowed("create_shop");let e=!1,t="";t=Us()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewItem(){this.newItem.payment_plan=this.paymentPlan,this.newItem.installmentsAndDeposit=this.installmentsAndDeposit,this.newItem.installmentsAndDeposit.initial_deposit_due_date=this.newItem.installmentsAndDeposit.initial_deposit_due_date?this.newItem.installmentsAndDeposit.initial_deposit_due_date.toISOString().split("T")[0]:null,this.newItem.image=this.selectedImageFile;const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.paymentPlan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),e.append("quantity",this.newItem.quantity),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from.toISOString().split("T")[0]),e.append("valid_to",this.newItem.valid_to.toISOString().split("T")[0]),e.append("product_owner_email",this.newItem.product_owner_email),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));try{await it.post("/addItem",e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Saved Successfuly"),this.isError=!1}catch(t){this.validationError=t.response.data.errors,this.isError=!0}},handleAttributes(e){this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},async getAllAttributes(){try{const e=await it.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){console.log(e),this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await it.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("9494");const _U=ct()(CU,[["render",BU],["__scopeId","data-v-33abc9ea"]]);var PU=_U;Object(l["pushScopeId"])("data-v-302ed20e");const IU={class:"container-fluid py-4"},DU={class:"row"},TU={class:"col-12"},MU={class:"card my-4"},zU={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},FU=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Shop Item",-1),UU=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),LU={class:"card-body px-0 pb-2"},$U={class:"table-responsive p-0"},qU={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},RU={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},HU={class:"form-bg container p-4"},QU={class:"card card-plain"},JU={class:"card-body"},YU={role:"form"},WU={key:0,class:"row mb-1 validation-errors"},XU={class:"row mb-1"},ZU={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},KU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),GU={key:0,class:"text-danger error-txt"},eL={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},tL=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),aL={key:0,class:"text-danger error-txt"},lL={class:"mb-1"},cL=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),oL={key:0,class:"text-danger error-txt"},sL={class:"row mb-1"},nL={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},rL=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),iL=Object(l["createElementVNode"])("br",null,null,-1),dL={key:0,class:"text-danger error-txt"},mL={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},bL=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),pL=Object(l["createElementVNode"])("br",null,null,-1),uL={key:0,class:"text-danger error-txt"},OL={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},hL=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),jL=Object(l["createElementVNode"])("br",null,null,-1),gL=["value"],fL={key:0,class:"text-danger error-txt"},EL={class:"row mb-1"},VL={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},NL=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Product Owner Email",-1),xL={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},yL=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Visibility Options",-1),vL=Object(l["createElementVNode"])("br",null,null,-1),kL={class:"row mb-1"},wL={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},SL=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Colleges",-1),AL=Object(l["createElementVNode"])("br",null,null,-1),BL={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},CL=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Courses",-1),_L=Object(l["createElementVNode"])("br",null,null,-1),PL={class:"row mb-1"},IL={class:"col-xl-6 col-lg-6 col-md-6"},DL={class:"mt-2 d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},TL=Object(l["createElementVNode"])("small",{class:"ms-2 me-3"},"Enable Quantity Limit",-1),ML={class:"checkbox-container mt-3 me-5"},zL=["checked"],FL=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),UL={key:1,class:"row mb-1"},LL={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},$L=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),qL={key:0,class:"text-danger error-txt"},RL={class:"row p-2"},HL=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),QL={class:"col-xl-4 col-lg-4 col-md-4"},JL={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},YL=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Instalments",-1),WL={class:"checkbox-container mt-2 me-5"},XL=["checked"],ZL=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),KL={class:"col-xl-4 col-lg-4 col-md-4"},GL={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},e$=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Instalments",-1),t$={class:"checkbox-container mt-2 me-5"},a$=["checked"],l$=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),c$={class:"col-xl-4 col-lg-4 col-md-4"},o$={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},s$=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),n$={class:"checkbox-container mt-2 me-5"},r$=["checked"],i$=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),d$={key:2,class:"row p-2"},m$={class:"col-xl-4 col-lg-4 col-md-4"},b$={class:"mb-1"},p$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),u$={class:"col-xl-4 col-lg-4 col-md-4"},O$={class:"mb-1"},h$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),j$={class:"mb-1"},g$={class:"input-label",for:"enrollment_date"},f$={key:3,class:"row p-2"},E$={class:"col-xl-4 col-lg-4 col-md-4"},V$={class:"mb-1"},N$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),x$={class:"col-xl-4 col-lg-4 col-md-4"},y$={class:"mb-1"},v$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),k$={class:"col-xl-4 col-lg-4 col-md-4"},w$={class:"mb-1"},S$=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),A$={class:"col-xl-4 col-lg-4 col-md-4"},B$={class:"mb-1"},C$=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),_$=Object(l["createElementVNode"])("br",null,null,-1),P$={class:"mb-1"},I$={class:"input-label",for:"enrollment_date"},D$={class:"mb-1"},T$={class:"upload-container"},M$={key:0,class:"image-preview"},z$=["src"],F$=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),U$={for:"file-input",class:"file-input-label"},L$={key:0},$$={key:1},q$=Object(l["createElementVNode"])("br",null,null,-1),R$={key:0,class:"text-danger error-txt"},H$={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Q$={class:""};function J$(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("date-picker"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",IU,[Object(l["createElementVNode"])("div",DU,[Object(l["createElementVNode"])("div",TU,[Object(l["createElementVNode"])("div",MU,[Object(l["createElementVNode"])("div",zU,[FU,Object(l["createVNode"])(n,{to:{name:"shop-items"}},{default:Object(l["withCtx"])(()=>[UU]),_:1})]),Object(l["createElementVNode"])("div",LU,[Object(l["createElementVNode"])("div",$U,[Object(l["createElementVNode"])("div",qU,[Object(l["createElementVNode"])("div",RU,[Object(l["createElementVNode"])("div",HU,[Object(l["createElementVNode"])("div",QU,[Object(l["createElementVNode"])("div",JU,[Object(l["createElementVNode"])("form",YU,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",WU,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationError,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",XU,[Object(l["createElementVNode"])("div",ZU,[KU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newItem.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",GU,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eL,[tL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>o.newItem.price=e),type:"number",placeholder:"price",name:"price"},null,512),[[l["vModelText"],o.newItem.price]]),""!==o.formValidation&&""!==o.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",aL,"Price is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",lL,[cL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],o.newItem.detail]]),""!==o.formValidation&&""!==o.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",oL,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sL,[Object(l["createElementVNode"])("div",nL,[rL,iL,Object(l["createVNode"])(r,{value:o.newItem.valid_from,"onUpdate:value":t[3]||(t[3]=e=>o.newItem.valid_from=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[4]||(t[4]=e=>s.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==o.formValidation&&""!==o.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dL,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",mL,[bL,pL,Object(l["createVNode"])(r,{value:o.newItem.valid_to,"onUpdate:value":t[5]||(t[5]=e=>o.newItem.valid_to=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[6]||(t[6]=e=>s.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==o.formValidation&&""!==o.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uL,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",OL,[hL,jL,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>o.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.productTypesList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,gL))),128))],512),[[l["vModelSelect"],o.newItem.product_type]]),""!==o.formValidation&&""!==o.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fL,"Shop is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",EL,[Object(l["createElementVNode"])("div",VL,[NL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>o.newItem.product_owner_email=e),type:"email",placeholder:"email",name:"detail"},null,512),[[l["vModelText"],o.newItem.product_owner_email]])]),Object(l["createElementVNode"])("div",xL,[yL,vL,Object(l["createVNode"])(i,{label:"Visibility Options",value:o.newItem.visibility_options,options:o.visibilityOptions,onInput:s.handleVisibility,placeholder:"Visibility Options"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",kL,[Object(l["createElementVNode"])("div",wL,[SL,AL,Object(l["createVNode"])(i,{label:"Payment Options",value:o.newItem.limitColleges,options:o.schoolsList,onInput:s.handleColleges,placeholder:"Limit Colleges"},null,8,["value","options","onInput"])]),Object(l["createElementVNode"])("div",BL,[CL,_L,Object(l["createVNode"])(i,{label:"Visibility Options",value:o.newItem.limitCourses,options:o.coursesList,onInput:s.handleCourses,placeholder:"Limit Courses"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",PL,[Object(l["createElementVNode"])("div",IL,[Object(l["createElementVNode"])("span",DL,[TL,Object(l["createElementVNode"])("div",ML,[Object(l["createElementVNode"])("input",{checked:o.isQuantityEnabled,onChange:t[9]||(t[9]=e=>o.isQuantityEnabled=!o.isQuantityEnabled),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,zL),FL])])])]),o.isQuantityEnabled?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",UL,[Object(l["createElementVNode"])("div",LL,[$L,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[10]||(t[10]=e=>o.newItem.quantity=e),min:"0",type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],o.newItem.quantity]]),""!==o.formValidation&&""!==o.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",qL,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",RL,[HL,Object(l["createElementVNode"])("div",QL,[Object(l["createElementVNode"])("span",JL,[YL,Object(l["createElementVNode"])("div",WL,[Object(l["createElementVNode"])("input",{checked:"installments"==o.newItem.payment_plan,onChange:t[11]||(t[11]=e=>s.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,XL),ZL])])]),Object(l["createElementVNode"])("div",KL,[Object(l["createElementVNode"])("span",GL,[e$,Object(l["createElementVNode"])("div",t$,[Object(l["createElementVNode"])("input",{checked:"installments_and_deposit"==o.newItem.payment_plan,onChange:t[12]||(t[12]=e=>s.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,a$),l$])])]),Object(l["createElementVNode"])("div",c$,[Object(l["createElementVNode"])("span",o$,[s$,Object(l["createElementVNode"])("div",n$,[Object(l["createElementVNode"])("input",{checked:"full_payment"==o.newItem.payment_plan,onChange:t[13]||(t[13]=e=>s.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,r$),i$])])])]),"installments"==o.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",d$,[Object(l["createElementVNode"])("div",m$,[Object(l["createElementVNode"])("div",b$,[p$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>o.installmentsAndDeposit.total_installments=e),onInput:t[15]||(t[15]=(...e)=>s.handleIntegerInput&&s.handleIntegerInput(...e)),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Instalments",name:"name"},null,544),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",u$,[Object(l["createElementVNode"])("div",O$,[h$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",j$,[Object(l["createElementVNode"])("label",g$,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),Object(l["createVNode"])(r,{value:o.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>s.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==o.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",f$,[Object(l["createElementVNode"])("div",E$,[Object(l["createElementVNode"])("div",V$,[N$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>o.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Instalments",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",x$,[Object(l["createElementVNode"])("div",y$,[v$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>o.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",k$,[Object(l["createElementVNode"])("div",w$,[S$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>o.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],o.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",A$,[Object(l["createElementVNode"])("div",B$,[C$,_$,Object(l["createVNode"])(r,{value:o.installmentsAndDeposit.initial_deposit_due_date,"onUpdate:value":t[20]||(t[20]=e=>o.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value"])])]),o.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(o.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",P$,[Object(l["createElementVNode"])("label",I$,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),Object(l["createVNode"])(r,{value:o.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>o.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>s.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",D$,[Object(l["createElementVNode"])("div",T$,[o.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",M$,[Object(l["createElementVNode"])("img",{src:o.imageFileUrl,alt:"Image Preview"},null,8,z$)])):Object(l["createCommentVNode"])("",!0),F$,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[21]||(t[21]=(...e)=>s.handleImageUpload&&s.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",U$,[o.imageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",$$,Object(l["toDisplayString"])(o.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",L$,"Choose a file"))])]),q$,""!==o.formValidation&&""!==o.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",R$,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",H$,[Object(l["createElementVNode"])("div",Q$,[Object(l["createElementVNode"])("button",{onClick:t[22]||(t[22]=(...e)=>s.updateItem&&s.updateItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var Y$={name:"",components:{MultiSelect:Hk,DatePicker:IA["a"]},mounted(){this.getUser(),this.editItem(),this.getAllShops(),this.getAllCourses(),this.getSchools(),this.getProductTypes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_shop")},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))}},data(){return{isQuantityEnabled:!1,paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:null,other_installments_due_date:[]},validationError:"",isError:!1,productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],schoolsList:null,coursesList:null,productTypesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:"",formValidation:"",allAttributes:"",allShops:"",selectedAttrs:[],user:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitColleges:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",newItem:{name:"",product_type:"",price:"",quantity:"",detail:"",image:"",shop_id:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitCourses:null,limitColleges:null,product_owner_email:null},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{validateExpiryDate(){const{valid_from:e,valid_to:t}=this.newItem;if(e&&t){const a=new Date(e),l=new Date(t);a>=l&&(this.newItem.valid_to=null)}},validateInstallmentDate(e){const t=this.installmentsAndDeposit.other_installments_due_date;if(e>0&&t[e]){const a=new Date(t[e-1]),l=new Date(t[e]),c=l>a;c||t.splice(e,1)}},handleIntegerInput(e){const t=e.target.value;t&&!Number.isInteger(Number(t))&&(this.installmentsAndDeposit.total_installments=Math.floor(t))},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_shop");let e=!1,t="";t=Us()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getProductTypes(){try{let e="/getProductTypesForDropdown";const t=await it.get(e);this.productTypesList=t.data}catch(e){console.log(e)}},async updateItem(){this.installmentsAndDeposit.initial_deposit_due_date=this.installmentsAndDeposit.initial_deposit_due_date?this.installmentsAndDeposit.initial_deposit_due_date.toISOString().split("T")[0]:null;const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.newItem.payment_plan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),this.isQuantityEnabled?e.append("quantity",this.newItem.quantity):e.append("quantity",""),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from.toISOString().split("T")[0]),e.append("valid_to",this.newItem.valid_to.toISOString().split("T")[0]),e.append("product_owner_email",this.newItem.product_owner_email),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));let t=this.$route.params.id;try{const a=`/updateShopItem/${t}?_method=PUT`;await it.post(a,e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Updated Successfuly"),this.isError=!1}catch(a){this.validationError=a.response.data.errors,this.isError=!0}},async editItem(){let e=this.$route.params.id;try{let t=await it.get("/editShopItem/"+e);t=t.data,this.setShopItem(t)}catch(t){console.log(t)}},setShopItem(e){this.newItem.name=e.name,this.newItem.price=e.price,this.newItem.quantity=e.quantity,this.isQuantityEnabled=null!==e.quantity&&void 0!==e.quantity,this.newItem.product_type=e.product_type,this.newItem.shop_id=e.shop_id,this.newItem.attribute_id=e.attribute_id,this.newItem.detail=e.detail,this.newItem.attributes=e.attributes,this.newItem.valid_from=e.valid_from?fo()(e.valid_from,"YYYY-MM-DD").toDate():null,this.newItem.valid_to=e.valid_to?fo()(e.valid_to,"YYYY-MM-DD").toDate():null,this.newItem.product_owner_email=e.product_owner_email,this.newItem.visibility_options=e.visibility_options?e.visibility_options:[],this.newItem.limitColleges=e.limit_colleges?e.limit_colleges:[],this.newItem.limitCourses=e.limit_courses?e.limit_courses:[],this.newItem.payment_plan=e.payment_plan,this.imageFileUrl=this.$env_vars.BASE_URL+e.image,e.payment&&(this.installmentsAndDeposit.total_installments=e.payment.total_installments,this.installmentsAndDeposit.amount_per_installment=e.payment.amount_per_installment,e.payment.other_installments_deadline_installments=e.payment.other_installments_deadline_installments.map(e=>e?fo()(e,"YYYY-MM-DD").toDate():null),this.installmentsAndDeposit.other_installments_due_date=e.payment.other_installments_deadline_installments,this.installmentsAndDeposit.initial_deposit_due_date=e.payment.initial_deposit_due_date?fo()(e.payment.initial_deposit_due_date,"YYYY-MM-DD").toDate():null,this.installmentsAndDeposit.initial_deposit=e.payment.initial_deposit)},handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await it.get(e);this.coursesList=t.data}catch(e){console.log(e)}},changePaymentPlan(e){this.newItem.payment_plan==e?this.newItem.payment_plan="":this.newItem.payment_plan=e},async getSchools(){try{let e=await it.get("/getAllSchoolsCourses");console.log(e),this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},handleAttributes(e){console.log("attrs",e),this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await it.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("60de");const W$=ct()(Y$,[["render",J$],["__scopeId","data-v-302ed20e"]]);var X$=W$;Object(l["pushScopeId"])("data-v-a891a2be");const Z$=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left me-2"},null,-1),K$=[Z$],G$={class:"row"},eq={class:"col-xl-12 col-lg-12 col-md-12"},tq={class:"card"},aq={class:"card-header pb-0 px-3 d-flex justify-content-between"},lq=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Checkout",-1),cq=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn add-card-btn mb-3 trips-btn w-100  text-white fw-5 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus me-2"}),Object(l["createTextVNode"])(" Add New Card ")],-1),oq={class:"card-body pt-4 p-3"},sq={class:"row"},nq={class:"list-group col-xl-6 col-lg-6 col-md-6"},rq={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},iq={class:"d-flex flex-column"},dq={class:"mb-3 text-sm"},mq={key:0},bq=Object(l["createElementVNode"])("br",null,null,-1),pq={key:1,class:"text-success"},uq={key:2,class:"text-success"},Oq=Object(l["createTextVNode"])(" Instalments And Deposit "),hq=Object(l["createElementVNode"])("br",null,null,-1),jq=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},null,-1),gq={class:"ms-auto text-end"},fq=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),Eq=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),Vq={class:"ms-auto text-end"},Nq={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},xq=["onClick"],yq=Object(l["createElementVNode"])("br",null,null,-1),vq={key:0,class:"text-success me-3"},kq={key:1,class:"text-success me-3"},wq=Object(l["createElementVNode"])("br",null,null,-1),Sq={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Aq={class:"d-flex flex-column"},Bq={class:"mb-3 text-sm"},Cq=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs"},null,-1),_q={class:"ms-auto text-end"},Pq=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),Iq=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),Dq={class:"ms-auto text-end"},Tq={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},Mq=["onClick"],zq={class:"col-md-5 ms-auto"},Fq={key:0,class:"text-danger text-sm"},Uq=["onClick"],Lq={key:0,class:"w-10 me-3 mb-0",src:X_.a,alt:"logo"},$q={key:1,class:"w-10 me-3 mb-0",src:ut.a,alt:"logo"},qq={class:"mb-0"},Rq={key:1,class:"d-flex align-items-center list-group-item border-0 d-flex p-2 bg-gray-100 border-radius-lg"},Hq=Object(l["createElementVNode"])("div",{class:"d-flex flex-column"},[Object(l["createElementVNode"])("h6",{class:"d-flex align-items-center text-sm "},"Total Amount")],-1),Qq={class:"ms-auto text-end"},Jq={class:"d-flex me-3 align-items-center",style:{"justify-content":"flex-end"}},Yq={class:"d-flex align-items-center text-success fw-bold text-sm "},Wq={key:2,class:"d-flex justify-content-center align-items-center list-group-item border-0 d-flex p-4 bg-gray-100 border-radius-lg"},Xq=Object(l["createElementVNode"])("h6",{class:"text-sm text-warning"},"You can't checkout while Cart is empty!",-1),Zq=[Xq],Kq={key:3,style:{color:"#59B15D !important"}},Gq=Object(l["createElementVNode"])("div",{id:"express-checkout-element",style:{"min-height":"50px"}},null,-1);function eR(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2 border-radius-lg"},K$),Object(l["createElementVNode"])("div",G$,[Object(l["createElementVNode"])("div",eq,[Object(l["createElementVNode"])("div",tq,[Object(l["createElementVNode"])("div",aq,[lq,o.paymentMethodsLoaded&&!s.checkIfHasCard()?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add_card"}},{default:Object(l["withCtx"])(()=>[cq]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",oq,[Object(l["createElementVNode"])("div",sq,[Object(l["createElementVNode"])("ul",nq,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",rq,[Object(l["createElementVNode"])("div",iq,[Object(l["createElementVNode"])("h6",dq,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",mq,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),bq,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",pq," Instalments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",uq,[Oq,hq,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Instalments) ",1)])):Object(l["createCommentVNode"])("",!0)]),jq]),Object(l["createElementVNode"])("div",gq,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"organization_admin"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[fq,Eq],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Vq,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Nq," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,xq),yq,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",vq," £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",kq,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.initial_deposit_installments))+" Deposit ",1),wq,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(s.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Sq,[Object(l["createElementVNode"])("div",Aq,[Object(l["createElementVNode"])("h6",Bq,Object(l["toDisplayString"])(e.trip.title)+" (Trip)",1),Cq]),Object(l["createElementVNode"])("div",_q,[Object(l["createElementVNode"])("span",null,["super_admin"==o.user.role||"school_user"==o.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Pq,Iq],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Dq,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Tq," £"+Object(l["toDisplayString"])(s.formattedPrice(e.trip.budget)),1),Object(l["createElementVNode"])("i",{onClick:t=>s.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,Mq)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",zq,[o.isPaymentMethod?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Fq,"Payment Method Not Found! please add the payment method first.")),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:o.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>s.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",Lq)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",$q)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",qq," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,Uq))),128)),o.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Rq,[Hq,Object(l["createElementVNode"])("div",Qq,[Object(l["createElementVNode"])("div",Jq,[Object(l["createElementVNode"])("h6",Yq,"£"+Object(l["toDisplayString"])(s.totalAmount()),1)])])])):o.dataLoaded?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Wq,Zq)):Object(l["createCommentVNode"])("",!0),1==o.isLoading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",Kq,"Checking out, please wait...")):(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:4},[o.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=e=>s.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment ")):Object(l["createCommentVNode"])("",!0),o.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[2]||(t[2]=e=>s.checkout("wallet")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet")):Object(l["createCommentVNode"])("",!0),Gq],64))])])])])])])])}Object(l["popScopeId"])();var tR={name:"billing-card",data(){return{stripe:null,expressCheckoutElement:null,paymentMethodsLoaded:!1,isLoading:!1,isPaymentMethod:!0,userCards:"",dataLoaded:!1,user:"",cartItems:"",isSelected:0,stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},mounted(){this.getUser(),this.getCartItems(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor(),this.includeStripe("js.stripe.com/v3/",function(){this.expressPayment()}.bind(this))},updated(){this.$globalHelper.buttonColor()},methods:{...Object(tt["b"])(["updateCartItemCounter"]),includeStripe(e,t){let a=document,l="script",c=a.createElement(l),o=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),o.parentNode.insertBefore(c,o)},async expressPayment(){const e={theme:"flat"};let t=window.Stripe(this.stripeAPIToken),a=t.elements({mode:"payment",amount:1099,currency:"usd",appearance:e}),l=a.create("expressCheckout");l.mount("#express-checkout-element")},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},checkIfHasCard(){return!!(this.userCards&&this.userCards.length>0)||void 0!=this.userCards.length&&void 0},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getCartItems(){try{let e=await it.get("/getUserCartItems");e=e.data,this.cartItems=e,this.dataLoaded=!0}catch(e){console.log(e)}},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit_installments:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price))}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await it.post("/removeItemFromCart",t),this.removeItemFromList(e),this.countUserCartItems()}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async countUserCartItems(){try{let e=await it.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(!t&&"card"==e)return this.isPaymentMethod=!0,void(this.isPaymentMethod=!1);t="wallet"==e?null:t;let a={payment_method:t,type:e};try{this.isLoading=!0,await it.post("/checkout",a),this.isLoading=!1,this.snackbarMsg("Checkout Successful"),this.$router.push({name:"Dashboard"}),this.isPaymentMethod=!0,this.countUserCartItems()}catch(l){let e=l.response.data?l.response.data:"Something went wrong";this.isLoading=!1,this.$snackbar.add({type:"error",text:e,background:"white"})}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await it.post("/getPaymentMethods",a);this.userCards=e.data.data,this.paymentMethodsLoaded=!0}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};a("e148");const aR=ct()(tR,[["render",eR],["__scopeId","data-v-a891a2be"]]);var lR=aR;const cR={class:"row"},oR={class:"col-xl-8 col-lg-8 col-md-8"},sR={class:"card"},nR={class:"card-header pb-0 px-3 d-flex justify-content-between"},rR=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Menu",-1),iR=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#f513ca"},class:"me-3 text-white fw-5 border-0 p-2 border-radius-lg"}," Add Menu ",-1),dR=Object(l["createStaticVNode"])('<div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">ATA Rice</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li></ul></div>',1),mR=Object(l["createStaticVNode"])('<div class="col-xl-4 col-lg-4 col-md-4"><div class="card"><div class="card-header pb-0 px-3"><h6 class="mb-0">Favourite</h6></div><div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li></ul></div></div></div>',1);function bR(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",cR,[Object(l["createElementVNode"])("div",oR,[Object(l["createElementVNode"])("div",sR,[Object(l["createElementVNode"])("div",nR,[rR,Object(l["createVNode"])(n,{to:"/add-menu"},{default:Object(l["withCtx"])(()=>[iR]),_:1})]),dR])]),mR])}var pR={name:"billing-card"};const uR=ct()(pR,[["render",bR]]);var OR=uR;Object(l["pushScopeId"])("data-v-d27ede50");const hR={class:"container-fluid py-4"},jR=Object(l["createElementVNode"])("div",{class:"row "},[Object(l["createElementVNode"])("div",{class:"col-12"},[Object(l["createElementVNode"])("div",{class:"card my-4"},[Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 "},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Menu")]),Object(l["createElementVNode"])("div",{class:"card-body px-0 pb-2"},[Object(l["createElementVNode"])("div",{class:"table-responsive p-0"},[Object(l["createElementVNode"])("div",{class:"row py-2 bg-white form-data border-radius-lg"},[Object(l["createElementVNode"])("div",{class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("div",{class:"card card-plain"},[Object(l["createElementVNode"])("div",{class:"card-body"},[Object(l["createElementVNode"])("form",{role:"form"},[Object(l["createElementVNode"])("div",{class:"row mb-1"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Item Name"),Object(l["createElementVNode"])("input",{class:"input-box title-input",id:"name",type:"text",placeholder:"name",name:"name"})]),Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description"),Object(l["createElementVNode"])("br"),Object(l["createElementVNode"])("textarea",{class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"})])]),Object(l["createElementVNode"])("div",{class:"row p-2"},[Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"price",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Available Seats"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Available Seats",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Funds"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"funds",name:"name"})])])])])])])])])])])])])],-1),gR=[jR];function fR(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hR,gR)}Object(l["popScopeId"])();var ER={name:"",components:{},mounted(){},data(){return{}},methods:{}};a("19b8");const VR=ct()(ER,[["render",fR],["__scopeId","data-v-d27ede50"]]);var NR=VR;const xR={class:"card mt-4 card-height"},yR={class:"card-header pb-3 p-3"},vR={class:"row"},kR={class:"col text-start"},wR=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),SR=[wR],AR={class:"row",style:{width:"100%"}},BR={class:"col-12"},CR={class:"d-flex justify-content-between border-radius-lg pt-4"},_R=Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"TOP-UP",-1),PR=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn add-card-btn mb-3 trips-btn w-100  text-white fw-5 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus me-2"}),Object(l["createTextVNode"])(" Add New Card ")],-1),IR=Object(l["createElementVNode"])("div",{class:"row",style:{width:"100%"}},[Object(l["createElementVNode"])("div",{class:"col-12 d-flex align-items-center"},[Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"}," In this section, you can top-up the user's wallet by adding a specified amount to their balance. Additionally, you can add a new payment method, such as a credit or debit card, to the user's account for future transactions. This functionality ensures that users have convenient payment options and sufficient funds available for seamless purchases. ")])],-1),DR={class:"card-body p-3"},TR={class:"row d-flex justify-content-between"},MR={class:"col-md-6 mb-md-0 mb-4"},zR=["onClick"],FR={key:0,class:"w-10 me-3 mb-0",src:X_.a,alt:"logo"},UR={key:1,class:"w-10 me-3 mb-0",src:ut.a,alt:"logo"},LR={class:"mb-0"},$R=["onClick"],qR=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1),RR={class:"amount-radio"},HR={class:"top-up-row"},QR={class:"mb-1",style:{display:"flex"}},JR=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount25"},"£25.00",-1),YR={class:"top-up-row"},WR={class:"mb-1",style:{display:"flex"}},XR=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount50"},"£50.00",-1),ZR={class:"top-up-row"},KR={class:"mb-1",style:{display:"flex"}},GR=Object(l["createElementVNode"])("label",{class:"",style:{"margin-top":"-3px"},for:"amount100"},"£100.00",-1),eH={class:"mb-1 amount-container",style:{display:"flex"}},tH=Object(l["createElementVNode"])("div",{class:"col-md-5"},null,-1),aH={class:"conteiner"};function lH(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",xR,[Object(l["createElementVNode"])("div",yR,[Object(l["createElementVNode"])("div",vR,[Object(l["createElementVNode"])("div",kR,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},SR)])]),Object(l["createElementVNode"])("div",AR,[Object(l["createElementVNode"])("div",BR,[Object(l["createElementVNode"])("div",CR,[_R,o.paymentMethodsLoaded&&!s.checkIfHasCard()?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add_card"}},{default:Object(l["withCtx"])(()=>[PR]),_:1})):Object(l["createCommentVNode"])("",!0)])])]),IR]),Object(l["createElementVNode"])("div",DR,[Object(l["createElementVNode"])("div",TR,[Object(l["createElementVNode"])("div",MR,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:o.isSelected===t},"mb-1 card card-body border card-plain border-radius-lg d-flex align-items-right flex-row"]),onClick:e=>s.toggleSelection(t,e),style:{width:"300px"}},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",FR)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",UR)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",LR," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1),Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,$R),qR],10,zR))),128)),Object(l["createElementVNode"])("div",RR,[Object(l["createElementVNode"])("div",HR,[Object(l["createElementVNode"])("span",QR,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount25",class:"me-1",type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>o.selected_amount=e),name:"amount",value:"25"},null,512),[[l["vModelRadio"],o.selected_amount]]),JR])]),Object(l["createElementVNode"])("div",YR,[Object(l["createElementVNode"])("span",WR,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount50",class:"me-1",type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>o.selected_amount=e),name:"amount",value:"50"},null,512),[[l["vModelRadio"],o.selected_amount]]),XR])]),Object(l["createElementVNode"])("div",ZR,[Object(l["createElementVNode"])("span",KR,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount100",class:"me-1",type:"radio","onUpdate:modelValue":t[3]||(t[3]=e=>o.selected_amount=e),name:"amount",value:"100"},null,512),[[l["vModelRadio"],o.selected_amount]]),GR])]),Object(l["createElementVNode"])("span",eH,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onKeyup:t[4]||(t[4]=e=>o.selected_amount=null),"onUpdate:modelValue":t[5]||(t[5]=e=>o.addedBalance=e),class:"me-1 amount-input",type:"number",min:"0",name:"gender",placeholder:"1.00"},null,544),[[l["vModelText"],o.addedBalance]])])])]),tH,Object(l["createElementVNode"])("div",aH,[Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=(...e)=>s.addBalance&&s.addBalance(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn top-up-btn p-3 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Add Balance ")])])])])}var cH={name:"payment-card",components:{},mounted(){this.$globalHelper.buttonColor();let e=localStorage.getItem("user");this.user=JSON.parse(e),this.getCustomerPaymentMethods()},updated(){this.$globalHelper.buttonColor(),"student"!=this.user.role&&"staff"!=this.user.role&&this.$permissions.redirectIfNotAllowed("topup")},computed:{...Object(tt["c"])(["getBrandingSetting"]),formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},beforeRouteEnter(e,t,a){a(e=>{e.fromRoute=t.name})},beforeRouteLeave(e,t,a){if("list-students"===e.name&&"list-students"===this.fromRoute||"list-staff"===e.name&&"list-staff"===this.fromRoute)a();else{let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}},data(){return{fromRoute:"",paymentMethodsLoaded:!1,user:"",selected_amount:"",externalAccounts:"",addedBalance:"",userCards:"",isSelected:0,img1:ut.a,img2:X_.a,showModal:!1}},methods:{...Object(tt["b"])(["updateFilterString"]),confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},checkIfHasCard(){return!!(this.userCards&&this.userCards.length>0)||void 0!=this.userCards.length&&void 0},async addBalance(){let e,t="",a="";e=this.$route.params.id?this.$route.params.id:this.user.id;let l=null==this.selected_amount?this.addedBalance:this.selected_amount,c=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(""==l)return void this.snackbarMsg("Please select the amount","error");if("student"!=this.user.role&&"parent"!=this.user.role&&"staff"!=this.user.role)if(a="admin_top_up","staff"==this.user.role&&this.user.id==e){if(t="/payment/initiate",!c)return void this.snackbarMsg("Payment Method Not Found","error")}else t="/adminTopUp",c=null;else if(a="top_up",t="/payment/initiate",!c)return void this.snackbarMsg("Payment Method Not Found","error");let o={user_id:e,amount:l,payment_method:c,type:a};try{await it.post(t,o),this.snackbarMsg("Balance Added Successfully")}catch(s){console.log(s)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await it.post("/getPaymentMethods",a);this.userCards=e.data.data,this.paymentMethodsLoaded=!0}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await it.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")}}};a("9bc7");const oH=ct()(cH,[["render",lH]]);var sH=oH;Object(l["pushScopeId"])("data-v-418ca843");const nH={class:"card"},rH=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),iH={class:"card-body row"},dH={class:"col-md-5"},mH=Object(l["createStaticVNode"])('<div class="row d-flex" data-v-418ca843><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex" data-v-418ca843><p class="text-dark" data-v-418ca843>Your Payment Information</p></div></div><div id="card-element" class="StripeElement" data-v-418ca843></div><div class="row d-flex mt-1" data-v-418ca843><div class="col-md-5 bg-white name-row p-2 holder_name" data-v-418ca843><label data-v-418ca843>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2" data-v-418ca843></div></div>',3),bH={class:"row d-flex"},pH={class:"col-md-5 ms-auto"},uH=["onClick"],OH={key:0,class:"w-10 me-3 mb-0",src:X_.a,alt:"logo"},hH={key:1,class:"w-10 me-3 mb-0",src:ut.a,alt:"logo"},jH={class:"mb-0"},gH=["onClick"],fH=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1);function EH(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",nH,[rH,Object(l["createElementVNode"])("div",iH,[Object(l["createElementVNode"])("div",dH,[mH,Object(l["createElementVNode"])("div",bH,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>s.submitPaymentMethod&&s.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"save_btn mx-auto me-3 w-50 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])]),Object(l["createElementVNode"])("div",pH,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.userCards,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:Object(l["normalizeClass"])([{selected:e.isSelected===a}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:t=>e.toggleSelection(a,t)},["visa"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",OH)):Object(l["createCommentVNode"])("",!0),"mastercard"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",hH)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",jH," **** **** **** "+Object(l["toDisplayString"])(t.card.last4),1),Object(l["createElementVNode"])("i",{onClick:e=>s.confirmDelete(t.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,gH),fH],10,uH))),128))])])])])}Object(l["popScopeId"])();var VH={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},data(){return{userCards:"",user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},includeStripe(e,t){let a=document,l="script",c=a.createElement(l),o=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),o.parentNode.insertBefore(c,o)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await it.post("/createCard",l),this.getCustomerPaymentMethods()}catch(c){console.log(c)}},async removePaymentMethod(e){let t={user_id:this.user.id,payment_method:e};try{await it.post("/removePaymentMethod",t),this.removeFromList(e)}catch(a){console.log(a)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await it.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("1704");const NH=ct()(VH,[["render",EH],["__scopeId","data-v-418ca843"]]);var xH=NH;const yH={class:"card"},vH={class:"card-header"},kH={class:"row"},wH={class:"col text-start"},SH=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),AH=[SH],BH={class:"card-body"},CH=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white mb-2"></div></div>',3),_H={class:"row d-flex justify-content-center"};function PH(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",yH,[Object(l["createElementVNode"])("div",vH,[Object(l["createElementVNode"])("div",kH,[Object(l["createElementVNode"])("div",wH,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},AH)])])]),Object(l["createElementVNode"])("div",BH,[CH,Object(l["createElementVNode"])("div",_H,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.submitPaymentMethod&&s.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"me-3 w-35 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var IH={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.$globalHelper.buttonColor()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),o=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),o.parentNode.insertBefore(c,o)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await it.post("/createCard",l),this.$router.push({name:"payment_account"})}catch(c){console.log(c)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("8889");const DH=ct()(IH,[["render",PH]]);var TH=DH;const MH={class:"container-fluid"},zH={class:"row"},FH={class:"col-12"},UH={class:"card"},LH={class:"d-flex justify-content-between  border-radius-lg pt-4"},$H=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"COURSES",-1),qH=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),RH=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Courses section, you can manage course information by adding, editing, or deleting courses. Additionally, you can view and update the "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" list of students enrolled in each course. This functionality helps management of courses and enrolled students. ")])],-1),HH={class:"filter-container ms-2"},QH={class:"row",style:{width:"100%"}},JH={class:"col-4"},YH={style:{display:"flex"}},WH=["value"],XH={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},ZH=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),KH=Object(l["createTextVNode"])(" Export To XLS "),GH=[ZH,KH],eQ={class:"card-body px-0 pb-2"},tQ={class:"table-responsive p-0 student-table"},aQ={ref:"table",class:"table align-items-center mb-0"},lQ=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Code "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Level "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Action ")])],-1),cQ={key:0},oQ=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),sQ=[oQ],nQ={class:"text-xs  text-center font-weight-bold mb-0"},rQ=["onClick"],iQ={class:"d-flex"},dQ={class:"text-xs font-weight-bold mb-0"},mQ=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),bQ={class:"text-xs font-weight-bold mb-0"},pQ={class:"text-xs font-weight-bold mb-0"},uQ={class:"align-middle text-center text-sm"},OQ={class:"badge badge-sm bg-gradient-success"},hQ={class:"align-middle text-center"},jQ=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),gQ=["onClick"],fQ={class:"row"},EQ={class:"col-md-12 col-lg-12"},VQ={class:"pagination-container"},NQ={class:"entries-dropdown"},xQ=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),yQ=["value"],vQ={class:"pagination-wrapper"},kQ={class:"pagination"},wQ=["onClick"];function SQ(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",MH,[Object(l["createElementVNode"])("div",zH,[Object(l["createElementVNode"])("div",FH,[Object(l["createElementVNode"])("div",UH,[Object(l["createElementVNode"])("div",LH,[$H,Object(l["createVNode"])(n,{to:{name:"add-course"}},{default:Object(l["withCtx"])(()=>[qH]),_:1})]),RH,Object(l["createElementVNode"])("div",HH,[Object(l["createElementVNode"])("div",QH,[Object(l["createElementVNode"])("div",JH,[Object(l["createElementVNode"])("span",YH,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterCourses&&s.filterCourses(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.searchString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.searchString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterCourses&&s.filterCourses(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,WH))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",XH,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},GH)])])]),Object(l["createElementVNode"])("div",eQ,[Object(l["createElementVNode"])("div",tQ,[Object(l["createElementVNode"])("table",aQ,[lQ,Object(l["createElementVNode"])("tbody",null,[0===o.allCourse.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",cQ,sQ)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allCourse,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",nQ,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("span",{onClick:t=>s.gotoStudents(e.CourseCode)},[Object(l["createElementVNode"])("div",iQ,[Object(l["createElementVNode"])("p",dQ,Object(l["toDisplayString"])(e.CourseCode),1),mQ])],8,rQ)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",bQ,Object(l["toDisplayString"])(e.CourseDescription),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",pQ,Object(l["toDisplayString"])(e.CourseLevel),1)]),Object(l["createElementVNode"])("td",uQ,[Object(l["createElementVNode"])("span",OQ,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",hQ,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_course?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-course",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[jQ]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,gQ)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",fQ,[Object(l["createElementVNode"])("div",EQ,[Object(l["createElementVNode"])("div",VQ,[Object(l["createElementVNode"])("div",NQ,[xQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemsPerPage=e),onChange:t[6]||(t[6]=e=>s.getAllCourses(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,yQ))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",vQ,[Object(l["createElementVNode"])("ul",kQ,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getAllCourses(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getAllCourses(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllCourses(e),href:"#"},Object(l["toDisplayString"])(e),9,wQ)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getAllCourses(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getAllCourses(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var AQ={name:"tables",mounted(){this.setColor(),this.getUser(),this.getFilterString.filterBy?(this.filterBy=this.getFilterString.filterBy,this.searchString=this.getFilterString.searchString,this.filterCourses()):this.getAllCourses(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_course"),this.$globalHelper.buttonColor()},beforeRouteLeave(e,t,a){if("enrolled-students"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,searchString:"",filterBy:"Course Code",allFields:["Course Name","Course Code","Course Level"],allCourse:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(tt["c"])(["getBrandingSetting","getFilterString"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(tt["b"])(["updateFilterString"]),gotoStudents(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/course/enrolled-students/"+e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteCourse(e)})},exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"courses.xlsx")},async filterCourses(){if(""==this.filterBy&&""==this.searchString)return void this.getAllCourses();if(""!=this.filterBy&&""==this.searchString)return void this.getAllCourses();let e={type:this.filterBy,value:this.searchString,status:"Active"};try{const t=await it.post("/filterCourses",e);this.allCourse=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllCourses(e=null){try{let t={page:"",entries_per_page:this.itemsPerPage};t.page=e;let a="/getAllCourses";const l=await it.post(a,t);this.allCourse=l.data.data.data,this.totalRows=l.data.pagination.total,this.currentPage=l.data.pagination.current_page,this.perPage=l.data.pagination.per_page,this.totalPages=l.data.pagination.last_page}catch(t){console.log(t)}},async deleteCourse(e){try{await it.delete("/deleteCourse/"+e),this.removeCourseFromList(e),this.snackbarMsg("Course Successfully Deleted")}catch(t){console.log(t)}},removeCourseFromList(e){const t=this.allCourse.findIndex(t=>t.id===e);this.allCourse.splice(t,1)},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)}}};a("5d04");const BQ=ct()(AQ,[["render",SQ]]);var CQ=BQ;Object(l["pushScopeId"])("data-v-0e2b24ef");const _Q={class:"container-fluid py-4"},PQ={class:"row"},IQ={class:"col-12"},DQ={class:"card my-4"},TQ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},MQ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Course",-1),zQ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),FQ={class:"card-body px-0 pb-2"},UQ={key:0,class:"mb-3 change-pass-alert"},LQ=Object(l["createElementVNode"])("br",null,null,-1),$Q={class:"table-responsive p-0"},qQ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},RQ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},HQ={class:"form-bg container p-4"},QQ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),JQ={class:"card card-plain"},YQ={class:"card-body"},WQ={role:"form"},XQ={class:"mb-1"},ZQ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),KQ={class:"mb-1"},GQ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),eJ={class:"mb-1"},tJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Name",-1),aJ={class:"mb-1"},lJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),cJ=Object(l["createElementVNode"])("br",null,null,-1),oJ=["value"],sJ={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},nJ={class:""};function rJ(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_Q,[Object(l["createElementVNode"])("div",PQ,[Object(l["createElementVNode"])("div",IQ,[Object(l["createElementVNode"])("div",DQ,[Object(l["createElementVNode"])("div",TQ,[MQ,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[zQ]),_:1})]),Object(l["createElementVNode"])("div",FQ,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",UQ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),LQ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",$Q,[Object(l["createElementVNode"])("div",qQ,[Object(l["createElementVNode"])("div",RQ,[Object(l["createElementVNode"])("div",HQ,[QQ,Object(l["createElementVNode"])("div",JQ,[Object(l["createElementVNode"])("div",YQ,[Object(l["createElementVNode"])("form",WQ,[Object(l["createElementVNode"])("div",XQ,[ZQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],o.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",KQ,[GQ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],o.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",eJ,[tJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newCourse.CourseDescription=e),type:"email",placeholder:"Course Name",name:"CourseDescription"},null,512),[[l["vModelText"],o.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",aJ,[lJ,cJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,oJ))),128))],512),[[l["vModelSelect"],o.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",sJ,[Object(l["createElementVNode"])("div",nJ,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>s.saveNewCourse&&s.saveNewCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Course ")])])])])])])])])])}Object(l["popScopeId"])();var iJ={name:"",components:{},mounted(){this.getUser(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Us()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewCourse(){this.isError=!1;try{await it.post("/createCourse",this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("eb29");const dJ=ct()(iJ,[["render",rJ],["__scopeId","data-v-0e2b24ef"]]);var mJ=dJ;Object(l["pushScopeId"])("data-v-24cbe91c");const bJ={class:"container-fluid py-4"},pJ={class:"row"},uJ={class:"col-12"},OJ={class:"card my-4"},hJ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},jJ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Course",-1),gJ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),fJ={class:"card-body px-0 pb-2"},EJ={key:0,class:"mb-3 change-pass-alert"},VJ=Object(l["createElementVNode"])("br",null,null,-1),NJ={class:"table-responsive p-0"},xJ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},yJ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},vJ={class:"form-bg container p-4"},kJ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),wJ={class:"card card-plain"},SJ={class:"card-body"},AJ={role:"form"},BJ={class:"mb-1"},CJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),_J={class:"mb-1"},PJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),IJ={class:"mb-1"},DJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Name",-1),TJ={class:"mb-1"},MJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),zJ=Object(l["createElementVNode"])("br",null,null,-1),FJ=["value"],UJ={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},LJ={class:""};function $J(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bJ,[Object(l["createElementVNode"])("div",pJ,[Object(l["createElementVNode"])("div",uJ,[Object(l["createElementVNode"])("div",OJ,[Object(l["createElementVNode"])("div",hJ,[jJ,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[gJ]),_:1})]),Object(l["createElementVNode"])("div",fJ,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",EJ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),VJ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",NJ,[Object(l["createElementVNode"])("div",xJ,[Object(l["createElementVNode"])("div",yJ,[Object(l["createElementVNode"])("div",vJ,[kJ,Object(l["createElementVNode"])("div",wJ,[Object(l["createElementVNode"])("div",SJ,[Object(l["createElementVNode"])("form",AJ,[Object(l["createElementVNode"])("div",BJ,[CJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],o.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",_J,[PJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],o.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",IJ,[DJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newCourse.CourseDescription=e),type:"email",placeholder:"Course Name",name:"CourseDescription"},null,512),[[l["vModelText"],o.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",TJ,[MJ,zJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,FJ))),128))],512),[[l["vModelSelect"],o.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",UJ,[Object(l["createElementVNode"])("div",LJ,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>s.updateCourse&&s.updateCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Course ")])])])])])])])])])}Object(l["popScopeId"])();var qJ={name:"",components:{},mounted(){this.getUser(),this.editCourse(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},isError:!1,validationErrors:"",formValidation:"",availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Us()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editCourse(){let e=this.$route.params.id;try{const t=await it.get("/editCourse/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newCourse.CourseCode=t.CourseCode,this.newCourse.CourseLevel=t.CourseLevel,this.newCourse.CourseDescription=t.CourseDescription,this.newCourse.status=t.status)},async updateCourse(){let e=this.$route.params.id;try{await it.put("/updateCourse/"+e,this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("d858");const RJ=ct()(qJ,[["render",$J],["__scopeId","data-v-24cbe91c"]]);var HJ=RJ;const QJ={class:"container-fluid"},JJ={class:"row"},YJ={class:"col text-start"},WJ=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left me-1"},null,-1),XJ=[WJ],ZJ={class:"row"},KJ={class:"col-12"},GJ={class:"card"},eY={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},tY=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ENROLLED STUDENTS",-1),aY=Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"},null,-1),lY=Object(l["createTextVNode"])(" New "),cY=[aY,lY],oY=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Enrolled Students section, you can view a list of students currently enrolled in a course. You have the ability to manage course enrollments "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" by adding new students or removing existing ones. ")])],-1),sY={class:"filter-container ms-2"},nY={class:"row",style:{width:"100%"}},rY={class:"col-4"},iY={style:{display:"flex"}},dY=["value"],mY={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},bY=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),pY=Object(l["createTextVNode"])(" Export To XLS "),uY=[bY,pY],OY=Object(l["createElementVNode"])("div",null,null,-1),hY={class:"card-body px-0 pb-2"},jY={class:"table-responsive p-0 student-table"},gY={ref:"table",class:"table align-items-center mb-0"},fY=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),EY={class:"align-middle text-center text-sm"},VY={class:"text-xs font-weight-bold mb-0"},NY={class:"text-xs font-weight-bold mb-0"},xY={class:"text-xs mb-0",style:{"font-size":"8px"}},yY={class:"align-middle text-center"},vY={class:"text-secondary text-xs font-weight-bold"},kY={class:"align-middle text-center"},wY=["onClick"],SY={class:"row"},AY={class:"col-md-12 col-lg-12"},BY={class:"pagination-container"},CY={class:"entries-dropdown"},_Y=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),PY=["value"],IY={class:"pagination-wrapper"},DY={class:"pagination"},TY=["onClick"];function MY(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("Enroll");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QJ,[Object(l["createElementVNode"])("div",JJ,[Object(l["createElementVNode"])("div",YJ,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},XJ)])]),Object(l["createElementVNode"])("div",ZJ,[Object(l["createElementVNode"])("div",KJ,[Object(l["createElementVNode"])("div",GJ,[Object(l["createElementVNode"])("div",eY,[tY,s.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=e=>o.showModal=!0),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},cY)):Object(l["createCommentVNode"])("",!0)]),oY,Object(l["createElementVNode"])("div",sY,[Object(l["createElementVNode"])("div",nY,[Object(l["createElementVNode"])("div",rY,[Object(l["createElementVNode"])("span",iY,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[2]||(t[2]=(...e)=>s.filterStudents&&s.filterStudents(...e)),"onUpdate:modelValue":t[3]||(t[3]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[4]||(t[4]=(...e)=>s.filterStudents&&s.filterStudents(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[5]||(t[5]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,dY))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",mY,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.exportTableToXLS())},uY)])])]),OY,Object(l["createElementVNode"])("div",hY,[Object(l["createElementVNode"])("div",jY,[Object(l["createElementVNode"])("table",gY,[fY,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",EY,[Object(l["createElementVNode"])("p",VY,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",NY,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),Object(l["createElementVNode"])("p",xY,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",yY,[Object(l["createElementVNode"])("span",vY,Object(l["toDisplayString"])(e.schoolName),1)]),Object(l["createElementVNode"])("td",kY,[Object(l["createElementVNode"])("span",null,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:t=>s.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,wY)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",SY,[Object(l["createElementVNode"])("div",AY,[Object(l["createElementVNode"])("div",BY,[Object(l["createElementVNode"])("div",CY,[_Y,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.itemsPerPage=e),onChange:t[8]||(t[8]=e=>s.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,PY))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",IY,[Object(l["createElementVNode"])("ul",DY,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,TY)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])]),Object(l["createVNode"])(n,{show:o.showModal,task:e.task,onClose:t[13]||(t[13]=e=>o.showModal=!1),onUpdateStudents:s.getAllStudents},null,8,["show","task","onUpdateStudents"])])}Object(l["pushScopeId"])("data-v-2d36253a");const zY={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},FY={class:"modal-dialog"},UY={class:"modal-content"},LY={class:"modal-header"},$Y=Object(l["createElementVNode"])("h6",{class:"h5 text-sm modal-title"},"Enroll Student to this Course",-1),qY=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),RY=[qY],HY={class:"pt-4 modal-body"},QY=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),JY={class:"mb-4 input-group"},YY=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),WY={key:0,class:"alert alert-success"},XY={class:"text-end"};function ZY(e,t,a,c,o,s){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",zY,[Object(l["createElementVNode"])("div",FY,[Object(l["createElementVNode"])("div",UY,[Object(l["createElementVNode"])("div",LY,[$Y,Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e)),"aria-label":"Close"},RY)]),Object(l["createElementVNode"])("div",HY,[QY,Object(l["createElementVNode"])("div",JY,[YY,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>o.StudentID=e),class:"form-control",placeholder:"Enter Student ID",type:"text"},null,512),[[l["vModelText"],o.StudentID]])]),o.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",WY,Object(l["toDisplayString"])(o.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",XY,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>s.saveChanges&&s.saveChanges(...e)),class:"m-1 btn btn-primary"}," Save "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var KY={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},computed:{},mounted(){this.$globalHelper.buttonColor()},data(){return{StudentID:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},closeModal(){this.$emit("close")},async saveChanges(){this.isError=!1;let e={StudentID:this.StudentID,CourseCode:this.$route.params.id};try{await it.post("/enrollStudent",e),this.snackbarMsg("Student Enrolled Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors;for(let e=0;e<this.validationErrors.length;e++)this.snackbarMsg(this.validationErrors[e])}this.closeModal(),this.$emit("update-students")}}};a("457f");const GY=ct()(KY,[["render",ZY],["__scopeId","data-v-2d36253a"]]);var eW=GY,tW={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStudents()},updated(){this.$permissions.redirectIfNotAllowed("view_student"),this.$globalHelper.buttonColor()},components:{Enroll:eW},beforeRouteLeave(e,t,a){if("list-courses"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Student Id",seachString:"",allFields:["Student Id"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(tt["b"])(["updateFilterString"]),exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"students_table.xlsx")},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Student will be dropped from course and you won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e=this.$route.params.id,t={type:this.filterBy,value:this.seachString,course_code:e};try{const e=await it.post("/filterCourseStudents",t);this.allStudents=e.data,this.totalRows=e.data.total,this.currentPage=e.data.current_page,this.perPage=e.per_page,this.totalPages=e.data.last_page}catch(a){console.log(a)}},async getAllStudents(e=null){try{let t={CourseCode:this.$route.params.id,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await it.post("/getCourseStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(t){console.log(t)}},async deleteStudent(e){let t={StudentID:e,CourseCode:this.$route.params.id};try{await it.post("/removeEnrolledStudent",t),this.getAllStudents(),this.snackbarMsg("Student Removed Successfully")}catch(a){let e=a.response.data.errors;for(let t=0;t<e.length;t++)this.snackbarMsg(e[t])}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("3c57");const aW=ct()(tW,[["render",MY]]);var lW=aW;const cW={class:"container-fluid"},oW={class:"row"},sW={class:"col-12"},nW={class:"card"},rW={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},iW=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ADMINS",-1),dW=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),mW=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Here, you can add organization admins who can manage the entire portal. Multiple admins can be assigned, each with different"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" roles and permissions.")])],-1),bW={class:"card-body px-0 pb-2"},pW={class:"table-responsive p-0"},uW={class:"table align-items-center mb-0"},OW=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Role "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),hW={key:0},jW=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),gW=[jW],fW={class:"align-middle text-center text-sm"},EW={class:"text-xs font-weight-bold mb-0"},VW={class:"text-xs font-weight-bold mb-0"},NW={class:"text-xs font-weight-bold mb-0"},xW={class:"align-middle text-center"},yW={class:"text-xs font-weight-bold mb-0"},vW={class:"align-middle text-center"},kW={class:"text-secondary text-xs font-weight-bold"},wW={class:"align-middle text-center text-sm"},SW={class:"badge badge-sm bg-gradient-success"},AW={class:"align-middle text-center"},BW=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),CW=["onClick"];function _W(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",cW,[Object(l["createElementVNode"])("div",oW,[Object(l["createElementVNode"])("div",sW,[Object(l["createElementVNode"])("div",nW,[Object(l["createElementVNode"])("div",rW,[iW,Object(l["createVNode"])(n,{to:{name:"add-organization-admins"}},{default:Object(l["withCtx"])(()=>[dW]),_:1})]),mW,Object(l["createElementVNode"])("div",bW,[Object(l["createElementVNode"])("div",pW,[Object(l["createElementVNode"])("table",uW,[OW,Object(l["createElementVNode"])("tbody",null,[0===o.allAdmins.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",hW,gW)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allAdmins,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",fW,[Object(l["createElementVNode"])("p",EW,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",VW,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",NW,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",xW,[Object(l["createElementVNode"])("p",yW,Object(l["toDisplayString"])(e.user_role.role.name),1)]),Object(l["createElementVNode"])("td",vW,[Object(l["createElementVNode"])("span",kW,Object(l["toDisplayString"])(e.organization_admin&&e.organization_admin.organization?e.organization_admin.organization.name:"-"),1)]),Object(l["createElementVNode"])("td",wW,[Object(l["createElementVNode"])("span",SW,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",AW,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization-admin",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[BW]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,CW)])])]))),128))])])])])])])])])}var PW={name:"tables",mounted(){this.setColor(),this.getAllAdmins(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_admin")},data(){return{allAdmins:"",schools:6}},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganizationAdmin(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},async getAllAdmins(){try{const e=await it.get("/getAllOrganizationAdmins");this.allAdmins=e.data}catch(e){console.log(e)}},async deleteOrganizationAdmin(e){try{await it.delete("/deleteOrganizationAdmin/"+e),this.removeOrganizationAdminFromList(e),this.snackbarMsg("Successfully Deleted")}catch(t){console.log(t)}},removeOrganizationAdminFromList(e){const t=this.allAdmins.findIndex(t=>t.id===e);this.allAdmins.splice(t,1)}}};a("2dbd");const IW=ct()(PW,[["render",_W]]);var DW=IW;Object(l["pushScopeId"])("data-v-9f457e52");const TW={class:"container-fluid py-4"},MW={class:"row"},zW={class:"col-12"},FW={class:"card my-4"},UW={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},LW=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Create Admin",-1),$W=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),qW={class:"card-body px-0 pb-2"},RW={class:"table-responsive p-0"},HW={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},QW={key:0,class:"mb-3 change-pass-alert"},JW=Object(l["createElementVNode"])("br",null,null,-1),YW={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},WW={class:"form-bg container p-4"},XW=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),ZW={class:"card card-plain"},KW={class:"card-body"},GW={role:"form"},eX={class:"mb-1"},tX=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),aX={key:0,class:"text-danger error-txt"},lX={class:"mb-1"},cX=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),oX={key:0,class:"text-danger error-txt"},sX={class:"mb-1"},nX=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),rX={key:0,class:"text-danger error-txt"},iX={class:"mb-1"},dX=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),mX={key:0,class:"text-danger error-txt"},bX={class:"mb-1"},pX=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),uX={key:0,class:"text-danger error-txt"},OX={class:"mb-1"},hX=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),jX=Object(l["createElementVNode"])("br",null,null,-1),gX=["value"],fX={key:0,class:"text-danger error-txt"},EX={class:"mb-1"},VX=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),NX=Object(l["createElementVNode"])("br",null,null,-1),xX=["value"],yX={key:0,class:"text-danger error-txt"},vX={class:"mb-1"},kX=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),wX=Object(l["createElementVNode"])("br",null,null,-1),SX=["value"],AX={key:0,class:"text-danger error-txt"},BX={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},CX={class:""};function _X(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",TW,[Object(l["createElementVNode"])("div",MW,[Object(l["createElementVNode"])("div",zW,[Object(l["createElementVNode"])("div",FW,[Object(l["createElementVNode"])("div",UW,[LW,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[$W]),_:1})]),Object(l["createElementVNode"])("div",qW,[Object(l["createElementVNode"])("div",RW,[Object(l["createElementVNode"])("div",HW,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QW,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),JW]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",YW,[Object(l["createElementVNode"])("div",WW,[XW,Object(l["createElementVNode"])("div",ZW,[Object(l["createElementVNode"])("div",KW,[Object(l["createElementVNode"])("form",GW,[Object(l["createElementVNode"])("div",eX,[tX,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newAdmin.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",aX,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lX,[cX,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newAdmin.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",oX,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sX,[nX,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newAdmin.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rX,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",iX,[dX,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>o.newAdmin.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],o.newAdmin.password]]),""!==o.formValidation&&""!==o.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mX,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",bX,[pX,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],o.newAdmin.password_confirmation]]),""!==o.formValidation&&""!==o.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uX,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",OX,[hX,jX,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,gX))),128))],512),[[l["vModelSelect"],o.newAdmin.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fX,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",EX,[VX,NX,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>o.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,xX)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],o.newAdmin.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yX,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",vX,[kX,wX,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,SX))),128))],512),[[l["vModelSelect"],o.newAdmin.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",AX,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",BX,[Object(l["createElementVNode"])("div",CX,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.saveNewAdmin&&s.saveNewAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var PX={name:"",components:{},mounted(){this.getAllOrganizations(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:"",role:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_admin");let e=!1,t="";t=Us()(this.newAdmin);for(let a in this.newAdmin)""===this.newAdmin[a]||void 0===this.newAdmin[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await it.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async saveNewAdmin(){if(!this.validateForm())try{let e=await it.post("/createOrganizationAdmin",this.newAdmin);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await it.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await it.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("a86a");const IX=ct()(PX,[["render",_X],["__scopeId","data-v-9f457e52"]]);var DX=IX;Object(l["pushScopeId"])("data-v-3c7089d6");const TX={class:"container-fluid py-4"},MX={class:"row"},zX={class:"col-12"},FX={class:"card my-4"},UX={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},LX=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Admin",-1),$X=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),qX={class:"card-body px-0 pb-2"},RX={class:"table-responsive p-0"},HX={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},QX={key:0,class:"mb-3 change-pass-alert"},JX=Object(l["createElementVNode"])("br",null,null,-1),YX={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},WX={class:"form-bg container p-4"},XX=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),ZX={class:"card card-plain"},KX={class:"card-body"},GX={role:"form"},eZ={class:"mb-1"},tZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),aZ={key:0,class:"text-danger error-txt"},lZ={class:"mb-1"},cZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),oZ={key:0,class:"text-danger error-txt"},sZ={class:"mb-1"},nZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),rZ={key:0,class:"text-danger error-txt"},iZ={class:"mb-1"},dZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),mZ=Object(l["createElementVNode"])("br",null,null,-1),bZ=["value"],pZ={key:0,class:"text-danger error-txt"},uZ={class:"mb-1"},OZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),hZ=Object(l["createElementVNode"])("br",null,null,-1),jZ=["value"],gZ={key:0,class:"text-danger error-txt"},fZ={class:"mb-1"},EZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),VZ=Object(l["createElementVNode"])("br",null,null,-1),NZ=["value"],xZ={key:0,class:"text-danger error-txt"},yZ={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},vZ={class:"form-bg container p-4"},kZ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),wZ=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),SZ={class:"card card-plain"},AZ={class:"card-body"},BZ={role:"form"},CZ={class:"mb-1"},_Z=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),PZ={class:"mb-1"},IZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),DZ={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},TZ={class:""};function MZ(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",TX,[Object(l["createElementVNode"])("div",MX,[Object(l["createElementVNode"])("div",zX,[Object(l["createElementVNode"])("div",FX,[Object(l["createElementVNode"])("div",UX,[LX,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[$X]),_:1})]),Object(l["createElementVNode"])("div",qX,[Object(l["createElementVNode"])("div",RX,[Object(l["createElementVNode"])("div",HX,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QX,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),JX]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",YX,[Object(l["createElementVNode"])("div",WX,[XX,Object(l["createElementVNode"])("div",ZX,[Object(l["createElementVNode"])("div",KX,[Object(l["createElementVNode"])("form",GX,[Object(l["createElementVNode"])("div",eZ,[tZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newAdmin.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",aZ,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lZ,[cZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newAdmin.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",oZ,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sZ,[nZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newAdmin.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rZ,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",iZ,[dZ,mZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>o.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,bZ))),128))],512),[[l["vModelSelect"],o.newAdmin.organization_id]]),""!==o.formValidation&&""!==o.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pZ,"Organisation is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",uZ,[OZ,hZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>o.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,jZ)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],o.newAdmin.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gZ,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",fZ,[EZ,VZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,NZ))),128))],512),[[l["vModelSelect"],o.newAdmin.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xZ,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",yZ,[Object(l["createElementVNode"])("div",vZ,[kZ,wZ,Object(l["createElementVNode"])("div",SZ,[Object(l["createElementVNode"])("div",AZ,[Object(l["createElementVNode"])("form",BZ,[Object(l["createElementVNode"])("div",CZ,[_Z,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newAdmin.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newAdmin.password]])]),Object(l["createElementVNode"])("div",PZ,[IZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>o.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newAdmin.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",DZ,[Object(l["createElementVNode"])("div",TZ,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>s.updateAdmin&&s.updateAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var zZ={name:"",components:{},mounted(){this.getAllRoles(),this.getAllOrganizations(),this.editOrganizationAdmin(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",status:"",role:"",password:"",password_confirmation:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_admin");let e=!1,t="";t=Us()(this.newAdmin);for(let a in this.newAdmin)""!==this.newAdmin[a]&&void 0!==this.newAdmin[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await it.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async editOrganizationAdmin(){let e=this.$route.params.id;try{const t=await it.get("/editOrganizationAdmin/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAdmin.organization_id=t.organization_admin.organization_id,this.newAdmin.first_name=t.first_name,this.newAdmin.last_name=t.last_name,this.newAdmin.email=t.email,this.newAdmin.status=t.status,this.newAdmin.role=t.user_role.role.name)},async updateAdmin(){if(this.validateForm())console.log(this.formValidation);else try{let e=this.$route.params.id;await it.put("/updateOrganizationAdmin/"+e,this.newAdmin),this.isError=!1,this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Updated Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await it.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await it.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("b909");const FZ=ct()(zZ,[["render",MZ],["__scopeId","data-v-3c7089d6"]]);var UZ=FZ;const LZ={class:"container-fluid"},$Z={class:"row"},qZ={class:"col-12"},RZ={class:"card px-3"},HZ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},QZ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STAFF",-1),JZ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-2 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),YZ=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee staff accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each staff. ")])],-1),WZ={class:"filter-container ms-2"},XZ={class:"row",style:{width:"100%"}},ZZ={class:"col-4"},KZ={style:{display:"flex"}},GZ=["value"],eK={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"10px"}},tK=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),aK=Object(l["createTextVNode"])(" Export To XLS "),lK=[tK,aK],cK={class:"card-body px-0 pb-2"},oK={class:"table-responsive p-0"},sK={ref:"table",class:"table align-items-center mb-0"},nK=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),rK=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),iK=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),dK=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),mK=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," Balance ",-1),bK={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},pK={key:1,class:"text-uppercase text-xxs font-weight-bolder"},uK=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),OK=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),hK={key:0},jK=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),gK=[jK],fK={class:"text-xs  text-center font-weight-bold mb-0"},EK={class:"text-xs font-weight-bold mb-0"},VK={class:"text-xs font-weight-bold mb-0"},NK={class:"text-xs text-center font-weight-bold mb-0"},xK={class:"ms-4 text-secondary text-xs font-weight-bold"},yK={key:0,class:"align-middle text-center"},vK=["onClick"],kK={key:1,class:"align-middle text-center"},wK=["onClick"],SK={class:"align-middle text-center text-sm"},AK={class:"badge badge-sm bg-gradient-success"},BK={class:"align-middle text-center"},CK=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),_K=["onClick"],PK={class:"row"},IK={class:"col-md-12 col-lg-12"},DK={class:"pagination-container"},TK={class:"entries-dropdown"},MK=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),zK=["value"],FK={class:"pagination-wrapper"},UK={class:"pagination"},LK=["onClick"];function $K(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LZ,[Object(l["createElementVNode"])("div",$Z,[Object(l["createElementVNode"])("div",qZ,[Object(l["createElementVNode"])("div",RZ,[Object(l["createElementVNode"])("div",HZ,[QZ,s.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-staff"}},{default:Object(l["withCtx"])(()=>[JZ]),_:1})):Object(l["createCommentVNode"])("",!0)]),YZ,Object(l["createElementVNode"])("div",WZ,[Object(l["createElementVNode"])("div",XZ,[Object(l["createElementVNode"])("div",ZZ,[Object(l["createElementVNode"])("span",KZ,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterStaff&&s.filterStaff(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.searchString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.searchString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterStaff&&s.filterStaff(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,GZ))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",eK,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},lK)])])]),Object(l["createElementVNode"])("div",cK,[Object(l["createElementVNode"])("div",oK,[Object(l["createElementVNode"])("table",sK,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[nK,rK,iK,dK,mK,s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",bK," Wallet ")):Object(l["createCommentVNode"])("",!0),s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",pK," TopUp ")):Object(l["createCommentVNode"])("",!0),uK,OK])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",hK,gK)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",fK,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",EK,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",VK,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",NK,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("span",xK,"£"+Object(l["toDisplayString"])(s.formattedPrice(e.balance?e.balance:0)),1)]),s.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",yK,[Object(l["createElementVNode"])("i",{onClick:t=>s.gotoBallance(e.user.id),class:"hover-pointer fas fa-donate fs-5 me-2"},null,8,vK)])):Object(l["createCommentVNode"])("",!0),s.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",kK,[Object(l["createElementVNode"])("i",{onClick:t=>s.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,wK)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",SK,[Object(l["createElementVNode"])("span",AK,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",BK,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-staff",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[CK]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,_K)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",PK,[Object(l["createElementVNode"])("div",IK,[Object(l["createElementVNode"])("div",DK,[Object(l["createElementVNode"])("div",TK,[MK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemsPerPage=e),onChange:t[6]||(t[6]=e=>s.getAllStaff(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,zK))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",FK,[Object(l["createElementVNode"])("ul",UK,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getAllStaff(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,LK)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getAllStaff(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getAllStaff(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var qK={name:"tables",mounted(){this.setColor(),this.getUser(),this.getFilterString.filterBy?(this.filterBy=this.getFilterString.filterBy,this.searchString=this.getFilterString.searchString,this.filterStaff()):this.getAllStaff(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_staff"),this.$globalHelper.buttonColor()},computed:{...Object(tt["c"])(["getBrandingSetting","getFilterString"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},beforeRouteLeave(e,t,a){if("payment_account"!==e.name&&"balance"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],searchString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{...Object(tt["b"])(["updateFilterString"]),exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"staff_table.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStaff(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/payment_account/"+e)},gotoBallance(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/balance/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await it.post("/getAllStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await it.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.user.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.searchString)return void this.getAllStaff();let e={type:this.filterBy,value:this.searchString,status:"active"};try{const t=await it.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("efa0");const RK=ct()(qK,[["render",$K]]);var HK=RK;const QK={class:"container-fluid"},JK={class:"row"},YK={class:"col-12"},WK={class:"card px-3"},XK=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED STAFF"),Object(l["createElementVNode"])("small",{class:"page-description ms-2"},[Object(l["createTextVNode"])("Every archived staff can be found in this table. Here, you can manage archived staff accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),ZK={class:"card-body px-0 pb-2"},KK={class:"filter-container mb-1 ms-2",style:{"margin-top":"-11px"}},GK={class:"row",style:{width:"100%"}},eG={class:"col-4"},tG={style:{display:"flex"}},aG=["value"],lG={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},cG=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),oG=Object(l["createTextVNode"])(" Export To XLS "),sG=[cG,oG],nG={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},rG=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),iG=Object(l["createTextVNode"])(" Bulk Restore "),dG=[rG,iG],mG={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},bG=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),pG=Object(l["createTextVNode"])(" Bulk Delete "),uG=[bG,pG],OG={class:"table-responsive p-0"},hG={ref:"table",class:"table align-items-center mb-0"},jG={class:""},gG={class:"form-check",style:{"margin-left":"-20px"}},fG=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),EG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),VG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),NG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),xG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),yG=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),vG={key:0},kG=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),wG=[kG],SG={class:"align-middle text-center text-sm"},AG={class:"form-check"},BG=["checked","onChange"],CG=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),_G={class:"text-xs  text-center font-weight-bold mb-0"},PG={class:"text-xs font-weight-bold mb-0"},IG={class:"text-xs font-weight-bold mb-0"},DG={class:"text-xs text-center font-weight-bold mb-0"},TG={class:"align-middle text-center text-sm"},MG={class:"badge badge-sm bg-gradient-success"},zG={class:"row"},FG={class:"col-md-12 col-lg-12"},UG={class:"pagination-container"},LG={class:"entries-dropdown"},$G=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),qG=["value"],RG={class:"pagination-wrapper"},HG={class:"pagination"},QG=["onClick"];function JG(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QK,[Object(l["createElementVNode"])("div",JK,[Object(l["createElementVNode"])("div",YK,[Object(l["createElementVNode"])("div",WK,[XK,Object(l["createElementVNode"])("div",ZK,[Object(l["createElementVNode"])("div",KK,[Object(l["createElementVNode"])("div",GK,[Object(l["createElementVNode"])("div",eG,[Object(l["createElementVNode"])("span",tG,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterStaff&&s.filterStaff(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterStaff&&s.filterStaff(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,aG))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",lG,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},sG)]),Object(l["createElementVNode"])("div",nG,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>s.confirmAction("restore"))},dG)]),Object(l["createElementVNode"])("div",mG,[s.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.confirmAction("delete"))},uG)):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",OG,[Object(l["createElementVNode"])("table",hG,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",jG,[Object(l["createElementVNode"])("div",gG,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>s.selectAll&&s.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>o.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],o.selectall]]),fG])]),EG,VG,NG,xG,yG])]),Object(l["createElementVNode"])("tbody",null,[0===o.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",vG,wG)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",SG,[Object(l["createElementVNode"])("div",AG,[Object(l["createElementVNode"])("input",{checked:s.checkIfSelected(e.user.id),onChange:t=>s.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,BG),CG])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",_G,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",PG,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",IG,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",DG,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",TG,[Object(l["createElementVNode"])("span",MG,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)]),Object(l["createElementVNode"])("div",zG,[Object(l["createElementVNode"])("div",FG,[Object(l["createElementVNode"])("div",UG,[Object(l["createElementVNode"])("div",LG,[$G,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.itemsPerPage=e),onChange:t[10]||(t[10]=e=>s.getAllStaff(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,qG))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",RG,[Object(l["createElementVNode"])("ul",HG,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>s.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>s.getAllStaff(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,QG)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>s.getAllStaff(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>s.getAllStaff(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var YG={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStaff(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_staff")},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],selectall:!1,selectedRecords:[],seachString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"archived_staff.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStaff.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await it.post("/bulkDeleteStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await it.post("/bulkRestoreStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){jo.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the staff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await it.post("/archivedStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await it.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.seachString)return void this.getAllStaff();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await it.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("0c56");const WG=ct()(YG,[["render",JG]]);var XG=WG;Object(l["pushScopeId"])("data-v-e34a6ae6");const ZG={class:"container-fluid py-4"},KG={class:"row"},GG={class:"col-12"},e1={class:"card my-4"},t1={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},a1=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Staff",-1),l1=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),c1={class:"card-body px-0 pb-2"},o1={class:"table-responsive p-0"},s1={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},n1={key:0,class:"mb-3 change-pass-alert"},r1=Object(l["createElementVNode"])("br",null,null,-1),i1={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},d1={class:"form-bg container p-4"},m1=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),b1={class:"card card-plain"},p1={class:"card-body"},u1={role:"form"},O1={class:"mb-1"},h1=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),j1={key:0,class:"text-danger error-txt"},g1={class:"mb-1"},f1=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),E1={key:0,class:"text-danger error-txt"},V1={class:"mb-1"},N1=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),x1={key:0,class:"text-danger error-txt"},y1={class:"mb-1"},v1=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),k1={key:0,class:"text-danger error-txt"},w1={class:"mb-1"},S1=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),A1={key:0,class:"text-danger error-txt"},B1={class:"mb-1"},C1=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),_1=Object(l["createElementVNode"])("br",null,null,-1),P1=["value"],I1={key:0,class:"text-danger error-txt"},D1={class:"mb-1"},T1=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance ",-1),M1={class:"mb-1"},z1=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),F1=Object(l["createElementVNode"])("br",null,null,-1),U1=["value"],L1={key:0,class:"text-danger error-txt"},$1={class:"mb-1"},q1=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),R1=Object(l["createElementVNode"])("br",null,null,-1),H1=["value"],Q1={key:0,class:"text-danger error-txt"},J1={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Y1={class:""};function W1(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ZG,[Object(l["createElementVNode"])("div",KG,[Object(l["createElementVNode"])("div",GG,[Object(l["createElementVNode"])("div",e1,[Object(l["createElementVNode"])("div",t1,[a1,Object(l["createVNode"])(n,{to:{name:"list-staff"}},{default:Object(l["withCtx"])(()=>[l1]),_:1})]),Object(l["createElementVNode"])("div",c1,[Object(l["createElementVNode"])("div",o1,[Object(l["createElementVNode"])("div",s1,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",n1,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),r1]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",i1,[Object(l["createElementVNode"])("div",d1,[m1,Object(l["createElementVNode"])("div",b1,[Object(l["createElementVNode"])("div",p1,[Object(l["createElementVNode"])("form",u1,[Object(l["createElementVNode"])("div",O1,[h1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStaff.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",j1,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",g1,[f1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStaff.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",E1,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",V1,[N1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStaff.staff_id]]),""!==o.formValidation&&""!==o.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",x1,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",y1,[v1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],o.newStaff.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",k1,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",w1,[S1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStaff.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",A1,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",B1,[C1,_1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,P1))),128))],512),[[l["vModelSelect"],o.newStaff.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",I1,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",D1,[T1,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[6]||(t[6]=e=>o.newStaff.balance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],o.newStaff.balance]])]),Object(l["createElementVNode"])("div",M1,[z1,F1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>o.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.name},Object(l["toDisplayString"])(e.name),9,U1))),128))],512),[[l["vModelSelect"],o.newStaff.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",L1,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$1,[q1,R1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,H1))),128))],512),[[l["vModelSelect"],o.newStaff.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Q1,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",J1,[Object(l["createElementVNode"])("div",Y1,[Object(l["createElementVNode"])("button",{onClick:t[9]||(t[9]=(...e)=>s.saveNewStaff&&s.saveNewStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Staff ")])])])])])])])])])}Object(l["popScopeId"])();var X1={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_staff")},computed:{formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",last_name:"",email:"",status:"",role:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_staff");let e=!1,t="";t=Us()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&void 0!==this.newStaff[a]||"balance"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await it.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStaff(){if(!this.validateForm())try{await it.post("/createStaff",this.newStaff),this.isError=!1,this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await it.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("8409");const Z1=ct()(X1,[["render",W1],["__scopeId","data-v-e34a6ae6"]]);var K1=Z1;Object(l["pushScopeId"])("data-v-73fb7173");const G1={class:"container-fluid py-4"},e0={class:"row"},t0={class:"col-12"},a0={class:"card my-4"},l0={class:"d-flex justify-content-between border-radius-lg pt-4"},c0=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Staff",-1),o0=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),s0={class:"card-body px-0 pb-2"},n0={class:"table-responsive p-0"},r0={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},i0={key:0,class:"mb-3 change-pass-alert"},d0=Object(l["createElementVNode"])("br",null,null,-1),m0={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},b0={class:"form-bg container p-4"},p0=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),u0={class:"card card-plain"},O0={class:"card-body"},h0={role:"form"},j0={class:"mb-1"},g0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),f0={key:0,class:"text-danger error-txt"},E0={class:"mb-1"},V0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),N0={key:0,class:"text-danger error-txt"},x0={class:"mb-1"},y0=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),v0={key:0,class:"text-danger error-txt"},k0={class:"mb-1"},w0=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),S0={key:0,class:"text-danger error-txt"},A0={class:"mb-1"},B0=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),C0={key:0,class:"text-danger error-txt"},_0={class:"mb-1"},P0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),I0=Object(l["createElementVNode"])("br",null,null,-1),D0=["value"],T0={key:0,class:"text-danger error-txt"},M0={class:"mb-1"},z0=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),F0={class:"mb-1"},U0=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),L0=Object(l["createElementVNode"])("br",null,null,-1),$0=["value"],q0={key:0,class:"text-danger error-txt"},R0={class:"mb-1"},H0=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),Q0=Object(l["createElementVNode"])("br",null,null,-1),J0=["value"],Y0={key:0,class:"text-danger error-txt"},W0={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},X0={class:"form-bg container p-4"},Z0=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),K0=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),G0={class:"card card-plain"},e2={class:"card-body"},t2={role:"form"},a2={class:"mb-1"},l2=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),c2={class:"mb-1"},o2=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),s2={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},n2={class:""};function r2(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",G1,[Object(l["createElementVNode"])("div",e0,[Object(l["createElementVNode"])("div",t0,[Object(l["createElementVNode"])("div",a0,[Object(l["createElementVNode"])("div",l0,[c0,Object(l["createVNode"])(n,{to:{name:"list-staff"}},{default:Object(l["withCtx"])(()=>[o0]),_:1})]),Object(l["createElementVNode"])("div",s0,[Object(l["createElementVNode"])("div",n0,[Object(l["createElementVNode"])("div",r0,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",i0,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),d0]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",m0,[Object(l["createElementVNode"])("div",b0,[p0,Object(l["createElementVNode"])("div",u0,[Object(l["createElementVNode"])("div",O0,[Object(l["createElementVNode"])("form",h0,[Object(l["createElementVNode"])("div",j0,[g0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newStaff.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",f0,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",E0,[V0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newStaff.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",N0,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",x0,[y0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>o.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],o.newStaff.staff_id]]),""!==o.formValidation&&""!==o.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",v0,"Staff ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",k0,[w0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>o.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],o.newStaff.mifare_id]]),""!==o.formValidation&&""!==o.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",S0,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",A0,[B0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newStaff.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",C0,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_0,[P0,I0,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>o.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,D0))),128))],512),[[l["vModelSelect"],o.newStaff.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",T0,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",M0,[z0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[6]||(t[6]=e=>o.newStaff.add_amount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],o.newStaff.add_amount]])]),Object(l["createElementVNode"])("div",F0,[U0,L0,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>o.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.name},Object(l["toDisplayString"])(e.name),9,$0))),128))],512),[[l["vModelSelect"],o.newStaff.role]]),""!==o.formValidation&&""!==o.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",q0,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",R0,[H0,Q0,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,J0))),128))],512),[[l["vModelSelect"],o.newStaff.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Y0,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",W0,[Object(l["createElementVNode"])("div",X0,[Z0,K0,Object(l["createElementVNode"])("div",G0,[Object(l["createElementVNode"])("div",e2,[Object(l["createElementVNode"])("form",t2,[Object(l["createElementVNode"])("div",a2,[l2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[9]||(t[9]=e=>o.newStaff.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newStaff.password]])]),Object(l["createElementVNode"])("div",c2,[o2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[10]||(t[10]=e=>o.newStaff.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newStaff.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",s2,[Object(l["createElementVNode"])("div",n2,[Object(l["createElementVNode"])("button",{onClick:t[11]||(t[11]=(...e)=>s.updateStaff&&s.updateStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Staff ")])])])])])])])])])}Object(l["popScopeId"])();var i2={name:"",components:{},mounted(){this.getUser(),this.editStaff(),this.getSchools(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_staff")},computed:{formattedAmount:{get(){return parseFloat(this.newStaff.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.add_amount=t}},formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",user:"",availableCountries:["UK","USA","Canada"],newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",add_amount:"",last_name:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:"",password:"",password_confirmation:"",role:""},validationErrors:"",isError:!1,formValidation:"",availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_staff");let e=!1,t="";t=Us()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&null!==this.newStaff[a]||"phone"===a||"country"===a||"city"===a||"address"===a||"zip"===a||"balance"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await it.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStaff(){let e=this.$route.params.id;try{const t=await it.get("/editStaff/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStaff.school_id=t.school_id,this.newStaff.staff_id=t.staff_id,this.newStaff.mifare_id=t.mifare_id,this.newStaff.first_name=t.user.first_name,this.newStaff.last_name=t.user.last_name,this.newStaff.email=t.user.email,this.newStaff.phone=t.user.phone,this.newStaff.country=t.user.country,this.newStaff.city=t.user.city,this.newStaff.zip=t.user.zip,this.newStaff.address=t.user.address,this.newStaff.status=t.user.status,this.newStaff.role=t.user.user_role.role.name)},async updateStaff(){if(this.validateForm())return;let e=this.$route.params.id;try{await it.put("/updateStaff/"+e,this.newStaff),this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await it.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("62cb");const d2=ct()(i2,[["render",r2],["__scopeId","data-v-73fb7173"]]);var m2=d2;const b2={class:"card"},p2={class:"card-body pt-4 p-3"},u2={class:"list-group"},O2={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},h2={class:"info-width d-flex flex-column"},j2={class:"row"},g2=Object(l["createStaticVNode"])('<div class="col-md-8 col-sm-8"><div><h6 class="mb-3 text-sm text-dark"> Muhammad Anees </h6><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Phone:</span><span class="text-dark ms-2 font-weight-bold"> +92347193809 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Email:</span><span class="text-dark ms-2 font-weight-bold"> anees@example.com </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Staff ID:</span><span class="text-dark ms-2 font-weight-bold"> satff349328 </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Site:</span><span class="text-dark ms-2 font-weight-bold"> XEPAY Site </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Country:</span><span class="text-dark ms-2 font-weight-bold"> United Kingdom (UK) </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">City:</span><span class="text-dark ms-2 font-weight-bold"> Birmingham </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Post Code/Zip Code:</span><span class="text-dark ms-2 font-weight-bold"> 3231223 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Address:</span><span class="text-dark ms-2 font-weight-bold"> 3673 Edington Drive </span></span></div></div>',1),f2={class:"col-md-4 col-sm-4"},E2=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," PERMISSIONS ",-1),V2=Object(l["createElementVNode"])("small",{class:"text-xs"},"Muhammad Anees has following permissions",-1),N2={class:"permissions mt-3"},x2={class:"switch-container mt-2 me-5"},y2=["onChange","checked","id"],v2=["for"],k2={class:"permission-name text-uppercase"};function w2(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",b2,[Object(l["createElementVNode"])("div",p2,[Object(l["createElementVNode"])("div",u2,[Object(l["createElementVNode"])("div",O2,[Object(l["createElementVNode"])("div",h2,[Object(l["createElementVNode"])("div",j2,[g2,Object(l["createElementVNode"])("div",f2,[E2,V2,Object(l["createElementVNode"])("div",N2,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},[Object(l["createElementVNode"])("div",x2,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>s.updatePermission(e.id),checked:s.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,y2),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,v2)]),Object(l["createElementVNode"])("span",k2,Object(l["toDisplayString"])(e.name),1)]))),128))])])])])])])])])}var S2={name:"billing-card",mounted(){this.getAllPermissions(),this.getUserPermissions()},data(){return{allPermissions:"",userPermissions:[]}},methods:{async getAllPermissions(){try{const e=await it.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await it.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.userPermissions.some(t=>t.permission_id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await it.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("fa86");const A2=ct()(S2,[["render",w2]]);var B2=A2;const C2={class:"container-fluid"},_2={class:"row"},P2={class:"col-12"},I2={class:"card"},D2={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},T2=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PARENTS",-1),M2=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),z2=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Parents section, you can manage parent or carer accounts by adding, editing, or deleting them. Additionally, you can link each parent to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("the students they are responsible for. This functionality helps keep parent information up to date. ")])],-1),F2={class:"card-body px-0 pb-2"},U2={class:"table-responsive p-0"},L2={class:"table align-items-center mb-0"},$2=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),q2={key:0},R2=Object(l["createElementVNode"])("td",{colspan:"5",class:"text-center"}," No data available. ",-1),H2=[R2],Q2={class:"text-xs  text-center font-weight-bold mb-0"},J2={class:"d-flex"},Y2={class:"text-xs font-weight-bold mb-0"},W2=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),X2={class:"text-xs font-weight-bold mb-0"},Z2={class:"align-middle text-center text-sm"},K2={class:"badge badge-sm bg-gradient-success"},G2={class:"align-middle text-center"},e4=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),t4=["onClick"],a4={class:"row"},l4={class:"col-md-12 col-lg-12"},c4={class:"pagination-container"},o4={class:"entries-dropdown"},s4=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),n4=["value"],r4={class:"pagination-wrapper"},i4={class:"pagination"},d4=["onClick"];function m4(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",C2,[Object(l["createElementVNode"])("div",_2,[Object(l["createElementVNode"])("div",P2,[Object(l["createElementVNode"])("div",I2,[Object(l["createElementVNode"])("div",D2,[T2,s.userPermissions.create?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-parent"}},{default:Object(l["withCtx"])(()=>[M2]),_:1})):Object(l["createCommentVNode"])("",!0)]),z2,Object(l["createElementVNode"])("div",F2,[Object(l["createElementVNode"])("div",U2,[Object(l["createElementVNode"])("table",L2,[$2,Object(l["createElementVNode"])("tbody",null,[0===o.allParent.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",q2,H2)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allParent,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",Q2,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"add-childrens",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",J2,[Object(l["createElementVNode"])("p",Y2,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),W2])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",X2,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",Z2,[Object(l["createElementVNode"])("span",K2,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",G2,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-parent",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[e4]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,t4)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])]),Object(l["createElementVNode"])("div",a4,[Object(l["createElementVNode"])("div",l4,[Object(l["createElementVNode"])("div",c4,[Object(l["createElementVNode"])("div",o4,[s4,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.itemsPerPage=e),onChange:t[1]||(t[1]=t=>e.getAllStudents(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,n4))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",r4,[Object(l["createElementVNode"])("ul",i4,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[2]||(t[2]=t=>e.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=t=>e.getAllStudents(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,class:Object(l["normalizeClass"])({active:o.currentPage===t})},[Object(l["createElementVNode"])("a",{onClick:a=>e.getAllStudents(t),href:"#"},Object(l["toDisplayString"])(t),9,d4)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[4]||(t[4]=t=>e.getAllStudents(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[5]||(t[5]=t=>e.getAllStudents(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var b4={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllParents(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,allParent:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteParent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllParents(e){let t={page:e,entries_per_page:this.itemsPerPage};try{let e="/getAllParents";"organization_admin"==this.user.role&&(e="/getAllParents/"+this.user.id);const a=await it.post(e,t);this.allParent=a.data.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(a){console.log(a)}},async deleteParent(e){try{await it.delete("/deleteParent/"+e),this.removeParentFromList(e),this.snackbarMsg("Parent Deleted")}catch(t){console.log(t)}},removeParentFromList(e){const t=this.allParent.findIndex(t=>t.id===e);this.allParent.splice(t,1)}}};a("a4cd");const p4=ct()(b4,[["render",m4]]);var u4=p4;Object(l["pushScopeId"])("data-v-8f0e2a1c");const O4={class:"container-fluid py-4"},h4={class:"row"},j4={class:"col-12"},g4={class:"card my-4"},f4={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},E4=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Parent",-1),V4=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),N4={class:"card-body px-0 pb-2"},x4={class:"table-responsive p-0"},y4={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},v4={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},k4={class:"form-bg container p-4"},w4=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),S4={class:"card card-plain"},A4={class:"card-body"},B4={role:"form"},C4={class:"mb-1"},_4=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),P4={class:"mb-1"},I4=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),D4={class:"mb-1"},T4=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),M4={class:"mb-1"},z4=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),F4=Object(l["createElementVNode"])("br",null,null,-1),U4=["value"],L4={key:0,class:"text-danger error-txt"},$4={class:"mb-1"},q4=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),R4=Object(l["createElementVNode"])("br",null,null,-1),H4=["value"],Q4={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},J4={class:"form-bg container p-4"},Y4=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password Information",-1),W4={class:"card card-plain"},X4={class:"card-body"},Z4={role:"form"},K4={class:"mb-1"},G4=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),e5={class:"mb-1"},t5=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),a5={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},l5={class:""};function c5(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",O4,[Object(l["createElementVNode"])("div",h4,[Object(l["createElementVNode"])("div",j4,[Object(l["createElementVNode"])("div",g4,[Object(l["createElementVNode"])("div",f4,[E4,Object(l["createVNode"])(n,{to:{name:"list-parent"}},{default:Object(l["withCtx"])(()=>[V4]),_:1})]),Object(l["createElementVNode"])("div",N4,[Object(l["createElementVNode"])("div",x4,[Object(l["createElementVNode"])("div",y4,[Object(l["createElementVNode"])("div",v4,[Object(l["createElementVNode"])("div",k4,[w4,Object(l["createElementVNode"])("div",S4,[Object(l["createElementVNode"])("div",A4,[Object(l["createElementVNode"])("form",B4,[Object(l["createElementVNode"])("div",C4,[_4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newParent.first_name]])]),Object(l["createElementVNode"])("div",P4,[I4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newParent.last_name]])]),Object(l["createElementVNode"])("div",D4,[T4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newParent.email]])]),Object(l["createElementVNode"])("div",M4,[z4,F4,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>o.newParent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,U4))),128))],512),[[l["vModelSelect"],o.newParent.school_id]]),""!==o.formValidation&&""!==o.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",L4,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$4,[q4,R4,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,H4))),128))],512),[[l["vModelSelect"],o.newParent.status]])])])])])])]),Object(l["createElementVNode"])("div",Q4,[Object(l["createElementVNode"])("div",J4,[Y4,Object(l["createElementVNode"])("div",W4,[Object(l["createElementVNode"])("div",X4,[Object(l["createElementVNode"])("form",Z4,[Object(l["createElementVNode"])("div",K4,[G4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>o.newParent.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],o.newParent.password]])]),Object(l["createElementVNode"])("div",e5,[t5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>o.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],o.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",a5,[Object(l["createElementVNode"])("div",l5,[Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>s.saveNewParent&&s.saveNewParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Parent ")])])])])])])])])])}Object(l["popScopeId"])();var o5={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.userPermissions.create||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newParent:{student_id:"",first_name:"",last_name:"",email:"",school_id:"",password:"",password_confirmation:"",status:""},availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Us()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"phone"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewParent(){try{let e=await it.post("/createParent",this.newParent);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newStudent.first_name+" "+this.newStudent.last_name,a={user_id:e,name:t,email:this.newStudent.email};try{await it.post("/createCustomer",a)}catch(l){console.log(l)}},async getStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await it.post("/getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async getSchools(){try{let e="/getAllSchools";e="organization_admin"==this.user.role?"/getAllSchools/"+this.user.id:"/getAllSchools";const t=await it.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("66b5");const s5=ct()(o5,[["render",c5],["__scopeId","data-v-8f0e2a1c"]]);var n5=s5;Object(l["pushScopeId"])("data-v-2ea812ce");const r5={class:"container-fluid py-4"},i5={class:"row"},d5={class:"col-12"},m5={class:"card my-4"},b5=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Parent")],-1),p5={class:"card-body px-0 pb-2"},u5={class:"table-responsive p-0"},O5={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},h5={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},j5={class:"form-bg container p-4"},g5=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),f5={class:"card card-plain"},E5={class:"card-body"},V5={role:"form"},N5={class:"mb-1"},x5=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),y5={key:0,class:"text-danger error-txt"},v5={class:"mb-1"},k5=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),w5={key:0,class:"text-danger error-txt"},S5={class:"mb-1"},A5=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),B5={key:0,class:"text-danger error-txt"},C5={class:"mb-1"},_5=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),P5=Object(l["createElementVNode"])("br",null,null,-1),I5=["value"],D5={key:0,class:"text-danger error-txt"},T5={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},M5={class:"form-bg container p-4"},z5=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),F5=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),U5={class:"card card-plain"},L5={class:"card-body"},$5={role:"form"},q5={class:"mb-1"},R5=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),H5={class:"mb-1"},Q5=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),J5={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Y5={class:""};function W5(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",r5,[Object(l["createElementVNode"])("div",i5,[Object(l["createElementVNode"])("div",d5,[Object(l["createElementVNode"])("div",m5,[b5,Object(l["createElementVNode"])("div",p5,[Object(l["createElementVNode"])("div",u5,[Object(l["createElementVNode"])("div",O5,[Object(l["createElementVNode"])("div",h5,[Object(l["createElementVNode"])("div",j5,[g5,Object(l["createElementVNode"])("div",f5,[Object(l["createElementVNode"])("div",E5,[Object(l["createElementVNode"])("form",V5,[Object(l["createElementVNode"])("div",N5,[x5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],o.newParent.first_name]]),""!==o.formValidation&&""!==o.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",y5,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",v5,[k5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>o.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],o.newParent.last_name]]),""!==o.formValidation&&""!==o.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",w5,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",S5,[A5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>o.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],o.newParent.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",B5,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",C5,[_5,P5,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,I5))),128))],512),[[l["vModelSelect"],o.newParent.status]]),""!==o.formValidation&&""!==o.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",D5,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",T5,[Object(l["createElementVNode"])("div",M5,[z5,F5,Object(l["createElementVNode"])("div",U5,[Object(l["createElementVNode"])("div",L5,[Object(l["createElementVNode"])("form",$5,[Object(l["createElementVNode"])("div",q5,[R5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>o.newParent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],o.newParent.password]])]),Object(l["createElementVNode"])("div",H5,[Q5,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>o.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],o.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",J5,[Object(l["createElementVNode"])("div",Y5,[Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=(...e)=>s.updateParent&&s.updateParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var X5={name:"",components:{},mounted(){this.getUser(),this.editParent(),this.getStudents(),this.$globalHelper.buttonColor()},updated(){this.userPermissions.edit||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newParent:{first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:""},validationErrors:"",formValidation:"",availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Us()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editParent(){let e=this.$route.params.id;try{const t=await it.get("/editParent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newParent.student_id=t.student_id,this.newParent.first_name=t.first_name,this.newParent.last_name=t.last_name,this.newParent.email=t.email,this.newParent.status=t.status)},async updateParent(){let e=this.$route.params.id;try{await it.put("/updateParent/"+e,this.newParent),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Updated Successfuly")}catch(t){console.log(t)}},async getStudents(){try{let e="/getAllStudents";"organization_admin"==this.user.role&&(e="/getAllStudents/"+this.user.id);const t=await it.get(e);this.allStudents=t.data}catch(e){console.log(e)}}}};a("52e2");const Z5=ct()(X5,[["render",W5],["__scopeId","data-v-2ea812ce"]]);var K5=Z5;const G5={class:"card"},e3={class:"card-body pt-4 p-3"},t3={class:"list-group"},a3={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},l3={class:"info-width d-flex flex-column"},c3={class:"row"},o3={class:"col-md-8 col-sm-8"},s3={class:"row"},n3={class:"col-md-9 col-sm-9"},r3={role:"form"},i3={class:"mb-1"},d3=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Student Email",-1),m3={class:"col-md-3 col-sm-3"},b3=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Childrens ",-1),p3=["onClick"],u3={class:"text-sm fw-5"},O3=Object(l["createElementVNode"])("br",null,null,-1),h3={class:"text-sm"},j3={class:"text-dark ms-2 font-weight-bold"},g3=["onClick"];function f3(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",G5,[Object(l["createElementVNode"])("div",e3,[Object(l["createElementVNode"])("div",t3,[Object(l["createElementVNode"])("div",a3,[Object(l["createElementVNode"])("div",l3,[Object(l["createElementVNode"])("div",c3,[Object(l["createElementVNode"])("div",o3,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",s3,[Object(l["createElementVNode"])("div",n3,[Object(l["createElementVNode"])("form",r3,[Object(l["createElementVNode"])("div",i3,[d3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.studentEmail=e),class:"input-box",id:"name",type:"text",placeholder:"Enter Student Email",name:"student_email"},null,512),[[l["vModelText"],o.studentEmail]])])])]),Object(l["createElementVNode"])("div",m3,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.addChildren&&s.addChildren(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Student ")])]),b3,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:Object(l["normalizeClass"])([{"selected-role":o.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>s.toggleSelection(e.id,t)},[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",u3,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1),O3,Object(l["createElementVNode"])("p",h3,Object(l["toDisplayString"])(e.student.email),1)]),Object(l["createElementVNode"])("span",j3,[Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,g3)])],10,p3))),128))])])])])])])])])}var E3={name:"billing-card",mounted(){this.getChildrens(),this.$globalHelper.buttonColor()},updated(){},data(){return{childrens:"",permissionsOfRole:"",isSelected:"",isEdit:null,studentEmail:"",roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteChildren(e)})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async addChildren(){let e=this.$route.params.id,t={student_email:this.studentEmail,parent_id:e};try{await it.post("/addStudentToParent",t),this.getChildrens(),this.snackbarMsg("Children Added Successfully")}catch(a){console.log(a)}},async getChildrens(){let e=this.$route.params.id;try{const t=await it.get("getChildrensOfParent/"+e);this.childrens=t.data}catch(t){console.log(t)}},async deleteChildren(e){try{await it.get("deleteChildren/"+e),this.getChildrens(),this.snackbarMsg("Children Removed Successfully")}catch(t){console.log(t)}}}};a("2b98");const V3=ct()(E3,[["render",f3]]);var N3=V3;const x3={class:"container-fluid py-4"},y3={class:"row"},v3={class:"col-12"},k3={class:"card my-4"},w3=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Childrens")],-1),S3={class:"card-body px-0 pb-2"},A3={class:"table-responsive p-0"},B3={class:"table align-items-center mb-0"},C3=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Transactions "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Ballance "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Status ")])],-1),_3={class:"align-middle text-center text-sm"},P3={class:"text-xs font-weight-bold mb-0"},I3={class:"text-xs font-weight-bold mb-0"},D3={class:"text-xs font-weight-bold mb-0"},T3={class:"align-middle text-center"},M3={class:"text-secondary text-xs font-weight-bold"},z3={class:"align-middle text-center"},F3={class:"text-secondary text-xs font-weight-bold"},U3={class:"align-middle text-center"},L3=["onClick"],$3={class:"align-middle text-center"},q3=Object(l["createElementVNode"])("i",{class:"fas fa-donate me-2"},null,-1),R3={class:"align-middle text-center text-sm"},H3={class:"badge badge-sm bg-gradient-success"};function Q3(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",x3,[Object(l["createElementVNode"])("div",y3,[Object(l["createElementVNode"])("div",v3,[Object(l["createElementVNode"])("div",k3,[w3,Object(l["createElementVNode"])("div",S3,[Object(l["createElementVNode"])("div",A3,[Object(l["createElementVNode"])("table",B3,[C3,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",_3,[Object(l["createElementVNode"])("p",P3,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",I3,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",D3,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",T3,[Object(l["createElementVNode"])("span",M3,Object(l["toDisplayString"])(e.school.title),1)]),Object(l["createElementVNode"])("td",z3,[Object(l["createElementVNode"])("span",F3,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",U3,[Object(l["createElementVNode"])("i",{onClick:t=>s.transactionHistoryNav(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"swap_horizontal_circle",8,L3)]),Object(l["createElementVNode"])("td",$3,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"student-balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[q3]),_:2},1032,["to"])])]),Object(l["createElementVNode"])("td",R3,[Object(l["createElementVNode"])("span",H3,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])])])])])])])])}var J3={name:"tables",mounted(){this.getUser(),this.getAllStudents()},data(){return{allStudents:"",schools:6,user:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await it.post("getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async deleteStudent(e){try{await it.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("2409");const Y3=ct()(J3,[["render",Q3]]);var W3=Y3;const X3={class:"container-fluid py-4"},Z3={class:"row"},K3={class:"col-12"},G3={class:"card my-4"},e8={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},t8=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Attributes",-1),a8=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Attribute ",-1),l8={class:"card-body px-0 pb-2"},c8={class:"table-responsive p-0"},o8={class:"table align-items-center mb-0"},s8=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase  text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),n8={class:"text-xs  text-center font-weight-bold mb-0"},r8={class:"text-xs font-weight-bold mb-0"},i8={class:"align-middle text-center"},d8=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),m8=["onClick"];function b8(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",X3,[Object(l["createElementVNode"])("div",Z3,[Object(l["createElementVNode"])("div",K3,[Object(l["createElementVNode"])("div",G3,[Object(l["createElementVNode"])("div",e8,[t8,s.userPermissions.create_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-attribute"}},{default:Object(l["withCtx"])(()=>[a8]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",l8,[Object(l["createElementVNode"])("div",c8,[Object(l["createElementVNode"])("table",o8,[s8,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allAttributes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",n8,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",r8,Object(l["toDisplayString"])(e.name),1)]),Object(l["createElementVNode"])("td",i8,[Object(l["createElementVNode"])("span",null,[s.userPermissions.edit_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-attribute",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[d8]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),s.userPermissions.delete_attribute?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>s.deleteAttribute(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,m8)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var p8={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("view_attribute")},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{allAttributes:"",schools:6,user:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllAttributes(){try{const e=await it.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},async deleteAttribute(e){try{await it.delete("/deleteAttribute/"+e),this.removeAttributeFromList(e),this.snackbarMsg("Attribute Deleted Successfully")}catch(t){console.log(t)}},removeAttributeFromList(e){const t=this.allAttributes.findIndex(t=>t.id===e);this.allAttributes.splice(t,1)}}};a("e33f");const u8=ct()(p8,[["render",b8]]);var O8=u8;Object(l["pushScopeId"])("data-v-bfa38f8e");const h8={class:"container-fluid py-4"},j8={class:"row"},g8={class:"col-12"},f8={class:"card my-4"},E8={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},V8=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Attribute",-1),N8=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),x8={class:"card-body px-0 pb-2"},y8={class:"table-responsive p-0"},v8={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},k8={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},w8={class:"form-bg container p-4"},S8={class:"card card-plain"},A8={class:"card-body"},B8={role:"form"},C8={class:"mb-1"},_8=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),P8={key:0,class:"text-danger error-txt"},I8={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},D8={class:""};function T8(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h8,[Object(l["createElementVNode"])("div",j8,[Object(l["createElementVNode"])("div",g8,[Object(l["createElementVNode"])("div",f8,[Object(l["createElementVNode"])("div",E8,[V8,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[N8]),_:1})]),Object(l["createElementVNode"])("div",x8,[Object(l["createElementVNode"])("div",y8,[Object(l["createElementVNode"])("div",v8,[Object(l["createElementVNode"])("div",k8,[Object(l["createElementVNode"])("div",w8,[Object(l["createElementVNode"])("div",S8,[Object(l["createElementVNode"])("div",A8,[Object(l["createElementVNode"])("form",B8,[Object(l["createElementVNode"])("div",C8,[_8,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newAttribute.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",P8,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",I8,[Object(l["createElementVNode"])("div",D8,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.saveNewAttribute&&s.saveNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var M8={name:"",components:{},mounted(){this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("create_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_attribute");let e=!1,t="";t=Us()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewAttribute(){if(!this.validateForm()){this.newAttribute.user_role=this.user.role;try{await it.post("/createAttribute",this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}},async getAllOrganizations(){try{const e=await it.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("94d7");const z8=ct()(M8,[["render",T8],["__scopeId","data-v-bfa38f8e"]]);var F8=z8;Object(l["pushScopeId"])("data-v-5310274d");const U8={class:"container-fluid py-4"},L8={class:"row"},$8={class:"col-12"},q8={class:"card my-4"},R8={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},H8=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Attribute",-1),Q8=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),J8={class:"card-body px-0 pb-2"},Y8={class:"table-responsive p-0"},W8={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},X8={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Z8={class:"form-bg container p-4"},K8={class:"card card-plain"},G8={class:"card-body"},e6={role:"form"},t6={class:"mb-1"},a6=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),l6={key:0,class:"text-danger error-txt"},c6={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},o6={class:""};function s6(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",U8,[Object(l["createElementVNode"])("div",L8,[Object(l["createElementVNode"])("div",$8,[Object(l["createElementVNode"])("div",q8,[Object(l["createElementVNode"])("div",R8,[H8,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[Q8]),_:1})]),Object(l["createElementVNode"])("div",J8,[Object(l["createElementVNode"])("div",Y8,[Object(l["createElementVNode"])("div",W8,[Object(l["createElementVNode"])("div",X8,[Object(l["createElementVNode"])("div",Z8,[Object(l["createElementVNode"])("div",K8,[Object(l["createElementVNode"])("div",G8,[Object(l["createElementVNode"])("form",e6,[Object(l["createElementVNode"])("div",t6,[a6,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],o.newAttribute.name]]),""!==o.formValidation&&""!==o.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",l6,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",c6,[Object(l["createElementVNode"])("div",o6,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.updateNewAttribute&&s.updateNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var n6={name:"",components:{},mounted(){this.editAttribute(),this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("edit_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_attribute");let e=!1,t="";t=Us()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async updateNewAttribute(){if(this.validateForm())return;this.newAttribute.user_role=this.user.role;let e=this.$route.params.id;try{await it.put("/updateAttribute/"+e,this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors}},async editAttribute(){let e=this.$route.params.id;try{const t=await it.get("/editAttribute/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAttribute.organization_id=t.organization_id,this.newAttribute.name=t.name)},async getAllOrganizations(){try{const e=await it.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("8a36");const r6=ct()(n6,[["render",s6],["__scopeId","data-v-5310274d"]]);var i6=r6;const d6={class:"card"},m6={class:"card-body pt-4 p-3"},b6={class:"list-group"},p6={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},u6={class:"info-width d-flex flex-column"},O6={class:"row"},h6={class:"col-md-8 col-sm-8"},j6={class:"row"},g6={class:"col-md-10 col-sm-10"},f6=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"MANAGE ROLES & PERMISSIONS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"}," In the Roles and Permissions section, you can manage user roles and can assign specific permissions to each role. This functionality ensures that users have the appropriate access levels based on their role, improving security and operational efficiency. ")],-1),E6={role:"form"},V6={class:"mb-1"},N6=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Role Name",-1),x6={class:"col-md-2 col-sm-2"},y6=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Roles List ",-1),v6=["onClick"],k6={class:"text-sm fw-5"},w6={key:0,class:"text-dark ms-2 font-weight-bold"},S6=["onClick"],A6=["onClick"],B6={class:"col-md-4 col-sm-4"},C6=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," ROLE PERMISSIONS ",-1),_6=Object(l["createElementVNode"])("small",{class:"text-xs"},"This Role has following permissions",-1),P6={class:"permissions-container mt-3"},I6={key:0,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},D6={class:"switch-container mt-2 me-5"},T6=["onChange","checked","id"],M6=["for"],z6={class:"permissions text-uppercase"};function F6(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",d6,[Object(l["createElementVNode"])("div",m6,[Object(l["createElementVNode"])("div",b6,[Object(l["createElementVNode"])("div",p6,[Object(l["createElementVNode"])("div",u6,[Object(l["createElementVNode"])("div",O6,[Object(l["createElementVNode"])("div",h6,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",j6,[Object(l["createElementVNode"])("div",g6,[f6,Object(l["createElementVNode"])("form",E6,[Object(l["createElementVNode"])("div",V6,[N6,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.roleName=e),class:"input-box",id:"name",type:"text",placeholder:"Role Name",name:"name"},null,512),[[l["vModelText"],o.roleName]])])])]),Object(l["createElementVNode"])("div",x6,[null!=o.isEdit&&""!=o.roleName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=(...e)=>s.updateRole&&s.updateRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Update ")):Object(l["createCommentVNode"])("",!0),""==o.roleName||null==o.isEdit?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[2]||(t[2]=(...e)=>s.createRole&&s.createRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Role ")):Object(l["createCommentVNode"])("",!0)])]),y6,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:Object(l["normalizeClass"])([{"selected-role":o.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>(s.toggleSelection(e.id,t),s.getPermissionsOfRole(e.id))},[Object(l["createElementVNode"])("span",k6,Object(l["toDisplayString"])(e.name),1),"super_admin"==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",w6,[Object(l["createElementVNode"])("i",{onClick:t=>s.editRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,S6),Object(l["createElementVNode"])("i",{onClick:t=>s.deleteRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,A6)])):Object(l["createCommentVNode"])("",!0)],10,v6)):Object(l["createCommentVNode"])("",!0)],64))),128))])]),Object(l["createElementVNode"])("div",B6,[C6,_6,Object(l["createElementVNode"])("div",P6,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[s.checkIfAdmin(e)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",I6,[Object(l["createElementVNode"])("div",D6,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>s.givePermission(e.name),checked:s.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,T6),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,M6)]),Object(l["createElementVNode"])("span",z6,Object(l["toDisplayString"])(e.name),1)])):Object(l["createCommentVNode"])("",!0)],64))),128))])])])])])])])])}var U6={name:"billing-card",mounted(){this.getAllRoles(),this.getAllPermissions(),this.getUserPermissions(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("roles")},data(){return{permissionsOfRole:"",isSelected:"",isEdit:null,roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},watch:{allRoles(e,t){console.log(e,t),this.isSelected=e[0]?e[0].id:"",this.getPermissionsOfRole()}},computed:{checkPermissionsOfRole(){return this.permissionsOfRole}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},checkIfAdmin(e){let t=!1,a=["create_admin","view_admin","edit_admin","delete_admin","roles"],l=[];return this.allRoles.filter(c=>{c.id==this.isSelected&&(t="Admin"==c.name||("Associate Admin"==c.name?!a.includes(e.name):!a.includes(e.name)&&!l.includes(e.name)))}),t},async getAllRoles(){try{const e=await it.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async createRole(){let e={name:this.roleName};try{await it.post("createRole",e),this.snackbarMsg("Role Created"),this.getAllRoles()}catch(t){console.log(t)}},async editRole(e){this.allRoles.filter(t=>{t.id==e&&(this.roleName=t.name,this.isEdit=e)})},async updateRole(){let e={name:this.roleName};try{await it.put("updateRole/"+this.isEdit,e),this.snackbarMsg("Role Updated"),this.getAllRoles(),this.isEdit=null,this.roleName=""}catch(t){console.log(t)}},async deleteRole(e){try{await it.delete("deleteRole/"+e),this.getAllRoles(),this.snackbarMsg("Role Deleted")}catch(t){console.log(t)}},async getAllPermissions(){try{const e=await it.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getPermissionsOfRole(e=null){null==e&&(e=this.isSelected);try{const t=await it.get("getPermissionsOfaRole/"+e);this.permissionsOfRole=t.data;let a=Us()(this.allPermissions);this.allPermissions=null,this.allPermissions=a}catch(t){console.log(t)}},async givePermission(e){let t={permission:e};try{await it.post("givePermission/"+this.isSelected,t)}catch(a){console.log(a)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await it.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.checkPermissionsOfRole.some(t=>t.id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await it.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("4e40");const L6=ct()(U6,[["render",F6]]);var $6=L6;const q6={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function R6(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-view");return Object(l["openBlock"])(),Object(l["createElementBlock"])("main",q6,[Object(l["createVNode"])(n)])}var H6={name:"DefaultLayout",components:{},methods:{...Object(tt["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object(tt["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};a("566d");const Q6=ct()(H6,[["render",R6]]);var J6=Q6;const Y6={class:"container-fluid"},W6={class:"row"},X6={class:"col-12"},Z6={class:"card"},K6={class:"d-flex justify-content-between  border-radius-lg pt-4"},G6=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PRODUCT TYPES",-1),e7=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),t7=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Product Types section, you can manage product type information by adding, editing, or deleting types. Additionally, you can view and update the list of types available"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" for product creation. This functionality facilitates organizing and categorizing products by type, streamlining product management. ")])],-1),a7={class:"filter-container ms-2"},l7={class:"row",style:{width:"100%"}},c7={class:"col-4"},o7={style:{display:"flex"}},s7=["value"],n7={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},r7=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),i7=Object(l["createTextVNode"])(" Export To XLS "),d7=[r7,i7],m7={class:"card-body px-0 pb-2"},b7={class:"table-responsive p-0 student-table"},p7={ref:"table",class:"table align-items-center mb-0"},u7=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," NAME "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Action ")])],-1),O7={key:0},h7=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),j7=[h7],g7={style:{width:"12%"}},f7={class:"text-xs  text-center font-weight-bold mb-0"},E7={class:"d-flex"},V7={class:"text-xs font-weight-bold mb-0"},N7={style:{width:"10%"},class:"align-middle text-center"},x7=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),y7=["onClick"],v7={class:"row"},k7={class:"col-md-12 col-lg-12"},w7={class:"pagination-container"},S7={class:"entries-dropdown"},A7=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),B7=["value"],C7={class:"pagination-wrapper"},_7={class:"pagination"},P7=["onClick"];function I7(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Y6,[Object(l["createElementVNode"])("div",W6,[Object(l["createElementVNode"])("div",X6,[Object(l["createElementVNode"])("div",Z6,[Object(l["createElementVNode"])("div",K6,[G6,Object(l["createVNode"])(n,{to:{name:"add-product-types"}},{default:Object(l["withCtx"])(()=>[e7]),_:1})]),t7,Object(l["createElementVNode"])("div",a7,[Object(l["createElementVNode"])("div",l7,[Object(l["createElementVNode"])("div",c7,[Object(l["createElementVNode"])("span",o7,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...e)=>s.filterProductTypes&&s.filterProductTypes(...e)),"onUpdate:modelValue":t[1]||(t[1]=e=>o.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],o.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...e)=>s.filterProductTypes&&s.filterProductTypes(...e)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>o.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,s7))),128))],544),[[l["vModelSelect"],o.filterBy]])])]),Object(l["createElementVNode"])("div",n7,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>s.exportTableToXLS())},d7)])])]),Object(l["createElementVNode"])("div",m7,[Object(l["createElementVNode"])("div",b7,[Object(l["createElementVNode"])("table",p7,[u7,Object(l["createElementVNode"])("tbody",null,[0===o.allTypes.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",O7,j7)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.allTypes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",g7,[Object(l["createElementVNode"])("p",f7,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",E7,[Object(l["createElementVNode"])("p",V7,Object(l["toDisplayString"])(e.name),1)])]),Object(l["createElementVNode"])("td",N7,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-product-types",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[x7]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>s.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,y7)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",v7,[Object(l["createElementVNode"])("div",k7,[Object(l["createElementVNode"])("div",w7,[Object(l["createElementVNode"])("div",S7,[A7,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.itemsPerPage=e),onChange:t[6]||(t[6]=e=>s.getProductTypes(o.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,B7))),128))],544),[[l["vModelSelect"],o.itemsPerPage]])]),Object(l["createElementVNode"])("nav",C7,[Object(l["createElementVNode"])("ul",_7,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>s.getProductTypes(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===o.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>s.getProductTypes(o.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:o.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>s.getProductTypes(e),href:"#"},Object(l["toDisplayString"])(e),9,P7)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>s.getProductTypes(o.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:o.currentPage===o.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>s.getProductTypes(o.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var D7={name:"tables",mounted(){this.setColor(),this.getUser(),this.getProductTypes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_course"),this.$globalHelper.buttonColor()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",filterBy:"Name",allFields:["Name"],allTypes:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(tt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){jo.a.fire({title:"Are you sure?",text:"Item will be archived and you won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteProductType(e)})},exportTableToXLS(){const e=this.$refs.table,t=MO["a"].table_to_sheet(e),a=MO["a"].book_new();MO["a"].book_append_sheet(a,t,"Sheet1"),MO["b"](a,"produt_types.xlsx")},async filterProductTypes(){if(""==this.filterBy&&""==this.seachString)return void this.getProductTypes();if(""!=this.filterBy&&""==this.seachString)return void this.getProductTypes();let e={type:this.filterBy,value:this.seachString};try{const t=await it.post("/filterProductTypes",e);this.allTypes=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getProductTypes(e=null){try{let t={page:"",entries_per_page:this.itemsPerPage};t.page=e;let a="/getProductTypes";const l=await it.post(a,t);this.allTypes=l.data.data.data,this.totalRows=l.data.pagination.total,this.currentPage=l.data.pagination.current_page,this.perPage=l.data.pagination.per_page,this.totalPages=l.data.pagination.last_page}catch(t){console.log(t)}},async deleteProductType(e){try{await it.delete("/deleteProductType/"+e),this.removeTypeFromList(e),this.snackbarMsg("Product Type Successfully Deleted")}catch(t){console.log(t)}},removeTypeFromList(e){const t=this.allTypes.findIndex(t=>t.id===e);this.allTypes.splice(t,1)},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)}}};a("599f");const T7=ct()(D7,[["render",I7]]);var M7=T7;Object(l["pushScopeId"])("data-v-c0392f5e");const z7={class:"container-fluid py-4"},F7={class:"row"},U7={class:"col-12"},L7={class:"card my-4"},$7={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},q7=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Product Type",-1),R7=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),H7={class:"card-body px-0 pb-2"},Q7={key:0,class:"mb-3 change-pass-alert"},J7=Object(l["createElementVNode"])("br",null,null,-1),Y7={class:"table-responsive p-0"},W7={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},X7={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Z7={class:"form-bg container p-4"},K7={class:"card card-plain"},G7={class:"card-body"},e9={role:"form"},t9={class:"mb-1"},a9=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Name",-1),l9={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},c9={class:""};function o9(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",z7,[Object(l["createElementVNode"])("div",F7,[Object(l["createElementVNode"])("div",U7,[Object(l["createElementVNode"])("div",L7,[Object(l["createElementVNode"])("div",$7,[q7,Object(l["createVNode"])(n,{to:{name:"product-types"}},{default:Object(l["withCtx"])(()=>[R7]),_:1})]),Object(l["createElementVNode"])("div",H7,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Q7,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),J7]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Y7,[Object(l["createElementVNode"])("div",W7,[Object(l["createElementVNode"])("div",X7,[Object(l["createElementVNode"])("div",Z7,[Object(l["createElementVNode"])("div",K7,[Object(l["createElementVNode"])("div",G7,[Object(l["createElementVNode"])("form",e9,[Object(l["createElementVNode"])("div",t9,[a9,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.newProductType.name=e),class:"input-box",id:"name",type:"text",required:"",placeholder:"Name",name:"CourseDescription"},null,512),[[l["vModelText"],o.newProductType.name]])])])])])])]),Object(l["createElementVNode"])("div",l9,[Object(l["createElementVNode"])("div",c9,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.saveNewProductType&&s.saveNewProductType(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Product Type ")])])])])])])])])])}Object(l["popScopeId"])();var s9={name:"",components:{},mounted(){this.getUser(),this.$globalHelper.buttonColor()},updated(){},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",isError:!1,formValidation:"",validationErrors:"",newProductType:{name:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Us()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewProductType(){this.isError=!1;try{await it.post("/createProductType",this.newProductType),this.$router.push({name:"product-types"}),this.snackbarMsg("Product Type Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("71e7");const n9=ct()(s9,[["render",o9],["__scopeId","data-v-c0392f5e"]]);var r9=n9;Object(l["pushScopeId"])("data-v-028eb140");const i9={class:"container-fluid py-4"},d9={class:"row"},m9={class:"col-12"},b9={class:"card my-4"},p9={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},u9=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Product Type",-1),O9=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),h9={class:"card-body px-0 pb-2"},j9={key:0,class:"mb-3 change-pass-alert"},g9=Object(l["createElementVNode"])("br",null,null,-1),f9={class:"table-responsive p-0"},E9={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},V9={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},N9={class:"form-bg container p-4"},x9={class:"card card-plain"},y9={class:"card-body"},v9={role:"form"},k9={class:"mb-1"},w9=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),S9={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},A9={class:""};function B9(e,t,a,c,o,s){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",i9,[Object(l["createElementVNode"])("div",d9,[Object(l["createElementVNode"])("div",m9,[Object(l["createElementVNode"])("div",b9,[Object(l["createElementVNode"])("div",p9,[u9,Object(l["createVNode"])(n,{to:{name:"product-types"}},{default:Object(l["withCtx"])(()=>[O9]),_:1})]),Object(l["createElementVNode"])("div",h9,[o.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",j9,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),g9]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",f9,[Object(l["createElementVNode"])("div",E9,[Object(l["createElementVNode"])("div",V9,[Object(l["createElementVNode"])("div",N9,[Object(l["createElementVNode"])("div",x9,[Object(l["createElementVNode"])("div",y9,[Object(l["createElementVNode"])("form",v9,[Object(l["createElementVNode"])("div",k9,[w9,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>o.newProductType.name=e),type:"text",placeholder:"Name",name:"CourseCode"},null,512),[[l["vModelText"],o.newProductType.name]])])])])])])]),Object(l["createElementVNode"])("div",S9,[Object(l["createElementVNode"])("div",A9,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>s.updateProductType&&s.updateProductType(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Product Type ")])])])])])])])])])}Object(l["popScopeId"])();var C9={name:"",components:{},mounted(){this.getUser(),this.editProductType(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newProductType:{name:""},isError:!1,validationErrors:"",formValidation:"",availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Us()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editProductType(){let e=this.$route.params.id;try{const t=await it.get("/editProductType/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newProductType.name=t.name)},async updateProductType(){let e=this.$route.params.id;try{await it.put("/updateProductType/"+e,this.newProductType),this.$router.push({name:"product-types"}),this.snackbarMsg("Product Type Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("67e4");const _9=ct()(C9,[["render",B9],["__scopeId","data-v-028eb140"]]);var P9=_9;Object(l["pushScopeId"])("data-v-394a68d4");const I9={class:"row"},D9={class:"col-12 col-md-6 col-xl-6 position-relative"},T9={class:"card card-plain h-100",style:{"background-color":"white"}},M9=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Microsoft Configurations")],-1),z9={class:"p-3 card-body"},F9={key:0,class:"list-group"},U9={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},L9={class:"col-md-5 bg-white w-100 p-2"},$9=Object(l["createElementVNode"])("p",{class:"config-title"},"Microsoft client id",-1),q9={class:"config-value"},R9=Object(l["createElementVNode"])("hr",null,null,-1),H9=Object(l["createElementVNode"])("p",{class:"config-title"},"Microsoft client secret",-1),Q9={class:"config-value"},J9=Object(l["createElementVNode"])("hr",null,null,-1),Y9=Object(l["createElementVNode"])("p",{class:"config-title"},"Microsoft tenant id",-1),W9={class:"config-value"},X9=Object(l["createElementVNode"])("hr",null,null,-1),Z9=Object(l["createElementVNode"])("p",{class:"config-title"},"Email sending account",-1),K9={class:"config-value"},G9=Object(l["createElementVNode"])("span",{class:"d-flex align-items-center"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 me-1"},"settings"),Object(l["createTextVNode"])(" Edit Microsoft Settings ")],-1),eee=[G9],tee={key:2,class:"list-group"},aee={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},lee={class:"col-md-5 bg-white new-pass p-2"},cee=Object(l["createElementVNode"])("label",null,"Microsoft client id",-1),oee=Object(l["createElementVNode"])("br",null,null,-1),see=Object(l["createElementVNode"])("label",null,"Microsoft client secret",-1),nee=Object(l["createElementVNode"])("br",null,null,-1),ree=Object(l["createElementVNode"])("label",null,"Microsoft tenant id",-1),iee=Object(l["createElementVNode"])("br",null,null,-1),dee=Object(l["createElementVNode"])("label",null,"Email sending account",-1),mee=Object(l["createElementVNode"])("br",null,null,-1),bee=Object(l["createElementVNode"])("span",{class:"d-flex align-items-center"}," Save Settings ",-1),pee=[bee],uee=Object(l["createElementVNode"])("span",{class:"d-flex align-items-center"}," Cancel ",-1),Oee=[uee],hee=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1);function jee(e,t,a,c,o,s){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",I9,[Object(l["createElementVNode"])("div",D9,[Object(l["createElementVNode"])("div",T9,[M9,Object(l["createElementVNode"])("div",z9,[o.isEditConfig?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("ul",F9,[Object(l["createElementVNode"])("li",U9,[Object(l["createElementVNode"])("div",L9,[$9,Object(l["createElementVNode"])("small",q9,Object(l["toDisplayString"])(o.configuration.ms_client_id),1),R9,H9,Object(l["createElementVNode"])("small",Q9,Object(l["toDisplayString"])(o.configuration.ms_client_secret),1),J9,Y9,Object(l["createElementVNode"])("small",W9,Object(l["toDisplayString"])(o.configuration.ms_tenent_id),1),X9,Z9,Object(l["createElementVNode"])("small",K9,Object(l["toDisplayString"])(o.configuration.ms_email_account),1)])])])),o.isEditConfig?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[0]||(t[0]=e=>s.openEdit()),style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:" p-2 fw-5 border-radius-lg"},eee)),o.isEditConfig?(Object(l["openBlock"])(),Object(l["createElementBlock"])("ul",tee,[Object(l["createElementVNode"])("li",aee,[Object(l["createElementVNode"])("div",lee,[cee,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.configuration.ms_client_id=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.configuration.ms_client_id]]),oee,see,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.configuration.ms_client_secret=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.configuration.ms_client_secret]]),nee,ree,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>o.configuration.ms_tenent_id=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.configuration.ms_tenent_id]]),iee,dee,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.configuration.ms_email_account=e),id:"card-holder-name",type:"email",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],o.configuration.ms_email_account]]),mee,Object(l["createElementVNode"])("button",{onClick:t[5]||(t[5]=e=>s.updateConfigurations()),style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:" p-2 fw-5 me-2 border-radius-lg"},pee),Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=e=>o.isEditConfig=!1),style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:" p-2 fw-5 border-radius-lg"},Oee)])])])):Object(l["createCommentVNode"])("",!0)])]),hee])])])}Object(l["popScopeId"])();var gee={mounted(){this.getConfigurations()},computed:{...Object(tt["c"])(["getBrandingSetting"])},data(){return{isEditConfig:!1,configuration:{ms_client_id:"",ms_client_secret:"",ms_tenent_id:"",ms_email_account:""}}},methods:{openEdit(){this.isEditConfig=!0},async getConfigurations(){try{let e=await it.get("/getConfigurations");e=e.data,this.configuration.ms_client_id=e.ms_client_id,this.configuration.ms_client_secret=e.ms_client_secret,this.configuration.ms_tenent_id=e.ms_tenent_id,this.configuration.ms_email_account=e.ms_email_account}catch(e){console.log(e)}},async updateConfigurations(){try{await it.post("/saveConfigurations",this.configuration),this.snackbarMsg("Saved Successfuly")}catch(e){console.log(e)}},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})}}};a("ab21");const fee=ct()(gee,[["render",jee],["__scopeId","data-v-394a68d4"]]);var Eee=fee;const Vee=[{path:"/auth/callback",name:"AuthCallback",component:Gn},{path:"/",name:"/",redirect:"/dashboard",meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:vo,meta:{title:"Dashboard",requiresAuth:!0}},{path:"/organizations",name:"organizations",component:J6,meta:{title:"Organizations",requiresAuth:!0},children:[{path:"/organizations",name:"list-organizations",component:dV},{path:"/organizations/add",name:"add-organizations",component:lN},{path:"/organizations/:id",name:"edit-organization",component:XN}]},{path:"/organizations-admins",name:"organizations-admins",component:J6,meta:{title:"Organizations Admins",requiresAuth:!0},children:[{path:"/organizations-admins",name:"list-organization-admins",component:DW},{path:"/add-organizations-admins",name:"add-organization-admins",component:DX},{path:"/edit-organizations-admin/:id",name:"edit-organization-admin",component:UZ}]},{path:"/schools",name:"schools",component:J6,meta:{title:"Schools",requiresAuth:!0},children:[{path:"/schools",name:"list-schools",component:dd},{path:"/schools/add",name:"add-school",component:ib},{path:"/schools/edit-schools/:id",name:"edit-school",component:pp},{path:"/archived/schools",name:"archived-schools",component:om},{path:"/schools/settings/:id",name:"settings-school",component:Rp},{path:"/school/addCard/:id",name:"card-school",component:Gp}]},{path:"/students",name:"students",component:J6,meta:{title:"Students",requiresAuth:!0},children:[{path:"/students",name:"list-students",component:UO},{path:"/student/add",name:"add-student",component:Jj},{path:"/student/:id",name:"edit-student",component:of},{path:"/students/archived",name:"archived-students",component:Yh},{path:"/student-billing/:id",name:"student-billing",component:If}]},{path:"/balance/:id?",name:"balance",component:AE},{path:"/attributes",name:"attributes",component:J6,meta:{title:"Student Attributes",requiresAuth:!0},children:[{path:"/attributes",name:"list-attributes",component:O8},{path:"/attributes/add",name:"add-attribute",component:F8},{path:"/attributes/edit/:id",name:"edit-attribute",component:i6}]},{path:"/staff",name:"staff",component:J6,meta:{title:"Staff",requiresAuth:!0},children:[{path:"/staff",name:"list-staff",component:HK},{path:"/staff/add",name:"add-staff",component:K1},{path:"/staff/edit/:id",name:"edit-staff",component:m2},{path:"/staff/archived",name:"archived-staff",component:XG},{path:"/staff/details/:id",name:"detail-staff",component:B2}]},{path:"/parent",name:"parent",component:J6,meta:{title:"Parent",requiresAuth:!0},children:[{path:"/parents",name:"list-parent",component:u4},{path:"/parents/add",name:"add-parent",component:n5},{path:"/parents/edit/:id",name:"edit-parent",component:K5},{path:"/childrens/:id",name:"add-childrens",component:N3}]},{path:"/course",name:"course",component:J6,meta:{title:"Course",requiresAuth:!0},children:[{path:"/courses",name:"list-courses",component:CQ},{path:"/course/add",name:"add-course",component:mJ},{path:"/course/edit/:id",name:"edit-course",component:HJ},{path:"/course/enrolled-students/:id",name:"enrolled-students",component:lW}]},{path:"/payment",name:"payment",component:J6,meta:{title:"Payment Account",requiresAuth:!0},children:[{path:"/payment_method/:id?",name:"payment_method",component:xH},{path:"/payment_account/:id?",name:"payment_account",component:sH},{path:"/add_card",name:"add_card",component:TH}]},{path:"/transactions-history",name:"transactions",component:J6,meta:{title:"Purchase",requiresAuth:!0},children:[{path:"/transaction-history",name:"transaction-history",component:MA},{path:"/purchase-history",name:"purchase-history",component:NB},{path:"/purchases",name:"purchases-admin",component:vC},{path:"/refunds",name:"refund",component:cD},{path:"/installments",name:"installments",component:Y_},{path:"/pay-installment/:id",name:"pay-installment",component:QP}]},{path:"/support",component:J6,meta:{title:"Support",requiresAuth:!0},children:[{path:"",name:"support",component:xD}]},{path:"/configurations",component:J6,meta:{title:"Configurations",requiresAuth:!0},children:[{path:"/configurations",name:"configurations",component:Eee}]},{path:"/product-types",name:"ProductTypes",component:J6,meta:{title:"ProductTypes",requiresAuth:!0},children:[{path:"/product-types",name:"product-types",component:M7},{path:"/product-types/add",name:"add-product-types",component:r9},{path:"/product-types/edit/:id",name:"edit-product-types",component:P9}]},{path:"/shop-items",name:"shop",component:J6,meta:{title:"Shop",requiresAuth:!0},children:[{path:"/shop-items",name:"shop-items",component:aM},{path:"/shop-items/add",name:"add-items",component:PU},{path:"/shop-items/edit/:id",name:"edit-shop-items",component:X$},{path:"/shop-items/archived",name:"archived-shop-items",component:Oz}]},{path:"/checkout",name:"checkout",component:J6,meta:{title:"Checkout",requiresAuth:!0},children:[{path:"/cart-checkout",name:"cart-checkout",component:lR}]},{path:"/trips",name:"trips",component:J6,meta:{title:"Trips",requiresAuth:!0},children:[{path:"/trips",name:"list-trips",component:Qx},{path:"/add-trips",name:"add-trips",component:Xk},{path:"/edit-trips/:id",name:"edit-trips",component:eS},{path:"/participants-trips/:id",name:"participants-trips",component:vS}]},{path:"/roles",name:"roles",component:J6,meta:{title:"Roles",requiresAuth:!0},children:[{path:"/roles",name:"list-roles",component:$6}]},{path:"/meals",name:"meals",component:J6,meta:{title:"Meals",requiresAuth:!0},children:[{path:"/meals",name:"list-meals",component:OR},{path:"/add-menu",name:"add-menu",component:NR}]},{path:"/childrens",name:"childrens",component:J6,meta:{title:"Childrens",requiresAuth:!0},children:[{path:"/childrens",name:"list-childrens",component:W3}]},{path:"/payments",name:"payments",component:J6,meta:{title:"Payments",requiresAuth:!0},children:[{path:"/active-payments",name:"list-active-payments",component:""},{path:"/historical-payments",name:"list-historical-payments",component:""}]},{path:"/profile",name:"Profile",component:qs,meta:{requiresAuth:!0}},{path:"/sign-in",name:"SignIn",component:Bn},{path:"/forgot-password",name:"ForgotPassword",component:jr},{path:"/reset-password/:email/:otp",name:"ResetPassword",component:zr},{path:"/sign-up",name:"SignUp",component:wi}],Nee=Object(fl["a"])({history:Object(fl["b"])("/"),routes:Vee,linkActiveClass:"active"});Nee.beforeEach((e,t,a)=>{document.title=e.meta.title||"StudentPay",e.meta.requiresAuth&&!localStorage.getItem("token")?a({name:"SignIn"}):!localStorage.getItem("token")||"SignIn"!==e.name&&"Register"!==e.name?a():a({name:"Dashboard"})});var xee=Nee,yee=(a("6a5d"),a("46d4"),a("5aea"),a("b945"),a("9e17"),{install(){}}),vee=a("fe63");a("6340"),a("f38d");const kee={install(e){const t=Object(l["ref"])({create:!1,edit:!1,delete:!1,view:!1,create_admin:!1,delete_admin:!1,view_admin:!1,edit_admin:!1,create_site:!0,view_site:!1,edit_site:!0,delete_site:!1,create_student:!1,delete_student:!1,view_student:!1,edit_student:!1,create_staff:!1,delete_staff:!1,view_staff:!1,edit_staff:!1,create_course:!1,view_course:!1,edit_course:!1,delete_course:!1,create_shop:!0,delete_shop:!1,view_shop:!0,edit_shop:!0,transaction_history:!0,purchase_history:!1,pending_installments:!1,refunds:!1,roles:!1,topup:!1,wallet:!1}),a=e=>{const a=JSON.parse(localStorage.getItem("user"));a&&"super_admin"===a.role?Object.keys(t.value).forEach(e=>{t.value[e]=!0}):Object.keys(t.value).forEach(a=>{t.value[a]=e.includes(a)})},c=a=>{const l=e.config.globalProperties.$router;t.value[a]||l.go(-1)};e.config.globalProperties.$permissions={userPermissions:t,checkIfPermission:a,redirectIfNotAllowed:c},e.provide("permissions",e.config.globalProperties.$permissions),Object(l["watch"])(()=>e.config.globalProperties.$store.getters.getPermissions,(t,a)=>{console.log(a),e.config.globalProperties.$permissions.checkIfPermission(t)})}};var wee=kee;const See={install(e){const t=Object(l["ref"])({BASE_URL:"https://stagingapi.student-pay.co.uk"});e.config.globalProperties.$env_vars=t.value,e.provide("env_vars",e.config.globalProperties.env_vars)}};var Aee=See;const Bee={install(e){const t=()=>{const t="null"!==e.config.globalProperties.$store.getters.getBrandingSetting.primary_color?e.config.globalProperties.$store.getters.getBrandingSetting.primary_color:"#010A21",a=document.querySelectorAll(".btn");a.forEach(e=>{e.style.backgroundColor=t});const l=document.querySelectorAll(".pagination li a");l.forEach(e=>{e.style.backgroundColor="white"});const c=document.querySelectorAll(".pagination li.active a");c.forEach(e=>{e.style.backgroundColor=t})};e.config.globalProperties.$globalHelper={buttonColor:t}}};var Cee=Bee;const _ee={install(e){const t=()=>{const e=document.querySelector(".mx-datepicker-popup");e&&(e.style.display="none");const t=document.querySelector(".mx-input:focus");t&&t.blur()},a=()=>{const e=document.querySelector(".mx-datepicker-popup");e&&(e.style.display="block")},l=()=>{const e=document.querySelector(".mx-input");e&&(e.addEventListener("focus",a),window.addEventListener("scroll",t,!0))},c=()=>{const e=document.querySelector(".mx-input");e&&e.removeEventListener("focus",a),window.removeEventListener("scroll",t,!0)};e.config.globalProperties.$datepickerHelper={attachListeners:l,detachListeners:c},e.mixin({mounted(){l()},beforeUnmount(){c()}})}};var Pee=_ee;const Iee=Object(l["createApp"])(Ra);Iee.config.globalProperties.$msalInstance={},Iee.config.globalProperties.$emitter=new Qa.a,Iee.use(gl),Iee.use(vee["a"]),Iee.component("vue3-snackbar",vee["b"]),Iee.use(xee,Iee),Iee.use(yee),Iee.use(Jk.a),Iee.use(wee),Iee.use(Aee),Iee.use(Cee),Iee.use(Pee),Iee.mount("#app")},"599f":function(e,t,a){"use strict";a("ebaa")},"59bb":function(e,t,a){},"5aea":function(e,t,a){},"5d04":function(e,t,a){"use strict";a("af58")},"60de":function(e,t,a){"use strict";a("04ef")},6102:function(e,t,a){},6150:function(e,t,a){e.exports=a.p+"img/ivana-square.a1900888.jpg"},"62b9":function(e,t,a){},"62cb":function(e,t,a){"use strict";a("744f")},"639d":function(e,t,a){"use strict";a("91bf")},"66b5":function(e,t,a){"use strict";a("04e1")},"67e4":function(e,t,a){"use strict";a("3470")},"69e7":function(e,t,a){"use strict";a("9a19")},"6a07":function(e,t,a){e.exports=a.p+"img/background.19e62050.jpg"},"6a5d":function(e,t,a){},"6e4e":function(e,t,a){},"70e0":function(e,t,a){},"71e7":function(e,t,a){"use strict";a("6102")},"744f":function(e,t,a){},7497:function(e,t,a){"use strict";a("a512")},"76e5":function(e,t,a){},"7a85":function(e,t,a){},"7b9a":function(e,t,a){e.exports=a.p+"img/StudentPay-logo.627241f4.png"},"7ed5":function(e,t,a){},8202:function(e,t,a){e.exports=a.p+"img/team-2.90c40d0c.jpg"},8409:function(e,t,a){"use strict";a("91c3")},8889:function(e,t,a){"use strict";a("6e4e")},"8a36":function(e,t,a){"use strict";a("539e")},"8a39":function(e,t,a){"use strict";a("d391")},"8ab1":function(e,t,a){},"8bb8":function(e,t,a){},"8d32":function(e,t,a){"use strict";a("b176")},"8de3":function(e,t,a){"use strict";a("176c")},"91bf":function(e,t,a){},"91c3":function(e,t,a){},9494:function(e,t,a){"use strict";a("4dd6")},"94d7":function(e,t,a){"use strict";a("a145")},"998c":function(e,t,a){"use strict";a("c355")},"9a19":function(e,t,a){},"9bb4":function(e,t,a){"use strict";a("8bb8")},"9bc7":function(e,t,a){"use strict";a("9ef9")},"9c6f":function(e,t,a){"use strict";a("fca7")},"9ce0":function(e,t,a){},"9d09":function(e,t,a){},"9e17":function(e,t,a){},"9ef9":function(e,t,a){},a13f:function(e,t,a){"use strict";a("100b")},a145:function(e,t,a){},a1ac:function(e,t,a){},a432:function(e,t,a){},a4cd:function(e,t,a){"use strict";a("3d83")},a512:function(e,t,a){},a86a:function(e,t,a){"use strict";a("4b51")},a973:function(e,t,a){},a97b:function(e,t,a){},aa68:function(e,t,a){e.exports=a.p+"img/visa.98edc46d.png"},ab21:function(e,t,a){"use strict";a("2ffa")},af17:function(e,t,a){e.exports=a.p+"img/marie.a60473a0.jpg"},af58:function(e,t,a){},b0e7:function(e,t,a){"use strict";a("e3f4")},b107:function(e,t,a){e.exports=a.p+"img/logo-slack.07d7b8e1.svg"},b176:function(e,t,a){},b34a:function(e,t,a){e.exports=a.p+"img/home-decor-1.decbdadf.jpg"},b4cc:function(e,t,a){"use strict";a("e872")},b795:function(e,t,a){},b8de:function(e,t,a){e.exports=a.p+"img/logo-xd.46bbd281.svg"},b909:function(e,t,a){"use strict";a("b795")},b945:function(e,t){window.onload=function(){for(var e=document.querySelectorAll(".btn"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target,a=t.querySelector(".ripple");a=document.createElement("span"),a.classList.add("ripple"),a.style.width=a.style.height=Math.max(t.offsetWidth,t.offsetHeight)+"px",t.appendChild(a),a.style.left=e.offsetX-a.offsetWidth/2+"px",a.style.top=e.offsetY-a.offsetHeight/2+"px",a.classList.add("ripple"),setTimeout((function(){a.parentElement.removeChild(a)}),600)}),!1)}},bbe0:function(e,t,a){e.exports=a.p+"img/dashboard2.3de49aaf.jpg"},bdd3:function(e,t,a){},c160:function(e,t,a){"use strict";a("c4e1")},c1d2:function(e,t,a){"use strict";a("9d09")},c355:function(e,t,a){},c4e1:function(e,t,a){},c574:function(e,t,a){"use strict";a("f5e2")},c690:function(e,t,a){},c7c0:function(e,t,a){e.exports=a.p+"img/team-3.a539dfc6.jpg"},ca92:function(e,t,a){"use strict";a("2805")},cad8:function(e,t,a){"use strict";a("a973")},d15c:function(e,t,a){e.exports=a.p+"img/trip.85ea72dc.jpg"},d391:function(e,t,a){},d3a1:function(e,t,a){},d858:function(e,t,a){"use strict";a("7ed5")},da94:function(e,t,a){"use strict";a("a97b")},de13:function(e,t,a){"use strict";a("7a85")},dfd9:function(e,t,a){},e0bc:function(e,t,a){"use strict";a("2e1b")},e148:function(e,t,a){"use strict";a("8ab1")},e33f:function(e,t,a){"use strict";a("d3a1")},e3f4:function(e,t,a){},e6f0:function(e,t,a){"use strict";a("43be")},e872:function(e,t,a){},e978:function(e,t,a){},eb29:function(e,t,a){"use strict";a("59bb")},ebaa:function(e,t,a){},ed52:function(e,t,a){"use strict";a("bdd3")},edea:function(e,t,a){"use strict";a("76e5")},efa0:function(e,t,a){"use strict";a("2398")},f35e:function(e,t,a){e.exports=a.p+"img/team-4.16a9baef.jpg"},f5b4:function(e,t,a){},f5e2:function(e,t,a){},fa86:function(e,t,a){"use strict";a("55ff")},fca7:function(e,t,a){}});
//# sourceMappingURL=app.633b8425.js.map