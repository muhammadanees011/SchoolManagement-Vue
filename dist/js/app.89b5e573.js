(function(e){function t(t){for(var l,o,n=t[0],r=t[1],i=t[2],m=0,b=[];m<n.length;m++)o=n[m],Object.prototype.hasOwnProperty.call(c,o)&&c[o]&&b.push(c[o][0]),c[o]=0;for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l]);d&&d(t);while(b.length)b.shift()();return s.push.apply(s,i||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],l=!0,n=1;n<a.length;n++){var r=a[n];0!==c[r]&&(l=!1)}l&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var l={},c={app:0},s=[];function o(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=l,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(a,l,function(t){return e[t]}.bind(null,l));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],r=n.push.bind(n);n.push=t,n=n.slice();for(var i=0;i<n.length;i++)t(n[i]);var d=r;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0153":function(e,t,a){},"02a2":function(e,t,a){},"04e1":function(e,t,a){},"04ef":function(e,t,a){},"0515":function(e,t,a){},"057e":function(e,t,a){"use strict";a("3a0d")},"0b3c":function(e,t,a){"use strict";a("2357")},"0c19":function(e,t,a){},"100b":function(e,t,a){},"139f":function(e,t,a){"use strict";a("ccdc")},1444:function(e,t,a){},"14f2":function(e,t,a){},1504:function(e,t,a){"use strict";a("44d9")},"15bb":function(e,t,a){},1704:function(e,t,a){"use strict";a("02a2")},"18e4":function(e,t,a){},"190c":function(e,t,a){e.exports=a.p+"img/down-arrow-white.157f6258.svg"},"19b8":function(e,t,a){"use strict";a("a432")},"1e72":function(e,t,a){},2240:function(e,t,a){"use strict";a("36e7")},"228f":function(e,t,a){},2357:function(e,t,a){},2409:function(e,t,a){"use strict";a("14f2")},"261d":function(e,t,a){},"264c":function(e,t,a){e.exports=a.p+"img/mastercard.e1efc600.png"},"26be":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAsASURBVHic7d0xb1RnFoDh49FKoKzpY4mKjiJl5A5FiCqSBdT8ApfUG1GgbE3JL6DGCCnVCkXpUMoUdK6QnB6DTOUtxt4FAgQB9gje55GmuTNjn2q+d+7M3G/t8PBwPsTzK5tnZubyzFydmYszs3F0W/+gPwB8dv/8z+O1Vf7/rZ3rH/YCApyE/ZnZO7o9mZkHM/Po4bX7Lz/kyWt/FwDPr2xuzMytmbkxM+c+aVTgsxIAwBuezcy9mbn98Nr9vfc98J0B8PzK5tmZ+Wlmbs7MN597QuDTCQDgHV7MzJ2Z+fnhtfsHb3vA4m0Hn1/Z/HZmfp2Zf43FHwC+NN/Mcg3/dWvn+rdve8BfAuD5lc3vZub3mdk82dkAgBO2OTO/b+1c/+7NO14LgKN3/r/MzPlTGgwAOFnnZ+aXN88E/C8Ajj7z3xmLPwB8bc7PzM7WzvWzxwdePQPw0zjtDwBfq81ZrvUzcxQARz/1u7mqiQCAU3Fza+f6xsz/zwDcGt/2B4Cv3TezXPNncXSFvxurnQcAOCU3tnaun1nM8vK+rvAHAA3nZubyYpbX9gcAOq4uZrmxDwDQcXExyx39AICODQEAAD0bi5lZX/UUAMCpWn/rboAAwNdNAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIEgAAECQAACBIAABAkAAAgCABAABBAgAAggQAAAQJAAAIWjs8PFz1DADAKXMGAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAoH9cuLt/uOohgI+zu72+ttIBfjvr9QO+UM4AAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQJAAAIEgAAECQAACAIAEAAEECAACCBAAABAkAAAgSAAAQtJiZ/VUPAQCcqv3FzOytegoA4FTtCQAA6NlbzMyTVU8BAJyqJ4uZebDqKQCAU/VgMTOPZubZqicBAE7Fs5l5tNjdXn85M/dWPQ0AcCruzaWDl8fXAbg9My9WOQ0AcOJezHLNX14IaHd7fW9m7qxyIgDgxN2ZSwd7M69fCfDnmXm8mnkAgBP2eJZr/cy8EgC72+sHM3NtZp6uYCgA4OQ8nZlrc+ng4PjAa3sB7G6v/zkzP44IAICvxdOZ+XEuHfz56sG/bAa0u73+x8x8Pz4OAIAv3eOZ+X4uHfzx5h1v3Q3w6EzADzPz7/HrAAD40ryY5Rr+w5vv/I+tHR4evvcvXLi7vzEzt2bmxsyc+9wTAh9vd3t9baUD/Hb2/S8gwGl7Nstr+9w+/rb/u/xtABy7cHf/zMxcnpmrM3NxZjaObuufNCrw0QQApO3PckO/vVnu6/NgZh7NpYOXH/Lk/wKQAq5eW3YI8AAAAABJRU5ErkJggg=="},"26db":function(e,t,a){"use strict";a("c690")},2805:function(e,t,a){},"281f":function(e,t,a){e.exports=a.p+"img/logo-invision.43586d43.svg"},"2b98":function(e,t,a){"use strict";a("f5b4")},"2d39":function(e,t,a){e.exports=a.p+"img/kal-visuals-square.779cce2b.jpg"},"2dbd":function(e,t,a){"use strict";a("62b9")},"2e1b":function(e,t,a){},"2e77":function(e,t,a){e.exports=a.p+"img/logo-spotify.4bb67532.svg"},"2fcd":function(e,t,a){"use strict";a("40a5")},"2ffa":function(e,t,a){},3027:function(e,t,a){"use strict";a("673a")},"30fe":function(e,t,a){"use strict";a("228f")},3470:function(e,t,a){},"350a":function(e,t,a){e.exports=a.p+"img/team-1.0e461794.jpg"},3615:function(e,t,a){},"36e7":function(e,t,a){},"37f7":function(e,t,a){e.exports=a.p+"img/logo-atlassian.0569965a.svg"},"394e":function(e,t,a){"use strict";a("94b7")},"3a0d":function(e,t,a){},"3d83":function(e,t,a){},"3dfe":function(e,t,a){e.exports=a.p+"img/logo-jira.09288465.svg"},"3f2a":function(e,t,a){"use strict";a("261d")},"40a5":function(e,t,a){},"40bd":function(e,t,a){e.exports=a.p+"img/bruce-mars.0c440467.jpg"},"40fa":function(e,t,a){"use strict";a("0c19")},"42eb":function(e,t,a){},"43be":function(e,t,a){},"44d9":function(e,t,a){},"457f":function(e,t,a){"use strict";a("1444")},4678:function(e,t,a){var l={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-ps":"4c98","./ar-ps.js":"4c98","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku-kmr":"7558","./ku-kmr.js":"7558","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function c(e){var t=s(e);return a(t)}function s(e){if(!a.o(l,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return l[e]}c.keys=function(){return Object.keys(l)},c.resolve=s,e.exports=c,c.id="4678"},"46d4":function(e,t,a){},4753:function(e,t,a){e.exports=a.p+"img/home-decor-2.249f600c.jpg"},"4aee":function(e,t,a){"use strict";a("18e4")},"4b51":function(e,t,a){},"4dd6":function(e,t,a){},"4e40":function(e,t,a){"use strict";a("3615")},5065:function(e,t,a){},"506d":function(e,t,a){"use strict";a("15bb")},"50df":function(e,t,a){"use strict";a("9b7c")},"52d6":function(e,t,a){e.exports=a.p+"img/down-arrow-dark.601cff39.svg"},"52e2":function(e,t,a){"use strict";a("0515")},"532f":function(e,t,a){e.exports=a.p+"img/home-decor-3.2d98a7aa.jpg"},"539e":function(e,t,a){},"54d0":function(e,t,a){"use strict";a("9195")},"55ff":function(e,t,a){},"566d":function(e,t,a){"use strict";a("e978")},"56d7":function(e,t,a){"use strict";a.r(t);var l=a("7a23");const c={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function s(e,t,a,s,o,n){const r=Object(l["resolveComponent"])("sidenav"),i=Object(l["resolveComponent"])("navbar"),d=Object(l["resolveComponent"])("router-view"),m=Object(l["resolveComponent"])("app-footer"),b=Object(l["resolveComponent"])("configurator"),p=Object(l["resolveComponent"])("vue3-snackbar");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[e.showSidenav?(Object(l["openBlock"])(),Object(l["createBlock"])(r,{key:0,custom_class:e.color,class:Object(l["normalizeClass"])([e.isRTL?"fixed-end":"fixed-start"])},null,8,["custom_class","class"])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("main",c,[e.showNavbar?(Object(l["openBlock"])(),Object(l["createBlock"])(i,{key:0,class:Object(l["normalizeClass"])([e.isNavFixed?e.navbarFixed:"",e.isAbsolute?e.absolute:""]),color:e.isAbsolute?"text-white opacity-8":"",minNav:e.navbarMinimize},null,8,["class","color","minNav"])):Object(l["createCommentVNode"])("",!0),Object(l["createVNode"])(d),Object(l["withDirectives"])(Object(l["createVNode"])(m,null,null,512),[[l["vShow"],e.showFooter]]),Object(l["createVNode"])(b,{toggle:e.toggleConfigurator,class:Object(l["normalizeClass"])([e.showConfig?"show":"",e.hideConfigButton?"d-none":""])},null,8,["toggle","class"])]),Object(l["createVNode"])(p,{top:"",right:"",duration:3e3})],64)}var o=a("7b9a"),n=a.n(o);const r={class:"sidenav-header"},i=Object(l["createElementVNode"])("i",{class:"top-0 p-3 cursor-pointer fas fa-times text-secondary opacity-5 position-absolute end-0 d-none d-xl-none","aria-hidden":"true",id:"iconSidenav"},null,-1),d={class:"m-0 navbar-brand",href:"/"},m={key:0,class:"d-flex flex-column justify-content-center align-items-center",style:{"margin-top":"-21px"}},b=["src"],p=Object(l["createElementVNode"])("p",{class:"ms-2 font-weight-bold text-white",style:{"font-size":"15px","margin-right":"20px","margin-top":"4px"}},"StudentPay Portal",-1),u=Object(l["createElementVNode"])("br",null,null,-1),h={key:1,src:n.a,class:"navbar-brand-img h-100",alt:"main_logo"};function O(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("sidenav-list");return Object(l["openBlock"])(),Object(l["createElementBlock"])("aside",{id:"sidenav-main",class:Object(l["normalizeClass"])(["sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 ms-3",`${e.isRTL?"me-3 rotate-caret fixed-end":"fixed-start ms-3"} ${e.sidebarType}`])},[Object(l["createElementVNode"])("div",r,[i,Object(l["createElementVNode"])("a",d,["null"!==e.getBrandingSetting.logo?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",m,[Object(l["createElementVNode"])("img",{src:s.StudentPayLogo,class:"navbar-brand-img branding-logo h-50",alt:""},null,8,b),p,u])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",h))])]),Object(l["createVNode"])(n)],2)}const j={class:"w-auto collapse navbar-collapse vh-100",id:"sidenav-collapse-main"},g={class:"navbar-nav"},f={class:"nav-item"},E=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"dashboard",-1),V=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),N=["onClick"],y=Object(l["createElementVNode"])("div",{class:"select"},null,-1),x={class:"text-white ms-1 ps-1"},v={key:1,class:"nav-item"},k=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),w={key:2,class:"nav-item"},S=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"business",-1),A={key:0,class:"nav-item"},C=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"admin_panel_settings",-1),B={key:4,class:"nav-item"},_=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#schools"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Sites "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),P={id:"schools",class:"collapse"},I={class:"nav nav-sm flex-column"},D={class:"nav-item"},T=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),M=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Sites List",-1),z={class:"nav-item"},F=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),U=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Sites",-1),L={key:5,class:"nav-item"},$=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"security",-1),R={key:6,class:"nav-item"},q=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#projectsExample"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Students "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),H={id:"projectsExample",class:"collapse"},Q={class:"nav nav-sm flex-column"},Y={class:"nav-item"},J=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),W=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Students List",-1),X={class:"nav-item"},K=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),Z=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Students",-1),G={key:7,class:"nav-item"},ee=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#staffNav"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"portrait"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Staff "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),te={id:"staffNav",class:"collapse"},ae={class:"nav nav-sm flex-column"},le={class:"nav-item"},ce=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),se=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Staff List",-1),oe={class:"nav-item"},ne=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),re=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Staff",-1),ie={key:8,class:"nav-item"},de=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"people",-1),me={key:0,class:"nav-item"},be=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#courses"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Courses "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),pe={id:"courses",class:"collapse"},ue={class:"nav nav-sm flex-column"},he={class:"nav-item"},Oe=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),je=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"All Courses",-1),ge={key:1,class:"nav-item"},fe=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#product_types"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"category"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Product Types "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),Ee={id:"product_types",class:"collapse"},Ve={class:"nav nav-sm flex-column"},Ne={class:"nav-item"},ye=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),xe=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Product Types",-1),ve={key:0,class:"nav-item"},ke=Object(l["createElementVNode"])("a",{class:"nav-link text-white","data-bs-toggle":"collapse","aria-expanded":"false",href:"#shop"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"store"),Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-2 ps-1"},[Object(l["createTextVNode"])("Shop "),Object(l["createElementVNode"])("b",{class:"caret"})])],-1),we={id:"shop",class:"collapse"},Se={class:"nav nav-sm flex-column"},Ae={class:"nav-item"},Ce=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),Be=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Shop Items",-1),_e={class:"nav-item"},Pe=Object(l["createElementVNode"])("i",{class:"material-icons-round small-dot"},"fiber_manual_record",-1),Ie=Object(l["createElementVNode"])("span",{class:"sidenav-normal me-3 ms-3 ps-1 text-white"},"Archived Items",-1),De={key:3,class:"nav-item"},Te=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Me={key:4,class:"nav-item"},ze=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),Fe={key:10,class:"nav-item"},Ue=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),Le={class:"nav-item"},$e=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"payments",-1),Re={key:11,class:"nav-item"},qe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),He={key:12,class:"nav-item"},Qe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"shopping_cart",-1),Ye={key:13,class:"nav-item"},Je=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),We={key:0,class:"nav-item"},Xe=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"receipt",-1),Ke={key:15,class:"nav-item"},Ze=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"settings",-1),Ge={key:16,class:"nav-item"},et=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5"},"support_agent",-1);function tt(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("sidenav-collapse"),r=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",j,[Object(l["createElementVNode"])("ul",g,[Object(l["createElementVNode"])("li",f,[Object(l["createVNode"])(n,{to:{name:"Dashboard"},"aria-controls":"",collapse:!1,collapseRef:"dashboard",navText:"Dashboard"},{icon:Object(l["withCtx"])(()=>[E]),_:1})]),s.user&&"parent"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createVNode"])(n,{to:{name:"list-childrens"},"aria-controls":"",collapse:!1,collapseRef:"childrens",navText:"My Childrens"},{icon:Object(l["withCtx"])(()=>[V]),_:1}),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,onClick:t=>o.selectChildren(e.student.id),class:"nav-item d-flex student"},[y,Object(l["createElementVNode"])("small",x,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1)],8,N))),128))],64)):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",v,[Object(l["createVNode"])(n,{to:{name:"payment_account"},"aria-controls":"",collapse:!1,collapseRef:"topup",navText:"Topup"},{icon:Object(l["withCtx"])(()=>[k]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",w,[Object(l["createVNode"])(n,{to:{name:"list-organizations"},"aria-controls":"",collapse:!1,collapseRef:"organizations",navText:"Organisations"},{icon:Object(l["withCtx"])(()=>[S]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[o.userPermissions.view_admin?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",A,[Object(l["createVNode"])(n,{to:{name:"list-organization-admins"},"aria-controls":"",collapse:!1,collapseRef:"organization-admins",navText:"Organisation Admins"},{icon:Object(l["withCtx"])(()=>[C]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.userPermissions.view_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",B,[_,Object(l["createElementVNode"])("div",P,[Object(l["createElementVNode"])("ul",I,[Object(l["createElementVNode"])("li",D,[Object(l["createVNode"])(r,{to:{name:"list-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[T,M]),_:1})]),Object(l["createElementVNode"])("li",z,[Object(l["createVNode"])(r,{to:{name:"archived-schools"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[F,U]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),o.userPermissions.roles?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",L,[Object(l["createVNode"])(n,{to:{name:"list-roles"},"aria-controls":"",collapse:!1,collapseRef:"roles",navText:"Roles & Permissions"},{icon:Object(l["withCtx"])(()=>[$]),_:1})])):Object(l["createCommentVNode"])("",!0),o.userPermissions.view_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",R,[q,Object(l["createElementVNode"])("div",H,[Object(l["createElementVNode"])("ul",Q,[Object(l["createElementVNode"])("li",Y,[Object(l["createVNode"])(r,{to:{name:"list-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[J,W]),_:1})]),Object(l["createElementVNode"])("li",X,[Object(l["createVNode"])(r,{to:{name:"archived-students"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[K,Z]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),o.userPermissions.view_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",G,[ee,Object(l["createElementVNode"])("div",te,[Object(l["createElementVNode"])("ul",ae,[Object(l["createElementVNode"])("li",le,[Object(l["createVNode"])(r,{to:{name:"list-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ce,se]),_:1})]),Object(l["createElementVNode"])("li",oe,[Object(l["createVNode"])(r,{to:{name:"archived-staff"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ne,re]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),"staff"!==s.user.role&&"student"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ie,[Object(l["createVNode"])(n,{to:{name:"list-parent"},"aria-controls":"",collapse:!1,collapseRef:"parents",navText:"Parents"},{icon:Object(l["withCtx"])(()=>[de]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"parent"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:9},[o.userPermissions.view_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",me,[be,Object(l["createElementVNode"])("div",pe,[Object(l["createElementVNode"])("ul",ue,[Object(l["createElementVNode"])("li",he,[Object(l["createVNode"])(r,{to:{name:"list-courses"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Oe,je]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),s.user&&"student"!==s.user.role&&s.user&&"staff"!==s.user.role&&s.user&&"parent"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ge,[fe,Object(l["createElementVNode"])("div",Ee,[Object(l["createElementVNode"])("ul",Ve,[Object(l["createElementVNode"])("li",Ne,[Object(l["createVNode"])(r,{to:{name:"product-types"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[ye,xe]),_:1})])])])])):Object(l["createCommentVNode"])("",!0),s.user&&"student"!==s.user.role&&s.user&&"staff"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[o.userPermissions.view_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ve,[ke,Object(l["createElementVNode"])("div",we,[Object(l["createElementVNode"])("ul",Se,[Object(l["createElementVNode"])("li",Ae,[Object(l["createVNode"])(r,{to:{name:"shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Ce,Be]),_:1})]),Object(l["createElementVNode"])("li",_e,[Object(l["createVNode"])(r,{to:{name:"archived-shop-items"},class:"nav-link"},{default:Object(l["withCtx"])(()=>[Pe,Ie]),_:1})])])])])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),o.userPermissions.purchase_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",De,[Object(l["createVNode"])(n,{to:{name:"purchases-admin"},"aria-controls":"",collapse:!1,collapseRef:"purchasesadmin",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[Te]),_:1})])):Object(l["createCommentVNode"])("",!0),o.userPermissions.pending_installments?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Me,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Instalments"},{icon:Object(l["withCtx"])(()=>[ze]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Fe,[Object(l["createVNode"])(n,{to:{name:"installments"},"aria-controls":"",collapse:!1,collapseRef:"installments",navText:"Pending Instalments"},{icon:Object(l["withCtx"])(()=>[Ue]),_:1})])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("li",Le,[Object(l["createVNode"])(n,{to:{name:"paid-installments"},"aria-controls":"",collapse:!1,collapseRef:"paidinstallments",navText:"Paid Instalments"},{icon:Object(l["withCtx"])(()=>[$e]),_:1})]),o.userPermissions.refunds?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Re,[Object(l["createVNode"])(n,{to:{name:"refund"},"aria-controls":"",collapse:!1,collapseRef:"refunds",navText:"Refunds"},{icon:Object(l["withCtx"])(()=>[qe]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",He,[Object(l["createVNode"])(n,{to:{name:"purchase-history"},"aria-controls":"",collapse:!1,collapseRef:"purchase history",navText:"Purchase History"},{icon:Object(l["withCtx"])(()=>[Qe]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||s.user&&"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ye,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Je]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"student"!==s.user.role&&s.user&&"staff"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:14},[o.userPermissions.transaction_history?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",We,[Object(l["createVNode"])(n,{to:{name:"transaction-history"},"aria-controls":"",collapse:!1,collapseRef:"transaction history",navText:"Transaction History"},{icon:Object(l["withCtx"])(()=>[Xe]),_:1})])):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),s.user&&"student"!=s.user.role&&"staff"!=s.user.role&&"parent"!=s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ke,[Object(l["createVNode"])(n,{to:{name:"configurations"},"aria-controls":"",collapse:!1,collapseRef:"configurations",navText:"Configurations"},{icon:Object(l["withCtx"])(()=>[Ze]),_:1})])):Object(l["createCommentVNode"])("",!0),s.user&&"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Ge,[Object(l["createVNode"])(n,{to:{name:"support"},"aria-controls":"",collapse:!1,collapseRef:"support",navText:"Support"},{icon:Object(l["withCtx"])(()=>[et]),_:1})])):Object(l["createCommentVNode"])("",!0)])])}function at(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(n,Object(l["mergeProps"])({"data-bs-toggle":a.collapse?"collapse":"",to:a.collapse?"#"+a.collapseRef:a.collapseRef,"aria-controls":a.collapseRef,"aria-expanded":s.isExpanded,class:["nav-link",o.getRoute()===a.collapseRef?"active bg-gradient-#573078":""]},e.$attrs,{onClick:t[0]||(t[0]=e=>s.isExpanded=!s.isExpanded)}),{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["text-center d-flex align-items-center justify-content-center",e.isRTL?" ms-2":"me-2"])},[Object(l["renderSlot"])(e.$slots,"icon")],2),Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["nav-link-text",e.isRTL?" me-1":"ms-1"])},Object(l["toDisplayString"])(a.navText),3)]),_:3},16,["data-bs-toggle","to","aria-controls","aria-expanded","class"]),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(s.isExpanded?"collapse show":"collapse")},[Object(l["renderSlot"])(e.$slots,"list")],2)],64)}var lt=a("5502"),ct={name:"SidenavCollapse",props:{collapseRef:{type:String,required:!0},navText:{type:String,required:!0},collapse:{type:Boolean,default:!0}},data(){return{isExpanded:!1}},methods:{getRoute(){const e=this.$route.path.split("/");return e[1]}},computed:{...Object(lt["e"])(["isRTL","color"])}},st=a("6b0d"),ot=a.n(st);const nt=ot()(ct,[["render",at]]);var rt=nt,it=a("cee4");const dt=it["a"].create({baseURL:"https://stagingapi.student-pay.co.uk/api"});dt.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer "+t),e},e=>Promise.reject(e)),dt.interceptors.response.use(e=>{const t=e.headers["new-access-token"];return t&&localStorage.setItem("token",t),e},e=>Promise.reject(e));var mt=dt,bt={name:"SidenavList",props:{cardBg:String},updated(){},mounted(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e)),this.setActiveColor(),this.getChildrens()},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{childrens:"",user:"",title:"StudentPay",controls:"dashboardsExamples",isActive:"active"}},methods:{async getChildrens(){if(this.user&&"parent"==this.user.role){let t=this.user.id;try{const e=await mt.get("getChildrensOfParent/"+t);this.childrens=e.data}catch(e){console.log(e)}}},async selectChildren(e){if(this.user&&"parent"==this.user.role){let a=this.user.id,l={parent_id:a,student_id:e};try{let e=await mt.post("/selectChildren",l),t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let c=e.data.primary_color,s=e.data.secondary_color,o=e.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",s),localStorage.setItem("logo",o);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){console.log(t)}}},setActiveColor(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";document.querySelector(".sidenav-header").style.setProperty("--navheader-bg-color",e),document.querySelector(".navbar-nav").style.setProperty("--nav-bg-color",e),document.querySelector("#sidenav-collapse-main").style.setProperty("--nav-bg-color",e)},buttonColor(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";const t=document.querySelectorAll(".btn");console.log("btn",t),t.forEach(t=>{t.style.backgroundColor=e})},navLegacy(e){this.$router.push({name:e})},isActiveRoute(e){return this.$route.name===e}},components:{SidenavCollapse:rt}};a("394e");const pt=ot()(bt,[["render",tt]]);var ut=pt,ht=a("264c"),Ot=a.n(ht),jt={name:"index",components:{SidenavList:ut},mounted(){this.setLogo()},data(){return{logo:Ot.a,logoDark:Ot.a,StudentPayLogo:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),...Object(lt["e"])(["isRTL","sidebarType","isDarkMode"])},methods:{setLogo(){this.StudentPayLogo=this.$env_vars.BASE_URL+this.getBrandingSetting.logo}}};a("da94");const gt=ot()(jt,[["render",O]]);var ft=gt;const Et={class:"fixed-plugin"};function Vt(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Et)}function Nt(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-dark, .breadcrumb .text-dark"),s=document.querySelectorAll("strong.text-dark"),o=document.querySelectorAll("a.nav-link.text-dark"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-100"),i=document.querySelectorAll(".btn.btn-link.text-dark, .material-icons.text-dark"),d=document.querySelectorAll(".card.border"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.add("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("dark")&&(t[p].classList.remove("dark"),t[p].classList.add("light"));for(p=0;p<m.length;p++)m[p].classList.contains("blur")&&m[p].classList.remove("blur","shadow-blur");for(p=0;p<a.length;p++)a[p].classList.contains("dark")&&(a[p].classList.remove("dark"),a[p].classList.add("light"));for(p=0;p<l.length;p++)l[p].classList.contains("text-dark")&&(l[p].classList.remove("text-dark"),l[p].classList.add("text-white"));for(p=0;p<c.length;p++)c[p].classList.contains("text-dark")&&(c[p].classList.remove("text-dark"),c[p].classList.add("text-white"));for(p=0;p<s.length;p++)s[p].classList.contains("text-dark")&&(s[p].classList.remove("text-dark"),s[p].classList.add("text-white"));for(p=0;p<o.length;p++)o[p].classList.contains("text-dark")&&(o[p].classList.remove("text-dark"),o[p].classList.add("text-white"));for(p=0;p<n.length;p++)n[p].classList.contains("text-secondary")&&(n[p].classList.remove("text-secondary"),n[p].classList.add("text-white"),n[p].classList.add("opacity-8"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-100")&&(r[p].classList.remove("bg-gray-100"),r[p].classList.add("bg-gray-600"));for(p=0;p<i.length;p++)i[p].classList.remove("text-dark"),i[p].classList.add("text-white");for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#fff");for(p=0;p<d.length;p++)d[p].classList.add("border-dark")}function yt(){const e=document.getElementsByTagName("body")[0],t=document.querySelectorAll("div:not(.sidenav) > hr"),a=document.querySelectorAll("div:not(.bg-gradient-dark) hr"),l=document.querySelectorAll("button:not(.btn) > .text-dark"),c=document.querySelectorAll("span.text-white, .breadcrumb .text-white"),s=document.querySelectorAll("strong.text-white"),o=document.querySelectorAll("a.nav-link.text-white"),n=document.querySelectorAll(".text-secondary"),r=document.querySelectorAll(".bg-gray-600"),i=document.querySelectorAll(".btn.btn-link.text-white, .material-icons.text-white"),d=document.querySelectorAll(".card.border.border-dark"),m=document.querySelectorAll(".main-content .container-fluid .card"),b=document.querySelectorAll("g");e.classList.remove("dark-version"),e.classList.remove("dark-version");for(var p=0;p<t.length;p++)t[p].classList.contains("light")&&(t[p].classList.add("dark"),t[p].classList.remove("light"));for(p=0;p<a.length;p++)a[p].classList.contains("light")&&(a[p].classList.add("dark"),a[p].classList.remove("light"));for(p=0;p<m.length;p++)m[p].classList.add("blur","shadow-blur");for(p=0;p<l.length;p++)l[p].classList.contains("text-white")&&(l[p].classList.remove("text-white"),l[p].classList.add("text-dark"));for(p=0;p<c.length;p++)!c[p].classList.contains("text-white")||c[p].closest(".sidenav")||c[p].closest(".card.bg-gradient-dark")||(c[p].classList.remove("text-white"),c[p].classList.add("text-dark"));for(p=0;p<s.length;p++)s[p].classList.contains("text-white")&&(s[p].classList.remove("text-white"),s[p].classList.add("text-dark"));for(p=0;p<o.length;p++)o[p].classList.contains("text-white")&&!o[p].closest(".sidenav")&&(o[p].classList.remove("text-white"),o[p].classList.add("text-dark"));for(p=0;p<n.length;p++)n[p].classList.contains("text-white")&&(n[p].classList.remove("text-white"),n[p].classList.remove("opacity-8"),n[p].classList.add("text-dark"));for(p=0;p<r.length;p++)r[p].classList.contains("bg-gray-600")&&(r[p].classList.remove("bg-gray-600"),r[p].classList.add("bg-gray-100"));for(p=0;p<b.length;p++)b[p].hasAttribute("fill")&&b[p].setAttribute("fill","#252f40");for(p=0;p<i.length;p++)i[p].closest(".card.bg-gradient-dark")||(i[p].classList.remove("text-white"),i[p].classList.add("text-dark"));for(p=0;p<d.length;p++)d[p].classList.remove("border-dark")}var xt={name:"configurator",props:["toggle"],methods:{...Object(lt["d"])(["navbarMinimize","navbarFixed"]),...Object(lt["b"])(["setColor"]),sidebarColor(e="success"){document.querySelector("#sidenav-main").setAttribute("data-color",e),this.setColor(e)},sidebar(e){this.$store.state.sidebarType=e},setNavbarFixed(){"Profile"===this.$route.name&&"All Projects"===this.$route.name||(this.$store.state.isNavFixed=!this.$store.state.isNavFixed)},darkMode(){if(this.$store.state.isDarkMode)return this.$store.state.isDarkMode=!1,void yt();this.$store.state.isDarkMode=!0,Nt()},sidenavTypeOnResize(){let e=document.querySelector("#btn-transparent"),t=document.querySelector("#btn-white");window.innerWidth<1200?(e.classList.add("disabled"),t.classList.add("disabled")):(e.classList.remove("disabled"),t.classList.remove("disabled"))}},computed:{...Object(lt["e"])(["isRTL","sidebarType"]),sidenavResponsive(){return this.sidenavTypeOnResize}},beforeMount(){this.$store.state.isTransparent="bg-transparent",window.addEventListener("resize",this.sidenavTypeOnResize),window.addEventListener("load",this.sidenavTypeOnResize)}};const vt=ot()(xt,[["render",Vt]]);var kt=vt;const wt={class:"px-3 py-1 container-fluid"},St={key:0,class:"organization-name mt-2 me-2"},At={key:1,class:"organization-name mt-2 me-2"},Ct=Object(l["createElementVNode"])("h5",null,"Super Admin",-1),Bt=[Ct],_t={key:0,class:"change-pass-alert pt-1",style:{"padding-right":"5px",display:"flex"}},Pt={class:"pass-text"},It=Object(l["createTextVNode"])("For security reasons, we kindly ask you to change your password, "),Dt=Object(l["createElementVNode"])("span",{class:"click-link ms-2"},"click here",-1),Tt=Object(l["createTextVNode"])(" to change the password"),Mt={class:"navbar-nav justify-content-end"},zt={class:"position-relative d-inline-block"},Ft=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"},"shopping_cart",-1),Ut={key:0,class:"custom-badge position-absolute top-0 start-100 translate-middle rounded-pill bg-danger"},Lt={class:"cart px-2 py-3 cart-dropdown dropdown-menu dropdown-menu-end me-sm-n4","aria-labelledby":"dropdownMenuButton"},$t={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},Rt={class:"d-flex flex-column"},qt={class:"mb-3 text-sm text-dark"},Ht={key:0},Qt=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs text-dark"},[Object(l["createElementVNode"])("span",{class:"mb-1 text-sm bg-success text-white px-2",style:{"border-radius":"5px"}},"Shop Item")],-1),Yt={class:"ms-auto text-end"},Jt={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},Wt=["onClick"],Xt={key:0,class:"text-white list-group-item bg-gray-100 border-0 d-flex p-4 mb-2 border-radius-lg"},Kt={class:"d-flex flex-column"},Zt={class:"mb-3 text-sm text-dark"},Gt={class:"mb-1 text-xs text-dark"},ea={class:"mb-3 text-sm text-dark"},ta=Object(l["createElementVNode"])("br",null,null,-1),aa={class:"mb-3 text-sm text-dark"},la=Object(l["createElementVNode"])("br",null,null,-1),ca=Object(l["createElementVNode"])("span",{class:"mb-1 text-sm bg-success text-white px-2",style:{"border-radius":"5px"}},"Installment",-1),sa={class:"ms-auto text-end"},oa={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},na=["onClick"],ra={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},ia={key:1,class:"list-group-item border-0 d-flex align-items-center justify-content-center p-4 mb-2 bg-warning-100 text-warning border-radius-lg"},da={key:0},ma={key:1},ba=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"}," account_circle ",-1),pa=[ba],ua={key:0,class:"menu_item mb-2"},ha={class:"dropdown-item border-radius-md",href:"javascript:;"},Oa={class:"py-1 d-flex"},ja={class:"d-flex flex-column justify-content-center"},ga={class:"d-flex align-items-center"},fa=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),Ea={class:"ms-1 pt-2 text-sm font-weight-normal"},Va={class:"font-weight-bold"},Na={class:""},ya={key:1,class:"menu_item mb-2"},xa={class:"dropdown-item border-radius-md",href:"javascript:;"},va={class:"py-1 d-flex"},ka={class:"d-flex flex-column justify-content-center"},wa={class:"d-flex align-items-center"},Sa=Object(l["createElementVNode"])("i",{class:"fas fa-user pb-0"},null,-1),Aa={class:"ms-1 pt-2 text-sm font-weight-normal"},Ca={class:"font-weight-bold"},Ba={class:""},_a={class:"menu_item mb-2"},Pa=Object(l["createElementVNode"])("a",{class:"dropdown-item border-radius-md",href:"javascript:;"},[Object(l["createElementVNode"])("div",{class:"py-1 d-flex"},[Object(l["createElementVNode"])("div",{class:"d-flex flex-column justify-content-center"},[Object(l["createElementVNode"])("span",{class:"d-flex  align-items-center"},[Object(l["createElementVNode"])("i",{class:"fas fa-wallet "}),Object(l["createElementVNode"])("h6",{class:"ms-1 pt-2 text-sm font-weight-normal"},[Object(l["createElementVNode"])("span",{class:"font-weight-bold"},"Wallet")])])])])],-1),Ia={class:"menu_item mb-2"},Da=Object(l["createStaticVNode"])('<div class="py-1 d-flex"><div class="d-flex flex-column justify-content-center"><span class="d-flex align-items-center"><i class="fas fa-power-off pb-0"></i><h6 class="ms-1 pt-2 text-sm font-weight-normal"><span class="font-weight-bold">Logout</span></h6></span></div></div>',1),Ta=[Da],Ma={class:"nav-item d-xl-none ps-3 d-flex align-items-center"},za=Object(l["createElementVNode"])("div",{class:"sidenav-toggler-inner"},[Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"}),Object(l["createElementVNode"])("i",{class:"sidenav-toggler-line"})],-1),Fa=[za];function Ua(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("nav",Object(l["mergeProps"])({class:"shadow-none navbar navbar-main navbar-expand-lg border-radius-xl"},e.$attrs,{id:"navbarBlur","data-scroll":"true",class:e.isAbsolute?"mt-4":"mt-0"}),[Object(l["createElementVNode"])("div",wt,["super_admin"!=s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",St,[Object(l["createElementVNode"])("h5",null,Object(l["toDisplayString"])(s.organization_name),1)])):Object(l["createCommentVNode"])("",!0),"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",At,Bt)):Object(l["createCommentVNode"])("",!0),"Profile"!=o.currentRouteName?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:2},[s.passwordStatus?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_t,[Object(l["createElementVNode"])("small",Pt,[It,Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[Dt]),_:1}),Tt])]))],64)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mt-2 collapse navbar-collapse mt-sm-0 me-md-0 me-sm-4",e.isRTL?"px-0":"me-sm-4"]),id:"navbar"},[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pe-md-3 d-flex align-items-center",e.isRTL?"me-md-auto":"ms-md-auto"])},null,2),Object(l["createElementVNode"])("ul",Mt,["staff"==s.user.role||"student"==s.user.role||"parent"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:0,class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{onClick:t[0]||(t[0]=(...e)=>o.getCartItems&&o.getCartItems(...e)),href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",s.showCart?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"},[Object(l["createElementVNode"])("div",zt,[Ft,e.getCartItemCounter&&e.getCartItemCounter>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Ut,Object(l["toDisplayString"])(e.getCartItemCounter),1)):Object(l["createCommentVNode"])("",!0)])],2),Object(l["createElementVNode"])("ul",Lt,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.cartItemsList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",$t,[Object(l["createElementVNode"])("div",Rt,[Object(l["createElementVNode"])("h6",qt,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item?e.shop_item.name:"")+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Ht,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Qt]),Object(l["createElementVNode"])("div",Yt,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",Jt," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item?e.shop_item.price:0)),1),Object(l["createElementVNode"])("i",{onClick:Object(l["withModifiers"])(t=>o.removeItemFromCart(e.id),["stop"]),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,Wt)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.cartItemsList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.installment?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Xt,[Object(l["createElementVNode"])("div",Kt,[Object(l["createElementVNode"])("h6",Zt,Object(l["toDisplayString"])(e.installment.shop_items?e.installment.shop_items.name:""),1),Object(l["createElementVNode"])("span",Gt,[Object(l["createElementVNode"])("small",ea,"Installment No."+Object(l["toDisplayString"])(e.installment.installment_no),1),ta,Object(l["createElementVNode"])("small",aa,"Purchase ID: "+Object(l["toDisplayString"])(e.installment.purchases_id),1),la,ca])]),Object(l["createElementVNode"])("div",sa,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",oa," £"+Object(l["toDisplayString"])(o.formattedPrice(e.installment?e.installment.installment_amount:0)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,na)])])])):Object(l["createCommentVNode"])("",!0)],64))),128)),s.cartItemsList.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ra,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>o.navCheckout()),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 trips-btn w-100 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Checkout ")])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ia,[s.isLoading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",da,"Loading......")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ma,"Cart is empty"))]))])],2)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])(["nav-item dropdown d-flex align-items-center",e.isRTL?"ps-2":"pe-2"])},[Object(l["createElementVNode"])("a",{href:"#",class:Object(l["normalizeClass"])(["p-0 nav-link lh-1",[a.color?a.color:"text-body",s.showMenu?"show":""]]),id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:t[2]||(t[2]=e=>s.showProfile=!s.showProfile)},pa,2),Object(l["createElementVNode"])("ul",{class:Object(l["normalizeClass"])(["px-2 py-3 dropdown-menu dropdown-menu-end me-sm-n4",s.showMenu?"show":""]),"aria-labelledby":"dropdownMenuButton",onClick:t[4]||(t[4]=e=>s.showMenu=!s.showMenu)},["staff"!==s.user.role&&"student"!==s.user.role&&"parent"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ua,[Object(l["createVNode"])(n,{to:{name:"Profile"}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("a",ha,[Object(l["createElementVNode"])("div",Oa,[Object(l["createElementVNode"])("div",ja,[Object(l["createElementVNode"])("span",ga,[fa,Object(l["createElementVNode"])("h6",Ea,[Object(l["createElementVNode"])("span",Va,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(s.user.first_name)+" "+Object(l["toDisplayString"])(s.user.last_name)+" ",1),Object(l["createElementVNode"])("small",Na,"("+Object(l["toDisplayString"])(o.userRole)+")",1)])])])])])])]),_:1})])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",ya,[Object(l["createElementVNode"])("a",xa,[Object(l["createElementVNode"])("div",va,[Object(l["createElementVNode"])("div",ka,[Object(l["createElementVNode"])("span",wa,[Sa,Object(l["createElementVNode"])("h6",Aa,[Object(l["createElementVNode"])("span",Ca,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(s.user.first_name)+" "+Object(l["toDisplayString"])(s.user.last_name)+" ",1),Object(l["createElementVNode"])("small",Ba,"("+Object(l["toDisplayString"])(o.userRole)+")",1)])])])])])])])),Object(l["createElementVNode"])("li",_a,[Object(l["createVNode"])(n,{to:{name:"balance"}},{default:Object(l["withCtx"])(()=>[Pa]),_:1})]),Object(l["createElementVNode"])("li",Ia,[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=(...e)=>o.signOut&&o.signOut(...e)),class:"dropdown-item border-radius-md",href:"javascript:;"},Ta)])],2)],2),Object(l["createElementVNode"])("li",Ma,[Object(l["createElementVNode"])("a",{href:"#",onClick:t[5]||(t[5]=(...e)=>o.toggleSidebar&&o.toggleSidebar(...e)),class:"p-0 nav-link text-body lh-1",id:"iconNavbarSidenav"},Fa)])])],2)])],16)}var La={name:"navbar",data(){return{cartItemsCount:null,branding_settings:{primary_color:"",secondary_color:"",logo:""},isLoading:!1,passwordStatus:"",cartItemsList:"",user:"",organization_name:"",showCart:!1,showMenu:!1,showProfile:!1}},props:["minNav","color"],created(){this.minNav},mounted(){this.getUser(),this.isUpdatedRecently(),this.getOrganizationName(),this.getUserRolePermissions(),this.$globalHelper.buttonColor(),this.countUserCartItems()},updated(){this.$globalHelper.buttonColor()},methods:{...Object(lt["b"])(["updateRemovedItem","updatePermissions","updateCartItemCounter"]),...Object(lt["d"])(["navbarMinimize","toggleConfigurator"]),toggleSidebar(){this.navbarMinimize()},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getUserPermissions(){let e=this.user.id;try{let t=await mt.get("getUserPermissions/"+e);t=t.data,this.formattPermissions(t)}catch(t){console.log(t)}},async getUserRolePermissions(){let e=this.user.id;try{let t=await mt.get("getUserRolePermissions/"+e);t=t.data,this.restructurePermissions(t)}catch(t){console.log(t)}},formattPermissions(e){let t=[];e.filter(e=>{t.push(e.permission_name)}),this.updatePermissions(t)},restructurePermissions(e){let t=[];e.filter(e=>{t.push(e.name)}),this.updatePermissions(t)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},isUpdatedRecently(){let e=localStorage.getItem("user");e=JSON.parse(e);const t=new Date(e.created_at),a=new Date(e.updated_at);this.passwordStatus=a>t},async signOut(){try{localStorage.removeItem("user"),localStorage.removeItem("token"),localStorage.removeItem("primary_color"),localStorage.removeItem("secondary_color"),localStorage.removeItem("logo"),this.$router.push({name:"SignIn"}),await mt.post("/logout",localStorage.getItem("token"))}catch(e){console.log(e)}},async getOrganizationName(){if("super_admin"==this.user.role)return;let e={user_id:this.user.id,role:this.user.role};try{const t=await mt.post("/getOrganizationName",e);this.organization_name=t.data.organization_name}catch(t){console.log(t)}},async getCartItems(){this.isLoading=!0,this.cartItemsList="";try{const e=await mt.get("/getUserCartItems");this.cartItemsList=e.data}catch(e){console.log(e)}this.isLoading=!1},async countUserCartItems(){try{let e=await mt.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},async removeItemFromCart(e){let t={item_id:e};try{await mt.post("/removeItemFromCart",t),this.removeItemFromList(e),this.countUserCartItems()}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItemsList.findIndex(t=>t.id===e);this.cartItemsList.splice(t,1),this.snackbarMsg("Item Removed Successfully")},navCheckout(){this.$router.push({name:"cart-checkout"})}},components:{},computed:{...Object(lt["c"])(["getCartItemCounter"]),...Object(lt["e"])(["isRTL","isAbsolute"]),currentRouteName(){return this.$route.name},userRole(){return"super_admin"==this.user.role?"Admin":"school_user"==this.user.role?"School":this.user.role}}};a("3027");const $a=ot()(La,[["render",Ua]]);var Ra=$a;const qa={class:"py-3 footer"};function Ha(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("footer",qa)}var Qa={name:"app-footer"};const Ya=ot()(Qa,[["render",Ha]]);var Ja=Ya,Wa={name:"App",components:{Sidenav:ft,Configurator:kt,Navbar:Ra,AppFooter:Ja},methods:{...Object(lt["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object(lt["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};const Xa=ot()(Wa,[["render",s]]);var Ka=Xa,Za=a("c0e2"),Ga=a.n(Za);const el={user:localStorage.getItem("user"),accessToken:localStorage.getItem("token"),userPermissions:[]},tl={getPermissions(e){return e.userPermissions}},al={setPermissions(e,t){e.userPermissions=t}},ll={updatePermissions({commit:e},t){e("setPermissions",t)}};var cl={state:el,mutations:al,actions:ll,getters:tl};const sl={organizationList:null},ol={getOrganizationList(e){return e.organizationList}},nl={setOrganizationList(e,t){e.organizationList=t}},rl={updateOrganizationList({commit:e},t){e("setOrganizationList",t)}};var il={state:sl,mutations:nl,actions:rl,getters:ol};const dl={cartItemCounter:null},ml={getCartItemCounter(e){return e.cartItemCounter}},bl={setCartItemCounter(e,t){e.cartItemCounter=t}},pl={updateCartItemCounter({commit:e},t){e("setCartItemCounter",t)}};var ul={state:dl,mutations:bl,actions:pl,getters:ml};const hl={brandingSetting:{primary_color:"null"!=localStorage.getItem("primary_color")?localStorage.getItem("primary_color"):"#010A21",secondary_color:"null"!=localStorage.getItem("secondary_color")?localStorage.getItem("secondary_color"):"#010A21",logo:localStorage.getItem("logo")}},Ol={getBrandingSetting(e){return e.brandingSetting}},jl={setBrandingSetting(e,t){e.brandingSetting=t}},gl={updateBrandingSetting({commit:e},t){e("setBrandingSetting",t)}};var fl={state:hl,mutations:jl,actions:gl,getters:Ol};const El={filterString:{filterBy:"",searchString:""}},Vl={getFilterString(e){return e.filterString}},Nl={setFilterString(e,t){e.filterString=t}},yl={updateFilterString({commit:e},t){e("setFilterString",t)}};var xl={state:El,mutations:Nl,actions:yl,getters:Vl},vl=Object(lt["a"])({modules:{auth:cl,organization:il,cart:ul,settings:fl,filterstate:xl},state:{hideConfigButton:!1,isPinned:!0,showConfig:!1,sidebarType:"bg-gradient-dark",isRTL:!1,color:"success",isNavFixed:!1,isAbsolute:!1,showNavs:!0,showSidenav:!0,showNavbar:!0,showFooter:!0,showMain:!0,isDarkMode:!1,navbarFixed:"position-sticky blur shadow-blur left-auto top-1 z-index-sticky px-0 mx-4",absolute:"position-absolute px-4 mx-0 w-100 z-index-2"},mutations:{toggleConfigurator(e){e.showConfig=!e.showConfig},navbarMinimize(e){const t=document.querySelector(".g-sidenav-show");t.classList.contains("g-sidenav-pinned")?(t.classList.remove("g-sidenav-pinned"),e.isPinned=!0):(t.classList.add("g-sidenav-pinned"),e.isPinned=!1)},navbarFixed(e){!1===e.isNavFixed?e.isNavFixed=!0:e.isNavFixed=!1},toggleEveryDisplay(e){e.showNavbar=!e.showNavbar,e.showSidenav=!e.showSidenav,e.showFooter=!e.showFooter},toggleHideConfig(e){e.hideConfigButton=!e.hideConfigButton},color(e,t){e.color=t}},actions:{setColor({commit:e},t){e("color",t)},test({commit:e},t){alert("TestHello"),e("color",t)}},getters:{}}),kl=a("6c02"),wl=a("bbe0"),Sl=a.n(wl);const Al={class:"py-4 container-fluid"},Cl={class:"row mb-4"},Bl={class:"col-lg-12 position-relative z-index-2"},_l={class:"row"},Pl={key:0,class:"col-lg-3 col-md-6 col-sm-6"},Il={class:"col-lg-3 col-md-6 col-sm-6"},Dl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Tl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Ml={class:"col-lg-3 col-md-6 col-sm-6"},zl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Fl={class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Ul={key:2,class:"col-lg-3 col-md-6 col-sm-6 mt-lg-0 mt-4"},Ll={key:0,class:"row mt-4"},$l=Object(l["createElementVNode"])("div",{class:"col-lg-12 col-md-12 col-sm-12"},[Object(l["createElementVNode"])("img",{src:Sl.a,style:{width:"100%",height:"95%","border-radius":"20px","box-shadow":"0px 0px 2px #CCCCCC"}})],-1),Rl=[$l];function ql(e,t,a,c,s,o){var n,r,i,d;const m=Object(l["resolveComponent"])("mini-statistics-card"),b=Object(l["resolveComponent"])("UserShop");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Al,[Object(l["createElementVNode"])("div",Cl,[Object(l["createElementVNode"])("div",Bl,[Object(l["createElementVNode"])("div",_l,["student"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[null!=s.studentHistory.fsm_balance||void 0!=s.studentHistory.fsm_balance?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Pl,[Object(l["createVNode"])(m,{title:{text:"FSM Balance",value:"£"+o.formattedPrice(null!==(n=s.studentHistory.fsm_balance)&&void 0!==n?n:0)},detail:"FSM Balance",icon:{name:"credit_card",color:"text-white",background:"primary"}},null,8,["title"])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Il,[Object(l["createVNode"])(m,{title:{text:"Current Balance",value:"£"+o.formattedPrice(null!==(r=s.studentHistory.current_balance)&&void 0!==r?r:0)},detail:"Current Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title"])]),Object(l["createElementVNode"])("div",Dl,[Object(l["createVNode"])(m,{title:{text:"Monthly",value:"£"+o.formattedPrice(null!==(i=s.studentHistory.last_month)&&void 0!==i?i:0)},detail:"This Month Transactions",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",Tl,[Object(l["createVNode"])(m,{title:{text:"Weekly",value:"£"+o.formattedPrice(null!==(d=s.studentHistory.last_week)&&void 0!==d?d:0)},detail:"This Week Transactions",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"parent"!==s.user.role&&"student"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("div",Ml,[Object(l["createVNode"])(m,{title:{text:o.isAdmin?"Total Figures":"Total Balance",value:"£"+o.formattedPrice(s.userBallance?s.userBallance:0)},detail:o.isAdmin?"Total Figures":"Total Balance",icon:{name:"credit_card",color:"text-white",background:"dark"}},null,8,["title","detail"])]),Object(l["createElementVNode"])("div",zl,[Object(l["createVNode"])(m,{title:{text:"Total Sites",value:s.totalSchool?s.totalSchool:0},detail:"Total Sites",icon:{name:"leaderboard",color:"text-white",background:"primary"}},null,8,["title"])]),Object(l["createElementVNode"])("div",Fl,[Object(l["createVNode"])(m,{title:{text:"Total Students",value:s.totalStudents?s.totalStudents:0},detail:"Total Students",icon:{name:"person",color:"text-white",background:"success"}},null,8,["title"])])],64)):Object(l["createCommentVNode"])("",!0),"parent"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ul,[Object(l["createVNode"])(m,{title:{text:"Transactions",value:"£"+o.formattedPrice(s.totalTransactions?s.totalTransactions:0)},detail:"Total Transactions",icon:{name:"weekend",color:"text-white",background:"info"}},null,8,["title"])])):Object(l["createCommentVNode"])("",!0)]),"student"!==s.user.role&&"staff"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ll,Rl)):Object(l["createCommentVNode"])("",!0),"staff"==s.user.role||"student"==s.user.role?(Object(l["openBlock"])(),Object(l["createBlock"])(b,{key:1})):Object(l["createCommentVNode"])("",!0)])])])}const Hl={class:"card-header p-3 pt-2"},Ql={class:"text-sm mb-0 text-capitalize"},Yl={class:"mb-0"},Jl=Object(l["createElementVNode"])("hr",{class:"dark horizontal my-0"},null,-1),Wl=["innerHTML"];function Xl(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["card mb-2",a.directionReverse?s.reverseDirection:""])},[Object(l["createElementVNode"])("div",Hl,[Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["icon icon-lg icon-shape shadow text-center border-radius-xl mt-n4 position-absolute",`bg-gradient-${a.icon.background} shadow-${a.icon.background}`])},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(["material-icons opacity-10",a.icon.color]),"aria-hidden":"true"},Object(l["toDisplayString"])(a.icon.name),3)],2),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["pt-1",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",Ql,Object(l["toDisplayString"])(a.title.text),1),Object(l["createElementVNode"])("h4",Yl,Object(l["toDisplayString"])(a.title.value),1)],2)]),Jl,Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["card-footer p-3",e.isRTL?"text-start":"text-end"])},[Object(l["createElementVNode"])("p",{class:"mb-0",innerHTML:a.detail},null,8,Wl)],2)],2)}var Kl={name:"MiniStatisticsCard",data(){return{reverseDirection:"flex-row-reverse justify-content-between"}},props:{title:{type:Object,required:!0,text:String,value:[Number,String]},detail:{type:String,default:""},icon:{type:Object,required:!0,name:String,color:String,background:String,default:()=>({color:"text-white",background:"success"})},directionReverse:{type:Boolean,default:!1}},computed:{...Object(lt["e"])(["isRTL"])}};const Zl=ot()(Kl,[["render",Xl]]);var Gl=Zl,ec=a("b8de"),tc=a.n(ec),ac=a("37f7"),lc=a.n(ac),cc=a("b107"),sc=a.n(cc),oc=a("2e77"),nc=a.n(oc),rc=a("3dfe"),ic=a.n(rc),dc=a("281f"),mc=a.n(dc),bc=a("350a"),pc=a.n(bc),uc=a("8202"),hc=a.n(uc),Oc=a("c7c0"),jc=a.n(Oc),gc=a("f35e"),fc=a.n(gc);const Ec={class:" py-4"},Vc={class:"row"},Nc={class:"col-12"},yc={class:"card my-4"},xc={class:"card-body px-0 pb-2"},vc={class:"table-responsive p-0"},kc=Object(l["createElementVNode"])("span",{class:""},[Object(l["createElementVNode"])("h6",{class:"ms-4 text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"ms-4 page-description"},[Object(l["createTextVNode"])(" In the Shop Item section, you can search and add items to your cart. Once you're ready, you can proceed to checkout and complete your purchase by "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("making a payment. This seamless process ensures a smooth shopping experience from selection to payment. ")])],-1),wc={class:"filter-container ms-4 mb-2"},Sc={style:{display:"flex"}},Ac=["value"],Cc={class:"card-body pt-1 p-3"},Bc={class:"container-fluid mt-1"},_c={class:"col-md-8"},Pc={class:"d-flex flex-column"},Ic={class:"d-flex"},Dc={class:"mb-3 text-sm"},Tc={key:0,style:{"font-size":"12px !important"},class:" text-sm ms-2"},Mc=["src"],zc={class:"trip-description mt-2"},Fc={class:"col-md-4"},Uc={class:"ms-auto text-start"},Lc={class:"me-3 trip-dates"},$c=Object(l["createElementVNode"])("br",null,null,-1),Rc={class:"d-flex  align-items-start text-success text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},qc=Object(l["createElementVNode"])("br",null,null,-1),Hc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},Qc={key:0,class:"text-success"},Yc={key:1,class:"text-danger"},Jc={style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"text-white fw-5 p-2"},Wc=Object(l["createElementVNode"])("span",{class:"text-warning"},"Active Payment Plan",-1),Xc=Object(l["createTextVNode"])(" ( "),Kc={key:0},Zc={key:1},Gc={key:2},es=Object(l["createTextVNode"])(" ) "),ts=Object(l["createElementVNode"])("br",null,null,-1),as=Object(l["createElementVNode"])("br",null,null,-1),ls=Object(l["createElementVNode"])("br",null,null,-1),cs={key:0},ss=Object(l["createElementVNode"])("br",null,null,-1),os={key:0,class:"mt-0"},ns=["onClick"],rs=Object(l["createElementVNode"])("br",null,null,-1),is={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},ds=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),ms=[ds],bs={class:"row"},ps={class:"col-md-12 col-lg-12"},us={class:"pagination-container"},hs={class:"entries-dropdown"},Os=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),js=["value"],gs={class:"pagination-wrapper"},fs={class:"pagination"},Es=["onClick"];function Vs(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ec,[Object(l["createElementVNode"])("div",Vc,[Object(l["createElementVNode"])("div",Nc,[Object(l["createElementVNode"])("div",yc,[Object(l["createElementVNode"])("div",xc,[Object(l["createElementVNode"])("div",vc,[Object(l["createElementVNode"])("div",null,[kc,Object(l["createElementVNode"])("div",wc,[Object(l["createElementVNode"])("span",Sc,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Ac))),128))],544),[[l["vModelSelect"],s.filterBy]])])])]),Object(l["createElementVNode"])("div",Cc,[Object(l["createElementVNode"])("div",Bc,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",_c,[Object(l["createElementVNode"])("div",Pc,[Object(l["createElementVNode"])("span",Ic,[Object(l["createElementVNode"])("h6",Dc,Object(l["toDisplayString"])(t.name),1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Tc,"("+Object(l["toDisplayString"])(t.product_type)+")",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,8,Mc),Object(l["createElementVNode"])("small",zc,Object(l["toDisplayString"])(t.detail),1)])]),Object(l["createElementVNode"])("div",Fc,[Object(l["createElementVNode"])("div",Uc,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Lc,"From "+Object(l["toDisplayString"])(o.formatDateString(t.valid_from))+" To "+Object(l["toDisplayString"])(o.formatDateString(t.valid_to)),1)]),$c,Object(l["createElementVNode"])("div",Rc," Price - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price)),1),qc,Object(l["createElementVNode"])("div",Hc,[t.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Qc,"Available")):Object(l["createCommentVNode"])("",!0),0==t.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Yc,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Jc,[Wc,Xc,"full_payment"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Kc,"Full Payment")):Object(l["createCommentVNode"])("",!0),"installments"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Zc,"Instalments")):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Gc,"Instalments And Deposit")):Object(l["createCommentVNode"])("",!0),es,ts,"installments"==t.payment_plan||"installments_and_deposit"==t.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:3},[Object(l["createElementVNode"])("span",null,"Total Installments: "+Object(l["toDisplayString"])(t.payment?t.payment.total_installments:""),1),as,Object(l["createElementVNode"])("span",null,"Amount Per Instalment: £"+Object(l["toDisplayString"])(o.formattedAmount(t.payment?t.payment.amount_per_installment:0)),1),ls,t.payment&&t.payment.initial_deposit?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",cs,"Initial Deposit: £"+Object(l["toDisplayString"])(o.formattedAmount(t.payment?t.payment.initial_deposit:0)),1)):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0)]),ss,t.quantity>0||null==t.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",os,[Object(l["createElementVNode"])("button",{onClick:e=>o.addToCart(t.id),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,ns)])):Object(l["createCommentVNode"])("",!0),rs])])]))),128))],64))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",is,ms)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",bs,[Object(l["createElementVNode"])("div",ps,[Object(l["createElementVNode"])("div",us,[Object(l["createElementVNode"])("div",hs,[Os,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.itemsPerPage=e),onChange:t[5]||(t[5]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,js))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",gs,[Object(l["createElementVNode"])("ul",fs,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,Es)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var Ns=a("3d20"),ys=a.n(Ns),xs=a("c1df"),vs=a.n(xs),ks=a("2ef0"),ws={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop"),this.$globalHelper.buttonColor()},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterShopItems,500)},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Name",allFields:["Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{...Object(lt["b"])(["updateCartItemCounter"]),confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getShopItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await mt.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await mt.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart"),this.countUserCartItems()}catch(l){console.log(l)}},async countUserCartItems(){try{let e=await mt.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=vs()(e),a=t.format("DD MMMM YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("b237");const Ss=ot()(ws,[["render",Vs]]);var As=Ss,Cs={name:"dashboard-default",data(){return{studentHistory:"",totalTransactions:"",totalSchool:"",totalStudents:"",user:"",userBallance:"",logoXD:tc.a,team1:pc.a,team2:hc.a,team3:jc.a,team4:fc.a,logoAtlassian:lc.a,logoSlack:sc.a,logoSpotify:nc.a,logoJira:ic.a,logoInvision:mc.a}},mounted(){this.getUser(),this.getStudentBalance(),this.getTotalSchools(),this.getTotalStudents(),this.getTotalTransactions(),this.getStudentHistory()},computed:{isAdmin(){return"staff"!==this.user.role||"student"!==this.user.role}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getStudentBalance(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e;try{let t=await mt.get("/getStudentBalance/"+e.id);t=t.data,this.userBallance=t}catch(t){console.log(t)}},async getStudentHistory(){if("student"==this.user.role)try{let e=await mt.get("/studentDashboard");e=e.data,this.studentHistory=e}catch(e){console.log(e)}},async getTotalSchools(){try{let e=await mt.get("/totalSchools");e=e.data,this.totalSchool=e}catch(e){console.log(e)}},async getTotalStudents(){try{let e=await mt.get("/getTotalStudents");e=e.data,this.totalStudents=e}catch(e){console.log(e)}},async getTotalTransactions(){try{let e=await mt.get("/getTotalTransactions");e=e.data,this.totalTransactions=e}catch(e){console.log(e)}}},components:{MiniStatisticsCard:Gl,UserShop:As}};const Bs=ot()(Cs,[["render",ql]]);var _s=Bs,Ps=a("40bd"),Is=a.n(Ps);const Ds={class:"container-fluid"},Ts=Object(l["createElementVNode"])("div",{class:"page-header min-height-300 border-radius-xl mt-4",style:{"background-image":"url('https://images.unsplash.com/photo-1531512073830-ba890ca4eba2?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80')"}},[Object(l["createElementVNode"])("span",{class:"mask bg-gradient-success opacity-6"})],-1),Ms={class:"card card-body mx-3 mx-md-4 mt-n6"},zs={class:"row gx-4"},Fs=Object(l["createElementVNode"])("div",{class:"col-auto"},[Object(l["createElementVNode"])("div",{class:"avatar avatar-xl position-relative"},[Object(l["createElementVNode"])("img",{src:Is.a,alt:"profile_image",class:"shadow-sm w-100 border-radius-lg"})])],-1),Us={class:"col-auto my-auto"},Ls={class:"h-100"},$s={class:"mb-1"},Rs={class:"d-flex"},qs={class:"mb-0 font-weight-normal text-sm"},Hs={class:"d-flex"},Qs={class:"text-xs"},Ys=Object(l["createElementVNode"])("div",{class:"mx-auto mt-3 col-lg-4 col-md-6 my-sm-auto ms-sm-auto me-sm-0"},[Object(l["createElementVNode"])("div",{class:"nav-wrapper position-relative end-0"})],-1),Js={class:"row"},Ws={class:"mt-3 row"},Xs={class:"col-12 col-md-6 col-xl-6 position-relative"},Ks={class:"card card-plain h-100"},Zs=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Profile Settings")],-1),Gs={class:"p-3 card-body"},eo={class:"list-group"},to={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},ao={class:"col-md-5 mx-auto bg-white new-pass p-2"},lo=Object(l["createElementVNode"])("label",null,"First Name",-1),co={key:0,class:"err-txt text-danger error-txt"},so=Object(l["createElementVNode"])("br",null,null,-1),oo=Object(l["createElementVNode"])("label",null,"Last Name",-1),no={key:1,class:"err-txt text-danger error-txt"},ro=Object(l["createElementVNode"])("br",null,null,-1),io=Object(l["createElementVNode"])("label",null,"Email",-1),mo={key:2,class:"err-txt text-danger error-txt"},bo=Object(l["createElementVNode"])("br",null,null,-1),po=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),uo={class:"mt-4 col-12 col-xl-6 mt-xl-0"},ho={class:"card card-plain h-100"},Oo=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Change Password")],-1),jo={class:"p-3 card-body"},go={class:"list-group"},fo={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Eo={class:"col-md-5 mx-auto bg-white new-pass p-2"},Vo=Object(l["createElementVNode"])("label",null,"Old Password",-1),No={key:0,class:"err-txt text-danger error-txt"},yo=Object(l["createElementVNode"])("br",null,null,-1),xo=Object(l["createElementVNode"])("label",null,"New Password",-1),vo={key:1,class:"err-txt text-danger error-txt"},ko=Object(l["createElementVNode"])("br",null,null,-1),wo=Object(l["createElementVNode"])("label",null,"Confirm New Password",-1),So={key:2,class:"err-txt text-danger error-txt"},Ao=Object(l["createElementVNode"])("br",null,null,-1);function Co(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ds,[Ts,Object(l["createElementVNode"])("div",Ms,[Object(l["createElementVNode"])("div",zs,[Fs,Object(l["createElementVNode"])("div",Us,[Object(l["createElementVNode"])("div",Ls,[Object(l["createElementVNode"])("h5",$s,Object(l["toDisplayString"])(s.user.first_name)+" "+Object(l["toDisplayString"])(s.user.last_name),1),Object(l["createElementVNode"])("span",Rs,[Object(l["createElementVNode"])("p",qs,"Role: "+Object(l["toDisplayString"])(s.user.role),1)]),Object(l["createElementVNode"])("span",Hs,[Object(l["createElementVNode"])("small",Qs,"Email: "+Object(l["toDisplayString"])(s.user.email?s.user.email:"-"),1)])])]),Ys]),Object(l["createElementVNode"])("div",Js,[Object(l["createElementVNode"])("div",Ws,[Object(l["createElementVNode"])("div",Xs,[Object(l["createElementVNode"])("div",Ks,[Zs,Object(l["createElementVNode"])("div",Gs,[Object(l["createElementVNode"])("ul",eo,[Object(l["createElementVNode"])("li",to,[Object(l["createElementVNode"])("div",ao,[lo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.updateData.first_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.updateData.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",co,"First Name is required")):Object(l["createCommentVNode"])("",!0),so,oo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.updateData.last_name=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.updateData.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",no,"Last Name is required")):Object(l["createCommentVNode"])("",!0),ro,io,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.updateData.email=e),id:"card-holder-name",type:"email",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.updateData.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mo,"Email is required")):Object(l["createCommentVNode"])("",!0),bo,Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>o.updateSettings()),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),po]),Object(l["createElementVNode"])("div",uo,[Object(l["createElementVNode"])("div",ho,[Oo,Object(l["createElementVNode"])("div",jo,[Object(l["createElementVNode"])("ul",go,[Object(l["createElementVNode"])("li",fo,[Object(l["createElementVNode"])("div",Eo,[Vo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.changePassword.old_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.changePassword.old_password]]),""!==s.passwordValidationForm&&""!==s.passwordValidationForm["old_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",No,"Old Password is required")):Object(l["createCommentVNode"])("",!0),yo,xo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.changePassword.new_password=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.changePassword.new_password]]),""!==s.passwordValidationForm&&""!==s.passwordValidationForm["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",vo,"New Password is required")):Object(l["createCommentVNode"])("",!0),ko,wo,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.changePassword.new_password_confirmation=e),id:"card-holder-name",type:"password",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.changePassword.new_password_confirmation]]),""!==s.passwordValidationForm&&""!==s.passwordValidationForm["new_password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",So,"Confirm Password is required")):Object(l["createCommentVNode"])("",!0),Ao,Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>o.changeUserPassword&&o.changeUserPassword(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Save ")])])])])])])])])])])}var Bo=a("2d39"),_o=a.n(Bo),Po=a("af17"),Io=a.n(Po),Do=a("6150"),To=a.n(Do),Mo=a("b34a"),zo=a.n(Mo),Fo=a("4753"),Uo=a.n(Fo),Lo=a("532f"),$o=a.n(Lo);function Ro(){var e=document.querySelectorAll(".nav-pills");function t(){e.forEach((function(e,t){var l=document.createElement("div"),c=e.querySelector("li:first-child .nav-link"),s=c.cloneNode();s.innerHTML="-",l.classList.add("moving-tab","position-absolute","nav-link"),l.appendChild(s),e.appendChild(l);e.getElementsByTagName("li").length;l.style.padding="0px",l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px, 0px, 0px)",l.style.transition=".5s ease",e.onmouseover=function(t){let c=a(t),s=c.closest("li");if(s){let t=Array.from(s.closest("ul").children),a=t.indexOf(s)+1;e.querySelector("li:nth-child("+a+") .nav-link").onclick=function(){l=e.querySelector(".moving-tab");let c=0;if(e.classList.contains("flex-column")){for(var o=1;o<=t.indexOf(s);o++)c+=e.querySelector("li:nth-child("+o+")").offsetHeight;l.style.transform="translate3d(0px,"+c+"px, 0px)",l.style.height=e.querySelector("li:nth-child("+o+")").offsetHeight}else{for(o=1;o<=t.indexOf(s);o++)c+=e.querySelector("li:nth-child("+o+")").offsetWidth;l.style.transform="translate3d("+c+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+a+")").offsetWidth+"px"}}}}}))}function a(e){return e=e||window.event,e.target||e.srcElement}setTimeout((function(){t()}),100),window.addEventListener("resize",(function(t){e.forEach((function(e,t){e.querySelector(".moving-tab").remove();var a=document.createElement("div"),l=e.querySelector(".nav-link.active").cloneNode();l.innerHTML="-",a.classList.add("moving-tab","position-absolute","nav-link"),a.appendChild(l),e.appendChild(a),a.style.padding="0px",a.style.transition=".5s ease";let c=e.querySelector(".nav-link.active").parentElement;if(c){let t=Array.from(c.closest("ul").children),l=t.indexOf(c)+1,o=0;if(e.classList.contains("flex-column")){for(var s=1;s<=t.indexOf(c);s++)o+=e.querySelector("li:nth-child("+s+")").offsetHeight;a.style.transform="translate3d(0px,"+o+"px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px",a.style.height=e.querySelector("li:nth-child("+s+")").offsetHeight}else{for(s=1;s<=t.indexOf(c);s++)o+=e.querySelector("li:nth-child("+s+")").offsetWidth;a.style.transform="translate3d("+o+"px, 0px, 0px)",a.style.width=e.querySelector("li:nth-child("+l+")").offsetWidth+"px"}}})),window.innerWidth<991?e.forEach((function(e,t){if(!e.classList.contains("flex-column")){e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),s=(c.indexOf(t),0);for(var a=1;a<=c.indexOf(t);a++)s+=e.querySelector("li:nth-child("+a+")").offsetHeight;var l=document.querySelector(".moving-tab");l.style.width=e.querySelector("li:nth-child(1)").offsetWidth+"px",l.style.transform="translate3d(0px,"+s+"px, 0px)"}})):e.forEach((function(e,t){if(e.classList.contains("on-resize")){e.classList.remove("flex-column","on-resize"),e.classList.add("flex-row");let t=e.querySelector(".nav-link.active").parentElement,c=Array.from(t.closest("ul").children),s=c.indexOf(t)+1,o=0;for(var a=1;a<=c.indexOf(t);a++)o+=e.querySelector("li:nth-child("+a+")").offsetWidth;var l=document.querySelector(".moving-tab");l.style.transform="translate3d("+o+"px, 0px, 0px)",l.style.width=e.querySelector("li:nth-child("+s+")").offsetWidth+"px"}}))})),window.innerWidth<991&&e.forEach((function(e,t){e.classList.contains("flex-row")&&(e.classList.remove("flex-row"),e.classList.add("flex-column","on-resize"))}))}var qo=a("4989"),Ho=a.n(qo);function Qo(){var e=[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));e.map((function(e){return new Ho.a.Tooltip(e)}))}var Yo=a("0644"),Jo=a.n(Yo),Wo={name:"profile-overview",data(){return{updateData:"",passwordValidationForm:"",formValidation:"",user:"",changePassword:{old_password:"",new_password:"",new_password_confirmation:""},showMenu:!1,sophie:_o.a,marie:Io.a,ivana:To.a,peterson:fc.a,nick:jc.a,img1:zo.a,team1:pc.a,team2:hc.a,team3:jc.a,team4:fc.a,img2:Uo.a,img3:$o.a}},components:{},mounted(){this.$store.state.isAbsolute=!0,Ro(),Qo(),this.getUser()},beforeUnmount(){this.$store.state.isAbsolute=!1},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,this.updateData=Jo()(this.user),"student"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||this.$router.go(-1)},async changeUserPassword(){if(this.validatePasswordForm())return;let e=localStorage.getItem("user");e=JSON.parse(e);let t={user_id:e.id,old_password:this.changePassword.old_password,new_password:this.changePassword.new_password,new_password_confirmation:this.changePassword.new_password_confirmation};if(t.new_password!=t.old_password)try{const e=await mt.post("/changePassword",t);this.snackbarMsg("Password changed successfully!"),localStorage.removeItem("user"),localStorage.removeItem("token"),this.$router.push({name:"SignIn"}),console.log(e)}catch(a){console.log(a)}else this.snackbarMsg("New password can not be the same as old password!","error")},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},validateForm(){let e=!1,t="";t=Jo()(this.updateData);for(let a in this.updateData)""!==this.updateData[a]&&void 0!==this.updateData[a]||"first_name"!=a&&"last_name"!=a&&"email"!=a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async updateSettings(){if(this.validateForm())return;let e={first_name:this.updateData.first_name,last_name:this.updateData.last_name,email:this.updateData.email};try{const t=await mt.post("/profileSettings",e);this.snackbarMsg("Profile Updated successfully!"),this.updateUserData(e),console.log(t)}catch(t){console.log(t)}},updateUserData(e){this.user.first_name=e.first_name,this.user.last_name=e.last_name,this.user.email=e.email;let t=localStorage.getItem("user"),a=JSON.parse(t);a.first_name=e.first_name,a.last_name=e.last_name,a.email=e.email,localStorage.setItem("user",JSON.stringify(a)),window.location.reload()},validatePasswordForm(){let e=!1,t="";t=Jo()(this.changePassword);for(let a in this.changePassword)""===this.changePassword[a]||void 0===this.changePassword[a]?(t[a]="is required",e=!0):t[a]="";return this.passwordValidationForm=t,e}}};a("40fa");const Xo=ot()(Wo,[["render",Co]]);var Ko=Xo,Zo=a("26be"),Go=a.n(Zo);Object(l["pushScopeId"])("data-v-25a54bb8");const en=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),tn={class:"container my-auto"},an={class:"row"},ln={class:"col-lg-4 col-md-8 col-12 mx-auto"},cn={class:"card z-index-0 fadeIn3 fadeInBottom"},sn=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),on={class:"card-body"},nn={key:0,class:"text-danger"},rn={class:"mb-3"},dn={key:0,class:"text-danger error-txt"},mn={class:"d-flex"},bn=["type"],pn={key:1,class:"text-danger error-txt"},un={class:"text-center"},hn=Object(l["createTextVNode"])("Sign in"),On={class:"mt-4 text-sm text-success text-center"},jn=Object(l["createTextVNode"])("Forgot Password ?"),gn=Object(l["createElementVNode"])("br",null,null,-1),fn=Object(l["createElementVNode"])("br",null,null,-1),En={class:"mt-3 d-flex justify-content-center"},Vn=Object(l["createElementVNode"])("img",{class:"me-1 mt-1",style:{width:"12px",height:"12px"},src:Go.a},null,-1),Nn=Object(l["createElementVNode"])("br",null,null,-1),yn={key:1,class:"mt-3"};function xn(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[en,Object(l["createElementVNode"])("div",tn,[Object(l["createElementVNode"])("div",an,[Object(l["createElementVNode"])("div",ln,[Object(l["createElementVNode"])("div",cn,[sn,Object(l["createElementVNode"])("div",on,[o.isManuall?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nn,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",rn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],o.credentials.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dn,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",mn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.credentials.password=e),placeholder:"Password",type:o.showPassword?"text":"password",label:"Password",name:"password"},null,8,bn),[[l["vModelDynamic"],o.credentials.password]]),Object(l["createElementVNode"])("span",{onClick:t[2]||(t[2]=(...e)=>n.togglePasswordVisibility&&n.togglePasswordVisibility(...e)),class:"eye-icon",style:{"margin-left":"-25px","margin-top":"7px"}},[Object(l["createElementVNode"])("i",{class:Object(l["normalizeClass"])(o.showPassword?"fas fa-eye":"fas fa-eye-slash")},null,2)])]),""!==o.formValidation&&""!==o.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pn,"Password is required")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",un,[Object(l["createVNode"])(i,{class:"my-4 mb-2 custom-signin-btn",onClick:n.signIn,style:{"background-color":"#573078 !important"},fullWidth:""},{default:Object(l["withCtx"])(()=>[hn]),_:1},8,["onClick"])])],64)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("p",On,[o.isManuall?(Object(l["openBlock"])(),Object(l["createBlock"])(d,{key:0,to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[jn]),_:1})):Object(l["createCommentVNode"])("",!0),gn,fn,Object(l["createElementVNode"])("span",En,[Vn,Object(l["createElementVNode"])("p",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin mslogin-link"},"SignIn with Microsoft")]),Nn,o.isManuall?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yn,[Object(l["createElementVNode"])("small",{onClick:t[4]||(t[4]=e=>o.isManuall=!0),class:"loginmanually mslogin-link"},"SignIn Manually")]))])])])])])])],4)],64)}function vn(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("nav",{class:Object(l["normalizeClass"])(["top-0 navbar navbar-expand-lg position-absolute z-index-3",a.isBlur?a.isBlur:"shadow-none my-2 navbar-transparent w-100"])},null,2)])}Object(l["popScopeId"])();var kn=a("190c"),wn=a.n(kn),Sn=a("52d6"),An=a.n(Sn),Cn={name:"navbar",data(){return{downArrWhite:wn.a,downArrBlack:An.a}},props:{btnBackground:String,isBlur:String,darkMode:{type:Boolean,default:!1}},computed:{darkModes(){return{"text-dark":this.darkMode}}}};const Bn=ot()(Cn,[["render",vn]]);var _n=Bn;function Pn(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{class:Object(l["normalizeClass"])(["btn mb-0",o.getClasses(a.variant,a.color,a.size,a.fullWidth,a.active)])},[Object(l["renderSlot"])(e.$slots,"default")],2)}var In={name:"MaterialButton",props:{color:{type:String,default:"success"},size:{type:String,default:"md"},variant:{type:String,default:"fill"},fullWidth:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},methods:{getClasses:(e,t,a,l,c)=>{let s,o,n,r;return s="gradient"===e?"bg-gradient-"+t:"outline"===e?"btn-outline-"+t:"btn-"+t,o=a?"btn-"+a:null,n=l?"w-100":null,r=c?"active":null,`${s} ${o} ${n} ${r}`}}};const Dn=ot()(In,[["render",Pn]]);var Tn=Dn,Mn={name:"sign-in",components:{Navbar:_n,MaterialButton:Tn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},async created(){},mounted(){},data(){return{isManuall:!1,unauthorized:!1,formValidation:"",showPassword:!1,credentials:{email:"",password:""}}},methods:{...Object(lt["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},togglePasswordVisibility(){this.showPassword=!this.showPassword},validateForm(){let e=!1,t="";t=Jo()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async signIn(){if(!this.validateForm())try{const e=await mt.post("/login",this.credentials);let t=e.data?e.data.user:null,a=e.data?e.data.access_token:null;localStorage.setItem("user",JSON.stringify(t)),localStorage.setItem("token",a);let l=e.data.primary_color,c=e.data.secondary_color,s=e.data.logo;localStorage.setItem("primary_color",l),localStorage.setItem("secondary_color",c),localStorage.setItem("logo",s);const o=this.$router.resolve({name:"/"}).href;window.location.href=o}catch(e){401==e.response.status&&(this.unauthorized=!0)}}}};a("7e48");const zn=ot()(Mn,[["render",xn],["__scopeId","data-v-25a54bb8"]]);var Fn=zn;Object(l["pushScopeId"])("data-v-406525b8");const Un=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),Ln={class:"container my-auto"},$n={class:"row"},Rn={class:"col-lg-4 col-md-8 col-12 mx-auto"},qn={class:"card z-index-0 fadeIn3 fadeInBottom"},Hn=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h4",{class:"text-white font-weight-bolder text-center mt-2 "}," Sign in ")])],-1),Qn={class:"card-body"},Yn={key:0,class:"text-danger"},Jn={class:"mb-3"},Wn={key:0,class:"text-danger error-txt"},Xn={class:"mb-3"},Kn={key:0,class:"text-danger error-txt"},Zn={class:"text-center"},Gn=Object(l["createTextVNode"])("Sign in"),er={class:"mt-4 text-sm text-success text-center"},tr=Object(l["createTextVNode"])("Forgot Password ?"),ar=Object(l["createElementVNode"])("br",null,null,-1),lr=Object(l["createElementVNode"])("br",null,null,-1),cr=Object(l["createElementVNode"])("small",{class:"mslogin"},"SignIn with Microsoft",-1);function sr(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[Un,Object(l["createElementVNode"])("div",Ln,[Object(l["createElementVNode"])("div",$n,[Object(l["createElementVNode"])("div",Rn,[Object(l["createElementVNode"])("div",qn,[Hn,Object(l["createElementVNode"])("div",Qn,[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Yn,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Jn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],o.credentials.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Wn,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Xn,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>o.credentials.password=e),placeholder:"Password",type:"password",label:"Password",name:"password"},null,512),[[l["vModelText"],o.credentials.password]]),""!==o.formValidation&&""!==o.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Kn,"Password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Zn,[Object(l["createVNode"])(i,{class:"my-4 mb-2",style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[Gn]),_:1})]),Object(l["createElementVNode"])("p",er,[Object(l["createVNode"])(d,{to:{name:"ForgotPassword"},class:"font-weight-bold",style:{color:"#573078"}},{default:Object(l["withCtx"])(()=>[tr]),_:1}),ar,lr,Object(l["createElementVNode"])("span",{onClick:t[3]||(t[3]=(...e)=>n.loginWithMicrosoft&&n.loginWithMicrosoft(...e)),class:"mslogin-link mt-3"},[Object(l["createElementVNode"])("img",{onClick:t[2]||(t[2]=(...t)=>e.MSSignIn&&e.MSSignIn(...t)),class:"me-2",style:{width:"12px",height:"12px"},src:Go.a}),cr])])])])])])])],4)],64)}Object(l["popScopeId"])();var or={name:"sign-in",components:{Navbar:_n,MaterialButton:Tn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},mounted(){const e=this.$route.query.code;e&&this.signIn(e)},data(){return{unauthorized:!1,formValidation:"",credentials:{email:"",password:""}}},methods:{...Object(lt["d"])(["toggleEveryDisplay","toggleHideConfig"]),loginWithMicrosoft(){window.location.href=this.$env_vars.BASE_URL+"/auth/redirect"},async SignOut(){await this.$msalInstance.logout({}).then(()=>{this.$emitter.emit("logout","logging out")}).catch(e=>{console.error(e)})},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})},async signIn(e){try{const t=await mt.post("/auth_callback",{code:e});let a=t.data?t.data.user:null,l=t.data?t.data.access_token:null;localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("token",l);let c=t.data.primary_color,s=t.data.secondary_color,o=t.data.logo;localStorage.setItem("primary_color",c),localStorage.setItem("secondary_color",s),localStorage.setItem("logo",o);const n=this.$router.resolve({name:"/"}).href;window.location.href=n}catch(t){500==t.response.status&&(this.snackbarMsg("user was not found in StudentPay Portal!"),window.location.href="https://login.microsoftonline.com/cb811789-d752-4ec2-8215-356e22c04d4f/oauth2/v2.0/logout?post_logout_redirect_uri="+encodeURIComponent("https://staging.student-pay.co.uk/sign-in"))}}}};a("c1d2");const nr=ot()(or,[["render",sr],["__scopeId","data-v-406525b8"]]);var rr=nr;const ir=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),dr={class:"container my-auto"},mr={class:"row"},br={class:"col-lg-4 col-md-8 col-12 mx-auto"},pr={class:"card z-index-0 fadeIn3 fadeInBottom"},ur=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:"border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Forgot Password")])],-1),hr={class:"card-body"},Or={key:0,class:"text-danger"},jr={key:0,class:"text-danger error-txt"},gr={key:1,class:"mb-3"},fr={key:0,class:"text-danger error-txt"},Er={class:"text-center"},Vr=Object(l["createTextVNode"])("Next"),Nr=Object(l["createElementVNode"])("p",{class:"mt-4 text-sm text-success text-center"},null,-1);function yr(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[ir,Object(l["createElementVNode"])("div",dr,[Object(l["createElementVNode"])("div",mr,[Object(l["createElementVNode"])("div",br,[Object(l["createElementVNode"])("div",pr,[ur,Object(l["createElementVNode"])("div",hr,[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Or,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",{class:Object(l["normalizeClass"])(["mb-3",{"mb-5 mt-5":!1===o.isOTP}])},[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.email=e),placeholder:"Email",type:"email",label:"Email",name:"email"},null,512),[[l["vModelText"],o.credentials.email]]),""!==o.formValidation&&""!==o.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jr,"email is required")):Object(l["createCommentVNode"])("",!0)],2),o.isOTP?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",gr,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.otp=e),id:"otp",placeholder:"otp",type:"otp",label:"OTP",name:"otp"},null,512),[[l["vModelText"],o.otp]]),""!==o.formValidation&&""!==o.formValidation["otp"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",fr,"otp is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Er,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.requestOtp,style:{"background-color":"#573078"},fullWidth:""},{default:Object(l["withCtx"])(()=>[Vr]),_:1},8,["onClick"])]),Nr])])])])])],4)],64)}var xr={name:"sign-in",components:{Navbar:_n,MaterialButton:Tn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{unauthorized:!1,isOTP:!1,formValidation:"",otp:"",credentials:{email:""}}},methods:{...Object(lt["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Jo()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async requestOtp(){if(this.isOTP)this.verifyOtp();else if(!this.validateForm())try{const e=await mt.post("/forgot_password",this.credentials);this.isOTP=!0,console.log(e)}catch(e){console.log(e)}},async verifyOtp(){if(this.validateForm())return;let e={email:"",otp:""};e.email=this.credentials.email,e.otp=this.otp;try{return await mt.post("/forgot_password_verify_otp",e),void this.$router.push({name:"ResetPassword",params:{email:this.credentials.email,otp:this.otp}})}catch(t){console.log(t)}}}};const vr=ot()(xr,[["render",yr]]);var kr=vr;const wr=Object(l["createElementVNode"])("span",{class:"mask bg-gradient-dark opacity-6"},null,-1),Sr={class:"container my-auto"},Ar={class:"row"},Cr={class:"col-lg-4 col-md-8 col-12 mx-auto"},Br={class:"card z-index-0 fadeIn3 fadeInBottom"},_r=Object(l["createElementVNode"])("div",{class:"card-header p-0 position-relative mt-n4 mx-3 z-index-2"},[Object(l["createElementVNode"])("div",{class:" border-radius-lg py-3 pe-1",style:{"background-color":"#573078"}},[Object(l["createElementVNode"])("img",{class:"ms-5",style:{width:"200px",height:"45px"},src:n.a}),Object(l["createElementVNode"])("h5",{class:"text-white text-center mt-2"},"Reset Password")])],-1),Pr={class:"card-body"},Ir={key:0,class:"text-danger"},Dr={class:"mb-3"},Tr={key:0,class:"text-danger error-txt"},Mr={class:"mb-3"},zr={key:0,class:"text-danger error-txt"},Fr={class:"text-center"},Ur=Object(l["createTextVNode"])("Reset"),Lr={class:"mt-4 text-sm text-success text-center"},$r=Object(l["createElementVNode"])("small",{class:"text-success text-gradient font-weight-bold"},"Go back to ",-1),Rr=Object(l["createTextVNode"])("SignIn");function qr(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("navbar"),i=Object(l["resolveComponent"])("material-button"),d=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(r,{btnBackground:"bg-gradient-success"}),Object(l["createElementVNode"])("div",{class:"page-header align-items-start min-vh-100",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center"}])},[wr,Object(l["createElementVNode"])("div",Sr,[Object(l["createElementVNode"])("div",Ar,[Object(l["createElementVNode"])("div",Cr,[Object(l["createElementVNode"])("div",Br,[_r,Object(l["createElementVNode"])("div",Pr,[o.unauthorized?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ir,"Incorrect Email or Password")):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Dr,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.credentials.new_password=e),placeholder:"password",type:"password",label:"Password",name:"pass"},null,512),[[l["vModelText"],o.credentials.new_password]]),""!==o.formValidation&&""!==o.formValidation["new_password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Tr,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Mr,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"otp","onUpdate:modelValue":t[1]||(t[1]=e=>o.credentials.new_password_confirmation=e),placeholder:"confirm password",type:"password",label:"Confirm Password",name:"password"},null,512),[[l["vModelText"],o.credentials.new_password_confirmation]]),""!==o.formValidation&&""!==o.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zr,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Fr,[Object(l["createVNode"])(i,{class:"my-4 mb-2",onClick:n.setNewPassword,variant:"gradient",color:"success",fullWidth:""},{default:Object(l["withCtx"])(()=>[Ur]),_:1},8,["onClick"])]),Object(l["createElementVNode"])("p",Lr,[$r,Object(l["createVNode"])(d,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold",style:{"background-color":"#573078"}},{default:Object(l["withCtx"])(()=>[Rr]),_:1})])])])])])])],4)],64)}var Hr={components:{Navbar:_n,MaterialButton:Tn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig()},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig()},data(){return{email:"",unauthorized:!1,formValidation:"",isOTP:!1,credentials:{email:"",otp:"",new_password:"",new_password_confirmation:""}}},methods:{...Object(lt["d"])(["toggleEveryDisplay","toggleHideConfig"]),validateForm(){let e=!1,t="";t=Jo()(this.credentials);for(let a in this.credentials)""==this.credentials[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async setNewPassword(){if(this.validateForm())return;this.credentials.email=this.$route.params.email,this.credentials.otp=this.$route.params.otp;let e=this.credentials;try{await mt.post("/set_new_password",e),this.$router.push({name:"SignIn"})}catch(t){console.log(t)}}}};const Qr=ot()(Hr,[["render",qr]]);var Yr=Qr;const Jr={class:"bg-white"},Wr=Object(l["createElementVNode"])("div",{class:"container top-0 position-sticky z-index-sticky"},[Object(l["createElementVNode"])("div",{class:"row"},[Object(l["createElementVNode"])("div",{class:"col-12"})])],-1),Xr={class:"mt-0 main-content"},Kr={class:"page-header min-vh-100"},Zr={class:"container"},Gr={class:"row"},ei={class:"col-6 d-lg-flex d-none h-100 my-auto pe-0 ps-0 position-absolute top-0 start-0 text-center justify-content-center flex-column"},ti={class:"col-xl-4 col-lg-5 col-md-7 d-flex flex-column ms-auto me-auto ms-lg-auto me-lg-5"},ai={class:"card card-plain"},li=Object(l["createElementVNode"])("div",{class:"pb-0 card-header bg-transparent mb-4"},[Object(l["createElementVNode"])("h4",{class:"font-weight-bolder"},"Sign Up"),Object(l["createElementVNode"])("p",{class:"mb-0"}," Enter your email and password to register ")],-1),ci={class:"card-body"},si={role:"form"},oi={class:"mb-3"},ni={class:"mb-3"},ri={class:"mb-3"},ii=Object(l["createTextVNode"])(" I agree the "),di=Object(l["createElementVNode"])("a",{href:"../../../pages/privacy.html",class:"text-dark font-weight-bolder"},"Terms and Conditions",-1),mi={class:"text-center"},bi=Object(l["createTextVNode"])("Sign Up"),pi={class:"px-1 pt-0 text-center card-footer px-lg-2"},ui={class:"mx-auto mb-4 text-sm"},hi=Object(l["createTextVNode"])(" Don't have an account? "),Oi=Object(l["createTextVNode"])("Sign In");function ji(e,t,c,s,o,n){const r=Object(l["resolveComponent"])("material-input"),i=Object(l["resolveComponent"])("material-checkbox"),d=Object(l["resolveComponent"])("material-button"),m=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Jr,[Wr,Object(l["createElementVNode"])("main",Xr,[Object(l["createElementVNode"])("section",null,[Object(l["createElementVNode"])("div",Kr,[Object(l["createElementVNode"])("div",Zr,[Object(l["createElementVNode"])("div",Gr,[Object(l["createElementVNode"])("div",ei,[Object(l["createElementVNode"])("div",{class:"position-relative h-100 m-3 px-7 border-radius-lg d-flex flex-column justify-content-center",style:Object(l["normalizeStyle"])([{backgroundImage:"url("+a("6a07")+")"},{"background-size":"cover","background-repeat":"no-repeat","background-position":"center",width:"100%"}])},null,4)]),Object(l["createElementVNode"])("div",ti,[Object(l["createElementVNode"])("div",ai,[li,Object(l["createElementVNode"])("div",ci,[Object(l["createElementVNode"])("form",si,[Object(l["createElementVNode"])("div",oi,[Object(l["createVNode"])(r,{id:"name",type:"text",label:"Name",name:"name",size:"lg"})]),Object(l["createElementVNode"])("div",ni,[Object(l["createVNode"])(r,{id:"email",type:"email",label:"Email",name:"email",size:"lg"})]),Object(l["createElementVNode"])("div",ri,[Object(l["createVNode"])(r,{id:"password",type:"password",label:"Password",name:"password",size:"lg"})]),Object(l["createVNode"])(i,{id:"flexCheckDefault",class:"font-weight-light",checked:""},{default:Object(l["withCtx"])(()=>[ii,di]),_:1}),Object(l["createElementVNode"])("div",mi,[Object(l["createVNode"])(d,{class:"mt-4",variant:"gradient",color:"success",fullWidth:"",size:"lg"},{default:Object(l["withCtx"])(()=>[bi]),_:1})])])]),Object(l["createElementVNode"])("div",pi,[Object(l["createElementVNode"])("p",ui,[hi,Object(l["createVNode"])(m,{to:{name:"SignIn"},class:"text-success text-gradient font-weight-bold"},{default:Object(l["withCtx"])(()=>[Oi]),_:1})])])])])])])])])])])}const gi=["id","type","name","value","placeholder","isRequired","disabled"];function fi(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["input-group",`input-group-${a.variant} ${o.getStatus(a.error,a.success)}`])},[Object(l["createElementVNode"])("label",{class:Object(l["normalizeClass"])("static"===a.variant?"":"form-label")},Object(l["toDisplayString"])(a.label),3),Object(l["createElementVNode"])("input",{id:a.id,type:a.type,class:Object(l["normalizeClass"])(["form-control",o.getClasses(a.size)]),name:a.name,value:a.value,placeholder:a.placeholder,isRequired:a.isRequired,disabled:a.disabled},null,10,gi)],2)}function Ei(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}if(0!=document.querySelectorAll(".input-group").length){var Vi=document.querySelectorAll("input.form-control");Vi.forEach(e=>Ei(e,{onfocus:"focused(this)",onfocusout:"defocused(this)"}))}function Ni(){for(var e=document.querySelectorAll("input"),t=0;t<e.length;t++)e[t].hasAttribute("value")&&e[t].parentElement.classList.add("is-filled"),e[t].addEventListener("focus",(function(e){this.parentElement.classList.add("is-focused")}),!1),e[t].onkeyup=function(e){""!=this.value?this.parentElement.classList.add("is-filled"):this.parentElement.classList.remove("is-filled")},e[t].addEventListener("focusout",(function(e){""!=this.value&&this.parentElement.classList.add("is-filled"),this.parentElement.classList.remove("is-focused")}),!1)}var yi={name:"MaterialInput",props:{variant:{type:String,default:"outline"},label:{type:String,default:""},size:{type:String,default:"default"},success:{type:Boolean,default:!1},error:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:{type:String,default:""},id:{type:String,required:!0},value:{type:String,default:""},placeholder:{type:String,default:""},type:{type:String,default:"text"},isRequired:{type:Boolean,default:!1}},mounted(){Ni()},methods:{getClasses:e=>{let t;return t=e?"form-control-"+e:null,t},getStatus:(e,t)=>{let a;return a=t?"is-valid":e?"is-invalid":null,a}}};const xi=ot()(yi,[["render",fi]]);var vi=xi;const ki={class:"form-check p-0"},wi=["id","name","checked"],Si=["for"];function Ai(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ki,[Object(l["createElementVNode"])("input",{id:a.id,class:"form-check-input",type:"checkbox",name:a.name,checked:a.checked},null,8,wi),Object(l["createElementVNode"])("label",{for:a.id,class:"custom-control-label"},[Object(l["renderSlot"])(e.$slots,"default")],8,Si)])}var Ci={name:"MaterialCheckbox",props:{name:{type:String,default:""},id:{type:String,default:""},checked:Boolean}};const Bi=ot()(Ci,[["render",Ai]]);var _i=Bi;const Pi=document.getElementsByTagName("body")[0];var Ii={name:"sign-up",components:{MaterialInput:vi,MaterialCheckbox:_i,MaterialButton:Tn},beforeMount(){this.toggleEveryDisplay(),this.toggleHideConfig(),Pi.classList.remove("bg-gray-100")},beforeUnmount(){this.toggleEveryDisplay(),this.toggleHideConfig(),Pi.classList.add("bg-gray-100")},methods:{...Object(lt["d"])(["toggleEveryDisplay","toggleHideConfig"])}};const Di=ot()(Ii,[["render",ji]]);var Ti=Di;const Mi={class:"container-fluid"},zi={class:"row"},Fi={class:"col-12"},Ui={class:"card"},Li={class:"d-flex justify-content-between border-radius-lg pt-4"},$i=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"SITES",-1),Ri=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),qi=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:" me-4 page-description"},[Object(l["createTextVNode"])(" In the Sites section, you can manage school by adding, editing, or deleting them. Additionally, you can track and update "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" the number of teachers and students associated with each site. This functionality ensures accurate and up-to-date information about each site. ")])],-1),Hi={class:"card-body px-0 pb-2"},Qi={class:"table-responsive p-0"},Yi={class:"table align-items-center mb-0"},Ji=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Staff "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),Wi={key:0},Xi=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),Ki=[Xi],Zi={class:"align-middle text-center text-sm"},Gi={class:"text-xs font-weight-bold mb-0"},ed={class:"d-flex"},td={class:"text-xs font-weight-bold mb-0"},ad=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),ld={class:"text-xs font-weight-bold mb-0"},cd={class:"text-xs font-weight-bold mb-0"},sd={class:"align-middle text-center"},od={class:"text-secondary text-xs font-weight-bold"},nd={class:"align-middle text-center"},rd={class:"text-secondary text-xs font-weight-bold"},id={class:"align-middle text-center"},dd={class:"text-secondary text-xs font-weight-bold"},md={class:"align-middle text-center text-sm"},bd={class:"badge badge-sm bg-gradient-success"},pd={class:"align-middle text-center"},ud=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),hd=["onClick"];function Od(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Mi,[Object(l["createElementVNode"])("div",zi,[Object(l["createElementVNode"])("div",Fi,[Object(l["createElementVNode"])("div",Ui,[Object(l["createElementVNode"])("div",Li,[$i,o.userPermissions.create_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-school"}},{default:Object(l["withCtx"])(()=>[Ri]),_:1})):Object(l["createCommentVNode"])("",!0)]),qi,Object(l["createElementVNode"])("div",Hi,[Object(l["createElementVNode"])("div",Qi,[Object(l["createElementVNode"])("table",Yi,[Ji,Object(l["createElementVNode"])("tbody",null,[0===s.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Wi,Ki)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Zi,[Object(l["createElementVNode"])("p",Gi,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",ed,[Object(l["createElementVNode"])("p",td,Object(l["toDisplayString"])(e.title),1),ad])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",ld,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",cd,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",sd,[Object(l["createElementVNode"])("span",od,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",nd,[Object(l["createElementVNode"])("span",rd,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",id,[Object(l["createElementVNode"])("span",dd,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",md,[Object(l["createElementVNode"])("span",bd,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",pd,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_site?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[ud]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_site?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,hd)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var jd={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{allSchools:"",schools:6,user:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await mt.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await mt.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("0b3c");const gd=ot()(jd,[["render",Od]]);var fd=gd;const Ed={class:"container-fluid"},Vd={class:"row"},Nd={class:"col-12"},yd={class:"card"},xd=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"ARCHIVED SITES")],-1),vd=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:" me-4 page-description"},[Object(l["createTextVNode"])(" In the Archived Sites section, you can view and restore archived school locations. The details displayed include the student count and teacher count "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" for each archived site. This allows you to manage and review historical site data effectively. ")])],-1),kd={class:"card-body px-0 pb-2"},wd=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),Sd=Object(l["createTextVNode"])(" Bulk Restore "),Ad=[wd,Sd],Cd={class:"table-responsive p-0"},Bd={class:"table align-items-center mb-0"},_d={class:""},Pd={class:"form-check",style:{"margin-left":"-20px"}},Id=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Dd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID ",-1),Td=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site Name ",-1),Md=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),zd=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country ",-1),Fd=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation ",-1),Ud=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Teachers ",-1),Ld=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Students ",-1),$d=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),Rd={key:0},qd=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),Hd=[qd],Qd={class:"align-middle text-center text-sm"},Yd={class:"form-check"},Jd=["checked","onChange"],Wd=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Xd={class:"align-middle text-center text-sm"},Kd={class:"text-xs font-weight-bold mb-0"},Zd={class:"d-flex"},Gd={class:"text-xs font-weight-bold mb-0"},em=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),tm={class:"text-xs font-weight-bold mb-0"},am={class:"text-xs font-weight-bold mb-0"},lm={class:"align-middle text-center"},cm={class:"text-secondary text-xs font-weight-bold"},sm={class:"align-middle text-center"},om={class:"text-secondary text-xs font-weight-bold"},nm={class:"align-middle text-center"},rm={class:"text-secondary text-xs font-weight-bold"},im={class:"align-middle text-center text-sm"},dm={class:"badge badge-sm bg-gradient-success"};function mm(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ed,[Object(l["createElementVNode"])("div",Vd,[Object(l["createElementVNode"])("div",Nd,[Object(l["createElementVNode"])("div",yd,[xd,vd,Object(l["createElementVNode"])("div",kd,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[0]||(t[0]=e=>o.confirmAction("restore"))},Ad),Object(l["createElementVNode"])("div",Cd,[Object(l["createElementVNode"])("table",Bd,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",_d,[Object(l["createElementVNode"])("div",Pd,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[1]||(t[1]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),Id])]),Dd,Td,Md,zd,Fd,Ud,Ld,$d])]),Object(l["createElementVNode"])("tbody",null,[0===s.allSchools.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Rd,Hd)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Qd,[Object(l["createElementVNode"])("div",Yd,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.id),onChange:t=>o.selectRecord(e.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,Jd),Wd])]),Object(l["createElementVNode"])("td",Xd,[Object(l["createElementVNode"])("p",Kd,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"settings-school",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",Zd,[Object(l["createElementVNode"])("p",Gd,Object(l["toDisplayString"])(e.title),1),em])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",tm,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",am,Object(l["toDisplayString"])(e.country),1)]),Object(l["createElementVNode"])("td",lm,[Object(l["createElementVNode"])("span",cm,Object(l["toDisplayString"])(e.organization.name),1)]),Object(l["createElementVNode"])("td",sm,[Object(l["createElementVNode"])("span",om,Object(l["toDisplayString"])(e.teachers_count),1)]),Object(l["createElementVNode"])("td",nm,[Object(l["createElementVNode"])("span",rm,Object(l["toDisplayString"])(e.students_count),1)]),Object(l["createElementVNode"])("td",im,[Object(l["createElementVNode"])("span",dm,Object(l["toDisplayString"])(e.status),1)])]))),128))])])])])])])])])}var bm={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getAllSchools(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_site")},data(){return{selectall:!1,selectedRecords:[],allSchools:"",schools:6,user:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{confirmAction(e){ys.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&"restore"==e&&this.bulkRestore()})},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await mt.post("/bulkRestoreSchools",e);this.snackbarMsg(t.data.message),this.getAllSchools()}else this.snackbarMsg("Error: data not selected")},selectAll(){this.selectedRecords=[],this.allSchools.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteSchool(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllSchools(){try{let e="/archivedSchools";"organization_admin"==this.user.role&&(e="/archivedSchools/"+this.user.id);const t=await mt.get(e);this.allSchools=t.data}catch(e){console.log(e)}},async deleteSchool(e){try{await mt.delete("/deleteSchool/"+e),this.removeSchoolFromList(e),this.snackbarMsg("School Deleted")}catch(t){console.log(t)}},removeSchoolFromList(e){const t=this.allSchools.findIndex(t=>t.id===e);this.allSchools.splice(t,1)}}};a("ca92");const pm=ot()(bm,[["render",mm]]);var um=pm;Object(l["pushScopeId"])("data-v-057bb13a");const hm={class:"container-fluid py-4"},Om={class:"row"},jm={class:"col-12"},gm={class:"card my-4"},fm={class:"d-flex justify-content-between  border-radius-lg pt-4 "},Em=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Site",-1),Vm=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 px-4 py-2 border-radius-lg"}," Back ",-1),Nm={class:"card-body px-0 pb-2"},ym={class:"table-responsive p-0"},xm={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},vm={key:0,class:"mb-3 change-pass-alert"},km=Object(l["createElementVNode"])("br",null,null,-1),wm={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},Sm={class:"form-bg container p-4 ms-2"},Am={class:"card card-plain"},Cm={class:"card-body"},Bm={role:"form"},_m={class:"mb-1"},Pm=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),Im={key:0,class:"text-danger error-txt"},Dm={class:"mb-1"},Tm=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),Mm={key:0,class:"text-danger error-txt"},zm={class:"mb-1"},Fm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),Um={key:0,class:"text-danger error-txt"},Lm={class:"mb-1"},$m=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),Rm={key:0,class:"text-danger error-txt"},qm={class:"mb-1"},Hm=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),Qm={key:0,class:"text-danger error-txt"},Ym={class:"mb-1"},Jm=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),Wm=Object(l["createElementVNode"])("br",null,null,-1),Xm=["value"],Km={key:0,class:"text-danger error-txt"},Zm={class:"mb-1"},Gm=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),eb=Object(l["createElementVNode"])("br",null,null,-1),tb=["value"],ab={key:0,class:"text-danger error-txt"},lb={class:"mb-1"},cb=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),sb={key:0,class:"text-danger error-txt"},ob={class:"mb-1"},nb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),rb={key:0,class:"text-danger error-txt"},ib={class:"mb-1"},db=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),mb=Object(l["createElementVNode"])("br",null,null,-1),bb=["value"],pb={key:0,class:"text-danger error-txt"},ub={class:"mt-4 d-flex justify-content-center"};function hb(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hm,[Object(l["createElementVNode"])("div",Om,[Object(l["createElementVNode"])("div",jm,[Object(l["createElementVNode"])("div",gm,[Object(l["createElementVNode"])("div",fm,[Em,Object(l["createVNode"])(n,{to:{name:"list-schools"}},{default:Object(l["withCtx"])(()=>[Vm]),_:1})]),Object(l["createElementVNode"])("div",Nm,[Object(l["createElementVNode"])("div",ym,[Object(l["createElementVNode"])("div",xm,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",vm,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),km]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",wm,[Object(l["createElementVNode"])("div",Sm,[Object(l["createElementVNode"])("div",Am,[Object(l["createElementVNode"])("div",Cm,[Object(l["createElementVNode"])("form",Bm,[Object(l["createElementVNode"])("div",_m,[Pm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],s.newSchool.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Im,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Dm,[Tm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],s.newSchool.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Mm,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zm,[Fm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newSchool.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Um,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Lm,[$m,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],s.newSchool.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Rm,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qm,[Hm,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newSchool.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qm,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Ym,[Jm,Wm,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Xm))),128))],512),[[l["vModelSelect"],s.newSchool.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Km,"Organisation is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Zm,[Gm,eb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,tb))),128))],512),[[l["vModelSelect"],s.newSchool.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ab,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lb,[cb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>s.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newSchool.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",sb,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ob,[nb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>s.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],s.newSchool.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rb,"ZIP code is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ib,[db,mb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,bb))),128))],512),[[l["vModelSelect"],s.newSchool.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pb,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ub,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>o.saveNewSchool&&o.saveNewSchool(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var Ob={name:"",components:{},mounted(){this.getUser(),this.getOrganizations(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_site");let e=!1,t="";t=Jo()(this.newSchool);for(let a in this.newSchool)""!==this.newSchool[a]&&void 0!==this.newSchool[a]||"organization_id"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewSchool(){if(!this.validateForm())try{let e="/createSchool";"organization_admin"==this.user.role&&(e="/createSchool/"+this.user.id),await mt.post(e,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Saved Successfuly"),this.isError=!1}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}},async getOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("de13");const jb=ot()(Ob,[["render",hb],["__scopeId","data-v-057bb13a"]]);var gb=jb;Object(l["pushScopeId"])("data-v-8fc9cd78");const fb={class:"container-fluid py-4"},Eb={class:"row"},Vb={class:"col-12"},Nb={class:"card my-4"},yb={class:"d-flex justify-content-between border-radius-lg pt-4"},xb=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Site",-1),vb=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),kb={class:"card-body px-0 pb-2"},wb={class:"table-responsive p-0"},Sb={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Ab={key:0,class:"mb-3 change-pass-alert"},Cb=Object(l["createElementVNode"])("br",null,null,-1),Bb={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},_b={class:"form-bg container p-4 ms-2"},Pb={class:"card card-plain"},Ib={class:"card-body"},Db={role:"form"},Tb={class:"mb-1"},Mb=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),zb={key:0,class:"text-danger error-txt"},Fb={class:"mb-1"},Ub=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),Lb={key:0,class:"text-danger error-txt"},$b={class:"mb-1"},Rb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),qb={key:0,class:"text-danger error-txt"},Hb={class:"mb-1"},Qb=Object(l["createElementVNode"])("label",{class:"input-label",for:"website"},"Website",-1),Yb={key:0,class:"text-danger error-txt"},Jb={class:"mb-1"},Wb=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),Xb={key:0,class:"text-danger error-txt"},Kb={key:0,class:"mb-1"},Zb=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),Gb=Object(l["createElementVNode"])("br",null,null,-1),ep=["value"],tp={key:0,class:"text-danger error-txt"},ap={class:"mb-1"},lp=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),cp=Object(l["createElementVNode"])("br",null,null,-1),sp=["value"],op={key:0,class:"text-danger error-txt"},np={class:"mb-1"},rp=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),ip={key:0,class:"text-danger error-txt"},dp={class:"mb-1"},mp=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Zip Code",-1),bp={key:0,class:"text-danger error-txt"},pp={class:"mb-1"},up=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Status",-1),hp=Object(l["createElementVNode"])("br",null,null,-1),Op=["value"],jp={key:0,class:"text-danger error-txt"},gp={class:"mt-4 d-flex justify-content-center"};function fp(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",fb,[Object(l["createElementVNode"])("div",Eb,[Object(l["createElementVNode"])("div",Vb,[Object(l["createElementVNode"])("div",Nb,[Object(l["createElementVNode"])("div",yb,[xb,Object(l["createVNode"])(n,{to:{name:"list-schools"}},{default:Object(l["withCtx"])(()=>[vb]),_:1})]),Object(l["createElementVNode"])("div",kb,[Object(l["createElementVNode"])("div",wb,[Object(l["createElementVNode"])("div",Sb,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ab,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Cb]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Bb,[Object(l["createElementVNode"])("div",_b,[Object(l["createElementVNode"])("div",Pb,[Object(l["createElementVNode"])("div",Ib,[Object(l["createElementVNode"])("form",Db,[Object(l["createElementVNode"])("div",Tb,[Mb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newSchool.title=e),type:"text",placeholder:"Site Name",name:"name"},null,512),[[l["vModelText"],s.newSchool.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zb,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Fb,[Ub,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newSchool.email=e),type:"email",placeholder:"Email",name:"email"},null,512),[[l["vModelText"],s.newSchool.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Lb,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$b,[Rb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newSchool.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newSchool.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",qb,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Hb,[Qb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newSchool.website=e),type:"url",placeholder:"Website",name:"website"},null,512),[[l["vModelText"],s.newSchool.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Yb,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Jb,[Wb,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newSchool.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newSchool.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xb,"Address is required")):Object(l["createCommentVNode"])("",!0)]),"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Kb,[Zb,Gb,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newSchool.organization_id=e),id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,ep))),128))],512),[[l["vModelSelect"],s.newSchool.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",tp,"Organization is required")):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",ap,[lp,cp,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newSchool.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,sp))),128))],512),[[l["vModelSelect"],s.newSchool.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",op,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",np,[rp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>s.newSchool.city=e),type:"text",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newSchool.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ip,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",dp,[mp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>s.newSchool.zip=e),type:"text",placeholder:"Zip Code",name:"zip"},null,512),[[l["vModelText"],s.newSchool.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bp,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pp,[up,hp,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.newSchool.status=e),class:"select-box",id:"name",type:"select",placeholder:"Zip",name:"zip"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Op))),128))],512),[[l["vModelSelect"],s.newSchool.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",jp,"Status is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",gp,[Object(l["createElementVNode"])("button",{onClick:t[10]||(t[10]=Object(l["withModifiers"])((...e)=>o.updateData&&o.updateData(...e),["prevent"])),style:{"font-size":"12px","background-color":"#573078"},class:"btn ms-3 text-white fw-5 border-0 px-5 py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])])}Object(l["popScopeId"])();var Ep={name:"",components:{},mounted(){this.getUser(),this.editSchool(),this.getOrganizations(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_site")},data(){return{isError:!1,validationErrors:"",user:"",formValidation:"",availableCountries:["UK","USA","Canada"],schoolData:"",newSchool:{organization_id:"",title:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:""},availableSchools:["active","pending","blocked"],availableOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_site");let e=!1,t="";t=Jo()(this.newSchool);for(let a in this.newSchool)""===this.newSchool[a]||void 0===this.newSchool[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editSchool(){let e=this.$route.params.id;try{const t=await mt.get("/editSchool/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newSchool.organization_id=t.organization_id,this.newSchool.website=t.website,this.newSchool.title=t.title,this.newSchool.website=t.website,this.newSchool.email=t.email,this.newSchool.phone=t.phone,this.newSchool.country=t.country,this.newSchool.city=t.city,this.newSchool.state=t.state,this.newSchool.zip=t.zip,this.newSchool.address=t.address,this.newSchool.status=t.status,this.newSchool.description=t.description)},async updateData(){if(this.validateForm())return;let e=this.$route.params.id;try{let t="/updateSchool/"+e;"organization_admin"==this.user.role&&(t="/updateSchool/"+e+"/"+this.user.id),await mt.put(t,this.newSchool),this.$router.push({name:"list-schools"}),this.snackbarMsg("School Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("9c6f");const Vp=ot()(Ep,[["render",fp],["__scopeId","data-v-8fc9cd78"]]);var Np=Vp;Object(l["pushScopeId"])("data-v-1ae2038f");const yp={class:"row"},xp={class:"col text-end"},vp={class:"row"},kp={class:"col-12 col-md-6 col-xl-6 position-relative"},wp={class:"card card-plain h-100"},Sp=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Branding Settings")],-1),Ap={class:"p-3 card-body"},Cp={class:"list-group"},Bp={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},_p={class:"col-md-5 mx-auto bg-white new-pass p-2"},Pp=Object(l["createElementVNode"])("label",null,"Primary Color",-1),Ip=Object(l["createElementVNode"])("br",null,null,-1),Dp=Object(l["createElementVNode"])("label",null,"Secondary Color",-1),Tp=Object(l["createElementVNode"])("br",null,null,-1),Mp=Object(l["createElementVNode"])("label",null,"Logo",-1),zp=["src"],Fp=Object(l["createElementVNode"])("br",null,null,-1),Up=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1),Lp={class:"col-12 col-md-5 col-xl-6 position-relative"},$p={class:"card card-plain h-100"},Rp=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Finance Coordinator Email")],-1),qp={class:"p-3 card-body"},Hp={class:"list-group"},Qp={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Yp={class:"col-md-5 mx-auto bg-white new-pass p-2"},Jp=Object(l["createElementVNode"])("label",null,"Email",-1),Wp=Object(l["createElementVNode"])("br",null,null,-1);function Xp(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",yp,[Object(l["createElementVNode"])("div",xp,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ")])]),Object(l["createElementVNode"])("div",vp,[Object(l["createElementVNode"])("div",kp,[Object(l["createElementVNode"])("div",wp,[Sp,Object(l["createElementVNode"])("div",Ap,[Object(l["createElementVNode"])("ul",Cp,[Object(l["createElementVNode"])("li",Bp,[Object(l["createElementVNode"])("div",_p,[Pp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.branding.primaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.branding.primaryColor]]),Ip,Dp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.branding.SecondaryColor=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.branding.SecondaryColor]]),Tp,Mp,Object(l["createElementVNode"])("input",{onChange:t[3]||(t[3]=(...e)=>o.onFileChange&&o.onFileChange(...e)),id:"card-holder-name",type:"file",class:"bg-white w-100  mb-2"},null,32),s.imageUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:s.imageUrl,height:"60",width:"60",alt:"Selected Image"},null,8,zp)):Object(l["createCommentVNode"])("",!0),Fp,Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=e=>o.updateBranding()),style:{"font-size":"12px","background-color":"#573078"},class:"btn p-2 mb-3 mt-2 trips-btn  text-white fw-5 border-radius-lg"},"Update Settings ")])])])])]),Up]),Object(l["createElementVNode"])("div",Lp,[Object(l["createElementVNode"])("div",$p,[Rp,Object(l["createElementVNode"])("div",qp,[Object(l["createElementVNode"])("ul",Hp,[Object(l["createElementVNode"])("li",Qp,[Object(l["createElementVNode"])("div",Yp,[Jp,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.finance_coordinator_email=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.finance_coordinator_email]]),Wp,Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=e=>o.updateFinanceCoordiantorEmail()),style:{"font-size":"12px","background-color":"#573078"},class:"btn save-pass-btn p-2 mb-3 trips-btn  text-white fw-5 border-radius-lg"},"Save ")])])])])])])])])}Object(l["popScopeId"])();var Kp={mounted(){this.getSettings(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"])},data(){return{dataLoaded:!1,userCards:"",imageUrl:null,selectedFile:null,finance_coordinator_email:null,branding:{primaryColor:"",SecondaryColor:"",logo:""}}},methods:{addCard(){let e=this.$route.params.id;this.$router.push({name:"card-school",params:{id:e}})},onFileChange(e){const t=e.target.files[0];t&&(this.imageUrl=URL.createObjectURL(t),this.selectedFile=t)},async getSettings(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e);try{let e=await mt.post("/getSettings",t);this.branding.primaryColor=Jo()(e.data.primary_color),this.branding.SecondaryColor=Jo()(e.data.secondary_color),this.imageUrl=this.$env_vars.BASE_URL+e.data.logo,this.finance_coordinator_email=e.data.finance_coordinator_email}catch(a){console.log(a)}},async updateBranding(){let e=this.$route.params.id;const t=new FormData;t.append("logo",this.selectedFile),t.append("primary_color",this.branding.primaryColor),t.append("secondary_color",this.branding.SecondaryColor),t.append("school_id",e);try{await mt.post("/storebranding",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async updateFinanceCoordiantorEmail(){let e=this.$route.params.id;const t=new FormData;t.append("school_id",e),t.append("finance_coordinator_email",this.finance_coordinator_email);try{await mt.post("/updateFinanceCoordiantorEmail",t),this.snackbarMsg("Saved Successfuly")}catch(a){console.log(a)}},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t,type:"school"};try{const e=await mt.post("/getPaymentMethods",a);this.userCards=e.data.data,this.dataLoaded=!0}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await mt.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})}}};a("a13f");const Zp=ot()(Kp,[["render",Xp],["__scopeId","data-v-1ae2038f"]]);var Gp=Zp;const eu={class:"card"},tu=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),au={class:"card-body"},lu=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2"></div></div>',3),cu={class:"row d-flex justify-content-center"};function su(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",eu,[tu,Object(l["createElementVNode"])("div",au,[lu,Object(l["createElementVNode"])("div",cu,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>o.submitPaymentMethod&&o.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"btn me-3 w-20 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var ou={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.$globalHelper.buttonColor()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),s=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),s.parentNode.insertBefore(c,s)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=this.$route.params.id,a={card_token:e,school_id:t};try{await mt.post("/createSchoolCard",a),this.$router.push({name:"settings-school",params:{id:t}})}catch(l){console.log(l),this.snackbarMsg("Something Went Wrong")}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("1504");const nu=ot()(ou,[["render",su]]);var ru=nu;const iu={class:"container-fluid"},du={class:"row"},mu={class:"col-12"},bu={class:"card px-3"},pu={class:"d-flex justify-content-between  border-radius-lg pt-4"},uu=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STUDENTS",-1),hu=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-2 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),Ou=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee student accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each student. ")])],-1),ju={class:"filter-container"},gu={class:"row"},fu={class:"col-6"},Eu={style:{display:"flex"}},Vu=["value"],Nu={class:"col-12 col-md-3 col-sm-6",style:{"padding-top":"10px"}},yu=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),xu=Object(l["createTextVNode"])(" Export To XLS "),vu=[yu,xu],ku={class:"col-12 col-md-3 col-sm-6",style:{"padding-top":"10px"}},wu=Object(l["createElementVNode"])("i",{class:"fas fa-credit-card payment-icon me-1"},null,-1),Su=Object(l["createTextVNode"])(" Bulk Topup "),Au=[wu,Su],Cu={class:"card-body px-0 pb-2"},Bu={class:"table-responsive p-0 student-table"},_u={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"0px !important"}},Pu={class:"thead"},Iu={class:"pe-5"},Du={class:"form-check",style:{"margin-left":"0px !important"}},Tu=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Mu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),zu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),Fu=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),Uu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),Lu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," FSM ",-1),$u=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Balance ",-1),Ru={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},qu={key:1,class:"text-center text-uppercase text-xxs font-weight-bolder"},Hu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),Qu=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),Yu={key:0},Ju=Object(l["createElementVNode"])("td",{colspan:"11",class:"text-center"}," No data available. ",-1),Wu=[Ju],Xu={class:"text-sm"},Ku={class:"form-check",style:{"margin-left":"17px !important"}},Zu=["checked","onChange"],Gu=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),eh={class:"align-middle text-center text-sm"},th={class:"text-xs font-weight-bold mb-0"},ah={class:"text-xs font-weight-bold mb-0"},lh={class:"text-xs font-weight-bold mb-0"},ch={class:"text-xs mb-0",style:{"font-size":"8px"}},sh={class:"align-middle text-center"},oh={class:"text-secondary text-xs font-weight-bold"},nh={class:"align-middle text-center"},rh={class:"align-middle text-center"},ih={class:"text-secondary text-xs font-weight-bold"},dh={key:0,class:"align-middle text-center"},mh=["onClick"],bh={key:1,class:"align-middle text-center"},ph=["onClick"],uh={class:"align-middle text-center text-sm"},hh={class:"badge badge-sm bg-gradient-success"},Oh={class:"align-middle text-center"},jh=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),gh=["onClick"],fh={class:"row"},Eh={class:"col-md-12 col-lg-12"},Vh={class:"pagination-container"},Nh={class:"entries-dropdown"},yh=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),xh=["value"],vh={class:"pagination-wrapper"},kh={class:"pagination"},wh=["onClick"];function Sh(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("BulkTopup");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iu,[Object(l["createElementVNode"])("div",du,[Object(l["createElementVNode"])("div",mu,[Object(l["createElementVNode"])("div",bu,[Object(l["createElementVNode"])("div",pu,[uu,o.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-student"}},{default:Object(l["withCtx"])(()=>[hu]),_:1})):Object(l["createCommentVNode"])("",!0)]),Ou,Object(l["createElementVNode"])("div",null,[Object(l["createVNode"])(r,{show:s.showModal,task:e.task,onClose:t[0]||(t[0]=e=>s.showModal=!1),onUpdateTask:o.updateAmount},null,8,["show","task","onUpdateTask"]),Object(l["createElementVNode"])("div",ju,[Object(l["createElementVNode"])("div",gu,[Object(l["createElementVNode"])("div",fu,[Object(l["createElementVNode"])("span",Eu,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"ms-2 input-box filter-box",onKeyup:t[1]||(t[1]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[2]||(t[2]=e=>s.searchString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.searchString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[3]||(t[3]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[4]||(t[4]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Vu))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",Nu,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.exportTableToXLS())},vu)]),Object(l["createElementVNode"])("div",ku,[o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>s.showModal=!0)},Au)):Object(l["createCommentVNode"])("",!0)])])])]),Object(l["createElementVNode"])("div",Cu,[Object(l["createElementVNode"])("div",Bu,[Object(l["createElementVNode"])("table",_u,[Object(l["createElementVNode"])("thead",Pu,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",Iu,[Object(l["createElementVNode"])("div",Du,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),Tu])]),Mu,zu,Fu,Uu,Lu,$u,o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",Ru," Wallet ")):Object(l["createCommentVNode"])("",!0),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",qu," Topup ")):Object(l["createCommentVNode"])("",!0),Hu,Qu])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",Yu,Wu)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Xu,[Object(l["createElementVNode"])("div",Ku,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.user.id),onChange:t=>o.selectRecord(e.user_id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,Zu),Gu])]),Object(l["createElementVNode"])("td",eh,[Object(l["createElementVNode"])("p",th,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",ah,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",lh,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",ch,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",sh,[Object(l["createElementVNode"])("span",oh,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",nh,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["text-secondary text-xs font-weight-bold",null===e.fsm_amount?"text-danger":"text-success"])},Object(l["toDisplayString"])(null!==e.fsm_amount?"£"+o.formattedPrice(e.fsm_amount):"No FSM"),3)]),Object(l["createElementVNode"])("td",rh,[Object(l["createElementVNode"])("span",ih,"£"+Object(l["toDisplayString"])(o.formattedPrice(e.user.balance?e.user.balance.ballance:0)),1)]),o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",dh,[Object(l["createElementVNode"])("i",{onClick:t=>o.gotoBallance(e.user.id),class:"hover-pointer fas fa-donate fs-5 me-2"},null,8,mh)])):Object(l["createCommentVNode"])("",!0),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",bh,[Object(l["createElementVNode"])("i",{onClick:t=>o.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,ph)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",uh,[Object(l["createElementVNode"])("span",hh,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",Oh,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_student?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-student",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[jh]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,gh)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",fh,[Object(l["createElementVNode"])("div",Eh,[Object(l["createElementVNode"])("div",Vh,[Object(l["createElementVNode"])("div",Nh,[yh,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,xh))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",vh,[Object(l["createElementVNode"])("ul",kh,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,wh)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])}Object(l["pushScopeId"])("data-v-268f943f");const Ah={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},Ch={class:"modal-dialog modal-dialog-centered"},Bh={class:"modal-content"},_h={class:"modal-header"},Ph=Object(l["createElementVNode"])("h5",{class:"h5 modal-title"},"Bulk Topup",-1),Ih=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),Dh=[Ih],Th={class:"pt-4 modal-body"},Mh=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),zh={class:"mb-4 input-group"},Fh=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),Uh={key:0,class:"alert alert-success"},Lh={class:"text-end"};function $h(e,t,a,c,s,o){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Ah,[Object(l["createElementVNode"])("div",Ch,[Object(l["createElementVNode"])("div",Bh,[Object(l["createElementVNode"])("div",_h,[Ph,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),"aria-label":"Close"},Dh)]),Object(l["createElementVNode"])("div",Th,[Mh,Object(l["createElementVNode"])("div",zh,[Fh,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>s.addedBalance=e),class:"form-control",placeholder:"Topup amount",type:"number",min:"0"},null,512),[[l["vModelText"],s.addedBalance]])]),s.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Uh,Object(l["toDisplayString"])(s.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Lh,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>o.saveChanges&&o.saveChanges(...e)),class:"m-1 btn btn-primary"}," Topup "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var Rh={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},mounted(){this.$globalHelper.buttonColor()},computed:{},data(){return{addedBalance:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},saveChanges(){this.$emit("update-task",this.addedBalance),this.closeModal(),this.addedBalance=null}}};a("30fe");const qh=ot()(Rh,[["render",$h],["__scopeId","data-v-268f943f"]]);var Hh=qh,Qh=a("25ca"),Yh={name:"tables",mounted(){this.setColor(),this.getUser(),this.getFilterString.filterBy?(this.filterBy=this.getFilterString.filterBy,this.searchString=this.getFilterString.searchString,this.debouncedSearch()):this.getAllStudents(),this.$globalHelper.buttonColor()},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterStudents,500)},updated(){this.$permissions.redirectIfNotAllowed("view_student"),this.$globalHelper.buttonColor()},components:{BulkTopup:Hh},beforeRouteLeave(e,t,a){if("payment_account"!==e.name&&"balance"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Name",searchString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(lt["c"])(["getBrandingSetting","getFilterString"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(lt["b"])(["updateFilterString"]),topUps(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/payment_account/"+e)},gotoBallance(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/balance/"+e)},exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"students_table.xlsx")},async updateAmount(e){this.topUpAmount=e;let t=[];this.selectedRecords.filter(e=>{e.value&&t.push(e.id)});let a={topup_amount:this.topUpAmount,students:t};if(t.length&&null!=this.topUpAmount)try{const e=await mt.post("/bulkTopUp",a);this.snackbarMsg(e.data.message),this.getAllStudents(),this.selectedRecords=[],this.topUpAmount=null,this.selectall=!1}catch(l){console.log(l)}else this.$snackbar.add({type:"error",text:"Please select the students and enter amount!",background:"white"})},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t?t.value=!1:this.selectedRecords.push({id:e,value:!0})},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.searchString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.searchString)return void this.getAllStudents();let e={type:this.filterBy,value:this.searchString,status:"active"};try{const t=await mt.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await mt.post("getAllStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await mt.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("ed1c");const Jh=ot()(Yh,[["render",Sh]]);var Wh=Jh;const Xh={class:"container-fluid"},Kh={class:"row"},Zh={class:"col-12"},Gh={class:"card px-3"},eO=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-2"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED-STUDENTS"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Every archived student can be found in this table. Here, you can manage archived student accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),tO={class:"card-body px-0 pb-2"},aO={class:"filter-container mb-1",style:{"margin-top":"-11px"}},lO={class:"row",style:{width:"100%"}},cO={class:"col-4"},sO={style:{display:"flex"}},oO=["value"],nO={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"10px"}},rO=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon"},null,-1),iO=Object(l["createTextVNode"])(" Export To XLS "),dO=[rO,iO],mO={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"10px"}},bO=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon"},null,-1),pO=Object(l["createTextVNode"])(" Bulk Restore "),uO=[bO,pO],hO={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"10px"}},OO=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon"},null,-1),jO=Object(l["createTextVNode"])(" Bulk Delete "),gO=[OO,jO],fO={class:"table-responsive p-0 student-table"},EO={ref:"table",class:"table align-items-center mb-0",style:{"margin-left":"0px !important"}},VO={class:""},NO={class:"form-check",style:{"margin-left":"-20px"}},yO=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),xO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," MIFARE ID ",-1),vO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID ",-1),kO=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),wO=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site ",-1),SO=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),AO={key:0},CO=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),BO=[CO],_O={class:"align-middle text-center text-sm"},PO={class:"form-check"},IO=["checked","onChange"],DO=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),TO={class:"align-middle text-center text-sm"},MO={class:"text-xs font-weight-bold mb-0"},zO={class:"text-xs font-weight-bold mb-0"},FO={class:"text-xs font-weight-bold mb-0"},UO={class:"text-xs mb-0",style:{"font-size":"8px"}},LO={class:"align-middle text-center"},$O={class:"text-secondary text-xs font-weight-bold"},RO={class:"align-middle text-center text-sm"},qO={class:"badge badge-sm bg-gradient-success"},HO={class:"row"},QO={class:"col-md-12 col-lg-12"},YO={class:"pagination-container"},JO={class:"entries-dropdown"},WO=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),XO=["value"],KO={class:"pagination-wrapper"},ZO={class:"pagination"},GO=["onClick"];function ej(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Xh,[Object(l["createElementVNode"])("div",Kh,[Object(l["createElementVNode"])("div",Zh,[Object(l["createElementVNode"])("div",Gh,[eO,Object(l["createElementVNode"])("div",tO,[Object(l["createElementVNode"])("div",aO,[Object(l["createElementVNode"])("div",lO,[Object(l["createElementVNode"])("div",cO,[Object(l["createElementVNode"])("span",sO,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"ms-2 input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,oO))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",nO,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},dO)]),Object(l["createElementVNode"])("div",mO,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.confirmAction("restore"))},uO)]),Object(l["createElementVNode"])("div",hO,[o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.confirmAction("delete"))},gO)):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",fO,[Object(l["createElementVNode"])("table",EO,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",VO,[Object(l["createElementVNode"])("div",NO,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),yO])]),xO,vO,kO,wO,SO])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStudents.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",AO,BO)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",_O,[Object(l["createElementVNode"])("div",PO,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.user.id),onChange:t=>o.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,IO),DO])]),Object(l["createElementVNode"])("td",TO,[Object(l["createElementVNode"])("p",MO,Object(l["toDisplayString"])(e.mifare_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",zO,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",FO,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1),Object(l["createElementVNode"])("p",UO,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",LO,[Object(l["createElementVNode"])("span",$O,Object(l["toDisplayString"])(e.school?e.school.title:"-"),1)]),Object(l["createElementVNode"])("td",RO,[Object(l["createElementVNode"])("span",qO,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",HO,[Object(l["createElementVNode"])("div",QO,[Object(l["createElementVNode"])("div",YO,[Object(l["createElementVNode"])("div",JO,[WO,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,XO))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",KO,[Object(l["createElementVNode"])("ul",ZO,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,GO)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])}var tj={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStudents(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_student")},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterStudents,500)},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,selectall:!1,selectedRecords:[],filterBy:"Name",seachString:"",allFields:["Student Id","MIFare Id","Name","Email"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"archived_students.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await mt.post("/bulkDeleteStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await mt.post("/bulkRestoreStudents",e);this.snackbarMsg(t.data.message),this.getAllStudents()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){ys.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await mt.post("/filterStudent",e);this.allStudents=t.data.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async getAllStudents(e=null){try{let t={user_id:this.user.id,role:this.user.role,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await mt.post("archivedStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.total,this.currentPage=a.data.current_page,this.perPage=a.per_page,this.totalPages=a.data.last_page}catch(t){console.log(t)}},async deleteStudent(e){try{await mt.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("50df");const aj=ot()(tj,[["render",ej]]);var lj=aj;Object(l["pushScopeId"])("data-v-6a0120de");const cj={class:"container-fluid py-4"},sj={class:"row"},oj={class:"col-12"},nj={class:"card my-4"},rj={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},ij=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Student",-1),dj=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),mj={class:"card-body px-0 pb-2"},bj={class:"table-responsive p-0"},pj={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},uj={key:0,class:"mb-3 change-pass-alert"},hj=Object(l["createElementVNode"])("br",null,null,-1),Oj={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},jj={class:"form-bg container p-4"},gj=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),fj={class:"card card-plain"},Ej={class:"card-body"},Vj={role:"form"},Nj={class:"mb-1"},yj=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),xj={key:0,class:"text-danger error-txt"},vj={class:"mb-1"},kj=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),wj={key:0,class:"text-danger error-txt"},Sj={class:"mb-1"},Aj=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Cj={key:0,class:"text-danger error-txt"},Bj={class:"mb-1"},_j=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Pj={key:0,class:"text-danger error-txt"},Ij={class:"mb-1"},Dj=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Tj={key:0,class:"text-danger error-txt"},Mj={class:"mb-1"},zj=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Fj=Object(l["createElementVNode"])("br",null,null,-1),Uj=["value"],Lj={key:0,class:"text-danger error-txt"},$j={class:"mb-1"},Rj=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),qj=Object(l["createElementVNode"])("br",null,null,-1),Hj=["value"],Qj={key:0,class:"text-danger error-txt"},Yj={class:"mb-1"},Jj=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Wj=Object(l["createElementVNode"])("br",null,null,-1),Xj=["value"],Kj={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Zj={class:""};function Gj(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",cj,[Object(l["createElementVNode"])("div",sj,[Object(l["createElementVNode"])("div",oj,[Object(l["createElementVNode"])("div",nj,[Object(l["createElementVNode"])("div",rj,[ij,Object(l["createVNode"])(n,{to:{name:"list-students"}},{default:Object(l["withCtx"])(()=>[dj]),_:1})]),Object(l["createElementVNode"])("div",mj,[Object(l["createElementVNode"])("div",bj,[Object(l["createElementVNode"])("div",pj,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",uj,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),hj]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Oj,[Object(l["createElementVNode"])("div",jj,[gj,Object(l["createElementVNode"])("div",fj,[Object(l["createElementVNode"])("div",Ej,[Object(l["createElementVNode"])("form",Vj,[Object(l["createElementVNode"])("div",Nj,[yj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStudent.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",xj,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",vj,[kj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStudent.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",wj,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Sj,[Aj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStudent.student_id=e),type:"text",placeholder:"Student ID",name:"student_id"},null,512),[[l["vModelText"],s.newStudent.student_id]]),""!==s.formValidation&&""!==s.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Cj,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Bj,[_j,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStudent.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],s.newStudent.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Pj,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Ij,[Dj,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStudent.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Tj,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Mj,[zj,Fj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,Uj))),128))],512),[[l["vModelSelect"],s.newStudent.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Lj,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$j,[Rj,qj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Hj))),128))],512),[[l["vModelSelect"],s.newStudent.fsm]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qj,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Yj,[Jj,Wj,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Xj))),128))],512),[[l["vModelSelect"],s.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",Kj,[Object(l["createElementVNode"])("div",Zj,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.saveNewStudent&&o.saveNewStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Student")])])])])])])])])])}Object(l["popScopeId"])();var eg={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_student")},computed:{formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{selected:null,fsm:[!1,!0],availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",multiValue:"",newStudent:{mifare_id:"",school_id:"",student_id:"",attribute_id:"",attributes:[],first_name:"",last_name:"",email:"",status:"",fsm:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_student");let e=!1,t="";t=Jo()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&void 0!==this.newStudent[a]||"attribute_id"===a||"date_of_birth"===a||"add_amount"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStudent(){if(!this.validateForm())try{await mt.post("/createStudent",this.newStudent),this.isError=!1,this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await mt.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("26db");const tg=ot()(eg,[["render",Gj],["__scopeId","data-v-6a0120de"]]);var ag=tg;Object(l["pushScopeId"])("data-v-1d405672");const lg={class:"container-fluid py-4"},cg={class:"row"},sg={class:"col-12"},og={class:"card my-4"},ng={class:"d-flex justify-content-between border-radius-lg pt-4"},rg=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Student",-1),ig=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),dg={class:"card-body px-0 pb-2"},mg={class:"table-responsive p-0"},bg={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},pg={key:0,class:"mb-3 change-pass-alert"},ug=Object(l["createElementVNode"])("br",null,null,-1),hg={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Og={class:"form-bg container p-4"},jg=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),gg={class:"card card-plain"},fg={class:"card-body"},Eg={role:"form"},Vg={class:"mb-1"},Ng=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),yg={key:0,class:"text-danger error-txt"},xg={class:"mb-1"},vg=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),kg={key:0,class:"text-danger error-txt"},wg={class:"mb-1"},Sg=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Ag={key:0,class:"text-danger error-txt"},Cg={class:"mb-1"},Bg=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Student ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),_g={key:0,class:"text-danger error-txt"},Pg={class:"mb-1"},Ig=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Dg={key:0,class:"text-danger error-txt"},Tg={class:"mb-1"},Mg=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),zg=Object(l["createElementVNode"])("br",null,null,-1),Fg=["value"],Ug={key:0,class:"text-danger error-txt"},Lg={class:"mb-1"},$g=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Free School Meal (FSM) "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Rg=Object(l["createElementVNode"])("br",null,null,-1),qg=["value"],Hg={key:0,class:"text-danger error-txt"},Qg={class:"mb-1"},Yg=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),Jg={class:"mb-1"},Wg=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Xg=Object(l["createElementVNode"])("br",null,null,-1),Kg=["value"],Zg={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},Gg={class:"form-bg container p-4"},ef=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),tf=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),af={class:"card card-plain"},lf={class:"card-body"},cf={role:"form"},sf={class:"mb-1"},of=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),nf={class:"mb-1"},rf=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),df={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},mf={class:""};function bf(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lg,[Object(l["createElementVNode"])("div",cg,[Object(l["createElementVNode"])("div",sg,[Object(l["createElementVNode"])("div",og,[Object(l["createElementVNode"])("div",ng,[rg,Object(l["createVNode"])(n,{to:{name:"list-students"}},{default:Object(l["withCtx"])(()=>[ig]),_:1})]),Object(l["createElementVNode"])("div",dg,[Object(l["createElementVNode"])("div",mg,[Object(l["createElementVNode"])("div",bg,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pg,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),ug]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",hg,[Object(l["createElementVNode"])("div",Og,[jg,Object(l["createElementVNode"])("div",gg,[Object(l["createElementVNode"])("div",fg,[Object(l["createElementVNode"])("form",Eg,[Object(l["createElementVNode"])("div",Vg,[Ng,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStudent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStudent.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yg,"first name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",xg,[vg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStudent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStudent.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",kg,"last name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",wg,[Sg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStudent.mifare_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStudent.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ag," MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Cg,[Bg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStudent.student_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStudent.student_id]]),""!==s.formValidation&&""!==s.formValidation["student_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_g," student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Pg,[Ig,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStudent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStudent.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Dg,"email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Tg,[Mg,zg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStudent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,Fg))),128))],512),[[l["vModelSelect"],s.newStudent.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ug,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Lg,[$g,Rg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newStudent.fsm=e),id:"fsm",type:"select",placeholder:"FSM",name:"fsm"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.fsm,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,qg))),128))],512),[[l["vModelSelect"],s.newStudent.fsm]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Hg,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Qg,[Yg,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[7]||(t[7]=e=>s.newStudent.add_amount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],s.newStudent.add_amount]])]),Object(l["createElementVNode"])("div",Jg,[Wg,Xg,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.newStudent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Kg))),128))],512),[[l["vModelSelect"],s.newStudent.status]])])])])])])]),Object(l["createElementVNode"])("div",Zg,[Object(l["createElementVNode"])("div",Gg,[ef,tf,Object(l["createElementVNode"])("div",af,[Object(l["createElementVNode"])("div",lf,[Object(l["createElementVNode"])("form",cf,[Object(l["createElementVNode"])("div",sf,[of,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[9]||(t[9]=e=>s.newStudent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newStudent.password]])]),Object(l["createElementVNode"])("div",nf,[rf,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[10]||(t[10]=e=>s.newStudent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newStudent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",df,[Object(l["createElementVNode"])("div",mf,[Object(l["createElementVNode"])("button",{onClick:t[11]||(t[11]=(...e)=>o.updateStudent&&o.updateStudent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var pf={name:"",components:{},mounted(){this.getUser(),this.editStudent(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_student")},computed:{formattedAmount:{get(){return parseFloat(this.newStudent.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.add_amount=t}},formattedBalance:{get(){return this.newStudent.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStudent.balance=t}}},data(){return{availableCountries:["UK","USA","Canada"],user:"",formValidation:"",isError:!1,validationErrors:"",fsm:[!1,!0],newStudent:{school_id:"",student_id:"",add_amount:"",mifare_id:"",first_name:"",last_name:"",email:"",status:"",password:"",password_confirmation:"",fsm:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_student");let e=!1,t="";t=Jo()(this.newStudent);for(let a in this.newStudent)""!==this.newStudent[a]&&null!==this.newStudent[a]||"date_of_birth"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStudent(){let e=this.$route.params.id;try{const t=await mt.get("/editStudent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStudent.school_id=t.school_id,this.newStudent.student_id=t.student_id,this.newStudent.mifare_id=t.mifare_id,this.newStudent.first_name=t.user.first_name,this.newStudent.last_name=t.user.last_name,this.newStudent.email=t.user.email,this.newStudent.status=t.user.status,this.newStudent.fsm=0!=t.fsm_activated)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async updateStudent(){if(this.validateForm())return;let e=this.$route.params.id;try{await mt.put("/updateStudent/"+e,this.newStudent),this.$router.push({name:"list-students"}),this.snackbarMsg("Student Saved Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await mt.get(e);this.allSchools=t.data}catch(e){console.log(e)}},handleAttributes(e){this.newStudent.attributes=[],e.filter(e=>{this.newStudent.attributes.push(e.id)})}}};a("2fcd");const uf=ot()(pf,[["render",bf],["__scopeId","data-v-1d405672"]]);var hf=uf;const Of={class:"container-fluid py-4"},jf={class:"row"},gf={class:"col-12"},ff={class:"card my-4"},Ef={class:"card-body px-0 pb-2"},Vf={class:"table-responsive p-0"},Nf={class:"filter-container"},yf=Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,-1),xf=Object(l["createElementVNode"])("option",{value:"",disabled:"",selected:""},"Filter",-1),vf=["value"],kf=Object(l["createElementVNode"])("i",{class:"fas fa-filter filter-icon me-1"},null,-1),wf={class:"table align-items-center mb-0"},Sf=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Type "),Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Amount "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Date "),Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Action ")])],-1),Af={class:"align-middle text-center"},Cf={class:"text-xs text-secondary mb-0"},Bf={class:"align-middle text-center"},_f={class:"d-flex justify-content-center"},Pf={key:0,class:"fas fa-plus fa-xs text-success me-2","aria-hidden":"true"},If={key:1,class:"fas fa-minus fa-xs text-danger me-2","aria-hidden":"true"},Df={class:"text-xs text-secondary mb-0"},Tf={class:"align-middle text-center"},Mf={class:"text-secondary text-xs "},zf={class:"align-middle text-center text-sm"},Ff=["onClick"];function Uf(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Of,[Object(l["createElementVNode"])("div",jf,[Object(l["createElementVNode"])("div",gf,[Object(l["createElementVNode"])("div",ff,[Object(l["createElementVNode"])("div",Ef,[Object(l["createElementVNode"])("div",Vf,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",Nf,[yf,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box filter-type-btn","onUpdate:modelValue":t[0]||(t[0]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[xf,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,vf))),128))],512),[[l["vModelSelect"],s.filterBy]]),kf])]),Object(l["createElementVNode"])("table",wf,[Sf,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Af,[Object(l["createElementVNode"])("p",Cf,Object(l["toDisplayString"])(e.type),1)]),Object(l["createElementVNode"])("td",Bf,[Object(l["createElementVNode"])("span",_f,["top_up"==e.type||"admin_top_up"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",Pf)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",If)),Object(l["createElementVNode"])("p",Df,"£"+Object(l["toDisplayString"])(o.formattedPrice(e.amount)),1)])]),Object(l["createElementVNode"])("td",Tf,[Object(l["createElementVNode"])("span",Mf,Object(l["toDisplayString"])(e.created_at.toString().split("T")[0]),1)]),Object(l["createElementVNode"])("td",zf,[Object(l["createElementVNode"])("i",{onClick:t=>o.deleteTransactionHistory(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,Ff)])]))),128))])])])])])])])])}var Lf={name:"tables",mounted(){this.getTransactionHistory(),this.$globalHelper.buttonColor()},data(){return{transactionHistoryList:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getTransactionHistory(){let e,t;this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id);let a={user_id:t,admin_id:null};try{const e=await mt.post("/getTransactionHistory",a);this.transactionHistoryList=e.data}catch(l){console.log(l)}},async deleteTransactionHistory(e){try{await mt.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)}}};a("057e");const $f=ot()(Lf,[["render",Uf]]);var Rf=$f;const qf={class:"card"},Hf={class:"card-body pt-4 p-3"},Qf={class:"row"},Yf={class:"col text-start"},Jf=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),Wf=[Jf],Xf={class:"row"},Kf={class:"col-md-12 col-sm-12"},Zf={class:"list-group"},Gf={class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},eE={class:"d-flex flex-column"},tE={class:"mb-3 text-sm text-white"},aE={class:"wallet-info text-white mb-1 text-xs font-weight-bold"},lE=Object(l["createTextVNode"])(" Current Balance: "),cE={class:"wallet-info text-white font-weight-bold ms-sm-2"},sE={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},oE=Object(l["createTextVNode"])(" FSM Balance: "),nE={class:"wallet-info text-white font-weight-bold ms-sm-2"},rE={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},iE=Object(l["createTextVNode"])(" Phone: "),dE={class:"wallet-info text-white ms-sm-2 font-weight-bold"},mE={class:"wallet-info text-white mb-1 font-weight-bold text-xs"},bE=Object(l["createTextVNode"])(" Email Address: "),pE={class:"wallet-info text-white ms-sm-2 font-weight-bold"},uE={class:"col-md-12 col-sm-12"},hE={class:"list-group"},OE={class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},jE={class:"d-flex flex-column"},gE=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm"},"Recent Transaction",-1),fE={class:"text-dark ms-sm-2 font-weight-bold"},EE=Object(l["createElementVNode"])("br",null,null,-1),VE=Object(l["createElementVNode"])("br",null,null,-1),NE=["onClick"],yE=Object(l["createElementVNode"])("small",{class:"text-white",style:{"text-decoration":"underline"}},"Refund",-1),xE=[yE],vE={key:1,class:"bg-danger px-3",style:{"border-radius":"4px"}},kE=Object(l["createElementVNode"])("small",{class:"text-white"},"Refunded",-1),wE=[kE],SE=Object(l["createElementVNode"])("br",null,null,-1),AE={class:"text-dark font-weight-bold me-3"},CE={key:0,class:"recent-transactions mb-1 text-xs"},BE=Object(l["createElementVNode"])("span",{class:"text-warning ms-sm-2 font-weight-bold"},"No recent transactions.",-1),_E=[BE],PE={class:"row"},IE={class:"col-md-12 col-lg-12"},DE={class:"pagination-container"},TE={class:"entries-dropdown"},ME=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),zE=["value"],FE={class:"pagination-wrapper"},UE={class:"pagination"},LE=["onClick"];function $E(e,t,a,c,s,o){var n,r,i,d,m,b;return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qf,[Object(l["createElementVNode"])("div",Hf,[Object(l["createElementVNode"])("div",Qf,[Object(l["createElementVNode"])("div",Yf,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},Wf)])]),Object(l["createElementVNode"])("div",Xf,[Object(l["createElementVNode"])("div",Kf,[Object(l["createElementVNode"])("ul",Zf,[Object(l["createElementVNode"])("li",Gf,[Object(l["createElementVNode"])("div",eE,[Object(l["createElementVNode"])("h6",tE,Object(l["toDisplayString"])(`${(null===(n=o.walletData.user)||void 0===n?void 0:n.first_name)||"-"} ${(null===(r=o.walletData.user)||void 0===r?void 0:r.last_name)||"-"}`),1),Object(l["createElementVNode"])("span",aE,[lE,Object(l["createElementVNode"])("span",cE," £"+Object(l["toDisplayString"])(o.formattedPrice((null===(i=o.walletData)||void 0===i?void 0:i.ballance)||"0")),1)]),Object(l["createElementVNode"])("span",sE,[oE,Object(l["createElementVNode"])("span",nE," £"+Object(l["toDisplayString"])(o.formattedPrice((null===(d=s.fsmAmount)||void 0===d?void 0:d.fsm_amount)||"0")),1)]),Object(l["createElementVNode"])("span",rE,[iE,Object(l["createElementVNode"])("span",dE,Object(l["toDisplayString"])((null===(m=o.walletData.user)||void 0===m?void 0:m.phone)||"-"),1)]),Object(l["createElementVNode"])("span",mE,[bE,Object(l["createElementVNode"])("span",pE,Object(l["toDisplayString"])((null===(b=o.walletData.user)||void 0===b?void 0:b.email)||"-"),1)])])])])]),Object(l["createElementVNode"])("div",uE,[Object(l["createElementVNode"])("ul",hE,[Object(l["createElementVNode"])("li",OE,[Object(l["createElementVNode"])("div",jE,[gE,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.transactions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"recent-transactions mb-1 text-xs"},[Object(l["createElementVNode"])("span",fE,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(o.transactionType(e.type))+" ",1),EE,Object(l["createElementVNode"])("small",null,Object(l["toDisplayString"])(o.formatDate(e.created_at)),1),VE,s.user&&"student"!==s.user.role&&"staff"!==s.user.role&&"parent"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},["top_up"===e.type&&"refunded"!==e.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,onClick:t=>o.confirmRefund(e.id),class:"bg-success px-3",style:{"border-radius":"4px",cursor:"pointer"}},xE,8,NE)):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0),"top_up"===e.type&&"refunded"==e.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",vE,wE)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",{class:Object(l["normalizeClass"])(["font-weight-bold me-3",{"text-success":"top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type,"text-danger":!("top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type)}])},Object(l["toDisplayString"])("top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"+":"-")+" £"+Object(l["toDisplayString"])(o.formattedPrice(e.amount)),3),SE,Object(l["createElementVNode"])("small",AE,Object(l["toDisplayString"])("top_up"===e.type||"admin_top_up"===e.type||"pos_refund"===e.type||"school_shop_refund"===e.type?"Received":"Spent"),1)])]))),128)),0==s.transactions.length&&s.isTransactions?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",CE,_E)):Object(l["createCommentVNode"])("",!0)])])])])]),Object(l["createElementVNode"])("div",PE,[Object(l["createElementVNode"])("div",IE,[Object(l["createElementVNode"])("div",DE,[Object(l["createElementVNode"])("div",TE,[ME,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.itemsPerPage=e),onChange:t[2]||(t[2]=e=>o.getTransactionHistory(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,zE))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",FE,[Object(l["createElementVNode"])("ul",UE,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=e=>o.getTransactionHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[4]||(t[4]=e=>o.getTransactionHistory(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getTransactionHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,LE)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[5]||(t[5]=e=>o.getTransactionHistory(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[6]||(t[6]=e=>o.getTransactionHistory(s.totalPages)),href:"#"},"»")],2)])])])])])])])}var RE={name:"billing-card",mounted(){this.getUserId(),this.getWallet(),this.getFSMamount(),this.getTransactionHistory(),this.$globalHelper.buttonColor()},beforeRouteEnter(e,t,a){a(e=>{e.fromRoute=t.name})},beforeRouteLeave(e,t,a){if("list-students"===e.name&&"list-students"===this.fromRoute||"list-staff"===e.name&&"list-staff"===this.fromRoute)a();else{let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}},data(){return{fromRoute:"",fsmAmount:"",isTransactions:!1,transactions:"",user_id:"",user:"",wallet:"",perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),walletData(){return this.wallet},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(lt["b"])(["updateFilterString"]),confirmRefund(e){ys.a.fire({title:"Are you sure?",text:"Paid Amount will be refunded and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, refund it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.refundTopup(e)})},async refundTopup(e){let t={transaction_id:e};try{let e=await mt.post("/refundTopup",t),a=e.data?e.data.message:"";e.data&&e.data.refund?this.snackbarMsg(a,"success"):this.snackbarMsg(a,"error"),this.getWallet(),this.getTransactionHistory()}catch(a){console.log(a),this.snackbarMsg("Something went wrong!","error")}},snackbarMsg(e,t){this.$snackbar.add({type:t,text:e,background:"white"})},transactionType(e){let t="";return"top_up"==e?t="Top Up":"topup_refund"==e?t="Top Up Refunded":"admin_top_up"==e?t="Top Up (Admin)":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUserId(){let e="null"!=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#010A21";document.querySelector(".list-group .list-group-item").style.setProperty("--nav-bg-color",e);let t=localStorage.getItem("user");t=JSON.parse(t),this.user=t,this.$route.params.id?this.user_id=this.$route.params.id:this.user_id=t.id},async getWallet(){try{const e=await mt.get("/getWallet/"+this.user_id);this.wallet=e.data}catch(e){console.log(e)}},async getFSMamount(){try{const e=await mt.get("/getAmountFSM/"+this.user_id);this.fsmAmount=e.data}catch(e){console.log(e)}},async getTransactionHistory(e=null){let t={user_id:this.user_id,admin_id:null,page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getTransactionHistory",t);this.transactions=e.data.data.data,this.isTransactions=!0,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},formatDate(e){const t=vs()(e);return t.format("MMM D, YYYY,   HH:mm:ss")}}};a("6ce7");const qE=ot()(RE,[["render",$E]]);var HE=qE;const QE={class:"container-fluid"},YE={class:"row"},JE={class:"col-12"},WE={class:"card px-1"},XE={class:"d-flex justify-content-between border-radius-lg pt-4 "},KE=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ORGANISATIONS",-1),ZE=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),GE=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},"Here, you can add organizations such as ETC. Each organization can have multiple sites associated with it, all belonging to the same organization.")],-1),eV={class:"card-body px-0 pb-2"},tV={class:"table-responsive p-0"},aV={class:"table align-items-center mb-0"},lV=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Organisation Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder ps-2"}," Country "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"},"Action")])],-1),cV={key:0},sV=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),oV=[sV],nV={class:"align-middle text-center text-sm"},rV={class:"text-xs font-weight-bold mb-0"},iV={class:"d-flex px-2"},dV={class:"d-flex flex-column justify-content-center"},mV={class:"text-xs text-secondary mb-0"},bV={class:"d-flex px-2 "},pV={class:"d-flex flex-column justify-content-center"},uV={class:"text-xs text-secondary mb-0 "},hV={class:"d-flex px-2"},OV={class:"d-flex flex-column justify-content-center"},jV={class:"text-xs text-secondary  mb-0"},gV={class:"align-middle text-center text-sm"},fV={class:"badge badge-sm bg-gradient-success"},EV={class:"align-middle text-center"},VV=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),NV=["onClick"];function yV(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",QE,[Object(l["createElementVNode"])("div",YE,[Object(l["createElementVNode"])("div",JE,[Object(l["createElementVNode"])("div",WE,[Object(l["createElementVNode"])("div",XE,[KE,Object(l["createVNode"])(n,{to:{name:"add-organizations"}},{default:Object(l["withCtx"])(()=>[ZE]),_:1})]),GE,Object(l["createElementVNode"])("div",eV,[Object(l["createElementVNode"])("div",tV,[Object(l["createElementVNode"])("table",aV,[lV,Object(l["createElementVNode"])("tbody",null,[0===s.organizationsData.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",cV,oV)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.organizationsData,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",nV,[Object(l["createElementVNode"])("p",rV,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",iV,[Object(l["createElementVNode"])("div",dV,[Object(l["createElementVNode"])("h6",mV,Object(l["toDisplayString"])(e.name),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",bV,[Object(l["createElementVNode"])("div",pV,[Object(l["createElementVNode"])("h6",uV,Object(l["toDisplayString"])(e.email),1)])])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",hV,[Object(l["createElementVNode"])("div",OV,[Object(l["createElementVNode"])("h6",jV,Object(l["toDisplayString"])(e.country),1)])])]),Object(l["createElementVNode"])("td",gV,[Object(l["createElementVNode"])("span",fV,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",EV,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[VV]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,NV)])])]))),128))])])])])])])])])}var xV={name:"organizations",metaInfo:{title:"Organizations"},mounted(){this.setColor(),this.getOrganizations(),this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"])},data(){return{organizationsData:"",schools:6}},methods:{confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganization(e)})},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},setListData(){this.updateOrganizationList(this.organizationsData)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.organizationsData=e.data}catch(e){console.log(e)}},async deleteOrganization(e){try{await mt.delete("/deleteOrganization/"+e),this.removeOrganizationFromList(e),this.snackbarMsg("Organization Deleted")}catch(t){console.log(t)}},removeOrganizationFromList(e){const t=this.organizationsData.findIndex(t=>t.id===e);this.organizationsData.splice(t,1)}}};a("e0bc");const vV=ot()(xV,[["render",yV]]);var kV=vV;Object(l["pushScopeId"])("data-v-73711a6d");const wV={class:"container-fluid py-4"},SV={class:"row"},AV={class:"col-12"},CV={class:"card my-4"},BV={class:"d-flex justify-content-between border-radius-lg pt-4"},_V=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Organisation",-1),PV=Object(l["createElementVNode"])("button",{style:{"font-size":"12px"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),IV={class:"card-body px-0 pb-2"},DV={class:"table-responsive p-0"},TV={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},MV={key:0,class:"mb-3 change-pass-alert"},zV=Object(l["createElementVNode"])("br",null,null,-1),FV={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},UV={class:"form-bg container p-4 ms-2"},LV={class:"card card-plain"},$V={class:"card-body"},RV={class:"mb-1"},qV=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),HV={key:0,class:"text-danger error-txt"},QV={class:"mb-1"},YV=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),JV={key:0,class:"text-danger error-txt"},WV={class:"mb-1"},XV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),KV={key:0,class:"text-danger error-txt"},ZV={class:"mb-1"},GV=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),eN={key:0,class:"text-danger error-txt"},tN={class:"mb-1"},aN=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),lN=Object(l["createElementVNode"])("br",null,null,-1),cN=["value"],sN={key:0,class:"text-danger error-txt"},oN={class:"mb-1"},nN=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),rN={key:0,class:"text-danger error-txt"},iN={class:"mb-1"},dN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),mN={key:0,class:"text-danger error-txt"},bN={class:"mb-1"},pN=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),uN={key:0,class:"text-danger error-txt"},hN={class:"d-flex justify-content-center"};function ON(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",wV,[Object(l["createElementVNode"])("div",SV,[Object(l["createElementVNode"])("div",AV,[Object(l["createElementVNode"])("div",CV,[Object(l["createElementVNode"])("div",BV,[_V,Object(l["createVNode"])(n,{to:{name:"list-organizations"}},{default:Object(l["withCtx"])(()=>[PV]),_:1})]),Object(l["createElementVNode"])("div",IV,[Object(l["createElementVNode"])("div",DV,[Object(l["createElementVNode"])("div",TV,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",MV,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),zV]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",FV,[Object(l["createElementVNode"])("div",UV,[Object(l["createElementVNode"])("div",LV,[Object(l["createElementVNode"])("div",$V,[Object(l["createElementVNode"])("div",RV,[qV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>s.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newOrganization.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",HV,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",QV,[YV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],s.newOrganization.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",JV,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",WV,[XV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newOrganization.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",KV,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ZV,[GV,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],s.newOrganization.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",eN,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",tN,[aN,lN,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>s.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,cN))),128))],512),[[l["vModelSelect"],s.newOrganization.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",sN,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",oN,[nN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"city","onUpdate:modelValue":t[5]||(t[5]=e=>s.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newOrganization.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rN,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",iN,[dN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],s.newOrganization.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",mN,"Postocode/Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",bN,[pN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>s.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newOrganization.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",uN,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",hN,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.saveNewOrganization&&o.saveNewOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var jN={name:"",components:{},mounted(){this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getOrganizationList"])},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Jo()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async saveNewOrganization(){if(!this.validateForm())try{await mt.post("/createOrganization",this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Saved"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("7497");const gN=ot()(jN,[["render",ON],["__scopeId","data-v-73711a6d"]]);var fN=gN;Object(l["pushScopeId"])("data-v-8a5c53d2");const EN={class:"container-fluid py-4"},VN={class:"row"},NN={class:"col-12"},yN={class:"card my-4"},xN={class:"d-flex justify-content-between  border-radius-lg pt-4"},vN=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Organisation",-1),kN=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),wN={class:"card-body px-0 pb-2"},SN={class:"table-responsive p-0"},AN={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},CN={key:0,class:"mb-3 change-pass-alert"},BN=Object(l["createElementVNode"])("br",null,null,-1),_N={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},PN={class:"form-bg container p-4 ms-2"},IN={class:"card card-plain"},DN={class:"card-body"},TN={class:"mb-1"},MN=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"}," Name",-1),zN={key:0,class:"text-danger error-txt"},FN={class:"mb-1"},UN=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),LN={key:0,class:"text-danger error-txt"},$N={class:"mb-1"},RN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Phone",-1),qN={key:0,class:"text-danger error-txt"},HN={class:"mb-1"},QN=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Website",-1),YN={key:0,class:"text-danger error-txt"},JN={class:"mb-1"},WN=Object(l["createElementVNode"])("label",{class:"input-label",for:"country"},"Country",-1),XN=Object(l["createElementVNode"])("br",null,null,-1),KN=["value"],ZN={key:0,class:"text-danger error-txt"},GN={class:"mb-1"},ey=Object(l["createElementVNode"])("label",{class:"input-label",for:"city"},"City",-1),ty={key:0,class:"text-danger error-txt"},ay={class:"mb-1"},ly=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Postcode/Zip",-1),cy={key:0,class:"text-danger error-txt"},sy={class:"mb-1"},oy=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Address",-1),ny={key:0,class:"text-danger error-txt"},ry={class:"d-flex justify-content-center"};function iy(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",EN,[Object(l["createElementVNode"])("div",VN,[Object(l["createElementVNode"])("div",NN,[Object(l["createElementVNode"])("div",yN,[Object(l["createElementVNode"])("div",xN,[vN,Object(l["createVNode"])(n,{to:{name:"list-organizations"}},{default:Object(l["withCtx"])(()=>[kN]),_:1})]),Object(l["createElementVNode"])("div",wN,[Object(l["createElementVNode"])("div",SN,[Object(l["createElementVNode"])("div",AN,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",CN,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),BN]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",_N,[Object(l["createElementVNode"])("div",PN,[Object(l["createElementVNode"])("div",IN,[Object(l["createElementVNode"])("div",DN,[Object(l["createElementVNode"])("div",TN,[MN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box","onUpdate:modelValue":t[0]||(t[0]=e=>s.newOrganization.name=e),id:"name",type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newOrganization.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zN,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",FN,[UN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newOrganization.email=e),type:"email",placeholder:"example@gmail.com",name:"email"},null,512),[[l["vModelText"],s.newOrganization.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",LN,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",$N,[RN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newOrganization.phone=e),type:"tel",placeholder:"Phone",name:"phone"},null,512),[[l["vModelText"],s.newOrganization.phone]]),""!==s.formValidation&&""!==s.formValidation["phone"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",qN,"Phone is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",HN,[QN,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newOrganization.website=e),type:"url",placeholder:"https://example.com",name:"website"},null,512),[[l["vModelText"],s.newOrganization.website]]),""!==s.formValidation&&""!==s.formValidation["website"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",YN,"Website is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",JN,[WN,XN,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>s.newOrganization.country=e),id:"country",type:"select",placeholder:"Country",name:"country"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableCountries,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,KN))),128))],512),[[l["vModelSelect"],s.newOrganization.country]]),""!==s.formValidation&&""!==s.formValidation["country"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ZN,"Country is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",GN,[ey,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>s.newOrganization.city=e),type:"city",placeholder:"City",name:"city"},null,512),[[l["vModelText"],s.newOrganization.city]]),""!==s.formValidation&&""!==s.formValidation["city"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ty,"City is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ay,[ly,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newOrganization.zip=e),type:"text",placeholder:"Zip",name:"zip"},null,512),[[l["vModelText"],s.newOrganization.zip]]),""!==s.formValidation&&""!==s.formValidation["zip"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cy,"Zip is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sy,[oy,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"address","onUpdate:modelValue":t[7]||(t[7]=e=>s.newOrganization.address=e),type:"text",placeholder:"Address",name:"address"},null,512),[[l["vModelText"],s.newOrganization.address]]),""!==s.formValidation&&""!==s.formValidation["address"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ny,"Address is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",ry,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.updateOrganization&&o.updateOrganization(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 mt-4 text-white fw-5 border-0 py-2 px-5 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var dy={name:"",props:["data"],components:{},mounted(){this.editOrganization(),this.$globalHelper.buttonColor()},computed:{},data(){return{isError:!1,validationErrors:"",formValidation:"",availableCountries:["UK","USA","Canada"],newOrganization:{name:"",website:"",email:"",phone:"",country:"",city:"",zip:"",address:""},schools:["Skills Academy","Stockton","Redcar","Bede","NETA"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){let e=!1,t="";t=Jo()(this.newOrganization);for(let a in this.newOrganization)""===this.newOrganization[a]||void 0===this.newOrganization[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},async editOrganization(){let e=this.$route.params.id;try{const t=await mt.get("/editOrganization/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newOrganization.name=t.name,this.newOrganization.website=t.website,this.newOrganization.email=t.email,this.newOrganization.phone=t.phone,this.newOrganization.country=t.country,this.newOrganization.city=t.city,this.newOrganization.state=t.state,this.newOrganization.zip=t.zip,this.newOrganization.address=t.address,this.newOrganization.founded_date=t.founded_date,this.newOrganization.description=t.description)},async updateOrganization(){if(this.validateForm())return;let e=this.$route.params.id;try{await mt.put("/updateOrganization/"+e,this.newOrganization),this.$router.push({name:"list-organizations"}),this.snackbarMsg("Organization Updated"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("e6f0");const my=ot()(dy,[["render",iy],["__scopeId","data-v-8a5c53d2"]]);var by=my,py=a("d15c"),uy=a.n(py);const hy={class:"card"},Oy={class:"card-header pb-0 px-3"},jy={class:"d-flex justify-content-between"},gy=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Trips",-1),fy={class:"card-body pt-1 p-3"},Ey={class:"container-fluid mt-1"},Vy={class:"col-md-8"},Ny={class:"d-flex flex-column"},yy={class:"mb-3 text-sm"},xy=Object(l["createElementVNode"])("img",{src:uy.a,alt:"profile_image",class:"shadow-sm w-30 h-20 border-radius-lg"},null,-1),vy={class:"trip-description mt-2"},ky={class:"col-md-4"},wy={class:"ms-auto text-start"},Sy={class:"me-3 trip-dates"},Ay=Object(l["createElementVNode"])("br",null,null,-1),Cy={class:"me-3 trip-dates"},By={class:"me-3 trip-dates"},_y=Object(l["createElementVNode"])("br",null,null,-1),Py=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Age Group - 16-20")],-1),Iy=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"me-3 trip-dates"},"Booking Open")],-1),Dy=Object(l["createElementVNode"])("br",null,null,-1),Ty={class:"me-3 trip-dates"},My=Object(l["createElementVNode"])("br",null,null,-1),zy={key:0},Fy={class:"me-3 trip-dates"},Uy={class:"d-flex  align-items-start text-danger text-gradient text-sm font-weight-bold",style:{"justify-content":"flex-start"}},Ly=Object(l["createElementVNode"])("br",null,null,-1),$y=["onClick"],Ry=Object(l["createTextVNode"])(" Participants "),qy=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"arrow_forward",-1),Hy=[Ry,qy],Qy=Object(l["createElementVNode"])("br",null,null,-1),Yy={class:"mt-0"},Jy=["onClick"],Wy=["onClick"],Xy={key:2,class:"mt-0"},Ky=Object(l["createElementVNode"])("div",{class:"cart-status"},"Added To Cart",-1),Zy=[Ky],Gy={key:3,class:"mt-0"},ex=["onClick"],tx=Object(l["createElementVNode"])("br",null,null,-1),ax={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},lx=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No trips found!",-1),cx=[lx];function sx(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hy,[Object(l["createElementVNode"])("div",Oy,[Object(l["createElementVNode"])("div",jy,[gy,o.userPermissions.create_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},["super_admin"==s.user.role||"organization_admin"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=(...e)=>o.redirectToAddTrips&&o.redirectToAddTrips(...e)),to:{name:"add-trips"},style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-10  text-white fw-5 p-2 border-radius-lg"},"Add Trips")):Object(l["createCommentVNode"])("",!0)],64)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",fy,[Object(l["createElementVNode"])("div",Ey,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allTrips,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},[Object(l["createElementVNode"])("div",Vy,[Object(l["createElementVNode"])("div",Ny,[Object(l["createElementVNode"])("h6",yy,Object(l["toDisplayString"])(e.title),1),xy,Object(l["createElementVNode"])("small",vy,Object(l["toDisplayString"])(e.description),1)])]),Object(l["createElementVNode"])("div",ky,[Object(l["createElementVNode"])("div",wy,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Sy,"From "+Object(l["toDisplayString"])(o.formatDateString(e.start_date))+" To "+Object(l["toDisplayString"])(o.formatDateString(e.end_date)),1)]),Ay,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Cy,"Total Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",By,"Available Seats - "+Object(l["toDisplayString"])(e.total_booking?e.total_booking:0),1)]),_y,Py,Iy,Dy,Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",Ty,Object(l["toDisplayString"])(e.accomodation_details?e.accomodation_details:"-"),1)]),My,"super_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",zy,[Object(l["createElementVNode"])("small",Fy,"Organization: "+Object(l["toDisplayString"])(e.organization?e.organization.name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Uy," Trip Cost - £"+Object(l["toDisplayString"])(o.formattedAmount(e.budget)),1),Ly,"super_admin"==s.user.role||"organization_admin"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("button",{onClick:t=>o.navLegacy("participants-trips",{id:e.id}),style:{"font-size":"12px","background-color":"#F3F4F6",color:"#573078 !important"},class:"d-flex justify-content-around align-items-center me-3 trips-btn w-50  text-white fw-5 p-2 border-radius-lg"},Hy,8,$y),Qy,Object(l["createElementVNode"])("div",Yy,[o.userPermissions.edit_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t=>o.editTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Edit ",8,Jy)):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t=>o.deleteTrip(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-25  text-white fw-5 p-2 border-radius-lg"}," Delete ",8,Wy)):Object(l["createCommentVNode"])("",!0)])],64)):Object(l["createCommentVNode"])("",!0),null!==e.cart&&"student"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Xy,Zy)):Object(l["createCommentVNode"])("",!0),null==e.cart&&"student"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Gy,[Object(l["createElementVNode"])("button",{onClick:t=>o.addTripToCart(e.id),style:{"font-size":"12px","background-color":"#573078"},class:"me-3 trips-btn w-45  text-white fw-5 p-2 border-radius-lg"}," Add To Cart ",8,ex)])):Object(l["createCommentVNode"])("",!0),tx])])]))),128)),0==s.allTrips.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ax,cx)):Object(l["createCommentVNode"])("",!0)])])])}var ox={name:"billing-card",data(){return{user:"",allTrips:""}},mounted(){this.getUser(),this.getAllTrips()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_trip")},watch:{getRemovedItem(e,t){console.log(t),"trip"==e&&this.getAllTrips()}},computed:{...Object(lt["c"])(["getRemovedItem","getPermissions"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{...Object(lt["b"])(["updateRemovedItem"]),snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},navLegacy(e,t){this.$router.push({name:e,params:t})},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t},async addTripToCart(e){let t={trip_id:e};try{await mt.post("/addTripToCart",t),await this.getAllTrips(),this.snackbarMsg("Successfuly Added Trip To Cart")}catch(a){console.log(a)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},redirectToAddTrips(){this.$router.push({name:"add-trips"})},async getAllTrips(){try{const e=await mt.get("/getAllTrips");this.allTrips=e.data,this.updateRemovedItem(null)}catch(e){console.log(e)}},async deleteTrip(e){try{await mt.delete("/deleteTrip/"+e),this.removeTripFromList(e),this.snackbarMsg("Trip Deleted Successfuly")}catch(t){console.log(t)}},removeTripFromList(e){const t=this.allTrips.findIndex(t=>t.id===e);this.allTrips.splice(t,1)},formatDateString(e){const t=vs()(e),a=t.format("DD MMMM YYYY");return a},editTrip(e){this.$router.push("/edit-trips/"+e)}}};a("b0e7");const nx=ot()(ox,[["render",sx]]);var rx=nx;Object(l["pushScopeId"])("data-v-2a8f2351");const ix={class:"container-fluid py-4"},dx={class:"row "},mx={class:"col-12"},bx={class:"card my-4"},px={class:"d-flex justify-content-between  border-radius-lg pt-4 "},ux=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Trips",-1),hx=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),Ox={class:"card-body px-0 pb-2"},jx={class:"table-responsive p-0"},gx={class:"row py-2 bg-white form-data border-radius-lg"},fx={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},Ex={class:"form-bg container p-4 ms-2"},Vx={class:"card card-plain"},Nx={class:"card-body"},yx={role:"form"},xx={class:"row mb-1"},vx={class:"mb-1"},kx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Image",-1),wx={class:"mb-1"},Sx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),Ax={key:0,class:"text-danger error-txt"},Cx={class:"mb-1"},Bx=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),_x=Object(l["createElementVNode"])("br",null,null,-1),Px={key:0,class:"text-danger error-txt"},Ix={class:"row p-2"},Dx={class:"col-xl-4 col-lg-4 col-md-4"},Tx={class:"mb-1"},Mx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),zx={key:0,class:"text-danger error-txt"},Fx={class:"col-xl-4 col-lg-4 col-md-4"},Ux={class:"mb-1"},Lx=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),$x=Object(l["createElementVNode"])("br",null,null,-1),Rx=["value"],qx={key:0,class:"text-danger error-txt"},Hx={class:"col-xl-4 col-lg-4 col-md-4"},Qx={class:"mb-1"},Yx=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),Jx={key:0,class:"text-danger error-txt"},Wx={class:"col-xl-4 col-lg-4 col-md-4"},Xx={class:"mb-1"},Kx=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),Zx={key:0,class:"text-danger error-txt"},Gx={class:"col-xl-4 col-lg-4 col-md-4"},ev={class:"mb-1"},tv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),av={key:0,class:"text-danger error-txt"},lv={class:"col-xl-4 col-lg-4 col-md-4"},cv={class:"mb-1"},sv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),ov={key:0,class:"text-danger error-txt"},nv={class:"row p-2"},rv=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),iv={class:"col-xl-4 col-lg-4 col-md-4"},dv={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},mv=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Installments",-1),bv={class:"checkbox-container mt-2 me-5"},pv=["checked"],uv=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),hv={class:"col-xl-4 col-lg-4 col-md-4"},Ov={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},jv=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit",-1),gv={class:"checkbox-container mt-2 me-5"},fv=["checked"],Ev=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),Vv={class:"col-xl-4 col-lg-4 col-md-4"},Nv={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},yv=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Manual Payment",-1),xv={class:"checkbox-container mt-2 me-5"},vv=["checked"],kv=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),wv={key:0,class:"row p-2"},Sv={class:"col-xl-4 col-lg-4 col-md-4"},Av={class:"mb-1"},Cv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Installments",-1),Bv={key:0,class:"text-danger error-txt"},_v={class:"col-xl-4 col-lg-4 col-md-4"},Pv={class:"mb-1"},Iv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Installment",-1),Dv={key:0,class:"text-danger error-txt"},Tv={class:"col-xl-4 col-lg-4 col-md-4"},Mv={class:"mb-1"},zv=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),Fv={key:0,class:"text-danger error-txt"},Uv={class:"col-xl-4 col-lg-4 col-md-4"},Lv={class:"mb-1"},$v=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),Rv={key:0,class:"text-danger error-txt"},qv={class:"mb-1"},Hv={class:"input-label",for:"enrollment_date"},Qv=["onUpdate:modelValue"],Yv={key:0,class:"text-danger error-txt"},Jv={key:1,class:"row p-2"},Wv={class:"col-xl-4 col-lg-4 col-md-4"},Xv={class:"mb-1"},Kv=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Deposit",-1),Zv={key:0,class:"text-danger error-txt"},Gv={class:"col-xl-4 col-lg-4 col-md-4"},ek={class:"mb-1"},tk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Deposit",-1),ak=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,-1),lk={key:0,class:"text-danger error-txt"},ck={class:"col-xl-4 col-lg-4 col-md-4"},sk={class:"mb-1"},ok=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Deposit",-1),nk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Deposit",name:"name"},null,-1),rk={key:0,class:"text-danger error-txt"},ik={class:"col-xl-4 col-lg-4 col-md-4"},dk={class:"mb-1"},mk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),bk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),pk={key:0,class:"text-danger error-txt"},uk={class:"col-xl-4 col-lg-4 col-md-4"},hk={class:"mb-1"},Ok=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Deposit",-1),jk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),gk={key:0,class:"text-danger error-txt"},fk={key:2,class:"row p-2"},Ek={class:"col-xl-4 col-lg-4 col-md-4"},Vk={class:"mb-1"},Nk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Amount",-1),yk={key:0,class:"text-danger error-txt"},xk={class:"col-xl-4 col-lg-4 col-md-4"},vk={class:"mb-1"},kk=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Initial Amount",-1),wk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Amount",name:"name"},null,-1),Sk={key:0,class:"text-danger error-txt"},Ak={class:"col-xl-4 col-lg-4 col-md-4"},Ck={class:"mb-1"},Bk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Final Amount",-1),_k=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Final Amount",name:"name"},null,-1),Pk={key:0,class:"text-danger error-txt"},Ik={class:"col-xl-4 col-lg-4 col-md-4"},Dk={class:"mb-1"},Tk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Amount",-1),Mk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,-1),zk={key:0,class:"text-danger error-txt"},Fk={class:"col-xl-4 col-lg-4 col-md-4"},Uk={class:"mb-1"},Lk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Final Amount",-1),$k=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"date",placeholder:"Deadline For Final Deposit",name:"name"},null,-1),Rk={key:0,class:"text-danger error-txt"},qk={class:"col-xl-4 col-lg-4 col-md-4"},Hk={class:"mb-1"},Qk=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Comments",-1),Yk=Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"cash and card payments are accepted",name:"name"},null,-1),Jk={key:0,class:"text-danger error-txt"},Wk={class:"mb-1"},Xk=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),Kk=Object(l["createElementVNode"])("br",null,null,-1),Zk={class:"mt-4"};function Gk(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("DropZone"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",ix,[Object(l["createElementVNode"])("div",dx,[Object(l["createElementVNode"])("div",mx,[Object(l["createElementVNode"])("div",bx,[Object(l["createElementVNode"])("div",px,[ux,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[hx]),_:1})]),Object(l["createElementVNode"])("div",Ox,[Object(l["createElementVNode"])("div",jx,[Object(l["createElementVNode"])("div",gx,[Object(l["createElementVNode"])("div",fx,[Object(l["createElementVNode"])("div",Ex,[Object(l["createElementVNode"])("div",Vx,[Object(l["createElementVNode"])("div",Nx,[Object(l["createElementVNode"])("form",yx,[Object(l["createElementVNode"])("div",xx,[Object(l["createElementVNode"])("div",vx,[kx,Object(l["createVNode"])(r,{maxFiles:Number(1),url:"http://localhost:8080",uploadOnDrop:!0,multipleUpload:!1,parallelUpload:1},null,8,["maxFiles"])]),Object(l["createElementVNode"])("div",wx,[Sx,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],s.newTrip.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Ax,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Cx,[Bx,_x,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],s.newTrip.description]]),""!==s.formValidation&&""!==s.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Px,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ix,[Object(l["createElementVNode"])("div",Dx,[Object(l["createElementVNode"])("div",Tx,[Mx,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],s.newTrip.total_seats]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zx,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Fx,[Object(l["createElementVNode"])("div",Ux,[Lx,$x,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Rx))),128))],512),[[l["vModelSelect"],s.newTrip.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",qx,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Hx,[Object(l["createElementVNode"])("div",Qx,[Yx,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],s.newTrip.accomodation_details]]),""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jx,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Wx,[Object(l["createElementVNode"])("div",Xx,[Kx,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.start_date]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Zx,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Gx,[Object(l["createElementVNode"])("div",ev,[tv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.end_date]]),""!==s.formValidation&&""!==s.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",av,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",lv,[Object(l["createElementVNode"])("div",cv,[sv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ov,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",nv,[rv,Object(l["createElementVNode"])("div",iv,[Object(l["createElementVNode"])("span",dv,[mv,Object(l["createElementVNode"])("div",bv,[Object(l["createElementVNode"])("input",{checked:"installments"==s.paymentPlan,onChange:t[8]||(t[8]=e=>o.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,pv),uv])])]),Object(l["createElementVNode"])("div",hv,[Object(l["createElementVNode"])("span",Ov,[jv,Object(l["createElementVNode"])("div",gv,[Object(l["createElementVNode"])("input",{checked:"deposit"==s.paymentPlan,onChange:t[9]||(t[9]=e=>o.changePaymentPlan("deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,fv),Ev])])]),Object(l["createElementVNode"])("div",Vv,[Object(l["createElementVNode"])("span",Nv,[yv,Object(l["createElementVNode"])("div",xv,[Object(l["createElementVNode"])("input",{checked:"manual"==s.paymentPlan,onChange:t[10]||(t[10]=e=>o.changePaymentPlan("manual")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,vv),kv])])])]),"installments"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",wv,[Object(l["createElementVNode"])("div",Sv,[Object(l["createElementVNode"])("div",Av,[Cv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>s.installmentsPlan.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Installments",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.total_installments]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Bv,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",_v,[Object(l["createElementVNode"])("div",Pv,[Iv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[12]||(t[12]=e=>s.installmentsPlan.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Installment",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.amount_per_installment]]),""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Dv,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Tv,[Object(l["createElementVNode"])("div",Mv,[zv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[13]||(t[13]=e=>s.installmentsPlan.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.initial_deposit]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Fv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Uv,[Object(l["createElementVNode"])("div",Lv,[$v,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.installmentsPlan.initial_deposit_due_date=e),class:"input-box",id:"name",type:"date",placeholder:"Deadline For Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsPlan.initial_deposit_due_date]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Rv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),s.installmentsPlan.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsPlan.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",qv,[Object(l["createElementVNode"])("label",Hv,"Due Date For Installment "+Object(l["toDisplayString"])(t+1),1),Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":e=>s.installmentsPlan.other_installments_due_date[t]=e,class:"input-box",id:"name",type:"date",placeholder:"Deadline For Installment {{ index+1 }}",name:"name"},null,8,Qv),[[l["vModelText"],s.installmentsPlan.other_installments_due_date[t]]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Yv,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"deposit"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Jv,[Object(l["createElementVNode"])("div",Wv,[Object(l["createElementVNode"])("div",Xv,[Kv,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Deposit",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Zv,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Gv,[Object(l["createElementVNode"])("div",ek,[tk,ak,""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",lk,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",ck,[Object(l["createElementVNode"])("div",sk,[ok,nk,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",ik,[Object(l["createElementVNode"])("div",dk,[mk,bk,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",pk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",uk,[Object(l["createElementVNode"])("div",hk,[Ok,jk,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",gk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),"manual"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",fk,[Object(l["createElementVNode"])("div",Ek,[Object(l["createElementVNode"])("div",Vk,[Nk,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Amount",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",yk,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",xk,[Object(l["createElementVNode"])("div",vk,[kk,wk,""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Sk,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ak,[Object(l["createElementVNode"])("div",Ck,[Bk,_k,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Pk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Ik,[Object(l["createElementVNode"])("div",Dk,[Tk,Mk,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",zk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Fk,[Object(l["createElementVNode"])("div",Uk,[Lk,$k,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Rk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",qk,[Object(l["createElementVNode"])("div",Hk,[Qk,Yk,""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Jk,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Wk,[Xk,Kk,Object(l["createVNode"])(i,{label:"Attributes",options:s.allAttributes,onInput:o.handleAttributes,placeholder:"Attributes"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",Zk,[Object(l["createElementVNode"])("button",{onClick:t[17]||(t[17]=Object(l["withModifiers"])((...e)=>o.saveNewTrip&&o.saveNewTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])(),Object(l["pushScopeId"])("data-v-58ff6324");const ew=["onClick"],tw=["placeholder"],aw={key:0,class:"dropdown"},lw=["onClick"];function cw(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.selectedOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"tag"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.name)+" ",1),Object(l["createElementVNode"])("span",{onClick:e=>o.removeTag(t),class:"remove-tag"},"×",8,ew)]))),128)),Object(l["createElementVNode"])("div",null,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.inputValue=e),onInput:t[1]||(t[1]=(...e)=>o.filterOptions&&o.filterOptions(...e)),onKeydown:t[2]||(t[2]=Object(l["withKeys"])(Object(l["withModifiers"])((...e)=>o.addTag&&o.addTag(...e),["prevent"]),["enter"])),onFocus:t[3]||(t[3]=(...e)=>o.showOptions&&o.showOptions(...e)),placeholder:a.placeholder,onBlur:t[4]||(t[4]=(...e)=>o.hideDropdown&&o.hideDropdown(...e))},null,40,tw),[[l["vModelText"],s.inputValue]]),s.showDropdown?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",aw,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.filteredOptions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,onClick:t=>o.selectOption(e),class:"option-width"},Object(l["toDisplayString"])(e.name),9,lw))),128))])):Object(l["createCommentVNode"])("",!0)])])}Object(l["popScopeId"])();var sw={props:{label:{type:String,required:!0},options:{type:Array,required:!0},placeholder:{type:String,default:"Pelase select"},value:{type:Array,default:()=>[]}},data(){return{selectedOptions:this.value,inputValue:"",showDropdown:!1}},computed:{filteredOptions(){return this.options.filter(e=>e.name.toLowerCase().includes(this.inputValue.toLowerCase())&&!this.isSelected(e))}},watch:{value(e){this.selectedOptions=e}},methods:{addTag(e){const t=e;console.log(t),t&&!this.isSelected(t)&&(this.selectedOptions.push(t),this.$emit("input",this.selectedOptions),this.inputValue="")},removeTag(e){this.selectedOptions.splice(e,1),this.$emit("input",this.selectedOptions)},filterOptions(){this.showDropdown=!0},showOptions(){this.showDropdown=!0},hideDropdown(){setTimeout(()=>{this.showDropdown=!1},800)},selectOption(e){console.log(e),this.addTag(e),this.showDropdown=!1},isSelected(e){return this.selectedOptions.some(t=>t.name===e.name)}}};a("ed52");const ow=ot()(sw,[["render",cw],["__scopeId","data-v-58ff6324"]]);var nw=ow,rw=a("cd1f"),iw=a.n(rw),dw={name:"",components:{MultiSelect:nw,DropZone:rw["DropZone"]},mounted(){this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("create_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{paymentPlan:"",installmentsPlan:{total_installments:"",amount_per_installment:"",initial_deposit:"",initial_deposit_due_date:"",other_installments_due_date:[]},depositPlan:{total:"",final_deposit:"",initial_deposit:""},manualPlan:{total:"",final_deposit:"",initial_deposit:""},allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await mt.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},validateForm(){this.$permissions.redirectIfNotAllowed("create_trip");let e=!1,t="";t=Jo()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},async saveNewTrip(){if(!this.validateForm()){await this.addPaymentPlan();try{await mt.post("/createTrip",this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Saved Successfuly")}catch(e){console.log(e)}}},addPaymentPlan(){"installments"==this.paymentPlan&&(this.newTrip.payment_plan="installments",this.newTrip={...this.newTrip,...this.installmentsPlan})},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}}}};a("cad8");const mw=ot()(dw,[["render",Gk],["__scopeId","data-v-2a8f2351"]]);var bw=mw;Object(l["pushScopeId"])("data-v-109a06c8");const pw={class:"container-fluid py-4"},uw={class:"row "},hw={class:"col-12"},Ow={class:"card my-4"},jw={class:"d-flex justify-content-between  border-radius-lg pt-4 "},gw=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Trip",-1),fw=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"me-3 text-white fw-5 w-90 border-0 p-2 border-radius-lg"}," Back ",-1),Ew={class:"card-body px-0 pb-2"},Vw={class:"table-responsive p-0"},Nw={class:"row py-2 bg-white form-data border-radius-lg"},yw={class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},xw={class:"form-bg container p-4 ms-2"},vw={class:"card card-plain"},kw={class:"card-body"},ww={role:"form"},Sw={class:"row mb-1"},Aw={class:"mb-1"},Cw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Title",-1),Bw={key:0,class:"text-danger error-txt"},_w={class:"mb-1"},Pw=Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description",-1),Iw=Object(l["createElementVNode"])("br",null,null,-1),Dw={key:0,class:"text-danger error-txt"},Tw={class:"row p-2"},Mw={class:"col-xl-4 col-lg-4 col-md-4"},zw={class:"mb-1"},Fw=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Seats",-1),Uw={key:0,class:"text-danger error-txt"},Lw={class:"col-xl-4 col-lg-4 col-md-4"},$w={class:"mb-1"},Rw=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Organisation",-1),qw=Object(l["createElementVNode"])("br",null,null,-1),Hw=["value"],Qw={key:0,class:"text-danger error-txt"},Yw={class:"col-xl-4 col-lg-4 col-md-4"},Jw={class:"mb-1"},Ww=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals",-1),Xw={key:0,class:"text-danger error-txt"},Kw={class:"col-xl-4 col-lg-4 col-md-4"},Zw={class:"mb-1"},Gw=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date",-1),eS={key:0,class:"text-danger error-txt"},tS={class:"col-xl-4 col-lg-4 col-md-4"},aS={class:"mb-1"},lS=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date",-1),cS={key:0,class:"text-danger error-txt"},sS={class:"col-xl-4 col-lg-4 col-md-4"},oS={class:"mb-1"},nS=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Trip Cost",-1),rS={key:0,class:"text-danger error-txt"},iS={class:"mb-1"},dS=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Attribute",-1),mS=Object(l["createElementVNode"])("br",null,null,-1),bS={class:"mt-4"};function pS(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pw,[Object(l["createElementVNode"])("div",uw,[Object(l["createElementVNode"])("div",hw,[Object(l["createElementVNode"])("div",Ow,[Object(l["createElementVNode"])("div",jw,[gw,Object(l["createVNode"])(n,{to:{name:"list-trips"}},{default:Object(l["withCtx"])(()=>[fw]),_:1})]),Object(l["createElementVNode"])("div",Ew,[Object(l["createElementVNode"])("div",Vw,[Object(l["createElementVNode"])("div",Nw,[Object(l["createElementVNode"])("div",yw,[Object(l["createElementVNode"])("div",xw,[Object(l["createElementVNode"])("div",vw,[Object(l["createElementVNode"])("div",kw,[Object(l["createElementVNode"])("form",ww,[Object(l["createElementVNode"])("div",Sw,[Object(l["createElementVNode"])("div",Aw,[Cw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.newTrip.title=e),class:"input-box title-input",id:"name",type:"text",placeholder:"Trip to Brazil",name:"name"},null,512),[[l["vModelText"],s.newTrip.title]]),""!==s.formValidation&&""!==s.formValidation["title"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Bw,"Title is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_w,[Pw,Iw,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.newTrip.description=e),class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"},null,512),[[l["vModelText"],s.newTrip.description]]),""!==s.formValidation&&""!==s.formValidation["description"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Dw,"Description is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Tw,[Object(l["createElementVNode"])("div",Mw,[Object(l["createElementVNode"])("div",zw,[Fw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.newTrip.total_seats=e),class:"input-box",id:"name",type:"number",placeholder:"Total Seats",name:"name"},null,512),[[l["vModelText"],s.newTrip.total_seats]]),""!==s.formValidation&&""!==s.formValidation["total_seats"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Uw,"Total Seats is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Lw,[Object(l["createElementVNode"])("div",$w,[Rw,qw,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newTrip.organization_id=e),class:"select-box",id:"organization",type:"select",placeholder:"organization",name:"organization"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,Hw))),128))],512),[[l["vModelSelect"],s.newTrip.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Qw,"Organisation is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Yw,[Object(l["createElementVNode"])("div",Jw,[Ww,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.newTrip.accomodation_details=e),class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"},null,512),[[l["vModelText"],s.newTrip.accomodation_details]]),""!==s.formValidation&&""!==s.formValidation["accomodation_details"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Xw,"Accomodation Details is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",Kw,[Object(l["createElementVNode"])("div",Zw,[Gw,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.newTrip.start_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.start_date]]),""!==s.formValidation&&""!==s.formValidation["start_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",eS,"Start Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",tS,[Object(l["createElementVNode"])("div",aS,[lS,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.newTrip.end_date=e),class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"},null,512),[[l["vModelText"],s.newTrip.end_date]]),""!==s.formValidation&&""!==s.formValidation["end_date"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cS,"End Date is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",sS,[Object(l["createElementVNode"])("div",oS,[nS,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.formattedPrice=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Trip Cost",name:"name"},null,512),[[l["vModelText"],o.formattedPrice]]),""!==s.formValidation&&""!==s.formValidation["total_funds"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",rS,"Trip Cost is required")):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",iS,[dS,mS,Object(l["createVNode"])(r,{label:"Attributes",value:s.selectedAttrs,options:s.allAttributes,onInput:o.handleAttributes,placeholder:"Attributes"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",bS,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=Object(l["withModifiers"])((...e)=>o.updateTrip&&o.updateTrip(...e),["prevent"])),style:{"z-index":"1","padding-left":"3rem !important","padding-right":"3rem !important","font-size":"12px","background-color":"#573078"},class:"btn text-white ms-2 fw-5 border-0  py-2 border-radius-lg"}," Save ")])])])])])])])])])])])])}Object(l["popScopeId"])();var uS={name:"",components:{MultiSelect:nw},mounted(){this.editTrip(),this.getOrganizations(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("edit_trip")},computed:{formattedPrice:{get(){return this.newTrip.total_funds},set(e){const t=parseFloat(e).toFixed(2);this.newTrip.total_funds=t}}},data(){return{allAttributes:"",availableOrganizations:"",isError:!1,formValidation:"",selectedAttrs:[],newTrip:{organization_id:"",attributes:[],title:"",description:"",total_seats:"",accomodation_details:"",start_date:"",end_date:"",total_funds:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllAttributes(){try{const e=await mt.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}this.allAttributes.map(e=>{this.newTrip.attributes.includes(e.id)&&this.selectedAttrs.push(e)})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_trip");let e=!1,t="";t=Jo()(this.newTrip);for(let a in this.newTrip)""===this.newTrip[a]||void 0===this.newTrip[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async updateTrip(){if(this.validateForm())return;let e=this.$route.params.id;try{await mt.put("/updateTrip/"+e,this.newTrip),this.$router.push({name:"list-trips"}),this.snackbarMsg("Trip Updated Successfuly")}catch(t){console.log(t)}},handleAttributes(e){this.newTrip.attributes=[],e.filter(e=>{this.newTrip.attributes.push(e.id)})},async getOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.availableOrganizations=e.data}catch(e){console.log(e)}},async editTrip(){let e=this.$route.params.id;try{let t=await mt.get("/findTrip/"+e);t=t.data,this.setTrip(t)}catch(t){console.log(t)}},setTrip(e){this.newTrip.title=e.title,this.newTrip.description=e.description,this.newTrip.total_seats=e.total_booking,this.newTrip.accomodation_details=e.accomodation_details,this.newTrip.start_date=this.formatDateString(e.start_date),this.newTrip.end_date=this.formatDateString(e.end_date),this.newTrip.total_funds=e.budget,this.newTrip.organization_id=e.organization_id,this.newTrip.attributes=e.attributes},formatDateString(e){const t=vs()(e),a=t.format("YYYY-MM-DD");return a}}};a("9bb4");const hS=ot()(uS,[["render",pS],["__scopeId","data-v-109a06c8"]]);var OS=hS;const jS={class:"container-fluid py-4"},gS={class:"row"},fS={class:"col-12"},ES={class:"card my-4"},VS={class:"card-body px-0 pb-2"},NS={class:"table-responsive p-0"},yS=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("input",{class:"input-box filter-box",id:"name",type:"text",placeholder:"Type to Search...",name:"address"}),Object(l["createElementVNode"])("small",{style:{"font-size":"12px","font-weight":"bold"},class:" me-3 text-dark fw-5 border-0 py-2 px-4 border-radius-lg"}," Trip Participants ")])],-1),xS={class:"table align-items-center mb-0"},vS=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7 ps-2"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Participation Status ")])],-1),kS={class:"align-middle text-center"},wS={class:"text-secondary text-xs font-weight-bold"},SS={class:"align-middle text-center"},AS={class:"text-secondary text-xs "},CS={class:"align-middle text-center"},BS={class:"text-secondary text-xs "},_S={class:"align-middle text-center"},PS={class:"text-secondary text-xs "},IS={class:"align-middle text-center text-sm"},DS={class:"badge badge-sm bg-gradient-success"},TS={class:"align-middle text-center text-sm"},MS={class:"badge badge-sm bg-gradient-success"};function zS(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",jS,[Object(l["createElementVNode"])("div",gS,[Object(l["createElementVNode"])("div",fS,[Object(l["createElementVNode"])("div",ES,[Object(l["createElementVNode"])("div",VS,[Object(l["createElementVNode"])("div",NS,[yS,Object(l["createElementVNode"])("table",xS,[vS,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allParticipants,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",kS,[Object(l["createElementVNode"])("span",wS,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",SS,[Object(l["createElementVNode"])("span",AS,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",CS,[Object(l["createElementVNode"])("span",BS,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",_S,[Object(l["createElementVNode"])("span",PS,Object(l["toDisplayString"])(e.school),1)]),Object(l["createElementVNode"])("td",IS,[Object(l["createElementVNode"])("span",DS,Object(l["toDisplayString"])(e.payment_status),1)]),Object(l["createElementVNode"])("td",TS,[Object(l["createElementVNode"])("span",MS,Object(l["toDisplayString"])(e.participation_status),1)])]))),128))])])])])])])])])}var FS={name:"tables",mounted(){this.getUser(),this.getTripParticipants()},data(){return{allParticipants:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getTripParticipants(){let e=this.$route.params.id;try{const t=await mt.get("/getTripParticipants/"+e);this.allParticipants=t.data}catch(t){console.log(t)}}}};a("506d");const US=ot()(FS,[["render",zS]]);var LS=US;const $S={class:"container-fluid"},RS={class:"row"},qS={class:"col-12"},HS={class:"card px-3"},QS=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"TRANSACTION HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("The Transaction History section displays key details of each transaction, including the User, Type, Amount, and Date. This allows you to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" track all financial activities efficiently, providing a clear overview of each user's transactions over time.")])])],-1),YS={class:"card-body px-0 pb-2"},JS={class:"table-responsive p-0"},WS={class:"filter-container ms-2 mb-2"},XS={class:"row",style:{width:"100%"}},KS={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},ZS={style:{display:"flex"}},GS=["placeholder"],eA=["value"],tA=Object(l["createElementVNode"])("div",{class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},null,-1),aA={class:"col-md-4 col-sm-12 d-flex",style:{"padding-top":"15px"}},lA=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon",title:"Export to excel"},null,-1),cA=[lA],sA={class:"table-responsive p-0"},oA={ref:"table",class:"table align-items-center mb-0"},nA={key:0,class:"text-uppercase text-xxs font-weight-bolder"},rA=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Charge Details ",-1),iA=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Type ",-1),dA=Object(l["createElementVNode"])("th",{class:" align-middle text-center text-uppercase text-xxs font-weight-bolder ps-2"}," Amount ",-1),mA=Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date ",-1),bA={key:0},pA=Object(l["createElementVNode"])("td",{colspan:"8",class:"text-center"}," No data available. ",-1),uA=[pA],hA={key:0},OA={class:"d-flex px-2 py-1"},jA=Object(l["createElementVNode"])("div",null,null,-1),gA={class:"d-flex flex-column justify-content-center"},fA={class:"text-xs text-secondary mb-0"},EA=Object(l["createElementVNode"])("br",null,null,-1),VA={class:"align-middle text-center"},NA={key:0,class:"text-xs text-secondary mb-0"},yA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Charge ID:",-1),xA=Object(l["createElementVNode"])("br",null,null,-1),vA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Card Brand:",-1),kA=Object(l["createElementVNode"])("br",null,null,-1),wA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Last 4 Digit:",-1),SA=Object(l["createElementVNode"])("br",null,null,-1),AA=Object(l["createElementVNode"])("span",{class:"text-bold text-success"},"Card Name:",-1),CA={key:1,class:"text-xs text-secondary mb-0"},BA={class:"align-middle text-center"},_A={class:"text-xs text-secondary mb-0"},PA={class:"align-middle text-center"},IA={class:"d-flex justify-content-center"},DA={class:"text-xs text-secondary mb-0"},TA={key:0,class:"text-success me-1",style:{"font-size":"15px","font-weight":"600"}},MA={key:1,class:"text-danger me-1",style:{"font-size":"15px","font-weight":"600"}},zA={class:"align-middle text-center"},FA={class:"text-secondary text-xs "},UA={class:"row"},LA={class:"col-md-12 col-lg-12"},$A={class:"pagination-container"},RA={class:"entries-dropdown"},qA=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),HA=["value"],QA={class:"pagination-wrapper"},YA={class:"pagination"},JA=["onClick"];function WA(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",$S,[Object(l["createElementVNode"])("div",RS,[Object(l["createElementVNode"])("div",qS,[Object(l["createElementVNode"])("div",HS,[QS,Object(l["createElementVNode"])("div",YS,[Object(l["createElementVNode"])("div",JS,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",WS,[Object(l["createElementVNode"])("div",XS,[Object(l["createElementVNode"])("div",KS,[Object(l["createElementVNode"])("span",ZS,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>o.filterTransactionHistory("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:o.computedPlaceholder,name:"address"},null,40,GS),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>o.filterTransactionHistory("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,eA))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),tA,Object(l["createElementVNode"])("div",aA,[Object(l["createElementVNode"])("div",{class:"label-text bulk_topup me-3 d-flex",onClick:t[4]||(t[4]=e=>o.exportTableToXLS()),style:{"padding-top":"1px",width:"fit-content"}},cA),Object(l["createVNode"])(n,{onChange:t[5]||(t[5]=e=>o.filterTransactionHistory("daterange_search")),onClear:o.getTransactionHistory,value:s.time3,"onUpdate:value":t[6]||(t[6]=e=>s.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])])]),Object(l["createElementVNode"])("div",sA,[Object(l["createElementVNode"])("table",oA,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,["student"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",nA," User ")):Object(l["createCommentVNode"])("",!0),rA,iA,dA,mA])]),Object(l["createElementVNode"])("tbody",null,[0===s.transactionHistoryList.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",bA,uA)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.transactionHistoryList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},["student"!==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",hA,[Object(l["createElementVNode"])("div",OA,[jA,Object(l["createElementVNode"])("div",gA,[Object(l["createElementVNode"])("p",fA,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name)+", ",1),EA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.user.email),1)])])])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",VA,[e.card_brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",NA,[yA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.charge_id?e.charge_id:"__"),1),xA,vA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.card_brand?e.card_brand:"__"),1),kA,wA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.last_4?e.last_4:"__"),1),SA,AA,Object(l["createTextVNode"])(" "+Object(l["toDisplayString"])(e.card_holder_name?e.card_holder_name:"__"),1)])):(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",CA,"Wallet Transaction"))]),Object(l["createElementVNode"])("td",BA,[Object(l["createElementVNode"])("p",_A,Object(l["toDisplayString"])(o.transactionType(e.type)),1)]),Object(l["createElementVNode"])("td",PA,[Object(l["createElementVNode"])("span",IA,[Object(l["createElementVNode"])("p",DA,["top_up"==e.type||"admin_top_up"==e.type||"pos_refund"==e.type||"school_shop_refund"==e.type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",TA,"+ ")):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",MA,"- ")),Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.amount)),1)])])]),Object(l["createElementVNode"])("td",zA,[Object(l["createElementVNode"])("span",FA,Object(l["toDisplayString"])(o.formatDate(e.created_at)),1)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",UA,[Object(l["createElementVNode"])("div",LA,[Object(l["createElementVNode"])("div",$A,[Object(l["createElementVNode"])("div",RA,[qA,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.itemsPerPage=e),onChange:t[8]||(t[8]=e=>o.getTransactionHistory(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,HA))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",QA,[Object(l["createElementVNode"])("ul",YA,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getTransactionHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getTransactionHistory(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getTransactionHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,JA)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getTransactionHistory(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getTransactionHistory(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var XA=a("7885"),KA=(a("bb17"),{components:{DatePicker:XA["a"]},name:"tables",mounted(){this.setColor(),this.getUser(),this.getTransactionHistory(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"satff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("transaction_history"),this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"]),limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e},computedPlaceholder(){return"Date"===this.filterBy?"Sep 18, 2024":"Type to Search..."}},data(){return{time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,user:"",transactionHistoryList:"",seachString:"",filterBy:"User",allFields:["User","Amount"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},exportTableToXLS(){const e=this.$refs.table,t=e.cloneNode(!0),a=Array.from(t.querySelectorAll("th")).findIndex(e=>"User"===e.textContent.trim());if(-1!==a){const e=t.querySelector("tr"),l=e.children[a];l.textContent="User Name";const c=document.createElement("th");c.textContent="User Email",e.insertBefore(c,l.nextSibling),t.querySelectorAll("tr").forEach((e,t)=>{if(t>0){const t=e.children[a],l=t.textContent.split(",").map(e=>e.trim()),c=l[0],s=l.length>1?l[1]:"";t.textContent=c;const o=document.createElement("td");o.textContent=s,e.insertBefore(o,t.nextSibling)}})}const l=Qh["a"].table_to_sheet(t),c=Qh["a"].book_new();Qh["a"].book_append_sheet(c,l,"Sheet1"),Qh["b"](c,"transaction_history.xlsx")},transactionType(e){let t="";return"top_up"==e?t="Top Up":"topup_refund"==e?t="Top Up Refund":"admin_top_up"==e?t="Top Up (Admin)":"pos_transaction"==e?t="Cafeteria Purchase":"pos_refund"==e?t="Cafeteria Refund":"school_shop_refund"==e?t="Portal Shop Refund":"trip_funds"==e?t="Trip Charges":"school_shop_funds"==e&&(t="Shop Purchase"),t},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");this.user=JSON.parse(e)},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},async getTransactionHistory(e=null){let t=localStorage.getItem("user");t=JSON.parse(t);let a=null;"student"==t.role&&(a=t.id);let l={user_id:null,admin_id:null,role:null,page:e,entries_per_page:this.itemsPerPage};l.user_id=a,"organization_admin"!=this.user.role&&"staff"!=this.user.role&&"parent"!=this.user.role||(l.admin_id=this.user.id,l.role=this.user.role);try{const e=await mt.post("getTransactionHistory",l);this.transactionHistoryList=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(c){console.log(c)}},async filterTransactionHistory(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getTransactionHistory();const a="daterange_search"===e?{type:"Date Range",value:t}:{type:this.filterBy,value:this.seachString};try{const e=await mt.post("/filterTransactionHistory",a);this.transactionHistoryList=e.data}catch(l){console.log(l)}},async deleteTransactionHistory(e){try{await mt.delete("/deleteTransactionHistory/"+e),this.removeTransactionFromList(e),this.snackbarMsg("Deleted Successfully")}catch(t){console.log(t)}},removeTransactionFromList(e){const t=this.transactionHistoryList.findIndex(t=>t.id===e);this.transactionHistoryList.splice(t,1)},formatDate(e){const t=vs()(e);return t.format("DD/MM/YYYY")}}});a("8ed5");const ZA=ot()(KA,[["render",WA]]);var GA=ZA;Object(l["pushScopeId"])("data-v-2aa82826");const eC={class:" py-4"},tC={class:"row"},aC={class:"col-12"},lC={class:"card my-4"},cC={class:"card-body px-0 pb-2"},sC={class:"table-responsive p-0"},oC=Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",{class:"filter-container"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"},[Object(l["createTextVNode"])("Purchase History section not only provides a clear overview of completed purchases but also allows users to initiate refund requests directly from the purchase history,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" streamlining the process for resolving payment issues.")])])])],-1),nC={class:"card-body pt-1 p-3"},rC={class:"container-fluid mt-1"},iC={class:"listNavigation__lists"},dC={class:"listNavigation__list"},mC={class:"list__item"},bC={href:"#",class:"item__link"},pC={class:"item__icon"},uC=["src"],hC={class:"item__content"},OC={class:"label text-sm"},jC={class:"label text-success"},gC={key:0,class:"text-success text-sm"},fC={key:1,class:"text-success text-sm"},EC={key:2,class:"ms-1 text-primary text-sm"},VC=Object(l["createElementVNode"])("small",null," (Card Payment)",-1),NC=[VC],yC={key:3,class:"ms-1 text-warning text-sm"},xC=Object(l["createElementVNode"])("small",null," (Wallet Payment)",-1),vC=[xC],kC={key:4,class:"ms-5 text-warning text-sm"},wC=Object(l["createElementVNode"])("small",null,"(Refunded)",-1),SC=[wC],AC={class:"description"},CC={class:"me-3 trip-dates text-warning"},BC=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),_C={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},PC=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),IC=[PC];function DC(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",eC,[Object(l["createElementVNode"])("div",tC,[Object(l["createElementVNode"])("div",aC,[Object(l["createElementVNode"])("div",lC,[Object(l["createElementVNode"])("div",cC,[Object(l["createElementVNode"])("div",sC,[oC,Object(l["createElementVNode"])("div",nC,[Object(l["createElementVNode"])("div",rC,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",iC,[Object(l["createElementVNode"])("ul",dC,[Object(l["createElementVNode"])("li",mC,[Object(l["createElementVNode"])("a",bC,[Object(l["createElementVNode"])("div",pC,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,uC)]),Object(l["createElementVNode"])("div",hC,[Object(l["createElementVNode"])("h4",OC,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1),Object(l["createElementVNode"])("p",jC,"Price - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price)),1),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",gC,[Object(l["createElementVNode"])("small",null," Fully Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",fC,[Object(l["createElementVNode"])("small",null,"Partially Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)])):Object(l["createCommentVNode"])("",!0),null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",EC,NC)):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yC,vC)):Object(l["createCommentVNode"])("",!0),"refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",kC,SC)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",AC,"Detail: "+Object(l["toDisplayString"])(t.detail),1),Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",CC,"Date "+Object(l["toDisplayString"])(o.formatDateString(t.created_at)),1)])]),BC])])])])]))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",_C,IC)):Object(l["createCommentVNode"])("",!0)])])])])])])])])}Object(l["popScopeId"])();var TC={name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{shopItems:"",user:"",filterBy:"",allFields:["Clear","Account","Type","Amount","Date","Status"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getMyPurchases",t);this.shopItems=e.data.data}catch(a){console.log(a)}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await mt.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=vs()(e),a=t.format("DD/MM/YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("998c");const MC=ot()(TC,[["render",DC],["__scopeId","data-v-2aa82826"]]);var zC=MC;const FC={class:"container-fluid"},UC={class:"row"},LC={class:"col-12"},$C={class:"card px-3"},RC=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"PURCHASE HISTORY"),Object(l["createElementVNode"])("small",{class:"page-description ms-3"},[Object(l["createTextVNode"])("The Purchase History section provides detailed records of each purchase, including the Item Name, Buyer Name, Price, Amount Paid,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" Payment Status, and Date of Purchase. This feature helps track all transactions, offering a clear and organized overview of past purchases.")])])],-1),qC={class:"card-body px-0 pb-2"},HC={class:"table-responsive p-0"},QC={class:"filter-container ms-2 mb-2"},YC={class:"row",style:{width:"100%"}},JC={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},WC={style:{display:"flex"}},XC=["value"],KC=Object(l["createElementVNode"])("div",{class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},null,-1),ZC={class:"col-md-4 col-sm-12 d-flex",style:{"padding-top":"15px"}},GC=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon",title:"Export to excel"},null,-1),eB=[GC],tB={class:"table-responsive p-0"},aB={ref:"table",class:"table align-items-center mb-0"},lB=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Buyer "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Amount Paid "),Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Payment Method "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Payment Status "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Date "),Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),cB={key:0},sB=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),oB=[sB],nB={class:"align-middle text-center"},rB={class:"text-secondary text-xs font-weight-bold"},iB={class:"align-middle text-center d-flex flex-column"},dB={class:"text-secondary text-xs"},mB={class:"text-secondary text-xs"},bB={class:"align-middle text-center"},pB=["src"],uB={class:"text-secondary text-xs "},hB={class:"align-middle text-center"},OB={class:"text-secondary text-xs"},jB={class:"align-middle text-center"},gB={class:"text-secondary text-xs"},fB={class:"align-middle text-center"},EB={key:0,class:"text-success text-xs"},VB={key:1,class:"text-warning text-xs"},NB={class:"align-middle text-center text-sm"},yB={key:0,class:"badge badge-sm bg-gradient-danger"},xB={key:1,class:"badge badge-sm bg-gradient-success"},vB={class:"align-middle text-center text-sm"},kB={class:"align-middle text-center text-sm"},wB=["onClick"],SB={key:1,class:"badge badge-sm bg-gradient-success"},AB={class:"row"},CB={class:"col-md-12 col-lg-12"},BB={class:"pagination-container"},_B={class:"entries-dropdown"},PB=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),IB=["value"],DB={class:"pagination-wrapper"},TB={class:"pagination"},MB=["onClick"];function zB(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",FC,[Object(l["createElementVNode"])("div",UC,[Object(l["createElementVNode"])("div",LC,[Object(l["createElementVNode"])("div",$C,[RC,Object(l["createElementVNode"])("div",qC,[Object(l["createElementVNode"])("div",HC,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",QC,[Object(l["createElementVNode"])("div",YC,[Object(l["createElementVNode"])("div",JC,[Object(l["createElementVNode"])("span",WC,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>o.filterPurchaseHistory("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>o.filterPurchaseHistory("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"110px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,XC))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),KC,Object(l["createElementVNode"])("div",ZC,[Object(l["createElementVNode"])("div",{class:"label-text bulk_topup me-3 d-flex",onClick:t[4]||(t[4]=e=>o.exportTableToXLS()),style:{"padding-top":"1px",width:"fit-content"}},eB),Object(l["createVNode"])(n,{onChange:t[5]||(t[5]=e=>o.filterPurchaseHistory("daterange_search")),onClear:o.getPurchaseHistory,value:s.time3,"onUpdate:value":t[6]||(t[6]=e=>s.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])])]),Object(l["createElementVNode"])("div",tB,[Object(l["createElementVNode"])("table",aB,[lB,Object(l["createElementVNode"])("tbody",null,[0===s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",cB,oB)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",nB,[Object(l["createElementVNode"])("span",rB,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",iB,[Object(l["createElementVNode"])("span",dB,Object(l["toDisplayString"])(t.buyer_name)+" ,",1),Object(l["createElementVNode"])("small",mB,Object(l["toDisplayString"])(t.buyer_email),1)]),Object(l["createElementVNode"])("td",bB,[t.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+t.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,pB)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",uB,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",hB,[Object(l["createElementVNode"])("span",OB,"£"+Object(l["toDisplayString"])(o.formattedPrice(t.price)),1)]),Object(l["createElementVNode"])("td",jB,[Object(l["createElementVNode"])("span",gB,"£"+Object(l["toDisplayString"])(o.formattedPrice(t.amount_paid)),1)]),Object(l["createElementVNode"])("td",fB,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",EB,"Card Payment")):Object(l["createCommentVNode"])("",!0),null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",VB,"Wallet Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",NB,["partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",yB,"Partially Paid")):Object(l["createCommentVNode"])("",!0),"fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",xB,"Fully Paid")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",vB,Object(l["toDisplayString"])(o.formatDateString(t.created_at)),1),Object(l["createElementVNode"])("td",kB,[null==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,onClick:e=>o.confirmRefund(t.id),class:"badge badge-sm bg-gradient-danger",style:{cursor:"pointer"}},"Refund ->",8,wB)):Object(l["createCommentVNode"])("",!0),"refunded"==t.refund_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",SB,"Refunded")):Object(l["createCommentVNode"])("",!0)])]))),128))])],512)])]),Object(l["createElementVNode"])("div",AB,[Object(l["createElementVNode"])("div",CB,[Object(l["createElementVNode"])("div",BB,[Object(l["createElementVNode"])("div",_B,[PB,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.itemsPerPage=e),onChange:t[8]||(t[8]=e=>o.getPurchaseHistory(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,IB))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",DB,[Object(l["createElementVNode"])("ul",TB,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getPurchaseHistory(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getPurchaseHistory(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getPurchaseHistory(e),href:"#"},Object(l["toDisplayString"])(e),9,MB)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getPurchaseHistory(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getPurchaseHistory(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var FB={components:{DatePicker:XA["a"]},name:"tables",mounted(){this.setColor(),this.getUser(),this.getPurchaseHistory(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("purchase_history"),this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Item Name",allFields:["Buyer","Item Name","Price","Amount Paid","Payment Status"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmRefund(e){ys.a.fire({title:"Are you sure?",text:"Paid Amount will be refunded and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, refund it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.refundActions(e)})},exportTableToXLS(){const e=this.$refs.table,t=e.cloneNode(!0),a=Array.from(t.querySelectorAll("th")).findIndex(e=>"Action"===e.textContent.trim());-1!==a&&t.querySelectorAll("tr").forEach(e=>e.deleteCell(a));const l=Array.from(t.querySelectorAll("th")).findIndex(e=>"Buyer"===e.textContent.trim());if(-1!==l){const e=t.querySelector("tr"),a=e.children[l];a.textContent="Buyer Name";const c=document.createElement("th");c.textContent="Buyer Email",e.insertBefore(c,a.nextSibling),t.querySelectorAll("tr").forEach((e,t)=>{if(t>0){const t=e.children[l],a=t.textContent.split(",").map(e=>e.trim()),c=a[0],s=a.length>1?a[1]:"";t.textContent=c;const o=document.createElement("td");o.textContent=s,e.insertBefore(o,t.nextSibling)}})}const c=Qh["a"].table_to_sheet(t),s=Qh["a"].book_new();Qh["a"].book_append_sheet(s,c,"Sheet1"),Qh["b"](s,"purchase_history.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async refundActions(e){let t={purchase_id:e};try{await mt.post("/refundStatus",t),this.snackbarMsg("Successfuly Refunded!"),this.getPurchaseHistory()}catch(a){console.log(a),this.snackbarMsg("Something went wrong!")}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getPurchaseHistory(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getMyPurchases",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterPurchaseHistory(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getPurchaseHistory();const a="daterange_search"===e?{type:"Date Range",value:t}:{type:this.filterBy,value:this.seachString};try{const e=await mt.post("/filterPurchaseHistory",a);this.shopItems=e.data,this.totalRows=e.data.total,this.currentPage=e.data.current_page,this.perPage=e.per_page,this.totalPages=e.data.last_page}catch(l){console.log(l)}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getPurchaseHistory(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=vs()(e),a=t.format("DD/MM/YYYY");return a},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await mt.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("54d0");const UB=ot()(FB,[["render",zB]]);var LB=UB;const $B={class:""},RB={class:"row"},qB={class:"col-12"},HB={class:"card"},QB={class:"card-body px-0 pb-2"},YB={class:"table-responsive p-0"},JB=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PENDING INSTALMENTS",-1),WB=Object(l["createElementVNode"])("div",{class:"filter-container mb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"ms-4 page-description"}," In the Pending Instalments section, you can track and manage pending payments for students. This section allows you to view details of pending instalments. ")])],-1),XB={class:"filter-container ms-3 mb-2"},KB={class:"row",style:{width:"100%"}},ZB={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},GB={style:{display:"flex"}},e_=["value"],t_=Object(l["createElementVNode"])("div",{class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},null,-1),a_={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},l_={key:0,class:"card-body pt-1 p-3"},c_={class:"container-fluid mt-1"},s_=["onClick"],o_={class:"listNavigation__lists"},n_={class:"listNavigation__list"},r_={class:"list__item"},i_={class:"row",style:{width:"100%"}},d_={class:"col-md-8 col-sm-12"},m_={href:"#",class:"item__link"},b_={class:"item__icon"},p_=["src"],u_={class:"item__content"},h_={class:"label text-sm"},O_={class:"description text-success"},j_={class:"description text-success"},g_={class:"description text-success"},f_={class:"description"},E_={class:"description"},V_=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),N_={key:0,class:""},y_=Object(l["createElementVNode"])("h4",{class:"label text-sm"},"Buyer Information:",-1),x_={class:"label text-sm"},v_={class:"label text-sm"},k_={class:"col-md-4 col-sm-12"},w_=["onClick"],S_=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:"mb-3 pt-2 fw-5 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"},"shopping_cart")],-1),A_={key:0,class:"mb-5 pb-5"},C_={class:"ms-5 ps-3 text-success"},B_={class:"me-5 text-success"},__={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},P_=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),I_=[P_],D_={key:1,class:"card-body pt-1 p-3"},T_={class:"container-fluid mt-1"},M_={class:"listNavigation__lists"},z_={class:"listNavigation__list"},F_={class:"list__item"},U_={href:"#",class:"item__link"},L_={class:"item__icon"},$_=["src"],R_={class:"item__content"},q_={class:"label text-sm"},H_={class:"label text-success"},Q_={class:"description"},Y_=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),J_={key:0,class:""},W_=Object(l["createElementVNode"])("h4",{class:"label text-sm text-warning"},"Buyer",-1),X_={class:"label text-sm"},K_={class:"label text-success"},Z_=["onClick"],G_=["onClick"],eP=Object(l["createElementVNode"])("i",{class:"material-icons cursor-pointer"},"shopping_cart",-1),tP=[eP],aP={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},lP=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),cP=[lP],sP={class:"row"},oP={class:"col-md-12 col-lg-12"},nP={class:"pagination-container"},rP={class:"entries-dropdown"},iP=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),dP=["value"],mP={class:"pagination-wrapper"},bP={class:"pagination"},pP=["onClick"];function uP(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",$B,[Object(l["createElementVNode"])("div",RB,[Object(l["createElementVNode"])("div",qB,[Object(l["createElementVNode"])("div",HB,[Object(l["createElementVNode"])("div",QB,[Object(l["createElementVNode"])("div",YB,[JB,WB,Object(l["createElementVNode"])("div",XB,[Object(l["createElementVNode"])("div",KB,[Object(l["createElementVNode"])("div",ZB,[Object(l["createElementVNode"])("span",GB,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>o.filterInstallments("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>o.filterInstallments("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,e_))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),t_,Object(l["createElementVNode"])("div",a_,[Object(l["createVNode"])(n,{onChange:t[4]||(t[4]=e=>o.filterInstallments("daterange_search")),onClear:o.getShopItems,value:s.time3,"onUpdate:value":t[5]||(t[5]=e=>s.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])]),"student"!=s.user.role&&"staff"!=s.user.role&&"parent"!=s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",l_,[Object(l["createElementVNode"])("div",c_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[Object(l["createElementVNode"])("div",{onClick:e=>o.openInstallment(t.id),class:"listNavigation"},[Object(l["createElementVNode"])("div",o_,[Object(l["createElementVNode"])("ul",n_,[Object(l["createElementVNode"])("li",r_,[Object(l["createElementVNode"])("div",i_,[Object(l["createElementVNode"])("div",d_,[Object(l["createElementVNode"])("a",m_,[Object(l["createElementVNode"])("div",b_,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,p_)]),Object(l["createElementVNode"])("div",u_,[Object(l["createElementVNode"])("h4",h_,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1),Object(l["createElementVNode"])("div",O_,"Order Amount - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price)),1),Object(l["createElementVNode"])("div",j_,"Paid Amount - £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid?t.amount_paid:0)),1),Object(l["createElementVNode"])("div",g_,"Remaining Amount - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price-(t.amount_paid?t.amount_paid:0))),1),Object(l["createElementVNode"])("div",f_,"Purchase Id: #"+Object(l["toDisplayString"])(t.id),1),Object(l["createElementVNode"])("div",E_,"Purchase Date: "+Object(l["toDisplayString"])(o.formatDateString(t.purchase_date)),1)]),V_]),"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",N_,[y_,Object(l["createElementVNode"])("p",x_,Object(l["toDisplayString"])(t.buyer_name),1),Object(l["createElementVNode"])("p",v_,Object(l["toDisplayString"])(t.buyer_email),1)])):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",k_,["student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Object(l["createElementVNode"])("button",{onClick:e=>o.payNow(t.id),style:{"font-size":"12px",width:"25% !important","background-color":"#573078"},class:"trips-btn btn text-white fw-2 py-2 px-1 border-radius-lg"}," Pay now",8,w_),S_],64)):Object(l["createCommentVNode"])("",!0)])])])])])],8,s_),s.openedInstallment==t.id?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",A_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:"d-flex justify-content-between"},[Object(l["createElementVNode"])("small",C_,"Installment-"+Object(l["toDisplayString"])(e.installment_no),1),Object(l["createElementVNode"])("small",B_,"Amount: £"+Object(l["toDisplayString"])(o.formattedAmount(e.installment_amount)),1)]))),128))])):Object(l["createCommentVNode"])("",!0)],64))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",__,I_)):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),"student"==s.user.role||"staff"==s.user.role||"parent"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",D_,[Object(l["createElementVNode"])("div",T_,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",M_,[Object(l["createElementVNode"])("ul",z_,[Object(l["createElementVNode"])("li",F_,[Object(l["createElementVNode"])("a",U_,[Object(l["createElementVNode"])("div",L_,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,$_)]),Object(l["createElementVNode"])("div",R_,[Object(l["createElementVNode"])("h4",q_,"Instalment No."+Object(l["toDisplayString"])(t.installment_no),1),Object(l["createElementVNode"])("p",H_,"Instalment Amount - £"+Object(l["toDisplayString"])(o.formattedAmount(t.installment_amount)),1),Object(l["createElementVNode"])("div",Q_,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+"), Purchase ID: "+Object(l["toDisplayString"])(t.purchase_id),1)]),Y_]),"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",J_,[W_,Object(l["createElementVNode"])("h4",X_,Object(l["toDisplayString"])(t.buyer_name),1),Object(l["createElementVNode"])("p",K_,Object(l["toDisplayString"])(t.buyer_email),1)])):Object(l["createCommentVNode"])("",!0),"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:1},[Object(l["createElementVNode"])("button",{onClick:e=>o.payNow(t.id),style:{"font-size":"12px",width:"12% !important","background-color":"#573078"},class:"trips-btn btn text-white fw-2 py-2 px-2 me-1 border-radius-lg"}," Pay now",8,Z_),Object(l["createElementVNode"])("button",{onClick:e=>o.addToCart(t.id),style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:"mb-3 pt-2 fw-5 border-radius-lg"},tP,8,G_)],64)):Object(l["createCommentVNode"])("",!0)])])])]))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",aP,cP)):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",sP,[Object(l["createElementVNode"])("div",oP,[Object(l["createElementVNode"])("div",nP,[Object(l["createElementVNode"])("div",rP,[iP,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.itemsPerPage=e),onChange:t[7]||(t[7]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,dP))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",mP,[Object(l["createElementVNode"])("ul",bP,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,pP)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var hP={components:{DatePicker:XA["a"]},name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("pending_installments"),this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{openedInstallment:null,time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Buyer",allFields:["Buyer","Item Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{...Object(lt["b"])(["updateCartItemCounter"]),confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e="success",t){this.$snackbar.add({type:e,text:t,background:"white"})},formatDateString(e){const t=vs()(e),a=t.format("DD/MM/YYYY");return a},openInstallment(e){this.openedInstallment==e?this.openedInstallment=null:this.openedInstallment=e},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getMyInstallments",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterInstallments(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getShopItems();const a="daterange_search"===e?{type:"Date Range",value:t,status:"pending"}:{type:this.filterBy,value:this.seachString,status:"pending"};try{const e=await mt.post("/filterInstallments",a);this.shopItems=e.data}catch(l){console.log(l)}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},payNow(e){this.$router.push({name:"pay-installment",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,installment_id:e};try{await mt.post("/addItemToCart",a),this.countUserCartItems(),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l),409==l.response.status&&this.snackbarMsg("error","Item already exists in the Cart")}},async countUserCartItems(){try{let e=await mt.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("70ef");const OP=ot()(hP,[["render",uP]]);var jP=OP,gP=a("aa68"),fP=a.n(gP);const EP={class:"row"},VP={class:"col-xl-12 col-lg-12 col-md-12"},NP={class:"card"},yP={class:"card-header pb-0 px-3 d-flex justify-content-between"},xP=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Pay Instalment",-1),vP=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),kP=[vP],wP={class:"card-body pt-4 p-3"},SP={class:"row"},AP={class:"list-group col-xl-6 col-lg-6 col-md-6"},CP={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},BP={class:"d-flex flex-column"},_P={class:"mb-3 text-sm"},PP={key:0},IP=Object(l["createElementVNode"])("br",null,null,-1),DP={key:1,class:"text-success"},TP={key:2,class:"text-success"},MP=Object(l["createTextVNode"])(" Instalments And Deposit "),zP=Object(l["createElementVNode"])("br",null,null,-1),FP=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},null,-1),UP={class:"ms-auto text-end"},LP=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),$P=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),RP={class:"ms-auto text-end"},qP={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},HP=["onClick"],QP=Object(l["createElementVNode"])("br",null,null,-1),YP={key:0,class:"text-success me-3"},JP={key:1,class:"text-success me-3"},WP=Object(l["createElementVNode"])("br",null,null,-1),XP={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},KP={class:"d-flex flex-column"},ZP={class:"mb-3 text-sm"},GP=Object(l["createElementVNode"])("span",{class:"mb-1 text-xs"},null,-1),eI={class:"ms-auto text-end"},tI=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),aI=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),lI={class:"ms-auto text-end"},cI={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},sI=["onClick"],oI={class:"col-md-5 ms-auto"},nI=["onClick"],rI={key:0,class:"w-10 me-3 mb-0",src:fP.a,alt:"logo"},iI={key:1,class:"w-10 me-3 mb-0",src:Ot.a,alt:"logo"},dI={class:"mb-0"},mI=Object(l["createElementVNode"])("div",{id:"express-checkout-element"},null,-1);function bI(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",EP,[Object(l["createElementVNode"])("div",VP,[Object(l["createElementVNode"])("div",NP,[Object(l["createElementVNode"])("div",yP,[xP,Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},kP)]),Object(l["createElementVNode"])("div",wP,[Object(l["createElementVNode"])("div",SP,[Object(l["createElementVNode"])("ul",AP,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",CP,[Object(l["createElementVNode"])("div",BP,[Object(l["createElementVNode"])("h6",_P,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",PP,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),IP,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",DP," Instalments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",TP,[MP,zP,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Installments) ",1)])):Object(l["createCommentVNode"])("",!0)]),FP]),Object(l["createElementVNode"])("div",UP,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[LP,$P],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",RP,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",qP," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,HP),QP,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",YP," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",JP,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.initial_deposit_installments))+" Deposit ",1),WP,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.trip?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",XP,[Object(l["createElementVNode"])("div",KP,[Object(l["createElementVNode"])("h6",ZP,Object(l["toDisplayString"])(e.trip.title)+" (Trip)",1),GP]),Object(l["createElementVNode"])("div",eI,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"school_user"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[tI,aI],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",lI,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",cI," £"+Object(l["toDisplayString"])(o.formattedPrice(e.trip.budget)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2","aria-hidden":"true"},null,8,sI)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",oI,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:s.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>o.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",rI)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",iI)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",dI," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,nI))),128)),Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>o.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment "),Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=e=>o.checkout("wallet_and_card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet Payment "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>o.expressPaymentCheckout()),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-100 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Google/Apple Pay"),mI])])])])])])}var pI=a("4c16"),uI={name:"billing-card",data(){return{installmentDetail:"",userCards:"",dataLoaded:!1,user:"",isSelected:0}},async mounted(){this.getUser(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor(),await this.getInstallment()},updated(){this.$globalHelper.buttonColor()},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit_installments:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price))}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await mt.post("/removeItemFromCart",t),this.removeItemFromList(e)}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"",a=this.$route.params.id,l={payment_method:t,type:e,installment_id:a};try{await mt.post("/payInstallment",l),this.snackbarMsg("Payment Successful"),this.$router.push({name:"installments"})}catch(c){console.log(c)}},async getInstallment(){let e=this.$route.params.id,t={installment_id:e};try{let e=await mt.post("/getInstallmentDetail",t);this.installmentDetail=e.data}catch(a){console.log(a)}},async expressPaymentCheckout(){let e=this.installmentDetail?this.installmentDetail.installment_amount:0;this.stripe=await Object(pI["a"])("pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ");let t={amount:100*e,currency:"gbp"};const a=await mt.post("/createexpressPaymentIntent",t),l=a.data.clientSecret;console.log("clientSecret",l),this.clientSecret=l,this.elements=this.stripe.elements({clientSecret:l}),this.expressCheckoutElement=this.elements.create("expressCheckout"),this.expressCheckoutElement.mount("#express-checkout-element"),this.expressCheckoutElement.on("confirm",this.handlePayment)},async handlePayment(){if(!this.stripe||!this.expressCheckoutElement)return void console.error("Stripe or expressCheckoutElement is not initialized");const{error:e,paymentIntent:t}=await this.stripe.confirmPayment({elements:this.elements,confirmParams:{},redirect:"if_required"});if(e)console.error("Payment failed:",e.message);else{let e,a;console.log("paymentIntent",t),t&&t.payment_method&&(a=await this.fetchPaymentMethod(t.payment_method,t.id)),e=a.payment_method.card;let l=a.charge_id,c=this.$route.params.id,s={payment_method:null,type:"google_apple_pay",installment_id:c,amount:this.installmentDetail?this.installmentDetail.installment_amount:0,latest_charge:l,last_4:e.last4,brand:e.brand,cardholder_name:a.payment_method.billing_details.name};await mt.post("/payInstallment",s),this.$router.go(-1)}},async fetchPaymentMethod(e,t){let a={paymentMethodId:e,paymentIntentId:t};try{const e=await mt.post("/payment-method",a);return e.data}catch(l){console.error("Error fetching payment method:",l)}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await mt.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};const hI=ot()(uI,[["render",bI]]);var OI=hI;const jI={class:""},gI={class:"row"},fI={class:"col-12"},EI={class:"card"},VI={class:"card-body px-0 pb-2"},NI={class:"table-responsive p-0"},yI=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PAID INSTALMENTS",-1),xI=Object(l["createElementVNode"])("div",{class:"filter-container mb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("small",{class:"ms-4 page-description"}," This section allows you to view details of paid instalments. ")])],-1),vI={class:"filter-container ms-3 mb-2"},kI={class:"row",style:{width:"100%"}},wI={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},SI={style:{display:"flex"}},AI=["value"],CI=Object(l["createElementVNode"])("div",{class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},null,-1),BI={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},_I={class:"card-body pt-1 p-3"},PI={class:"container-fluid mt-1"},II={class:"listNavigation__lists"},DI={class:"listNavigation__list"},TI={class:"list__item"},MI={href:"#",class:"item__link"},zI={class:"item__icon"},FI=["src"],UI={class:"item__content"},LI={class:"label text-sm"},$I={class:"label text-success"},RI={class:"description"},qI={class:"description"},HI={class:"mb-1 text-sm bg-success text-white px-2 py-1",style:{"border-radius":"5px"}},QI=Object(l["createElementVNode"])("div",{class:"item__metaInfo"},[Object(l["createElementVNode"])("span",{class:"iconUxt arrowSingleRight","aria-hidden":"true"})],-1),YI={key:0,class:""},JI=Object(l["createElementVNode"])("h4",{class:"label text-sm text-warning"},"Buyer",-1),WI={class:"label text-sm"},XI={class:"label text-success"},KI={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},ZI=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),GI=[ZI],eD={class:"row"},tD={class:"col-md-12 col-lg-12"},aD={class:"pagination-container"},lD={class:"entries-dropdown"},cD=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),sD=["value"],oD={class:"pagination-wrapper"},nD={class:"pagination"},rD=["onClick"];function iD(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",jI,[Object(l["createElementVNode"])("div",gI,[Object(l["createElementVNode"])("div",fI,[Object(l["createElementVNode"])("div",EI,[Object(l["createElementVNode"])("div",VI,[Object(l["createElementVNode"])("div",NI,[yI,xI,Object(l["createElementVNode"])("div",vI,[Object(l["createElementVNode"])("div",kI,[Object(l["createElementVNode"])("div",wI,[Object(l["createElementVNode"])("span",SI,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>o.filterInstallments("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>o.filterInstallments("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,AI))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),CI,Object(l["createElementVNode"])("div",BI,[Object(l["createVNode"])(n,{onChange:t[4]||(t[4]=e=>o.filterInstallments("daterange_search")),onClear:o.getShopItems,value:s.time3,"onUpdate:value":t[5]||(t[5]=e=>s.time3=e),format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])]),Object(l["createElementVNode"])("div",_I,[Object(l["createElementVNode"])("div",PI,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:"listNavigation"},[Object(l["createElementVNode"])("div",II,[Object(l["createElementVNode"])("ul",DI,[Object(l["createElementVNode"])("li",TI,[Object(l["createElementVNode"])("a",MI,[Object(l["createElementVNode"])("div",zI,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm border-radius-lg product-img"},null,8,FI)]),Object(l["createElementVNode"])("div",UI,[Object(l["createElementVNode"])("h4",LI,"Instalment No."+Object(l["toDisplayString"])(t.installment_no),1),Object(l["createElementVNode"])("p",$I,"Instalment Amount - £"+Object(l["toDisplayString"])(o.formattedAmount(t.installment_amount)),1),Object(l["createElementVNode"])("div",RI,Object(l["toDisplayString"])(t.name)+" ("+Object(l["toDisplayString"])(t.product_type)+")",1),Object(l["createElementVNode"])("div",qI,"Purchase ID: "+Object(l["toDisplayString"])(t.purchase_id),1),Object(l["createElementVNode"])("span",HI,Object(l["toDisplayString"])(t.payment_status),1)]),QI,"student"!=s.user.role||"staff"!=s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",YI,[JI,Object(l["createElementVNode"])("h4",WI,Object(l["toDisplayString"])(t.buyer_name),1),Object(l["createElementVNode"])("p",XI,Object(l["toDisplayString"])(t.buyer_email),1)])):Object(l["createCommentVNode"])("",!0)])])])])]))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",KI,GI)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",eD,[Object(l["createElementVNode"])("div",tD,[Object(l["createElementVNode"])("div",aD,[Object(l["createElementVNode"])("div",lD,[cD,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.itemsPerPage=e),onChange:t[7]||(t[7]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,sD))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",oD,[Object(l["createElementVNode"])("ul",nD,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,rD)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var dD={components:{DatePicker:XA["a"]},name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){"student"!==this.user.role&&"staff"!==this.user.role&&this.$permissions.redirectIfNotAllowed("pending_installments"),this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{openedInstallment:null,time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",seachString:"",filterBy:"Buyer",allFields:["Buyer","Item Name"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{...Object(lt["b"])(["updateCartItemCounter"]),confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formatDateString(e){const t=vs()(e),a=t.format("DD/MM/YYYY");return a},openInstallment(e){this.openedInstallment==e?this.openedInstallment=null:this.openedInstallment=e},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getPaidInstallments",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterInstallments(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getShopItems();const a="daterange_search"===e?{type:"Date Range",value:t,status:"paid"}:{type:this.filterBy,value:this.seachString,status:"paid"};try{const e=await mt.post("/filterInstallments",a);this.shopItems=e.data}catch(l){console.log(l)}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},payNow(e){this.$router.push({name:"pay-installment",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,installment_id:e};try{await mt.post("/addItemToCart",a),this.countUserCartItems(),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},async countUserCartItems(){try{let e=await mt.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("bc12");const mD=ot()(dD,[["render",iD]]);var bD=mD;const pD={class:""},uD={class:"row"},hD={class:"col-12"},OD={class:"card"},jD={class:"card-body px-0 pb-2"},gD={class:"table-responsive p-0"},fD=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"REFUNDS",-1),ED=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"}," In the Refund section, you can view a list of processed refunds along with their details. ")],-1),VD={class:"filter-container mb-3"},ND={class:"row",style:{width:"100%"}},yD={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},xD={style:{display:"flex","margin-left":"20px"}},vD=["value"],kD=Object(l["createElementVNode"])("div",{class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},null,-1),wD={class:"col-md-4 col-sm-12",style:{"padding-top":"15px"}},SD={class:"card-body pt-1 p-3"},AD={class:"container-fluid mt-1"},CD={class:"row"},BD={class:"col-md-8"},_D={class:"d-flex flex-column"},PD={class:"d-flex"},ID=["src"],DD={class:"d-flex flex-column "},TD={class:"text-sm",style:{"margin-bottom":"0px !important"}},MD={key:0,style:{"font-size":"10px !important","font-weight":"400"},class:" text-sm"},zD={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"10px"}},FD={class:"me-3 trip-dates text-warning"},UD={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"10px"}},LD={class:"me-3 trip-dates text-warning"},$D={class:"me-2"},RD=Object(l["createTextVNode"])("Refunded to "),qD={class:"text-success"},HD={key:0},QD=Object(l["createTextVNode"])("Student-ID: "),YD={class:"text-success"},JD={key:1},WD=Object(l["createTextVNode"])("Staff-ID: "),XD={class:"text-success"},KD={class:"col-md-4"},ZD={class:"ms-auto text-end me-3"},GD={class:"d-flex flex-column "},eT={class:"text-danger text-gradient text-sm mt-1",style:{"font-size":"13px !important","font-weight":"600","line-height":"14px"}},tT={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"14px"}},aT={key:0,style:{"font-size":"13px"},class:"text-success"},lT={style:{"margin-bottom":"0px !important","margin-top":"0px !important","line-height":"14px"}},cT={key:0,style:{"font-size":"13px"},class:"text-warning"},sT={style:{"font-size":"13px"},class:"text-white"},oT={key:0,class:"text-success"},nT={key:1,class:"text-success"},rT=Object(l["createElementVNode"])("hr",null,null,-1),iT={key:0,class:"row list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},dT=Object(l["createElementVNode"])("small",{class:"d-flex justify-content-center"},"No products found!",-1),mT=[dT],bT={class:"row"},pT={class:"col-md-12 col-lg-12"},uT={class:"pagination-container"},hT={class:"entries-dropdown"},OT=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),jT=["value"],gT={class:"pagination-wrapper"},fT={class:"pagination"},ET=["onClick"];function VT(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("date-picker");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pD,[Object(l["createElementVNode"])("div",uD,[Object(l["createElementVNode"])("div",hD,[Object(l["createElementVNode"])("div",OD,[Object(l["createElementVNode"])("div",jD,[Object(l["createElementVNode"])("div",gD,[fD,ED,Object(l["createElementVNode"])("div",VD,[Object(l["createElementVNode"])("div",ND,[Object(l["createElementVNode"])("div",yD,[Object(l["createElementVNode"])("span",xD,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=e=>o.filterRefunds("string_search")),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=e=>o.filterRefunds("string_search")),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,vD))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),kD,Object(l["createElementVNode"])("div",wD,[Object(l["createVNode"])(n,{onChange:t[4]||(t[4]=e=>o.filterRefunds("daterange_search")),onClear:o.getShopItems,value:s.time3,"onUpdate:value":t[5]||(t[5]=e=>s.time3=e),class:"ms-3",format:"DD/MM/YYYY","value-type":"format",range:""},null,8,["onClear","value"])])])]),Object(l["createElementVNode"])("div",SD,[Object(l["createElementVNode"])("div",AD,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[Object(l["createElementVNode"])("div",CD,[Object(l["createElementVNode"])("div",BD,[Object(l["createElementVNode"])("div",_D,[Object(l["createElementVNode"])("span",PD,[Object(l["createElementVNode"])("img",{src:e.$env_vars.BASE_URL+t.image,alt:"image",class:"shadow-sm w-10 h-10 me-3 border-radius-lg"},null,8,ID),Object(l["createElementVNode"])("div",DD,[Object(l["createElementVNode"])("h6",TD,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(t.name)+" ",1),t.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",MD," ("+Object(l["toDisplayString"])(t.product_type)+") ",1)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("span",zD,[Object(l["createElementVNode"])("small",FD,"Date "+Object(l["toDisplayString"])(o.formatDateString(t.created_at)),1)]),Object(l["createElementVNode"])("span",UD,[Object(l["createElementVNode"])("small",LD,[Object(l["createElementVNode"])("span",$D,[RD,Object(l["createElementVNode"])("span",qD,Object(l["toDisplayString"])(t.buyer_name)+",",1)]),"student"==t.buyer_role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",HD,[QD,Object(l["createElementVNode"])("span",YD,Object(l["toDisplayString"])(t.buyer_student_id),1)])):Object(l["createCommentVNode"])("",!0),"staff"==t.buyer_role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",JD,[WD,Object(l["createElementVNode"])("span",XD,Object(l["toDisplayString"])(t.buyer_staff_id),1)])):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",KD,[Object(l["createElementVNode"])("div",ZD,[Object(l["createElementVNode"])("div",GD,[Object(l["createElementVNode"])("small",eT," Price - £"+Object(l["toDisplayString"])(o.formattedAmount(t.price)),1),Object(l["createElementVNode"])("span",tT,[null!=t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",aT,"Card Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("span",lT,[null==t.payment_card?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cT,"Wallet Payment")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",sT,["fully_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",oT,"Fully Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0),"partially_paid"==t.payment_status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",nT,"Partially Paid: £"+Object(l["toDisplayString"])(o.formattedAmount(t.amount_paid)),1)):Object(l["createCommentVNode"])("",!0)])])])])]),rT],64))),128)),0==s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",iT,mT)):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",bT,[Object(l["createElementVNode"])("div",pT,[Object(l["createElementVNode"])("div",uT,[Object(l["createElementVNode"])("div",hT,[OT,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.itemsPerPage=e),onChange:t[7]||(t[7]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,jT))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",gT,[Object(l["createElementVNode"])("ul",fT,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,ET)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])])}var NT={components:{DatePicker:XA["a"]},name:"tables",mounted(){this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("refunds"),this.$globalHelper.buttonColor()},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{time3:null,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,shopItems:"",user:"",filterBy:"Buyer",allFields:["Buyer"],seachString:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmAction(e,t){ys.a.fire({title:"Are you sure?",text:"",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Proceed!",customClass:{popup:"custom-swal"}}).then(a=>{a.isConfirmed&&this.refundActions(e,t)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getRefundRequest",t);this.shopItems=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterRefunds(e){let t;if("daterange_search"==e&&(t={fromDate:this.time3[0],toDate:this.time3[1]}),""===this.seachString&&"string_search"==e)return void this.getShopItems();const a="daterange_search"===e?{type:"Date Range",value:t}:{type:this.filterBy,value:this.seachString};try{const e=await mt.post("/filterRefunds",a);this.shopItems=e.data}catch(l){console.log(l)}},async refundActions(e,t){let a={refund_status:t,refund_id:e};try{await mt.post("/refundStatus",a),this.getShopItems(),this.snackbarMsg("Successfuly Refunded!")}catch(l){console.log(l),this.snackbarMsg("Something went wrong!")}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await mt.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},formatDateString(e){const t=vs()(e),a=t.format("DD/MM/YYYY");return a},formattedAmount(e){const t=parseFloat(e).toFixed(2);return t}}};a("d822");const yT=ot()(NT,[["render",VT]]);var xT=yT;Object(l["pushScopeId"])("data-v-9364ae48");const vT={class:"row"},kT={class:"col-md-12 col-sm-12"},wT={class:"support-form-container"},ST=Object(l["createElementVNode"])("h5",null,"Contact Support",-1),AT={class:"col-md-6 col-sm-12"},CT={key:0,class:"row mb-1 validation-errors bg-warning rounded p-1"},BT={class:"form-group"},_T=Object(l["createElementVNode"])("label",{for:"fullName",class:"input-label"},"Full Name",-1),PT={class:"form-group"},IT=Object(l["createElementVNode"])("label",{for:"email"},"Email",-1),DT={class:"form-group"},TT=Object(l["createElementVNode"])("label",{for:"subject"},"Subject",-1),MT={class:"form-group"},zT=Object(l["createElementVNode"])("label",{for:"message"},"Message",-1),FT=Object(l["createElementVNode"])("button",{type:"submit",class:"submit-button btn p-1 text-sm"},"Submit",-1);function UT(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",vT,[Object(l["createElementVNode"])("div",kT,[Object(l["createElementVNode"])("div",wT,[Object(l["createElementVNode"])("form",{class:"support-form",onSubmit:t[4]||(t[4]=Object(l["withModifiers"])((...e)=>o.handleSubmit&&o.handleSubmit(...e),["prevent"]))},[ST,Object(l["createElementVNode"])("div",AT,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",CT,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",BT,[_T,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.form.fullName=e),type:"text",readonly:"",class:"input-box",id:"fullName",name:"fullName",required:""},null,512),[[l["vModelText"],s.form.fullName]])]),Object(l["createElementVNode"])("div",PT,[IT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.form.email=e),type:"email",readonly:"",class:"input-box",id:"email",name:"email",required:""},null,512),[[l["vModelText"],s.form.email]])]),Object(l["createElementVNode"])("div",DT,[TT,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.form.subject=e),type:"text",class:"input-box",id:"subject",name:"subject",required:""},null,512),[[l["vModelText"],s.form.subject]])]),Object(l["createElementVNode"])("div",MT,[zT,Object(l["withDirectives"])(Object(l["createElementVNode"])("textarea",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.form.message=e),id:"message",class:"input-area",name:"message",rows:"5",required:""},null,512),[[l["vModelText"],s.form.message]])])]),FT],32)])])])}Object(l["popScopeId"])();var LT={data(){return{isError:!1,validationErrors:"",user:"",form:{fullName:"",email:"",subject:"",message:""}}},mounted(){this.getUser(),this.$globalHelper.buttonColor()},methods:{getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e,"student"==e.role||"staff"==e.role?console.log(""):this.$router.go(-1),this.form.fullName=this.user.first_name+" "+this.user.last_name,this.form.email=this.user.email},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async handleSubmit(){try{await mt.post("/sendSupportEmail",this.form),this.snackbarMsg("Message Sent Successfully!"),this.isError=!1,Object.keys(this.form).forEach(e=>this.form[e]="")}catch(e){console.log(e),this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("639d");const $T=ot()(LT,[["render",UT],["__scopeId","data-v-9364ae48"]]);var RT=$T;const qT={class:"container-fluid"},HT={class:"row"},QT={class:"col-12"},YT={class:"card ps-3"},JT={class:"d-flex justify-content-between border-radius-lg pt-4"},WT=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS",-1),XT=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),KT=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee Shop Items. You can add new items, delete or edit existing items, and update their quantity, status, "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" and price. This functionality ensures effective management of the shop items. ")])],-1),ZT={class:"card-body px-0 pb-2"},GT={class:"table-responsive p-0"},eM={class:"filter-container ms-2 mb-2"},tM={class:"row",style:{width:"100%"}},aM={class:"col-4"},lM={style:{display:"flex"}},cM=["value"],sM={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},oM=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),nM=Object(l["createTextVNode"])(" Export To XLS "),rM=[oM,nM],iM={class:"table-responsive p-0"},dM={ref:"table",class:"table align-items-center mb-0"},mM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),bM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),pM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),uM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Sold Quantity ",-1),hM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Expiration Date ",-1),OM=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),jM={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},gM=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),fM=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),EM={key:0},VM=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),NM=[VM],yM={class:"align-middle text-center"},xM={class:"text-secondary text-xs font-weight-bold"},vM={class:"align-middle text-center"},kM=["src"],wM={class:"text-secondary text-xs "},SM={class:"align-middle text-center"},AM={class:"text-secondary text-xs "},CM={class:"align-middle text-center"},BM={class:"text-secondary text-xs "},_M={class:"align-middle text-center"},PM={class:"text-secondary text-xs "},IM={class:"align-middle text-center"},DM={class:"text-secondary text-xs "},TM={key:0,class:"align-middle text-center"},MM={class:"text-secondary text-xs "},zM={class:"align-middle text-center text-sm"},FM={key:0,class:"badge badge-sm bg-gradient-danger"},UM={key:1,class:"badge badge-sm bg-gradient-success"},LM={key:2,class:"badge badge-sm bg-gradient-success"},$M={key:3,class:"badge badge-sm bg-gradient-danger"},RM={class:"align-middle text-center text-sm"},qM={key:0},HM=["onClick"],QM=["onClick"],YM={class:"row"},JM={class:"col-md-12 col-lg-12"},WM={class:"pagination-container"},XM={class:"entries-dropdown"},KM=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),ZM=["value"],GM={class:"pagination-wrapper"},ez={class:"pagination"},tz=["onClick"];function az(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("ProductOwner");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",qT,[Object(l["createElementVNode"])("div",HT,[Object(l["createElementVNode"])("div",QT,[Object(l["createElementVNode"])("div",YT,[Object(l["createElementVNode"])("div",JT,[WT,o.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-items"}},{default:Object(l["withCtx"])(()=>[XT]),_:1})):Object(l["createCommentVNode"])("",!0)]),KT,Object(l["createElementVNode"])("div",ZT,[Object(l["createElementVNode"])("div",GT,[Object(l["createElementVNode"])("div",eM,[Object(l["createElementVNode"])("div",tM,[Object(l["createElementVNode"])("div",aM,[Object(l["createElementVNode"])("span",lM,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,cM))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",sM,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},rM)])])]),Object(l["createElementVNode"])("div",iM,[Object(l["createElementVNode"])("table",dM,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[mM,bM,pM,uM,hM,OM,s.user&&"super_admin"==s.user.role||s.user&&"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",jM," Shop ")):Object(l["createCommentVNode"])("",!0),gM,fM])]),Object(l["createElementVNode"])("tbody",null,[0===s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",EM,NM)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:a},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(t.shop_items,(a,c)=>{var n;return Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:c},[Object(l["createElementVNode"])("td",yM,[Object(l["createElementVNode"])("span",xM,Object(l["toDisplayString"])(a.id),1)]),Object(l["createElementVNode"])("td",vM,[a.image?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",{key:0,src:e.$env_vars.BASE_URL+a.image,style:{height:"20px",width:"20px","margin-right":"10px"}},null,8,kM)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("span",wM,Object(l["toDisplayString"])(a.name),1)]),Object(l["createElementVNode"])("td",SM,[Object(l["createElementVNode"])("span",AM,Object(l["toDisplayString"])(null!==(n=a.quantity)&&void 0!==n?n:"Unlimited"),1)]),Object(l["createElementVNode"])("td",CM,[Object(l["createElementVNode"])("span",BM,Object(l["toDisplayString"])(a.quantity_sold),1)]),Object(l["createElementVNode"])("td",_M,[Object(l["createElementVNode"])("span",PM,Object(l["toDisplayString"])(o.formatDate(a.valid_to)),1)]),Object(l["createElementVNode"])("td",IM,[Object(l["createElementVNode"])("span",DM,"£"+Object(l["toDisplayString"])(o.formattedPrice(a.price)),1)]),s.user&&"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",TM,[Object(l["createElementVNode"])("span",MM,Object(l["toDisplayString"])(t.shop_name?t.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",zM,["expired"==a.status?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",FM,"Expired")):null==a.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",UM,"Available")):a.quantity>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",LM,"Available")):0==a.quantity?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",$M,"Not Available")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("td",RM,[s.user&&"student"!=s.user.role&&"parent"!=s.user.role&&"staff"!=s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",qM,[o.userPermissions.edit_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:e=>o.editShopItem(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,HM)):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_shop?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:e=>o.confirmDelete(a.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,QM)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0)])])}),128))],64))),128))])],512)])]),Object(l["createVNode"])(r,{show:s.showModal,ownerData:s.ownerData,onClose:t[5]||(t[5]=e=>s.showModal=!1),onUpdateTask:e.updateAmount},null,8,["show","ownerData","onUpdateTask"]),Object(l["createElementVNode"])("div",YM,[Object(l["createElementVNode"])("div",JM,[Object(l["createElementVNode"])("div",WM,[Object(l["createElementVNode"])("div",XM,[KM,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>s.itemsPerPage=e),onChange:t[7]||(t[7]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,ZM))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",GM,[Object(l["createElementVNode"])("ul",ez,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,tz)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}Object(l["pushScopeId"])("data-v-0c52248a");const lz={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},cz={class:"modal-dialog modal-dialog-centered",style:{width:"28%"}},sz={class:"modal-content"},oz={class:"modal-header"},nz=Object(l["createElementVNode"])("h5",{class:"h5 modal-title"},"Product Owner",-1),rz=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),iz=[rz],dz={class:"pt-4 modal-body"},mz=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),bz={class:"mb-4 input-group"},pz={class:"mb-4 input-group"},uz={key:0,class:"alert alert-success"},hz={class:"text-end"};function Oz(e,t,a,c,s,o){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lz,[Object(l["createElementVNode"])("div",cz,[Object(l["createElementVNode"])("div",sz,[Object(l["createElementVNode"])("div",oz,[nz,Object(l["createElementVNode"])("button",{type:"button",class:"btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),"aria-label":"Close"},iz)]),Object(l["createElementVNode"])("div",dz,[mz,Object(l["createElementVNode"])("div",bz,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>s.owner.product_owner_name=e),type:"email",class:"form-control border p-1",placeholder:"Name"},null,512),[[l["vModelText"],s.owner.product_owner_name]])]),Object(l["createElementVNode"])("div",pz,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[2]||(t[2]=e=>s.owner.product_owner_email=e),type:"email",class:"form-control border p-1",placeholder:"Email"},null,512),[[l["vModelText"],s.owner.product_owner_email]])]),s.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",uz,Object(l["toDisplayString"])(s.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",hz,[Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>o.saveChanges&&o.saveChanges(...e)),class:"m-1 btn btn-primary"}," Save "),Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var jz={props:{show:{type:Boolean,required:!0},ownerData:{type:Object,required:!0}},mounted(){this.$globalHelper.buttonColor()},computed:{formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},data(){return{addedBalance:null,successMessage:"",owner:{product_owner_name:"",product_owner_email:""}}},watch:{ownerData:{handler(e){this.owner=e},deep:!0,immediate:!0}},methods:{closeModal(){this.$emit("close")},async saveChanges(){try{const e="/productsOwner";await mt.post(e,this.owner),this.snackbarMsg("Item Updated Successfuly")}catch(e){console.log(e)}this.$emit("update-task",this.addedBalance),this.closeModal()}}};a("4aee");const gz=ot()(jz,[["render",Oz],["__scopeId","data-v-0c52248a"]]);var fz=gz,Ez={components:{ProductOwner:fz},name:"tables",mounted(){this.setColor(),this.getUser(),this.getShopItems(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_shop"),this.$globalHelper.buttonColor()},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterShopItems,500)},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{ownerData:"",showModal:!1,perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",shopItems:"",user:"",filterBy:"Name",allFields:["Name","Quantity","Price"],totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{formatDate(e){const t=e,a=vs()(t).format("DD/MM/YYYY");return a},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"shop_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getShopItems",t);this.shopItems=e.data.data.data,console.log(this.shopItems);let a=this.shopItems[0];this.ownerData={product_owner_name:a.product_owner_name,product_owner_email:a.product_owner_email},this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"available"};try{const t=await mt.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await mt.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}}}};a("a556");const Vz=ot()(Ez,[["render",az]]);var Nz=Vz;const yz={class:"container-fluid"},xz={class:"row"},vz={class:"col-12"},kz={class:"card px-3"},wz=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"SHOP ITEMS"),Object(l["createElementVNode"])("small",{class:"page-description"}," Every archived Item can be found in this table. Here, you can manage archived Shop Items. You can permanently delete them in bulk, restore them, or export the data to an Excel sheet ")])],-1),Sz={class:"card-body px-0 pb-2"},Az={class:"table-responsive p-0"},Cz={class:"filter-container ms-2 mb-2"},Bz={class:"row",style:{width:"100%"}},_z={class:"col-4"},Pz={style:{display:"flex"}},Iz=["value"],Dz={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},Tz=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),Mz=Object(l["createTextVNode"])(" Export To XLS "),zz=[Tz,Mz],Fz={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},Uz=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),Lz=Object(l["createTextVNode"])(" Bulk Restore "),$z=[Uz,Lz],Rz={class:"col-12 col-md-2 col-sm-5",style:{"padding-top":"15px"}},qz=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),Hz=Object(l["createTextVNode"])(" Bulk Delete "),Qz=[qz,Hz],Yz={class:"table-responsive p-0"},Jz={ref:"table",class:"table align-items-center mb-0"},Wz={class:""},Xz={class:"form-check",style:{"margin-left":"-20px"}},Kz=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),Zz=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," ID ",-1),Gz=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Item ",-1),eF=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder ps-2"}," Quantity ",-1),tF=Object(l["createElementVNode"])("th",{class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"}," Price ",-1),aF={key:0,class:"text-uppercase align-middle text-center text-xxs font-weight-bolder"},lF=Object(l["createElementVNode"])("th",{class:"text-center align-middle text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),cF={key:0},sF=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),oF=[sF],nF={class:"align-middle text-center text-sm"},rF={class:"form-check"},iF=["checked","onChange"],dF=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),mF={class:"align-middle text-center"},bF={class:"text-secondary text-xs font-weight-bold"},pF={class:"align-middle text-center"},uF={class:"text-secondary text-xs "},hF={class:"align-middle text-center"},OF={class:"text-secondary text-xs "},jF={class:"align-middle text-center"},gF={class:"text-secondary text-xs "},fF={key:0,class:"align-middle text-center"},EF={class:"text-secondary text-xs "},VF={class:"align-middle text-center text-sm"},NF={class:"badge badge-sm bg-gradient-success"},yF={class:"row"},xF={class:"col-md-12 col-lg-12"},vF={class:"pagination-container"},kF={class:"entries-dropdown"},wF=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),SF=["value"],AF={class:"pagination-wrapper"},CF={class:"pagination"},BF=["onClick"];function _F(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",yz,[Object(l["createElementVNode"])("div",xz,[Object(l["createElementVNode"])("div",vz,[Object(l["createElementVNode"])("div",kz,[wz,Object(l["createElementVNode"])("div",Sz,[Object(l["createElementVNode"])("div",Az,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",Cz,[Object(l["createElementVNode"])("div",Bz,[Object(l["createElementVNode"])("div",_z,[Object(l["createElementVNode"])("span",Pz,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,Iz))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",Dz,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},zz)]),Object(l["createElementVNode"])("div",Fz,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.confirmAction("restore"))},$z)]),Object(l["createElementVNode"])("div",Rz,[o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.confirmAction("delete"))},Qz)):Object(l["createCommentVNode"])("",!0)])])])]),Object(l["createElementVNode"])("div",Yz,[Object(l["createElementVNode"])("table",Jz,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",Wz,[Object(l["createElementVNode"])("div",Xz,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),Kz])]),Zz,Gz,eF,tF,s.user&&"super_admin"==s.user.role||s.user&&"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",aF," Shop ")):Object(l["createCommentVNode"])("",!0),lF])]),Object(l["createElementVNode"])("tbody",null,[0===s.shopItems.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",cF,oF)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.shopItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(e.shop_items,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:a},[Object(l["createElementVNode"])("td",nF,[Object(l["createElementVNode"])("div",rF,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(t.id),onChange:e=>o.selectRecord(t.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,iF),dF])]),Object(l["createElementVNode"])("td",mF,[Object(l["createElementVNode"])("span",bF,Object(l["toDisplayString"])(t.id),1)]),Object(l["createElementVNode"])("td",pF,[Object(l["createElementVNode"])("span",uF,Object(l["toDisplayString"])(t.name),1)]),Object(l["createElementVNode"])("td",hF,[Object(l["createElementVNode"])("span",OF,Object(l["toDisplayString"])(t.quantity?t.quantity:"Unlimited"),1)]),Object(l["createElementVNode"])("td",jF,[Object(l["createElementVNode"])("span",gF,"£"+Object(l["toDisplayString"])(o.formattedPrice(t.price)),1)]),s.user&&"super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",fF,[Object(l["createElementVNode"])("span",EF,Object(l["toDisplayString"])(e.shop_name?e.shop_name:"-"),1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",VF,[Object(l["createElementVNode"])("span",NF,Object(l["toDisplayString"])(t.status),1)])]))),128))],64))),128))])],512)])]),Object(l["createElementVNode"])("div",yF,[Object(l["createElementVNode"])("div",xF,[Object(l["createElementVNode"])("div",vF,[Object(l["createElementVNode"])("div",kF,[wF,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getShopItems(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,SF))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",AF,[Object(l["createElementVNode"])("ul",CF,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getShopItems(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getShopItems(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getShopItems(e),href:"#"},Object(l["toDisplayString"])(e),9,BF)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getShopItems(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getShopItems(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var PF={name:"tables",async mounted(){await this.setColor(),await this.getUser(),await this.getShopItems(),await this.selectAll()},updated(){"student"!=this.user.role&&this.$permissions.redirectIfNotAllowed("view_shop")},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterShopItems,500)},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["Name","Quantity","Price"],seachString:"",selectall:!1,selectedRecords:[],shopItems:"",user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteShopItem(e)})},exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"archived_items.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getShopItems(e=null){let t={page:e,entries_per_page:this.itemsPerPage};try{const e=await mt.post("/getArchivedItems",t);this.shopItems=e.data.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async filterShopItems(){if(""==this.filterBy&&""==this.seachString)return void this.getShopItems();if(""!=this.filterBy&&""==this.seachString)return void this.getShopItems();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await mt.post("/filterShopItems",e);this.shopItems=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},async deleteShopItem(e){try{await mt.delete("/deleteShopItem/"+e),this.getShopItems(),this.snackbarMsg("Item Removed Successfuly")}catch(t){console.log(t)}},selectAll(){this.selectedRecords=[],this.shopItems[0].shop_items.filter(e=>{this.selectall?this.selectedRecords.push({id:e.id,value:!0}):this.selectedRecords.push({id:e.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkRestore(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await mt.post("/bulkRestoreItems",e),this.snackbarMsg("Successfully restored"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},async bulkDelete(){let e=[];this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length?(await mt.post("/bulkDeleteItems",e),this.snackbarMsg("Successfully deleted"),this.getShopItems()):this.snackbarMsg("Error: data not selected")},removeShopItem(e){const t=this.shopItems.findIndex(t=>t.id===e);this.shopItems.splice(t,1)},editShopItem(e){this.$router.push({name:"edit-shop-items",params:{id:e}})},async addToCart(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,shop_item_id:e};try{await mt.post("/addItemToCart",a),this.snackbarMsg("Item Added to Cart")}catch(l){console.log(l)}},confirmAction(e){ys.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the students",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})}}};a("e362");const IF=ot()(PF,[["render",_F]]);var DF=IF;Object(l["pushScopeId"])("data-v-33abc9ea");const TF={class:"container-fluid py-4"},MF={class:"row"},zF={class:"col-12"},FF={class:"card my-4"},UF={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},LF=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Shop Item",-1),$F=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),RF={class:"card-body px-0 pb-2"},qF={class:"table-responsive p-0"},HF={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},QF={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},YF={class:"form-bg container p-4"},JF={class:"card card-plain"},WF={class:"card-body"},XF={role:"form"},KF={key:0,class:"row mb-1 validation-errors"},ZF={class:"row mb-1"},GF={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},eU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),tU={key:0,class:"text-danger error-txt"},aU={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},lU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),cU={key:0,class:"text-danger error-txt"},sU={class:"mb-1"},oU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),nU={key:0,class:"text-danger error-txt"},rU={class:"row mb-1"},iU={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},dU=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),mU=Object(l["createElementVNode"])("br",null,null,-1),bU={key:0,class:"text-danger error-txt"},pU={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},uU=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),hU=Object(l["createElementVNode"])("br",null,null,-1),OU={key:0,class:"text-danger error-txt"},jU={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},gU=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),fU=Object(l["createElementVNode"])("br",null,null,-1),EU=["value"],VU={key:0,class:"text-danger error-txt"},NU={class:"row mb-1"},yU={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},xU=Object(l["createElementVNode"])("label",{class:"input-label",for:"owner_email"},"Product Owner Email",-1),vU={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},kU=Object(l["createElementVNode"])("label",{class:"input-label",for:"visibility"},"Visibility Options",-1),wU=Object(l["createElementVNode"])("br",null,null,-1),SU={class:"row mb-1"},AU={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},CU=Object(l["createElementVNode"])("label",{class:"input-label",for:"colleges"},"Limit Colleges",-1),BU=Object(l["createElementVNode"])("br",null,null,-1),_U={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},PU=Object(l["createElementVNode"])("label",{class:"input-label",for:"courses"},"Limit Courses",-1),IU=Object(l["createElementVNode"])("br",null,null,-1),DU={class:"row mb-1"},TU={class:"col-xl-6 col-lg-6 col-md-6"},MU={class:"mt-2 d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},zU=Object(l["createElementVNode"])("small",{class:"ms-2 me-3"},"Enable Quantity Limit",-1),FU={class:"checkbox-container mt-3 me-5"},UU=["checked"],LU=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),$U={key:1,class:"row mb-1"},RU={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},qU=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),HU={key:0,class:"text-danger error-txt"},QU={class:"row p-2"},YU=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),JU={class:"col-xl-4 col-lg-4 col-md-4"},WU={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},XU=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Instalments",-1),KU={class:"checkbox-container mt-2 me-5"},ZU=["checked"],GU=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),eL={class:"col-xl-4 col-lg-4 col-md-4"},tL={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},aL=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Instalments",-1),lL={class:"checkbox-container mt-2 me-5"},cL=["checked"],sL=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),oL={class:"col-xl-4 col-lg-4 col-md-4"},nL={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},rL=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),iL={class:"checkbox-container mt-2 me-5"},dL=["checked"],mL=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),bL={key:2,class:"row p-2"},pL={class:"col-xl-4 col-lg-4 col-md-4"},uL={class:"mb-1"},hL=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),OL={class:"col-xl-4 col-lg-4 col-md-4"},jL={class:"mb-1"},gL=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),fL={class:"mb-1"},EL={class:"input-label",for:"enrollment_date"},VL=Object(l["createElementVNode"])("br",null,null,-1),NL={key:3,class:"row p-2"},yL={class:"col-xl-4 col-lg-4 col-md-4"},xL={class:"mb-1"},vL=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),kL={class:"col-xl-4 col-lg-4 col-md-4"},wL={class:"mb-1"},SL=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),AL={class:"col-xl-4 col-lg-4 col-md-4"},CL={class:"mb-1"},BL=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),_L={class:"col-xl-4 col-lg-4 col-md-4"},PL={class:"mb-1"},IL=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),DL={class:"mb-1"},TL={class:"input-label",for:"enrollment_date"},ML=Object(l["createElementVNode"])("br",null,null,-1),zL={class:"mb-1"},FL={class:"upload-container"},UL={key:0,class:"image-preview"},LL=["src"],$L=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),RL={for:"file-input",class:"file-input-label"},qL={key:0},HL={key:1},QL=Object(l["createElementVNode"])("br",null,null,-1),YL={key:0,class:"text-danger error-txt"},JL={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},WL={class:""};function XL(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("date-picker"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",TF,[Object(l["createElementVNode"])("div",MF,[Object(l["createElementVNode"])("div",zF,[Object(l["createElementVNode"])("div",FF,[Object(l["createElementVNode"])("div",UF,[LF,Object(l["createVNode"])(n,{to:{name:"shop-items"}},{default:Object(l["withCtx"])(()=>[$F]),_:1})]),Object(l["createElementVNode"])("div",RF,[Object(l["createElementVNode"])("div",qF,[Object(l["createElementVNode"])("div",HF,[Object(l["createElementVNode"])("div",QF,[Object(l["createElementVNode"])("div",YF,[Object(l["createElementVNode"])("div",JF,[Object(l["createElementVNode"])("div",WF,[Object(l["createElementVNode"])("form",XF,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",KF,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationError,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",ZF,[Object(l["createElementVNode"])("div",GF,[eU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newItem.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",tU,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",aU,[lU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>s.newItem.price=e),type:"number",step:"0.01",min:"0",placeholder:"price",name:"price"},null,512),[[l["vModelText"],s.newItem.price]]),""!==s.formValidation&&""!==s.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cU,"Price is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",sU,[oU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],s.newItem.detail]]),""!==s.formValidation&&""!==s.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",nU,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",rU,[Object(l["createElementVNode"])("div",iU,[dU,mU,Object(l["createVNode"])(r,{value:s.newItem.valid_from,"onUpdate:value":t[3]||(t[3]=e=>s.newItem.valid_from=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[4]||(t[4]=e=>o.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==s.formValidation&&""!==s.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",bU,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",pU,[uU,hU,Object(l["createVNode"])(r,{value:s.newItem.valid_to,"onUpdate:value":t[5]||(t[5]=e=>s.newItem.valid_to=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[6]||(t[6]=e=>o.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==s.formValidation&&""!==s.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",OU,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",jU,[gU,fU,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.productTypesList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,EU))),128))],512),[[l["vModelSelect"],s.newItem.product_type]]),""!==s.formValidation&&""!==s.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",VU,"Shop is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",NU,[Object(l["createElementVNode"])("div",yU,[xU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"owner_email","onUpdate:modelValue":t[8]||(t[8]=e=>s.newItem.product_owner_email=e),type:"email",placeholder:"email",name:"owner_email"},null,512),[[l["vModelText"],s.newItem.product_owner_email]])]),Object(l["createElementVNode"])("div",vU,[kU,wU,Object(l["createVNode"])(i,{label:"Visibility Options",options:s.visibilityOptions,onInput:o.handleVisibility,placeholder:"Visibility Options"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",SU,[Object(l["createElementVNode"])("div",AU,[CU,BU,Object(l["createVNode"])(i,{label:"Visibility Options",options:s.schoolsList,onInput:o.handleColleges,placeholder:"Visibility Options"},null,8,["options","onInput"])]),Object(l["createElementVNode"])("div",_U,[PU,IU,Object(l["createVNode"])(i,{label:"Visibility Options",options:s.coursesList,onInput:o.handleCourses,placeholder:"Limit Courses"},null,8,["options","onInput"])])]),Object(l["createElementVNode"])("div",DU,[Object(l["createElementVNode"])("div",TU,[Object(l["createElementVNode"])("span",MU,[zU,Object(l["createElementVNode"])("div",FU,[Object(l["createElementVNode"])("input",{checked:s.isQuantityEnabled,onChange:t[9]||(t[9]=e=>s.isQuantityEnabled=!s.isQuantityEnabled),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,UU),LU])])])]),s.isQuantityEnabled?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",$U,[Object(l["createElementVNode"])("div",RU,[qU,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[10]||(t[10]=e=>s.newItem.quantity=e),min:"0",type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],s.newItem.quantity]]),""!==s.formValidation&&""!==s.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",HU,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",QU,[YU,Object(l["createElementVNode"])("div",JU,[Object(l["createElementVNode"])("span",WU,[XU,Object(l["createElementVNode"])("div",KU,[Object(l["createElementVNode"])("input",{checked:"installments"==s.paymentPlan,onChange:t[11]||(t[11]=e=>o.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,ZU),GU])])]),Object(l["createElementVNode"])("div",eL,[Object(l["createElementVNode"])("span",tL,[aL,Object(l["createElementVNode"])("div",lL,[Object(l["createElementVNode"])("input",{checked:"deposit"==s.paymentPlan,onChange:t[12]||(t[12]=e=>o.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,cL),sL])])]),Object(l["createElementVNode"])("div",oL,[Object(l["createElementVNode"])("span",nL,[rL,Object(l["createElementVNode"])("div",iL,[Object(l["createElementVNode"])("input",{checked:"manual"==s.paymentPlan,onChange:t[13]||(t[13]=e=>o.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,dL),mL])])])]),"installments"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bL,[Object(l["createElementVNode"])("div",pL,[Object(l["createElementVNode"])("div",uL,[hL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.installmentsAndDeposit.total_installments=e),onInput:t[15]||(t[15]=(...e)=>o.handleIntegerInput&&o.handleIntegerInput(...e)),class:"input-box",id:"name",step:"1",type:"number",min:"0",placeholder:"Total Instalments",name:"name"},null,544),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",OL,[Object(l["createElementVNode"])("div",jL,[gL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",fL,[Object(l["createElementVNode"])("label",EL,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),VL,Object(l["createVNode"])(r,{value:s.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>o.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==s.paymentPlan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",NL,[Object(l["createElementVNode"])("div",yL,[Object(l["createElementVNode"])("div",xL,[vL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>s.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Instalments",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",kL,[Object(l["createElementVNode"])("div",wL,[SL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",AL,[Object(l["createElementVNode"])("div",CL,[BL,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>s.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",_L,[Object(l["createElementVNode"])("div",PL,[IL,Object(l["createVNode"])(r,{value:s.installmentsAndDeposit.initial_deposit_due_date,"onUpdate:value":t[20]||(t[20]=e=>s.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value"])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",DL,[Object(l["createElementVNode"])("label",TL,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),ML,Object(l["createVNode"])(r,{value:s.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>o.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",zL,[Object(l["createElementVNode"])("div",FL,[s.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",UL,[Object(l["createElementVNode"])("img",{src:s.imageFileUrl,alt:"Image Preview"},null,8,LL)])):Object(l["createCommentVNode"])("",!0),$L,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[21]||(t[21]=(...e)=>o.handleImageUpload&&o.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",RL,[e.mageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",HL,Object(l["toDisplayString"])(s.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",qL,"Choose a file"))])]),QL,""!==s.formValidation&&""!==s.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",YL,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",JL,[Object(l["createElementVNode"])("div",WL,[Object(l["createElementVNode"])("button",{onClick:t[22]||(t[22]=(...e)=>o.saveNewItem&&o.saveNewItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var KL={name:"",components:{MultiSelect:nw,DatePicker:XA["a"]},mounted(){this.getUser(),this.getAllShops(),this.getSchools(),this.getAllCourses(),this.getProductTypes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_shop")},computed:{},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))}},data(){return{isQuantityEnabled:!1,debounceTimeout:null,paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:"",other_installments_due_date:[]},schoolsList:null,coursesList:null,productTypesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:null,formValidation:"",allAttributes:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",allShops:"",productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],user:"",validationError:"",isError:!1,newItem:{name:"",price:"",quantity:"",product_type:"",detail:"",shop_id:"",image:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitColleges:null,limitCourses:null,product_owner_email:null},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{validateExpiryDate(){const{valid_from:e,valid_to:t}=this.newItem;if(e&&t){const a=new Date(e),l=new Date(t);a>=l&&(this.newItem.valid_to=null)}},validateInstallmentDate(e){const t=this.installmentsAndDeposit.other_installments_due_date;if(e>0&&t[e]){const a=new Date(t[e-1]),l=new Date(t[e]),c=l>a;c||t.splice(e,1)}},handleIntegerInput(e){const t=e.target.value;t&&!Number.isInteger(Number(t))&&(this.installmentsAndDeposit.total_installments=Math.floor(t))},handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await mt.get(e);this.coursesList=t.data}catch(e){console.log(e)}},async getProductTypes(){try{let e="/getProductTypesForDropdown";const t=await mt.get(e);this.productTypesList=t.data}catch(e){console.log(e)}},async getSchools(){try{let e=await mt.get("/getAllSchoolsCourses");this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},changePaymentPlan(e){this.paymentPlan==e?this.paymentPlan="":this.paymentPlan=e},validateForm(){this.$permissions.redirectIfNotAllowed("create_shop");let e=!1,t="";t=Jo()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewItem(){this.newItem.payment_plan=this.paymentPlan,this.newItem.installmentsAndDeposit=this.installmentsAndDeposit,this.newItem.installmentsAndDeposit.initial_deposit_due_date=this.newItem.installmentsAndDeposit.initial_deposit_due_date?this.newItem.installmentsAndDeposit.initial_deposit_due_date.toISOString().split("T")[0]:null,this.newItem.image=this.selectedImageFile;const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.paymentPlan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),e.append("quantity",this.newItem.quantity),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from.toISOString().split("T")[0]),e.append("valid_to",this.newItem.valid_to.toISOString().split("T")[0]),e.append("product_owner_email",this.newItem.product_owner_email),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));try{await mt.post("/addItem",e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Saved Successfuly"),this.isError=!1}catch(t){this.validationError=t.response.data.errors,this.isError=!0}},handleAttributes(e){this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},async getAllAttributes(){try{const e=await mt.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){console.log(e),this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await mt.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("9494");const ZL=ot()(KL,[["render",XL],["__scopeId","data-v-33abc9ea"]]);var GL=ZL;Object(l["pushScopeId"])("data-v-302ed20e");const e$={class:"container-fluid py-4"},t$={class:"row"},a$={class:"col-12"},l$={class:"card my-4"},c$={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},s$=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Shop Item",-1),o$=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),n$={class:"card-body px-0 pb-2"},r$={class:"table-responsive p-0"},i$={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},d$={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},m$={class:"form-bg container p-4"},b$={class:"card card-plain"},p$={class:"card-body"},u$={role:"form"},h$={key:0,class:"row mb-1 validation-errors"},O$={class:"row mb-1"},j$={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},g$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),f$={key:0,class:"text-danger error-txt"},E$={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},V$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price",-1),N$={key:0,class:"text-danger error-txt"},y$={class:"mb-1"},x$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Detail",-1),v$={key:0,class:"text-danger error-txt"},k$={class:"row mb-1"},w$={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},S$=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_from"},"Valid From",-1),A$=Object(l["createElementVNode"])("br",null,null,-1),C$={key:0,class:"text-danger error-txt"},B$={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},_$=Object(l["createElementVNode"])("label",{class:"input-label",for:"valid_to"},"Valid To",-1),P$=Object(l["createElementVNode"])("br",null,null,-1),I$={key:0,class:"text-danger error-txt"},D$={class:"col-xl-4 col-lg-4 col-md-4 mb-1"},T$=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Product Type",-1),M$=Object(l["createElementVNode"])("br",null,null,-1),z$=["value"],F$={key:0,class:"text-danger error-txt"},U$={class:"row mb-1"},L$={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},$$=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Product Owner Email",-1),R$={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},q$=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Visibility Options",-1),H$=Object(l["createElementVNode"])("br",null,null,-1),Q$={class:"row mb-1"},Y$={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},J$=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Colleges",-1),W$=Object(l["createElementVNode"])("br",null,null,-1),X$={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},K$=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Limit Courses",-1),Z$=Object(l["createElementVNode"])("br",null,null,-1),G$={class:"row mb-1"},eR={class:"col-xl-6 col-lg-6 col-md-6"},tR={class:"mt-2 d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},aR=Object(l["createElementVNode"])("small",{class:"ms-2 me-3"},"Enable Quantity Limit",-1),lR={class:"checkbox-container mt-3 me-5"},cR=["checked"],sR=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),oR={key:1,class:"row mb-1"},nR={class:"col-xl-6 col-lg-6 col-md-6 mb-1"},rR=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Quantity",-1),iR={key:0,class:"text-danger error-txt"},dR={class:"row p-2"},mR=Object(l["createElementVNode"])("div",{class:"col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("h6",{class:"text-warning"},"Payment Plan")],-1),bR={class:"col-xl-4 col-lg-4 col-md-4"},pR={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},uR=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Instalments",-1),hR={class:"checkbox-container mt-2 me-5"},OR=["checked"],jR=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),gR={class:"col-xl-4 col-lg-4 col-md-4"},fR={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},ER=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Deposit & Instalments",-1),VR={class:"checkbox-container mt-2 me-5"},NR=["checked"],yR=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),xR={class:"col-xl-4 col-lg-4 col-md-4"},vR={class:"d-flex justify-space-between align-items-center text-dark font-weight-bold text-xs"},kR=Object(l["createElementVNode"])("small",{class:"mb-2 me-3"},"Full Payment",-1),wR={class:"checkbox-container mt-2 me-5"},SR=["checked"],AR=Object(l["createElementVNode"])("label",{class:"checkbox-label",for:"installmentsCheckbox"},null,-1),CR={key:2,class:"row p-2"},BR={class:"col-xl-4 col-lg-4 col-md-4"},_R={class:"mb-1"},PR=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),IR={class:"col-xl-4 col-lg-4 col-md-4"},DR={class:"mb-1"},TR=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),MR={class:"mb-1"},zR={class:"input-label",for:"enrollment_date"},FR={key:3,class:"row p-2"},UR={class:"col-xl-4 col-lg-4 col-md-4"},LR={class:"mb-1"},$R=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Instalments",-1),RR={class:"col-xl-4 col-lg-4 col-md-4"},qR={class:"mb-1"},HR=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Amount Per Instalment",-1),QR={class:"col-xl-4 col-lg-4 col-md-4"},YR={class:"mb-1"},JR=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Initial Deposit",-1),WR={class:"col-xl-4 col-lg-4 col-md-4"},XR={class:"mb-1"},KR=Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Due Date For Initial Deposit",-1),ZR=Object(l["createElementVNode"])("br",null,null,-1),GR={class:"mb-1"},eq={class:"input-label",for:"enrollment_date"},tq={class:"mb-1"},aq={class:"upload-container"},lq={key:0,class:"image-preview"},cq=["src"],sq=Object(l["createElementVNode"])("p",{class:"form-label"},"Item Image",-1),oq={for:"file-input",class:"file-input-label"},nq={key:0},rq={key:1},iq=Object(l["createElementVNode"])("br",null,null,-1),dq={key:0,class:"text-danger error-txt"},mq={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},bq={class:""};function pq(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link"),r=Object(l["resolveComponent"])("date-picker"),i=Object(l["resolveComponent"])("MultiSelect");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",e$,[Object(l["createElementVNode"])("div",t$,[Object(l["createElementVNode"])("div",a$,[Object(l["createElementVNode"])("div",l$,[Object(l["createElementVNode"])("div",c$,[s$,Object(l["createVNode"])(n,{to:{name:"shop-items"}},{default:Object(l["withCtx"])(()=>[o$]),_:1})]),Object(l["createElementVNode"])("div",n$,[Object(l["createElementVNode"])("div",r$,[Object(l["createElementVNode"])("div",i$,[Object(l["createElementVNode"])("div",d$,[Object(l["createElementVNode"])("div",m$,[Object(l["createElementVNode"])("div",b$,[Object(l["createElementVNode"])("div",p$,[Object(l["createElementVNode"])("form",u$,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h$,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationError,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"text-white"},Object(l["toDisplayString"])(e),1))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",O$,[Object(l["createElementVNode"])("div",j$,[g$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newItem.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newItem.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",f$,"Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",E$,[V$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"price","onUpdate:modelValue":t[1]||(t[1]=e=>s.newItem.price=e),type:"number",placeholder:"price",name:"price"},null,512),[[l["vModelText"],s.newItem.price]]),""!==s.formValidation&&""!==s.formValidation["price"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",N$,"Price is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",y$,[x$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newItem.detail=e),type:"text",placeholder:"Detail",name:"detail"},null,512),[[l["vModelText"],s.newItem.detail]]),""!==s.formValidation&&""!==s.formValidation["detail"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",v$,"Detail is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",k$,[Object(l["createElementVNode"])("div",w$,[S$,A$,Object(l["createVNode"])(r,{value:s.newItem.valid_from,"onUpdate:value":t[3]||(t[3]=e=>s.newItem.valid_from=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[4]||(t[4]=e=>o.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==s.formValidation&&""!==s.formValidation["valid_from"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",C$,"Valid From is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",B$,[_$,P$,Object(l["createVNode"])(r,{value:s.newItem.valid_to,"onUpdate:value":t[5]||(t[5]=e=>s.newItem.valid_to=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date",onChange:t[6]||(t[6]=e=>o.validateExpiryDate()),"append-to-body":"true"},null,8,["value"]),""!==s.formValidation&&""!==s.formValidation["valid_to"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",I$,"Valid To is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",D$,[T$,M$,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newItem.product_type=e),id:"shop",type:"select",placeholder:"Product Type",name:"product_type"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.productTypesList,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,z$))),128))],512),[[l["vModelSelect"],s.newItem.product_type]]),""!==s.formValidation&&""!==s.formValidation["shop_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",F$,"Shop is required")):Object(l["createCommentVNode"])("",!0)])]),Object(l["createElementVNode"])("div",U$,[Object(l["createElementVNode"])("div",L$,[$$,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[8]||(t[8]=e=>s.newItem.product_owner_email=e),type:"email",placeholder:"email",name:"detail"},null,512),[[l["vModelText"],s.newItem.product_owner_email]])]),Object(l["createElementVNode"])("div",R$,[q$,H$,Object(l["createVNode"])(i,{label:"Visibility Options",value:s.newItem.visibility_options,options:s.visibilityOptions,onInput:o.handleVisibility,placeholder:"Visibility Options"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",Q$,[Object(l["createElementVNode"])("div",Y$,[J$,W$,Object(l["createVNode"])(i,{label:"Payment Options",value:s.newItem.limitColleges,options:s.schoolsList,onInput:o.handleColleges,placeholder:"Limit Colleges"},null,8,["value","options","onInput"])]),Object(l["createElementVNode"])("div",X$,[K$,Z$,Object(l["createVNode"])(i,{label:"Visibility Options",value:s.newItem.limitCourses,options:s.coursesList,onInput:o.handleCourses,placeholder:"Limit Courses"},null,8,["value","options","onInput"])])]),Object(l["createElementVNode"])("div",G$,[Object(l["createElementVNode"])("div",eR,[Object(l["createElementVNode"])("span",tR,[aR,Object(l["createElementVNode"])("div",lR,[Object(l["createElementVNode"])("input",{checked:s.isQuantityEnabled,onChange:t[9]||(t[9]=e=>s.isQuantityEnabled=!s.isQuantityEnabled),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,cR),sR])])])]),s.isQuantityEnabled?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",oR,[Object(l["createElementVNode"])("div",nR,[rR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"quantity","onUpdate:modelValue":t[10]||(t[10]=e=>s.newItem.quantity=e),min:"0",type:"number",placeholder:"Quantity",name:"quantity"},null,512),[[l["vModelText"],s.newItem.quantity]]),""!==s.formValidation&&""!==s.formValidation["quantity"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",iR,"Quantity is required")):Object(l["createCommentVNode"])("",!0)])])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",dR,[mR,Object(l["createElementVNode"])("div",bR,[Object(l["createElementVNode"])("span",pR,[uR,Object(l["createElementVNode"])("div",hR,[Object(l["createElementVNode"])("input",{checked:"installments"==s.newItem.payment_plan,onChange:t[11]||(t[11]=e=>o.changePaymentPlan("installments")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,OR),jR])])]),Object(l["createElementVNode"])("div",gR,[Object(l["createElementVNode"])("span",fR,[ER,Object(l["createElementVNode"])("div",VR,[Object(l["createElementVNode"])("input",{checked:"installments_and_deposit"==s.newItem.payment_plan,onChange:t[12]||(t[12]=e=>o.changePaymentPlan("installments_and_deposit")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,NR),yR])])]),Object(l["createElementVNode"])("div",xR,[Object(l["createElementVNode"])("span",vR,[kR,Object(l["createElementVNode"])("div",wR,[Object(l["createElementVNode"])("input",{checked:"full_payment"==s.newItem.payment_plan,onChange:t[13]||(t[13]=e=>o.changePaymentPlan("full_payment")),type:"checkbox",class:"checkbox-input",id:"installmentsCheckbox"},null,40,SR),AR])])])]),"installments"==s.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",CR,[Object(l["createElementVNode"])("div",BR,[Object(l["createElementVNode"])("div",_R,[PR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[14]||(t[14]=e=>s.installmentsAndDeposit.total_installments=e),onInput:t[15]||(t[15]=(...e)=>o.handleIntegerInput&&o.handleIntegerInput(...e)),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Instalments",name:"name"},null,544),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",IR,[Object(l["createElementVNode"])("div",DR,[TR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",MR,[Object(l["createElementVNode"])("label",zR,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),Object(l["createVNode"])(r,{value:s.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>o.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==s.newItem.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",FR,[Object(l["createElementVNode"])("div",UR,[Object(l["createElementVNode"])("div",LR,[$R,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>s.installmentsAndDeposit.total_installments=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Total Instalments",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.total_installments]])])]),Object(l["createElementVNode"])("div",RR,[Object(l["createElementVNode"])("div",qR,[HR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[18]||(t[18]=e=>s.installmentsAndDeposit.amount_per_installment=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Amount Per Instalment",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.amount_per_installment]])])]),Object(l["createElementVNode"])("div",QR,[Object(l["createElementVNode"])("div",YR,[JR,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[19]||(t[19]=e=>s.installmentsAndDeposit.initial_deposit=e),class:"input-box",id:"name",type:"number",step:"0.01",min:"0",placeholder:"Initial Deposit",name:"name"},null,512),[[l["vModelText"],s.installmentsAndDeposit.initial_deposit]])])]),Object(l["createElementVNode"])("div",WR,[Object(l["createElementVNode"])("div",XR,[KR,ZR,Object(l["createVNode"])(r,{value:s.installmentsAndDeposit.initial_deposit_due_date,"onUpdate:value":t[20]||(t[20]=e=>s.installmentsAndDeposit.initial_deposit_due_date=e),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value"])])]),s.installmentsAndDeposit.total_installments>0?(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],{key:0},Object(l["renderList"])(s.installmentsAndDeposit.total_installments,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:e,class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",GR,[Object(l["createElementVNode"])("label",eq,"Due Date For Instalment "+Object(l["toDisplayString"])(t+1),1),Object(l["createVNode"])(r,{value:s.installmentsAndDeposit.other_installments_due_date[t],"onUpdate:value":e=>s.installmentsAndDeposit.other_installments_due_date[t]=e,onChange:e=>o.validateInstallmentDate(t),class:"input-box",format:"DD/MM/YYYY","value-type":"date","append-to-body":"true"},null,8,["value","onUpdate:value","onChange"])])]))),128)):Object(l["createCommentVNode"])("",!0)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",tq,[Object(l["createElementVNode"])("div",aq,[s.imageFileUrl?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",lq,[Object(l["createElementVNode"])("img",{src:s.imageFileUrl,alt:"Image Preview"},null,8,cq)])):Object(l["createCommentVNode"])("",!0),sq,Object(l["createElementVNode"])("input",{type:"file",id:"file-input",onChange:t[21]||(t[21]=(...e)=>o.handleImageUpload&&o.handleImageUpload(...e))},null,32),Object(l["createElementVNode"])("label",oq,[s.imageFileName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",rq,Object(l["toDisplayString"])(s.imageFileName),1)):(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",nq,"Choose a file"))])]),iq,""!==s.formValidation&&""!==s.formValidation["image"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dq,"Image is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",mq,[Object(l["createElementVNode"])("div",bq,[Object(l["createElementVNode"])("button",{onClick:t[22]||(t[22]=(...e)=>o.updateItem&&o.updateItem(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Item ")])])])])])])])])])}Object(l["popScopeId"])();var uq={name:"",components:{MultiSelect:nw,DatePicker:XA["a"]},mounted(){this.getUser(),this.editItem(),this.getAllShops(),this.getAllCourses(),this.getSchools(),this.getProductTypes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_shop")},watch:{"newItem.quantity"(e){e<0?this.newItem.quantity=0:Number.isInteger(e)||(this.newItem.quantity=Math.floor(e))}},data(){return{isQuantityEnabled:!1,paymentPlan:"",installmentsAndDeposit:{total_installments:null,amount_per_installment:null,initial_deposit:null,initial_deposit_due_date:null,other_installments_due_date:[]},validationError:"",isError:!1,productTypes:["Trip","Resources","Uniforms","Print Credit","Exams","Bus Passes","Additional"],schoolsList:null,coursesList:null,productTypesList:null,imageFileName:"",imageFileUrl:"",selectedImageFile:"",formValidation:"",allAttributes:"",allShops:"",selectedAttrs:[],user:"",visibilityOptions:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitColleges:[{name:"Available to Staff"},{name:"Available to Students"},{name:"Available to Parents"}],limitCourses:"",newItem:{name:"",product_type:"",price:"",quantity:"",detail:"",image:"",shop_id:"",valid_from:"",valid_to:"",visibility_options:null,payment_plan:null,installmentsAndDeposit:null,limitCourses:null,limitColleges:null,product_owner_email:null},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{validateExpiryDate(){const{valid_from:e,valid_to:t}=this.newItem;if(e&&t){const a=new Date(e),l=new Date(t);a>=l&&(this.newItem.valid_to=null)}},validateInstallmentDate(e){const t=this.installmentsAndDeposit.other_installments_due_date;if(e>0&&t[e]){const a=new Date(t[e-1]),l=new Date(t[e]),c=l>a;c||t.splice(e,1)}},handleIntegerInput(e){const t=e.target.value;t&&!Number.isInteger(Number(t))&&(this.installmentsAndDeposit.total_installments=Math.floor(t))},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_shop");let e=!1,t="";t=Jo()(this.newItem);for(let a in this.newItem)""===this.newItem[a]||void 0===this.newItem[a]?("shop_id"!=a||"super_admin"!=this.user.role&&"organization_admin"!=this.user.role||(t[a]="is required",e=!0),t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getProductTypes(){try{let e="/getProductTypesForDropdown";const t=await mt.get(e);this.productTypesList=t.data}catch(e){console.log(e)}},async updateItem(){this.installmentsAndDeposit.initial_deposit_due_date=this.installmentsAndDeposit.initial_deposit_due_date?this.installmentsAndDeposit.initial_deposit_due_date.toISOString().split("T")[0]:null;const e=new FormData;e.append("image",this.selectedImageFile),e.append("installmentsAndDeposit",JSON.stringify(this.installmentsAndDeposit)),e.append("product_type",this.newItem.product_type),e.append("payment_plan",this.newItem.payment_plan),e.append("name",this.newItem.name),e.append("price",this.newItem.price),this.isQuantityEnabled?e.append("quantity",this.newItem.quantity):e.append("quantity",""),e.append("detail",this.newItem.detail),e.append("shop_id",this.newItem.shop_id),e.append("valid_from",this.newItem.valid_from.toISOString().split("T")[0]),e.append("valid_to",this.newItem.valid_to.toISOString().split("T")[0]),e.append("product_owner_email",this.newItem.product_owner_email),e.append("visibility_options",JSON.stringify(this.newItem.visibility_options)),e.append("limitColleges",JSON.stringify(this.newItem.limitColleges)),e.append("limitCourses",JSON.stringify(this.newItem.limitCourses));let t=this.$route.params.id;try{const a=`/updateShopItem/${t}?_method=PUT`;await mt.post(a,e),this.$router.push({name:"shop-items"}),this.snackbarMsg("Item Updated Successfuly"),this.isError=!1}catch(a){this.validationError=a.response.data.errors,this.isError=!0}},async editItem(){let e=this.$route.params.id;try{let t=await mt.get("/editShopItem/"+e);t=t.data,this.setShopItem(t)}catch(t){console.log(t)}},setShopItem(e){this.newItem.name=e.name,this.newItem.price=e.price,this.newItem.quantity=e.quantity,this.isQuantityEnabled=null!==e.quantity&&void 0!==e.quantity,this.newItem.product_type=e.product_type,this.newItem.shop_id=e.shop_id,this.newItem.attribute_id=e.attribute_id,this.newItem.detail=e.detail,this.newItem.attributes=e.attributes,this.newItem.valid_from=e.valid_from?vs()(e.valid_from,"YYYY-MM-DD").toDate():null,this.newItem.valid_to=e.valid_to?vs()(e.valid_to,"YYYY-MM-DD").toDate():null,this.newItem.product_owner_email=e.product_owner_email,this.newItem.visibility_options=e.visibility_options?e.visibility_options:[],this.newItem.limitColleges=e.limit_colleges?e.limit_colleges:[],this.newItem.limitCourses=e.limit_courses?e.limit_courses:[],this.newItem.payment_plan=e.payment_plan,this.imageFileUrl=this.$env_vars.BASE_URL+e.image,e.payment&&(this.installmentsAndDeposit.total_installments=e.payment.total_installments,this.installmentsAndDeposit.amount_per_installment=e.payment.amount_per_installment,e.payment.other_installments_deadline_installments=e.payment.other_installments_deadline_installments.map(e=>e?vs()(e,"YYYY-MM-DD").toDate():null),this.installmentsAndDeposit.other_installments_due_date=e.payment.other_installments_deadline_installments,this.installmentsAndDeposit.initial_deposit_due_date=e.payment.initial_deposit_due_date?vs()(e.payment.initial_deposit_due_date,"YYYY-MM-DD").toDate():null,this.installmentsAndDeposit.initial_deposit=e.payment.initial_deposit)},handleImageUpload(e){const t=e.target.files[0];if(t){this.imageFileName=t.name;const e=new FileReader;e.onload=e=>{this.imageFileUrl=e.target.result},e.readAsDataURL(t),this.selectedImageFile=t}},async getAllCourses(){try{let e="/getCoursesForDropdown";const t=await mt.get(e);this.coursesList=t.data}catch(e){console.log(e)}},changePaymentPlan(e){this.newItem.payment_plan==e?this.newItem.payment_plan="":this.newItem.payment_plan=e},async getSchools(){try{let e=await mt.get("/getAllSchoolsCourses");console.log(e),this.schoolsList=e.data.schools?e.data.schools:null}catch(e){console.log(e)}},handleAttributes(e){console.log("attrs",e),this.newItem.attributes=[],e.filter(e=>{this.newItem.attributes.push(e.id)})},handleCourses(e){this.newItem.limitCourses=[],e.filter(e=>{this.newItem.limitCourses.push({name:e.name})})},handleColleges(e){this.newItem.limitColleges=[],e.filter(e=>{this.newItem.limitColleges.push({name:e.name})})},handleVisibility(e){this.newItem.visibility_options=[],e.filter(e=>{this.newItem.visibility_options.push({name:e.name})})},async getAllShops(){try{const e=await mt.get("/getAllSchoolShop");this.allShops=e.data}catch(e){console.log(e)}}}};a("60de");const hq=ot()(uq,[["render",pq],["__scopeId","data-v-302ed20e"]]);var Oq=hq;Object(l["pushScopeId"])("data-v-01bd8bf6");const jq=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left me-2"},null,-1),gq=[jq],fq={class:"row"},Eq={class:"col-xl-12 col-lg-12 col-md-12"},Vq={class:"card"},Nq={class:"card-header pb-0 px-3 d-flex justify-content-between"},yq=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Checkout",-1),xq=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn add-card-btn mb-3 trips-btn w-100  text-white fw-5 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus me-2"}),Object(l["createTextVNode"])(" Add New Card ")],-1),vq={class:"card-body pt-4 p-3"},kq={class:"row"},wq={class:"list-group col-xl-6 col-lg-6 col-md-6"},Sq={key:0,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Aq={class:"d-flex flex-column"},Cq={class:"mb-3 text-sm"},Bq={key:0},_q=Object(l["createElementVNode"])("br",null,null,-1),Pq={key:1,class:"text-success"},Iq={key:2,class:"text-success"},Dq=Object(l["createTextVNode"])(" Initial Deposit "),Tq=Object(l["createElementVNode"])("br",null,null,-1),Mq=Object(l["createElementVNode"])("span",{class:"mb-1 text-success text-xs"},[Object(l["createElementVNode"])("span",{class:"mb-1 text-sm bg-success text-white px-2",style:{"border-radius":"5px"}},"Shop Item")],-1),zq={class:"ms-auto text-end"},Fq=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),Uq=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),Lq={class:"ms-auto text-end"},$q={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},Rq=["onClick"],qq=Object(l["createElementVNode"])("br",null,null,-1),Hq={key:0,class:"text-success me-3"},Qq={key:1,class:"text-success me-3"},Yq=Object(l["createElementVNode"])("br",null,null,-1),Jq={key:1,class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},Wq={class:"d-flex flex-column"},Xq={class:"mb-3 text-sm"},Kq={class:"mb-1 text-xs"},Zq={class:"mb-3 text-sm text-dark"},Gq=Object(l["createElementVNode"])("br",null,null,-1),eH={class:"mb-3 text-sm text-dark"},tH=Object(l["createElementVNode"])("br",null,null,-1),aH=Object(l["createElementVNode"])("span",{class:"mb-1 text-sm bg-success text-white px-2",style:{"border-radius":"5px"}},"Installment",-1),lH={class:"ms-auto text-end"},cH=Object(l["createElementVNode"])("i",{class:"far fa-trash-alt me-2","aria-hidden":"true"},null,-1),sH=Object(l["createElementVNode"])("i",{class:"fas fa-pencil-alt text-dark me-2","aria-hidden":"true"},null,-1),oH={class:"ms-auto text-end"},nH={class:"me-2 text-warning text-gradient text-sm font-weight-bold"},rH=["onClick"],iH={class:"col-md-5 ms-auto"},dH={key:0,class:"text-danger text-sm"},mH=["onClick"],bH={key:0,class:"w-10 me-3 mb-0",src:fP.a,alt:"logo"},pH={key:1,class:"w-10 me-3 mb-0",src:Ot.a,alt:"logo"},uH={class:"mb-0"},hH={key:1,class:"d-flex align-items-center list-group-item border-0 d-flex p-2 bg-gray-100 border-radius-lg"},OH=Object(l["createElementVNode"])("div",{class:"d-flex flex-column"},[Object(l["createElementVNode"])("h6",{class:"d-flex align-items-center text-sm "},"Total Amount")],-1),jH={class:"ms-auto text-end"},gH={class:"d-flex me-3 align-items-center",style:{"justify-content":"flex-end"}},fH={class:"d-flex align-items-center text-success fw-bold text-sm "},EH={key:2,class:"d-flex justify-content-center align-items-center list-group-item border-0 d-flex p-4 bg-gray-100 border-radius-lg"},VH=Object(l["createElementVNode"])("h6",{class:"text-sm text-warning"},"You can't checkout while Cart is empty!",-1),NH=[VH],yH={key:3,style:{color:"#59B15D !important"}},xH=Object(l["createElementVNode"])("div",{id:"express-checkout-element"},null,-1);function vH(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2 border-radius-lg"},gq),Object(l["createElementVNode"])("div",fq,[Object(l["createElementVNode"])("div",Eq,[Object(l["createElementVNode"])("div",Vq,[Object(l["createElementVNode"])("div",Nq,[yq,s.paymentMethodsLoaded&&!o.checkIfHasCard()?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add_card"}},{default:Object(l["withCtx"])(()=>[xq]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",vq,[Object(l["createElementVNode"])("div",kq,[Object(l["createElementVNode"])("ul",wq,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.cartItems,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[null!==e.shop_item?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Sq,[Object(l["createElementVNode"])("div",Aq,[Object(l["createElementVNode"])("h6",Cq,[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.shop_item.name)+" ",1),e.shop_item.product_type?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Bq,"("+Object(l["toDisplayString"])(e.shop_item.product_type)+")",1)):Object(l["createCommentVNode"])("",!0),_q,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Pq," Instalments ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+") ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Iq,[Dq,Tq,Object(l["createTextVNode"])(" ("+Object(l["toDisplayString"])(e.shop_item.payment.total_installments)+" Instalments) ",1)])):Object(l["createCommentVNode"])("",!0)]),Mq]),Object(l["createElementVNode"])("div",zq,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"organization_admin"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[Fq,Uq],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Lq,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",$q," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.price)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,Rq),qq,"installments"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Hq," £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)):Object(l["createCommentVNode"])("",!0),"installments_and_deposit"==e.shop_item.payment_plan?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",Qq,[Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.initial_deposit))+" Deposit ",1),Yq,Object(l["createTextVNode"])(" £"+Object(l["toDisplayString"])(o.formattedPrice(e.shop_item.payment.amount_per_installment))+" Each ",1)])):Object(l["createCommentVNode"])("",!0)])])])])):Object(l["createCommentVNode"])("",!0),null!==e.installment?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",Jq,[Object(l["createElementVNode"])("div",Wq,[Object(l["createElementVNode"])("h6",Xq,Object(l["toDisplayString"])(e.installment.shop_items?e.installment.shop_items.name:""),1),Object(l["createElementVNode"])("span",Kq,[Object(l["createElementVNode"])("small",Zq,"Installment No."+Object(l["toDisplayString"])(e.installment.installment_no),1),Gq,Object(l["createElementVNode"])("small",eH,"Purchase ID: "+Object(l["toDisplayString"])(e.installment.purchases_id),1),tH,aH])]),Object(l["createElementVNode"])("div",lH,[Object(l["createElementVNode"])("span",null,["super_admin"==s.user.role||"school_user"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:0},[cH,sH],64)):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",oH,[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("span",nH," £"+Object(l["toDisplayString"])(o.formattedPrice(e.installment.installment_amount)),1),Object(l["createElementVNode"])("i",{onClick:t=>o.removeItemFromCart(e.id),class:"fas fa-minus-circle text-danger me-2 remove-icon","aria-hidden":"true"},null,8,rH)])])])])):Object(l["createCommentVNode"])("",!0)],64))),128))]),Object(l["createElementVNode"])("div",iH,[s.isPaymentMethod?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",dH,"Payment Method Not Found! please add the payment method first.")),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:s.isSelected===t}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:e=>o.toggleSelection(t,e)},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",bH)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",pH)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",uH," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1)],10,mH))),128)),s.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",hH,[OH,Object(l["createElementVNode"])("div",jH,[Object(l["createElementVNode"])("div",gH,[Object(l["createElementVNode"])("h6",fH,"£"+Object(l["toDisplayString"])(o.totalAmount()),1)])])])):s.dataLoaded?(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",EH,NH)):Object(l["createCommentVNode"])("",!0),1==s.isLoading?(Object(l["openBlock"])(),Object(l["createElementBlock"])("p",yH,"Checking out, please wait...")):(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:4},[s.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=e=>o.checkout("card")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Card Payment ")):Object(l["createCommentVNode"])("",!0),s.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[2]||(t[2]=e=>o.checkout("wallet")),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-45 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Wallet")):Object(l["createCommentVNode"])("",!0),s.cartItems.length>0?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:2,onClick:t[3]||(t[3]=e=>o.expressPaymentCheckout()),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 me-3 trips-btn w-100 bg-gradient-grey shadow-grey text-white fw-5 p-2 border-radius-lg"}," Google/Apple Pay")):Object(l["createCommentVNode"])("",!0),xH],64))])])])])])])])}Object(l["popScopeId"])();var kH={name:"billing-card",data(){return{stripe:null,elements:null,clientSecret:null,expressCheckoutElement:null,paymentMethodsLoaded:!1,isLoading:!1,isPaymentMethod:!0,userCards:"",dataLoaded:!1,user:"",cartItems:"",isSelected:0}},async mounted(){await this.getUser(),await this.getCartItems(),await this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},created(){},methods:{...Object(lt["b"])(["updateCartItemCounter"]),async expressPaymentCheckout(){this.stripe=await Object(pI["a"])("pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"),console.log("stripe created",this.stripe);let e=this.totalAmount();e*=100;let t={amount:e,currency:"gbp"};const a=await mt.post("/createexpressPaymentIntent",t),l=a.data.clientSecret;console.log("clientSecret",l),this.clientSecret=l,this.elements=this.stripe.elements({clientSecret:l}),this.expressCheckoutElement=this.elements.create("expressCheckout"),this.expressCheckoutElement.mount("#express-checkout-element"),this.expressCheckoutElement.on("confirm",this.handlePayment)},async handlePayment(){if(!this.stripe||!this.expressCheckoutElement)return void console.error("Stripe or expressCheckoutElement is not initialized");const{error:e,paymentIntent:t}=await this.stripe.confirmPayment({elements:this.elements,confirmParams:{},redirect:"if_required"});if(e)console.error("Payment failed:",e.message);else{let e,a;t&&t.payment_method&&(a=await this.fetchPaymentMethod(t.payment_method,t.id)),e=a.payment_method.card;let l=a.charge_id,c={payment_method:null,type:"google_apple_pay",latest_charge:l,last_4:e.last4,brand:e.brand,cardholder_name:a.payment_method.billing_details.name};this.isLoading=!0,await mt.post("/checkout",c),this.countUserCartItems(),this.$router.go(-1),this.snackbarMsg("Checkout Successful")}},async fetchPaymentMethod(e,t){let a={paymentMethodId:e,paymentIntentId:t};try{const e=await mt.post("/payment-method",a);return e.data}catch(l){console.error("Error fetching payment method:",l)}},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},checkIfHasCard(){return!!(this.userCards&&this.userCards.length>0)||void 0!=this.userCards.length&&void 0},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getCartItems(){try{let e=await mt.get("/getUserCartItems");e=e.data,this.cartItems=e,this.dataLoaded=!0}catch(e){console.log(e)}},totalAmount(){let e=0;return Array.isArray(this.cartItems)?this.cartItems.forEach(t=>{t.trip&&(e+=t.trip.budget),t.shop_item&&("installments"==t.shop_item.payment_plan?e+=t.shop_item.payment.amount_per_installment:"installments_and_deposit"==t.shop_item.payment_plan?e+=t.shop_item.payment.initial_deposit:"full_payment"==t.shop_item.payment_plan&&(e+=t.shop_item.price)),t.installment&&(e+=t.installment.installment_amount)}):console.error("this.cartItems is not an array"),this.formattedPrice(e)},async removeItemFromCart(e){let t={item_id:e};try{await mt.post("/removeItemFromCart",t),this.removeItemFromList(e),this.countUserCartItems()}catch(a){console.log(a)}},removeItemFromList(e){const t=this.cartItems.findIndex(t=>t.id===e);this.cartItems.splice(t,1),this.snackbarMsg("Item Removed Successfully")},async countUserCartItems(){try{let e=await mt.get("/countUserCartItems"),t=e.data?e.data:null;this.updateCartItemCounter(t)}catch(e){console.log(e)}},async checkout(e){let t=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(!t&&"card"==e)return this.isPaymentMethod=!0,void(this.isPaymentMethod=!1);t="wallet"==e?null:t;let a={payment_method:t,type:e};try{this.isLoading=!0,await mt.post("/checkout",a),this.isLoading=!1,this.snackbarMsg("Checkout Successful"),this.$router.push({name:"Dashboard"}),this.isPaymentMethod=!0,this.countUserCartItems()}catch(l){let e=l.response.data?l.response.data:"Something went wrong";this.isLoading=!1,this.$snackbar.add({type:"error",text:e,background:"white"})}},async getCustomerPaymentMethods(){let e,t;e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id;let a={user_id:t};try{const e=await mt.post("/getPaymentMethods",a);this.userCards=e.data.data,this.paymentMethodsLoaded=!0}catch(l){console.log(l)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)}}};a("804d");const wH=ot()(kH,[["render",vH],["__scopeId","data-v-01bd8bf6"]]);var SH=wH;const AH={class:"row"},CH={class:"col-xl-8 col-lg-8 col-md-8"},BH={class:"card"},_H={class:"card-header pb-0 px-3 d-flex justify-content-between"},PH=Object(l["createElementVNode"])("h6",{class:"mb-0"},"Menu",-1),IH=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#f513ca"},class:"me-3 text-white fw-5 border-0 p-2 border-radius-lg"}," Add Menu ",-1),DH=Object(l["createStaticVNode"])('<div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">ATA Rice</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="far fa-trash-alt me-2" aria-hidden="true"></i><i class="fas fa-pencil-alt text-dark me-2" aria-hidden="true"></i><i class="fas fa-plus-circle text-success me-2" aria-hidden="true"></i></span><br><div class="d-flex me-3 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> - £5 </div></div></li></ul></div>',1),TH=Object(l["createStaticVNode"])('<div class="col-xl-4 col-lg-4 col-md-4"><div class="card"><div class="card-header pb-0 px-3"><h6 class="mb-0">Favourite</h6></div><div class="card-body pt-4 p-3"><ul class="list-group"><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Puff-Puff</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Scotch Egg</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li><li class="list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"><div class="d-flex flex-column"><h6 class="mb-3 text-sm">Rice and DODO</h6><span class="mb-1 text-xs"> Boiled Egg and wrapped in a ground meat mixture coated in breadcrumbs, and deep-fried. </span></div><div class="ms-auto text-end"><span><i class="fas fa-minus-circle text-danger me-2" aria-hidden="true"></i></span><br><div class="d-flex ms-3 me-2 mt-2 align-items-center text-warning text-gradient text-sm font-weight-bold" style="justify-content:flex-end;"> £5 </div></div></li></ul></div></div></div>',1);function MH(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",AH,[Object(l["createElementVNode"])("div",CH,[Object(l["createElementVNode"])("div",BH,[Object(l["createElementVNode"])("div",_H,[PH,Object(l["createVNode"])(n,{to:"/add-menu"},{default:Object(l["withCtx"])(()=>[IH]),_:1})]),DH])]),TH])}var zH={name:"billing-card"};const FH=ot()(zH,[["render",MH]]);var UH=FH;Object(l["pushScopeId"])("data-v-d27ede50");const LH={class:"container-fluid py-4"},$H=Object(l["createElementVNode"])("div",{class:"row "},[Object(l["createElementVNode"])("div",{class:"col-12"},[Object(l["createElementVNode"])("div",{class:"card my-4"},[Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 "},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Menu")]),Object(l["createElementVNode"])("div",{class:"card-body px-0 pb-2"},[Object(l["createElementVNode"])("div",{class:"table-responsive p-0"},[Object(l["createElementVNode"])("div",{class:"row py-2 bg-white form-data border-radius-lg"},[Object(l["createElementVNode"])("div",{class:"bg-white box-shadow-dark border-radius-lg col-xl-12 col-lg-12 col-md-12"},[Object(l["createElementVNode"])("div",{class:"card card-plain"},[Object(l["createElementVNode"])("div",{class:"card-body"},[Object(l["createElementVNode"])("form",{role:"form"},[Object(l["createElementVNode"])("div",{class:"row mb-1"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Item Name"),Object(l["createElementVNode"])("input",{class:"input-box title-input",id:"name",type:"text",placeholder:"name",name:"name"})]),Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"description"},"Description"),Object(l["createElementVNode"])("br"),Object(l["createElementVNode"])("textarea",{class:"text-area-box text-area-trips",id:"name",type:"text",placeholder:"Description",name:"description"})])]),Object(l["createElementVNode"])("div",{class:"row p-2"},[Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Price"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"price",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Available Seats"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Available Seats",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Accomodation and Meals"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"Accomodation and Meals included",name:"name"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"Start Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"enrollment_date"},"End Date"),Object(l["createElementVNode"])("input",{class:"input-box",id:"enrollment_date",type:"date",placeholder:"Enrollment Date",name:"enrollment_date"})])]),Object(l["createElementVNode"])("div",{class:"col-xl-4 col-lg-4 col-md-4"},[Object(l["createElementVNode"])("div",{class:"mb-1"},[Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Total Funds"),Object(l["createElementVNode"])("input",{class:"input-box",id:"name",type:"text",placeholder:"funds",name:"name"})])])])])])])])])])])])])],-1),RH=[$H];function qH(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LH,RH)}Object(l["popScopeId"])();var HH={name:"",components:{},mounted(){},data(){return{}},methods:{}};a("19b8");const QH=ot()(HH,[["render",qH],["__scopeId","data-v-d27ede50"]]);var YH=QH;const JH={class:"card mt-4 card-height"},WH={class:"card-header pb-3 p-3"},XH={class:"row"},KH={class:"col text-start"},ZH=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),GH=[ZH],eQ={class:"row",style:{width:"100%"}},tQ={class:"col-12"},aQ={class:"d-flex justify-content-between border-radius-lg pt-4"},lQ=Object(l["createElementVNode"])("h5",{class:"ms-3 text-sm"},"TOP-UP",-1),cQ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn add-card-btn mb-3 trips-btn w-100  text-white fw-5 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus me-2"}),Object(l["createTextVNode"])(" Add New Card ")],-1),sQ=Object(l["createElementVNode"])("div",{class:"row",style:{width:"100%"}},[Object(l["createElementVNode"])("div",{class:"col-12 d-flex align-items-center"},[Object(l["createElementVNode"])("small",{class:"ms-3 mb-3 page-description"}," In this section, you can top-up the user's wallet by adding a specified amount to their balance. Additionally, you can add a new payment method, such as a credit or debit card, to the user's account for future transactions. This functionality ensures that users have convenient payment options and sufficient funds available for seamless purchases. ")])],-1),oQ={class:"card-body p-3"},nQ={class:"row d-flex justify-content-between"},rQ={class:"col-md-6 mb-md-0 mb-4"},iQ=["onClick"],dQ={key:0,class:"w-10 me-3 mb-0",src:fP.a,alt:"logo"},mQ={key:1,class:"w-10 me-3 mb-0",src:Ot.a,alt:"logo"},bQ={class:"mb-0"},pQ=["onClick"],uQ=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1),hQ={class:"amount-radio"},OQ={class:"top-up-row"},jQ={class:"mb-1",style:{display:"flex"}},gQ=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount25"},"£25.00",-1),fQ={class:"top-up-row"},EQ={class:"mb-1",style:{display:"flex"}},VQ=Object(l["createElementVNode"])("label",{style:{"margin-top":"-3px"},for:"amount50"},"£50.00",-1),NQ={class:"top-up-row"},yQ={class:"mb-1",style:{display:"flex"}},xQ=Object(l["createElementVNode"])("label",{class:"",style:{"margin-top":"-3px"},for:"amount100"},"£100.00",-1),vQ={class:"mb-1 amount-container",style:{display:"flex"}},kQ=Object(l["createElementVNode"])("div",{class:"col-md-5"},null,-1),wQ={class:"conteiner"},SQ=Object(l["createElementVNode"])("br",null,null,-1),AQ=Object(l["createElementVNode"])("br",null,null,-1),CQ={key:1,id:"express-checkout-element"},BQ=Object(l["createElementVNode"])("br",null,null,-1);function _Q(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",JH,[Object(l["createElementVNode"])("div",WH,[Object(l["createElementVNode"])("div",XH,[Object(l["createElementVNode"])("div",KH,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},GH)])]),Object(l["createElementVNode"])("div",eQ,[Object(l["createElementVNode"])("div",tQ,[Object(l["createElementVNode"])("div",aQ,[lQ,s.paymentMethodsLoaded&&!o.checkIfHasCard()?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add_card"}},{default:Object(l["withCtx"])(()=>[cQ]),_:1})):Object(l["createCommentVNode"])("",!0)])])]),sQ]),Object(l["createElementVNode"])("div",oQ,[Object(l["createElementVNode"])("div",nQ,[Object(l["createElementVNode"])("div",rQ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:t,class:Object(l["normalizeClass"])([{selected:s.isSelected===t},"mb-1 card card-body border card-plain border-radius-lg d-flex align-items-right flex-row"]),onClick:e=>o.toggleSelection(t,e),style:{width:"300px"}},["visa"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",dQ)):Object(l["createCommentVNode"])("",!0),"mastercard"==e.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",mQ)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",bQ," **** **** **** "+Object(l["toDisplayString"])(e.card.last4),1),Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,pQ),uQ],10,iQ))),128)),Object(l["createElementVNode"])("div",hQ,[Object(l["createElementVNode"])("div",OQ,[Object(l["createElementVNode"])("span",jQ,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount25",class:"me-1",type:"radio","onUpdate:modelValue":t[1]||(t[1]=e=>s.selected_amount=e),name:"amount",value:"25"},null,512),[[l["vModelRadio"],s.selected_amount]]),gQ])]),Object(l["createElementVNode"])("div",fQ,[Object(l["createElementVNode"])("span",EQ,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount50",class:"me-1",type:"radio","onUpdate:modelValue":t[2]||(t[2]=e=>s.selected_amount=e),name:"amount",value:"50"},null,512),[[l["vModelRadio"],s.selected_amount]]),VQ])]),Object(l["createElementVNode"])("div",NQ,[Object(l["createElementVNode"])("span",yQ,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"amount100",class:"me-1",type:"radio","onUpdate:modelValue":t[3]||(t[3]=e=>s.selected_amount=e),name:"amount",value:"100"},null,512),[[l["vModelRadio"],s.selected_amount]]),xQ])]),Object(l["createElementVNode"])("span",vQ,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onKeyup:t[4]||(t[4]=e=>s.selected_amount=null),"onUpdate:modelValue":t[5]||(t[5]=e=>s.addedBalance=e),class:"me-1 amount-input",type:"number",min:"0",name:"gender",placeholder:"1.00"},null,544),[[l["vModelText"],s.addedBalance]])])])]),kQ,Object(l["createElementVNode"])("div",wQ,[Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=(...e)=>o.addBalance&&o.addBalance(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn top-up-btn p-3 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Add Balance "),SQ,"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[7]||(t[7]=(...e)=>o.expressPaymentCheckout&&o.expressPaymentCheckout(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn top-up-btn p-3 mb-3 trips-btn  text-white fw-5 border-radius-lg"}," Google Pay/ Apple Pay ")):Object(l["createCommentVNode"])("",!0),AQ,"student"==s.user.role||"staff"==s.user.role?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",CQ)):Object(l["createCommentVNode"])("",!0),BQ])])])])}var PQ={name:"payment-card",components:{},mounted(){this.$globalHelper.buttonColor();let e=localStorage.getItem("user");this.user=JSON.parse(e),this.getCustomerPaymentMethods()},updated(){this.$globalHelper.buttonColor(),"student"!=this.user.role&&"staff"!=this.user.role&&this.$permissions.redirectIfNotAllowed("topup")},computed:{...Object(lt["c"])(["getBrandingSetting"]),formattedBalance:{get(){return this.addedBalance},set(e){const t=parseFloat(e).toFixed(2);this.addedBalance=t}}},beforeRouteEnter(e,t,a){a(e=>{e.fromRoute=t.name})},beforeRouteLeave(e,t,a){if("list-students"===e.name&&"list-students"===this.fromRoute||"list-staff"===e.name&&"list-staff"===this.fromRoute)a();else{let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}},data(){return{fromRoute:"",paymentMethodsLoaded:!1,user:"",selected_amount:"",externalAccounts:"",addedBalance:"",userCards:"",isSelected:0,img1:Ot.a,img2:fP.a,showModal:!1}},methods:{...Object(lt["b"])(["updateFilterString"]),async expressPaymentCheckout(){let e=null==this.selected_amount?this.addedBalance:this.selected_amount;if(""==e)return void this.snackbarMsg("Please select the amount","error");this.stripe=await Object(pI["a"])("pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"),console.log("stripe created",this.stripe);let t={amount:100*e,currency:"gbp"};const a=await mt.post("/createexpressPaymentIntent",t),l=a.data.clientSecret;this.clientSecret=l,this.elements=this.stripe.elements({clientSecret:l}),this.expressCheckoutElement=this.elements.create("expressCheckout"),this.expressCheckoutElement.mount("#express-checkout-element"),this.expressCheckoutElement.on("confirm",this.handlePayment)},async handlePayment(){if(!this.stripe||!this.expressCheckoutElement)return void console.error("Stripe or expressCheckoutElement is not initialized");const{error:e,paymentIntent:t}=await this.stripe.confirmPayment({elements:this.elements,confirmParams:{},redirect:"if_required"});if(e)console.error("Payment failed:",e.message);else{let e,a,l=null==this.selected_amount?this.addedBalance:this.selected_amount;if(""==l)return void this.snackbarMsg("Please select the amount","error");t&&t.payment_method&&(a=await this.fetchPaymentMethod(t.payment_method,t.id)),e=a.payment_method.card;let c=a.charge_id,s=this.user.id,o={amount:l,type:"top_up",user_id:s,latest_charge:c,last_4:e.last4,brand:e.brand,cardholder_name:a.payment_method.billing_details.name};await mt.post("/TopupGoogleApplePay",o)}},async fetchPaymentMethod(e,t){let a={paymentMethodId:e,paymentIntentId:t};try{const e=await mt.post("/payment-method",a);return e.data}catch(l){console.error("Error fetching payment method:",l)}},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},snackbarMsg(e,t="success"){this.$snackbar.add({type:t,text:e,background:"white"})},checkIfHasCard(){return!!(this.userCards&&this.userCards.length>0)||void 0!=this.userCards.length&&void 0},async addBalance(){let e,t="",a="";e=this.$route.params.id?this.$route.params.id:this.user.id;let l=null==this.selected_amount?this.addedBalance:this.selected_amount,c=this.userCards[this.isSelected]?this.userCards[this.isSelected].id:"";if(""==l)return void this.snackbarMsg("Please select the amount","error");if("student"!=this.user.role&&"parent"!=this.user.role&&"staff"!=this.user.role)if(a="admin_top_up","staff"==this.user.role&&this.user.id==e){if(t="/user_topup",!c)return void this.snackbarMsg("Payment Method Not Found","error")}else t="/adminTopUp",c=null;else if(a="top_up",t="/user_topup",!c)return void this.snackbarMsg("Payment Method Not Found","error");let s={user_id:e,amount:l,payment_method:c,type:a};try{await mt.post(t,s),this.snackbarMsg("Balance Added Successfully")}catch(o){console.log(o)}},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await mt.post("/getPaymentMethods",a);this.userCards=e.data.data,this.paymentMethodsLoaded=!0}catch(l){console.log(l)}},async removePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a={user_id:t.id,payment_method:e};try{await mt.post("/removePaymentMethod",a),this.removeFromList(e)}catch(l){console.log(l)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")}}};a("3f2a");const IQ=ot()(PQ,[["render",_Q]]);var DQ=IQ;Object(l["pushScopeId"])("data-v-418ca843");const TQ={class:"card"},MQ=Object(l["createElementVNode"])("div",{class:"card-header"},null,-1),zQ={class:"card-body row"},FQ={class:"col-md-5"},UQ=Object(l["createStaticVNode"])('<div class="row d-flex" data-v-418ca843><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex" data-v-418ca843><p class="text-dark" data-v-418ca843>Your Payment Information</p></div></div><div id="card-element" class="StripeElement" data-v-418ca843></div><div class="row d-flex mt-1" data-v-418ca843><div class="col-md-5 bg-white name-row p-2 holder_name" data-v-418ca843><label data-v-418ca843>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white w-100  mb-2" data-v-418ca843></div></div>',3),LQ={class:"row d-flex"},$Q={class:"col-md-5 ms-auto"},RQ=["onClick"],qQ={key:0,class:"w-10 me-3 mb-0",src:fP.a,alt:"logo"},HQ={key:1,class:"w-10 me-3 mb-0",src:Ot.a,alt:"logo"},QQ={class:"mb-0"},YQ=["onClick"],JQ=Object(l["createElementVNode"])("span",{class:"sr-only"},"Edit Card",-1);function WQ(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",TQ,[MQ,Object(l["createElementVNode"])("div",zQ,[Object(l["createElementVNode"])("div",FQ,[UQ,Object(l["createElementVNode"])("div",LQ,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=(...e)=>o.submitPaymentMethod&&o.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"save_btn mx-auto me-3 w-50 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])]),Object(l["createElementVNode"])("div",$Q,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.userCards,(t,a)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{key:a,class:Object(l["normalizeClass"])([{selected:e.isSelected===a}," mb-1 card card-body border card-plain border-radius-lg d-flex align-items-center flex-row"]),onClick:t=>e.toggleSelection(a,t)},["visa"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",qQ)):Object(l["createCommentVNode"])("",!0),"mastercard"==t.card.brand?(Object(l["openBlock"])(),Object(l["createElementBlock"])("img",HQ)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("h6",QQ," **** **** **** "+Object(l["toDisplayString"])(t.card.last4),1),Object(l["createElementVNode"])("i",{onClick:e=>o.confirmDelete(t.id),class:"fas fa-trash-alt ms-auto text-dark cursor-pointer","data-bs-toggle":"tooltip","data-bs-placement":"top",title:"","aria-hidden":"true","data-bs-original-title":"Edit Card","aria-label":"Edit Card"},null,8,YQ),JQ],10,RQ))),128))])])])])}Object(l["popScopeId"])();var XQ={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.getCustomerPaymentMethods(),this.$globalHelper.buttonColor()},data(){return{userCards:"",user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.removePaymentMethod(e)})},includeStripe(e,t){let a=document,l="script",c=a.createElement(l),s=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),s.parentNode.insertBefore(c,s)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await mt.post("/createCard",l),this.getCustomerPaymentMethods()}catch(c){console.log(c)}},async removePaymentMethod(e){let t={user_id:this.user.id,payment_method:e};try{await mt.post("/removePaymentMethod",t),this.removeFromList(e)}catch(a){console.log(a)}},removeFromList(e){const t=this.userCards.findIndex(t=>t.id===e);this.userCards.splice(t,1),this.snackbarMsg("Card Removed Successfully")},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},async getCustomerPaymentMethods(){let e,t;if(this.$route.params.id?t=this.$route.params.id:(e=localStorage.getItem("user"),e=JSON.parse(e),t=e.id),null==t&&"student"==e.role)return void this.snackbarMsg("Stripe Customer Not Found");let a={user_id:t};try{const e=await mt.post("/getPaymentMethods",a);this.userCards=e.data.data}catch(l){console.log(l)}},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("1704");const KQ=ot()(XQ,[["render",WQ],["__scopeId","data-v-418ca843"]]);var ZQ=KQ;const GQ={class:"card"},eY={class:"card-header"},tY={class:"row"},aY={class:"col text-start"},lY=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left"},null,-1),cY=[lY],sY={class:"card-body"},oY=Object(l["createStaticVNode"])('<div class="row d-flex justify-content-center"><div class="col-md-5"><div style="background-color:#F5F5F5;" class=" mb-1 card card-body border bg-gray card-plain border-radius-lg d-flex align-items-center"><p class="text-dark">Your Payment Information</p></div></div></div><div id="card-element" class="StripeElement"></div><div class="row d-flex justify-content-center mt-1"><div class="col-md-5 mx-auto bg-white name-row p-2"><label>Card Holder Name</label><input id="card-holder-name" type="text" class="bg-white mb-2"></div></div>',3),nY={class:"row d-flex justify-content-center"};function rY(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",GQ,[Object(l["createElementVNode"])("div",eY,[Object(l["createElementVNode"])("div",tY,[Object(l["createElementVNode"])("div",aY,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},cY)])])]),Object(l["createElementVNode"])("div",sY,[oY,Object(l["createElementVNode"])("div",nY,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.submitPaymentMethod&&o.submitPaymentMethod(...e)),style:{"font-size":"12px"},class:"me-3 w-35 mt-3 trips-btn bg-gradient-grey shadow-grey text-dark fw-5 p-2 border-radius-lg"}," Save Payment Method ")])])])])}var iY={mounted(){this.includeStripe("js.stripe.com/v3/",function(){this.configureStripe()}.bind(this)),this.getUser(),this.$globalHelper.buttonColor()},data(){return{user:"",card_token:"",intentToken:"",name:"",addPaymentStatus:0,addPaymentStatusError:"",stripe:"",elements:"",card:"",stripeAPIToken:"pk_test_51NL39OA54mv9Tt3cBvUM2bicn8hMv5NhdEuvJcjgezES5zhVCGMOf5IUoqjglR8UfAWjVFStR2iPn3yLvMF3XcpM00Q0oowpaJ"}},methods:{includeStripe(e,t){let a=document,l="script",c=a.createElement(l),s=a.getElementsByTagName(l)[0];c.src="//"+e,t&&c.addEventListener("load",(function(e){t(null,e)}),!1),s.parentNode.insertBefore(c,s)},configureStripe(){this.stripe=window.Stripe(this.stripeAPIToken),this.elements=this.stripe.elements(),this.card=this.elements.create("card"),this.card.mount("#card-element")},generateToken(){this.stripe.createToken(this.card).then(e=>{this.savePaymentMethod(e.token.id)}).catch(e=>{console.error("Error generating token:",e)})},submitPaymentMethod(){this.generateToken(),this.addPaymentStatus=1,this.stripe.confirmCardSetup(this.intentToken.client_secret,{payment_method:{card:this.card,billing_details:{name:this.name}}}).then(function(e){console.log("CreateToken",e),e.error?(this.addPaymentStatus=3,this.addPaymentStatusError=e.error.message):(this.addPaymentStatus=2,this.card.clear(),this.name="")}.bind(this))},async savePaymentMethod(e){let t=localStorage.getItem("user");t=JSON.parse(t);let a=t.stripe_id;if(null==a)return void this.snackbarMsg("Stripe Customer Not Found");let l={card_token:e,customer_id:a};try{await mt.post("/createCard",l),this.$router.push({name:"payment_account"})}catch(c){console.log(c)}},getUser(){const e=localStorage.getItem("user");e&&(this.user=JSON.parse(e))},snackbarMsg(e){this.$snackbar.add({type:"error",text:e,background:"white"})}}};a("8889");const dY=ot()(iY,[["render",rY]]);var mY=dY;const bY={class:"container-fluid"},pY={class:"row"},uY={class:"col-12"},hY={class:"card"},OY={class:"d-flex justify-content-between  border-radius-lg pt-4"},jY=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"COURSES",-1),gY=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),fY=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Courses section, you can manage course information by adding, editing, or deleting courses. Additionally, you can view and update the "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" list of students enrolled in each course. This functionality helps management of courses and enrolled students. ")])],-1),EY={class:"filter-container ms-2"},VY={class:"row",style:{width:"100%"}},NY={class:"col-4"},yY={style:{display:"flex"}},xY=["value"],vY={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},kY=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),wY=Object(l["createTextVNode"])(" Export To XLS "),SY=[kY,wY],AY={class:"card-body px-0 pb-2"},CY={class:"table-responsive p-0 student-table"},BY={ref:"table",class:"table align-items-center mb-0"},_Y=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Code "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Course Level "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Action ")])],-1),PY={key:0},IY=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),DY=[IY],TY={class:"text-xs  text-center font-weight-bold mb-0"},MY=["onClick"],zY={class:"d-flex"},FY={class:"text-xs font-weight-bold mb-0"},UY=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),LY={class:"text-xs font-weight-bold mb-0"},$Y={class:"text-xs font-weight-bold mb-0"},RY={class:"align-middle text-center text-sm"},qY={class:"badge badge-sm bg-gradient-success"},HY={class:"align-middle text-center"},QY=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),YY=["onClick"],JY={class:"row"},WY={class:"col-md-12 col-lg-12"},XY={class:"pagination-container"},KY={class:"entries-dropdown"},ZY=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),GY=["value"],eJ={class:"pagination-wrapper"},tJ={class:"pagination"},aJ=["onClick"];function lJ(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",bY,[Object(l["createElementVNode"])("div",pY,[Object(l["createElementVNode"])("div",uY,[Object(l["createElementVNode"])("div",hY,[Object(l["createElementVNode"])("div",OY,[jY,Object(l["createVNode"])(n,{to:{name:"add-course"}},{default:Object(l["withCtx"])(()=>[gY]),_:1})]),fY,Object(l["createElementVNode"])("div",EY,[Object(l["createElementVNode"])("div",VY,[Object(l["createElementVNode"])("div",NY,[Object(l["createElementVNode"])("span",yY,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.searchString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.searchString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,xY))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",vY,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},SY)])])]),Object(l["createElementVNode"])("div",AY,[Object(l["createElementVNode"])("div",CY,[Object(l["createElementVNode"])("table",BY,[_Y,Object(l["createElementVNode"])("tbody",null,[0===s.allCourse.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",PY,DY)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allCourse,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",TY,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("span",{onClick:t=>o.gotoStudents(e.CourseCode)},[Object(l["createElementVNode"])("div",zY,[Object(l["createElementVNode"])("p",FY,Object(l["toDisplayString"])(e.CourseCode),1),UY])],8,MY)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",LY,Object(l["toDisplayString"])(e.CourseDescription),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",$Y,Object(l["toDisplayString"])(e.CourseLevel),1)]),Object(l["createElementVNode"])("td",RY,[Object(l["createElementVNode"])("span",qY,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",HY,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_course?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-course",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[QY]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_course?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,YY)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",JY,[Object(l["createElementVNode"])("div",WY,[Object(l["createElementVNode"])("div",XY,[Object(l["createElementVNode"])("div",KY,[ZY,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getAllCourses(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,GY))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",eJ,[Object(l["createElementVNode"])("ul",tJ,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getAllCourses(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getAllCourses(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllCourses(e),href:"#"},Object(l["toDisplayString"])(e),9,aJ)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getAllCourses(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getAllCourses(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var cJ={name:"tables",mounted(){this.setColor(),this.getUser(),this.getFilterString.filterBy?(this.filterBy=this.getFilterString.filterBy,this.searchString=this.getFilterString.searchString,this.debouncedSearch()):this.getAllCourses(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_course"),this.$globalHelper.buttonColor()},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterCourses,500)},beforeRouteLeave(e,t,a){if("enrolled-students"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,searchString:"",filterBy:"Course Code",allFields:["Course Name","Course Code","Course Level"],allCourse:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(lt["c"])(["getBrandingSetting","getFilterString"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(lt["b"])(["updateFilterString"]),gotoStudents(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/course/enrolled-students/"+e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteCourse(e)})},exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"courses.xlsx")},async filterCourses(){if(""==this.filterBy&&""==this.searchString)return void this.getAllCourses();if(""!=this.filterBy&&""==this.searchString)return void this.getAllCourses();let e={type:this.filterBy,value:this.searchString,status:"Active"};try{const t=await mt.post("/filterCourses",e);this.allCourse=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllCourses(e=null){try{let t={page:"",entries_per_page:this.itemsPerPage};t.page=e;let a="/getAllCourses";const l=await mt.post(a,t);this.allCourse=l.data.data.data,this.totalRows=l.data.pagination.total,this.currentPage=l.data.pagination.current_page,this.perPage=l.data.pagination.per_page,this.totalPages=l.data.pagination.last_page}catch(t){console.log(t)}},async deleteCourse(e){try{await mt.delete("/deleteCourse/"+e),this.removeCourseFromList(e),this.snackbarMsg("Course Successfully Deleted")}catch(t){console.log(t)}},removeCourseFromList(e){const t=this.allCourse.findIndex(t=>t.id===e);this.allCourse.splice(t,1)},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)}}};a("d108");const sJ=ot()(cJ,[["render",lJ]]);var oJ=sJ;Object(l["pushScopeId"])("data-v-0e2b24ef");const nJ={class:"container-fluid py-4"},rJ={class:"row"},iJ={class:"col-12"},dJ={class:"card my-4"},mJ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},bJ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Course",-1),pJ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),uJ={class:"card-body px-0 pb-2"},hJ={key:0,class:"mb-3 change-pass-alert"},OJ=Object(l["createElementVNode"])("br",null,null,-1),jJ={class:"table-responsive p-0"},gJ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},fJ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},EJ={class:"form-bg container p-4"},VJ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),NJ={class:"card card-plain"},yJ={class:"card-body"},xJ={role:"form"},vJ={class:"mb-1"},kJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),wJ={class:"mb-1"},SJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),AJ={class:"mb-1"},CJ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Name",-1),BJ={class:"mb-1"},_J=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),PJ=Object(l["createElementVNode"])("br",null,null,-1),IJ=["value"],DJ={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},TJ={class:""};function MJ(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",nJ,[Object(l["createElementVNode"])("div",rJ,[Object(l["createElementVNode"])("div",iJ,[Object(l["createElementVNode"])("div",dJ,[Object(l["createElementVNode"])("div",mJ,[bJ,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[pJ]),_:1})]),Object(l["createElementVNode"])("div",uJ,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",hJ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),OJ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",jJ,[Object(l["createElementVNode"])("div",gJ,[Object(l["createElementVNode"])("div",fJ,[Object(l["createElementVNode"])("div",EJ,[VJ,Object(l["createElementVNode"])("div",NJ,[Object(l["createElementVNode"])("div",yJ,[Object(l["createElementVNode"])("form",xJ,[Object(l["createElementVNode"])("div",vJ,[kJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],s.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",wJ,[SJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],s.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",AJ,[CJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newCourse.CourseDescription=e),type:"email",placeholder:"Course Name",name:"CourseDescription"},null,512),[[l["vModelText"],s.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",BJ,[_J,PJ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,IJ))),128))],512),[[l["vModelSelect"],s.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",DJ,[Object(l["createElementVNode"])("div",TJ,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>o.saveNewCourse&&o.saveNewCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Course ")])])])])])])])])])}Object(l["popScopeId"])();var zJ={name:"",components:{},mounted(){this.getUser(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Jo()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewCourse(){this.isError=!1;try{await mt.post("/createCourse",this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("eb29");const FJ=ot()(zJ,[["render",MJ],["__scopeId","data-v-0e2b24ef"]]);var UJ=FJ;Object(l["pushScopeId"])("data-v-24cbe91c");const LJ={class:"container-fluid py-4"},$J={class:"row"},RJ={class:"col-12"},qJ={class:"card my-4"},HJ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},QJ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Course",-1),YJ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),JJ={class:"card-body px-0 pb-2"},WJ={key:0,class:"mb-3 change-pass-alert"},XJ=Object(l["createElementVNode"])("br",null,null,-1),KJ={class:"table-responsive p-0"},ZJ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},GJ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},eW={class:"form-bg container p-4"},tW=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Course Information",-1),aW={class:"card card-plain"},lW={class:"card-body"},cW={role:"form"},sW={class:"mb-1"},oW=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Code",-1),nW={class:"mb-1"},rW=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Course Level",-1),iW={class:"mb-1"},dW=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Course Name",-1),mW={class:"mb-1"},bW=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),pW=Object(l["createElementVNode"])("br",null,null,-1),uW=["value"],hW={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},OW={class:""};function jW(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",LJ,[Object(l["createElementVNode"])("div",$J,[Object(l["createElementVNode"])("div",RJ,[Object(l["createElementVNode"])("div",qJ,[Object(l["createElementVNode"])("div",HJ,[QJ,Object(l["createVNode"])(n,{to:{name:"list-courses"}},{default:Object(l["withCtx"])(()=>[YJ]),_:1})]),Object(l["createElementVNode"])("div",JJ,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",WJ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),XJ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",KJ,[Object(l["createElementVNode"])("div",ZJ,[Object(l["createElementVNode"])("div",GJ,[Object(l["createElementVNode"])("div",eW,[tW,Object(l["createElementVNode"])("div",aW,[Object(l["createElementVNode"])("div",lW,[Object(l["createElementVNode"])("form",cW,[Object(l["createElementVNode"])("div",sW,[oW,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newCourse.CourseCode=e),type:"text",placeholder:"Course Code",name:"CourseCode"},null,512),[[l["vModelText"],s.newCourse.CourseCode]])]),Object(l["createElementVNode"])("div",nW,[rW,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newCourse.CourseLevel=e),type:"text",placeholder:"Course Level",name:"CourseLevel"},null,512),[[l["vModelText"],s.newCourse.CourseLevel]])]),Object(l["createElementVNode"])("div",iW,[dW,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newCourse.CourseDescription=e),type:"email",placeholder:"Course Name",name:"CourseDescription"},null,512),[[l["vModelText"],s.newCourse.CourseDescription]])]),Object(l["createElementVNode"])("div",mW,[bW,pW,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newCourse.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,uW))),128))],512),[[l["vModelSelect"],s.newCourse.status]])])])])])])]),Object(l["createElementVNode"])("div",hW,[Object(l["createElementVNode"])("div",OW,[Object(l["createElementVNode"])("button",{onClick:t[4]||(t[4]=(...e)=>o.updateCourse&&o.updateCourse(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Course ")])])])])])])])])])}Object(l["popScopeId"])();var gW={name:"",components:{},mounted(){this.getUser(),this.editCourse(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newCourse:{CourseCode:"",CourseLevel:"",CourseDescription:"",status:""},isError:!1,validationErrors:"",formValidation:"",availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Jo()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editCourse(){let e=this.$route.params.id;try{const t=await mt.get("/editCourse/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newCourse.CourseCode=t.CourseCode,this.newCourse.CourseLevel=t.CourseLevel,this.newCourse.CourseDescription=t.CourseDescription,this.newCourse.status=t.status)},async updateCourse(){let e=this.$route.params.id;try{await mt.put("/updateCourse/"+e,this.newCourse),this.$router.push({name:"list-courses"}),this.snackbarMsg("Course Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("d858");const fW=ot()(gW,[["render",jW],["__scopeId","data-v-24cbe91c"]]);var EW=fW;const VW={class:"container-fluid"},NW={class:"row"},yW={class:"col text-start"},xW=Object(l["createElementVNode"])("i",{class:"fas fa-arrow-left me-1"},null,-1),vW=[xW],kW={class:"row"},wW={class:"col-12"},SW={class:"card"},AW={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},CW=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ENROLLED STUDENTS",-1),BW=Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"},null,-1),_W=Object(l["createTextVNode"])(" New "),PW=[BW,_W],IW=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Enrolled Students section, you can view a list of students currently enrolled in a course. You have the ability to manage course enrollments "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" by adding new students or removing existing ones. ")])],-1),DW={class:"filter-container ms-2"},TW={class:"row",style:{width:"100%"}},MW={class:"col-4"},zW={style:{display:"flex"}},FW=["value"],UW={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},LW=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),$W=Object(l["createTextVNode"])(" Export To XLS "),RW=[LW,$W],qW=Object(l["createElementVNode"])("div",null,null,-1),HW={class:"card-body px-0 pb-2"},QW={class:"table-responsive p-0 student-table"},YW={ref:"table",class:"table align-items-center mb-0"},JW=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),WW={class:"align-middle text-center text-sm"},XW={class:"text-xs font-weight-bold mb-0"},KW={class:"text-xs font-weight-bold mb-0"},ZW={class:"text-xs mb-0",style:{"font-size":"8px"}},GW={class:"align-middle text-center"},eX={class:"text-secondary text-xs font-weight-bold"},tX={class:"align-middle text-center"},aX=["onClick"],lX={class:"row"},cX={class:"col-md-12 col-lg-12"},sX={class:"pagination-container"},oX={class:"entries-dropdown"},nX=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),rX=["value"],iX={class:"pagination-wrapper"},dX={class:"pagination"},mX=["onClick"];function bX(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("Enroll");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",VW,[Object(l["createElementVNode"])("div",NW,[Object(l["createElementVNode"])("div",yW,[Object(l["createElementVNode"])("button",{onClick:t[0]||(t[0]=t=>e.$router.go(-1)),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-2  border-radius-lg"},vW)])]),Object(l["createElementVNode"])("div",kW,[Object(l["createElementVNode"])("div",wW,[Object(l["createElementVNode"])("div",SW,[Object(l["createElementVNode"])("div",AW,[CW,o.userPermissions.create_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=e=>s.showModal=!0),style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},PW)):Object(l["createCommentVNode"])("",!0)]),IW,Object(l["createElementVNode"])("div",DW,[Object(l["createElementVNode"])("div",TW,[Object(l["createElementVNode"])("div",MW,[Object(l["createElementVNode"])("span",zW,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[3]||(t[3]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[4]||(t[4]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[5]||(t[5]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,FW))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",UW,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.exportTableToXLS())},RW)])])]),qW,Object(l["createElementVNode"])("div",HW,[Object(l["createElementVNode"])("div",QW,[Object(l["createElementVNode"])("table",YW,[JW,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",WW,[Object(l["createElementVNode"])("p",XW,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",KW,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),Object(l["createElementVNode"])("p",ZW,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",GW,[Object(l["createElementVNode"])("span",eX,Object(l["toDisplayString"])(e.schoolName),1)]),Object(l["createElementVNode"])("td",tX,[Object(l["createElementVNode"])("span",null,[o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:0,onClick:t=>o.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,aX)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)])]),Object(l["createElementVNode"])("div",lX,[Object(l["createElementVNode"])("div",cX,[Object(l["createElementVNode"])("div",sX,[Object(l["createElementVNode"])("div",oX,[nX,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.itemsPerPage=e),onChange:t[8]||(t[8]=e=>o.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,rX))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",iX,[Object(l["createElementVNode"])("ul",dX,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStudents(e),href:"#"},Object(l["toDisplayString"])(e),9,mX)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])]),Object(l["createVNode"])(n,{show:s.showModal,task:e.task,onClose:t[13]||(t[13]=e=>s.showModal=!1),onUpdateStudents:o.getAllStudents},null,8,["show","task","onUpdateStudents"])])}Object(l["pushScopeId"])("data-v-2d36253a");const pX={key:0,class:"modal fade show",tabindex:"-1",style:{display:"block"},"aria-modal":"true",role:"dialog"},uX={class:"modal-dialog"},hX={class:"modal-content"},OX={class:"modal-header"},jX=Object(l["createElementVNode"])("h6",{class:"h5 text-sm modal-title"},"Enroll Student to this Course",-1),gX=Object(l["createElementVNode"])("span",{"aria-hidden":"true"},"×",-1),fX=[gX],EX={class:"pt-4 modal-body"},VX=Object(l["createElementVNode"])("input",{id:"jkanban-task-id",class:"d-none"},null,-1),NX={class:"mb-4 input-group"},yX=Object(l["createElementVNode"])("span",{class:"input-group-text"},[Object(l["createElementVNode"])("i",{class:"far fa-edit","aria-hidden":"true"})],-1),xX={key:0,class:"alert alert-success"},vX={class:"text-end"};function kX(e,t,a,c,s,o){return a.show?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pX,[Object(l["createElementVNode"])("div",uX,[Object(l["createElementVNode"])("div",hX,[Object(l["createElementVNode"])("div",OX,[jX,Object(l["createElementVNode"])("button",{type:"button",class:"btn btn-close text-dark",onClick:t[0]||(t[0]=(...e)=>o.closeModal&&o.closeModal(...e)),"aria-label":"Close"},fX)]),Object(l["createElementVNode"])("div",EX,[VX,Object(l["createElementVNode"])("div",NX,[yX,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{id:"jkanban-task-title","onUpdate:modelValue":t[1]||(t[1]=e=>s.StudentID=e),class:"form-control",placeholder:"Enter Student ID",type:"text"},null,512),[[l["vModelText"],s.StudentID]])]),s.successMessage?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",xX,Object(l["toDisplayString"])(s.successMessage),1)):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",vX,[Object(l["createElementVNode"])("button",{onClick:t[2]||(t[2]=(...e)=>o.saveChanges&&o.saveChanges(...e)),class:"m-1 btn btn-primary"}," Save "),Object(l["createElementVNode"])("button",{onClick:t[3]||(t[3]=(...e)=>o.closeModal&&o.closeModal(...e)),class:"m-1 btn btn-secondary"}," Close ")])])])])])):Object(l["createCommentVNode"])("",!0)}Object(l["popScopeId"])();var wX={props:{show:{type:Boolean,required:!0},task:{type:Object,default:()=>({title:"",assignee:"",description:""})}},computed:{},mounted(){this.$globalHelper.buttonColor()},data(){return{StudentID:null,localTask:{...this.task},successMessage:""}},watch:{task:{handler(e){this.localTask={...e}},deep:!0,immediate:!0}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},closeModal(){this.$emit("close")},async saveChanges(){this.isError=!1;let e={StudentID:this.StudentID,CourseCode:this.$route.params.id};try{await mt.post("/enrollStudent",e),this.snackbarMsg("Student Enrolled Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors;for(let e=0;e<this.validationErrors.length;e++)this.snackbarMsg(this.validationErrors[e])}this.closeModal(),this.$emit("update-students")}}};a("457f");const SX=ot()(wX,[["render",kX],["__scopeId","data-v-2d36253a"]]);var AX=SX,CX={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllStudents()},updated(){this.$permissions.redirectIfNotAllowed("view_student"),this.$globalHelper.buttonColor()},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterStudents,500)},components:{Enroll:AX},beforeRouteLeave(e,t,a){if("list-courses"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,topUpAmount:null,showModal:!1,selectall:!1,selectedRecords:[],filterBy:"Student Id",seachString:"",allFields:["Student Id"],allStudents:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:"",allPages:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{...Object(lt["b"])(["updateFilterString"]),exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"students_table.xlsx")},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Student will be dropped from course and you won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStudent(e)})},selectAll(){this.selectedRecords=[],this.allStudents.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async filterStudents(){if(""==this.filterBy&&""==this.seachString)return void this.getAllStudents();if(""!=this.filterBy&&""==this.seachString)return void this.getAllStudents();let e=this.$route.params.id,t={type:this.filterBy,value:this.seachString,course_code:e};try{const e=await mt.post("/filterCourseStudents",t);this.allStudents=e.data,this.totalRows=e.data.total,this.currentPage=e.data.current_page,this.perPage=e.per_page,this.totalPages=e.data.last_page}catch(a){console.log(a)}},async getAllStudents(e=null){try{let t={CourseCode:this.$route.params.id,page:"",entries_per_page:this.itemsPerPage};t.page=e;const a=await mt.post("/getCourseStudents",t);this.allStudents=a.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(t){console.log(t)}},async deleteStudent(e){let t={StudentID:e,CourseCode:this.$route.params.id};try{await mt.post("/removeEnrolledStudent",t),this.getAllStudents(),this.snackbarMsg("Student Removed Successfully")}catch(a){let e=a.response.data.errors;for(let t=0;t<e.length;t++)this.snackbarMsg(e[t])}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.user.id===e);this.allStudents.splice(t,1)}}};a("139f");const BX=ot()(CX,[["render",bX]]);var _X=BX;const PX={class:"container-fluid"},IX={class:"row"},DX={class:"col-12"},TX={class:"card"},MX={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},zX=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"ADMINS",-1),FX=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),UX=Object(l["createElementVNode"])("span",{class:"ps-3"},[Object(l["createElementVNode"])("small",{class:"page-description"},[Object(l["createTextVNode"])("Here, you can add organization admins who can manage the entire portal. Multiple admins can be assigned, each with different"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" roles and permissions.")])],-1),LX={class:"card-body px-0 pb-2"},$X={class:"table-responsive p-0"},RX={class:"table align-items-center mb-0"},qX=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"align-middle text-center text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Role "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Organisation "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),HX={key:0},QX=Object(l["createElementVNode"])("td",{colspan:"7",class:"text-center"}," No data available. ",-1),YX=[QX],JX={class:"align-middle text-center text-sm"},WX={class:"text-xs font-weight-bold mb-0"},XX={class:"text-xs font-weight-bold mb-0"},KX={class:"text-xs font-weight-bold mb-0"},ZX={class:"align-middle text-center"},GX={class:"text-xs font-weight-bold mb-0"},eK={class:"align-middle text-center"},tK={class:"text-secondary text-xs font-weight-bold"},aK={class:"align-middle text-center text-sm"},lK={class:"badge badge-sm bg-gradient-success"},cK={class:"align-middle text-center"},sK=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),oK=["onClick"];function nK(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",PX,[Object(l["createElementVNode"])("div",IX,[Object(l["createElementVNode"])("div",DX,[Object(l["createElementVNode"])("div",TX,[Object(l["createElementVNode"])("div",MX,[zX,Object(l["createVNode"])(n,{to:{name:"add-organization-admins"}},{default:Object(l["withCtx"])(()=>[FX]),_:1})]),UX,Object(l["createElementVNode"])("div",LX,[Object(l["createElementVNode"])("div",$X,[Object(l["createElementVNode"])("table",RX,[qX,Object(l["createElementVNode"])("tbody",null,[0===s.allAdmins.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",HX,YX)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allAdmins,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",JX,[Object(l["createElementVNode"])("p",WX,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",XX,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",KX,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",ZX,[Object(l["createElementVNode"])("p",GX,Object(l["toDisplayString"])(e.user_role.role.name),1)]),Object(l["createElementVNode"])("td",eK,[Object(l["createElementVNode"])("span",tK,Object(l["toDisplayString"])(e.organization_admin&&e.organization_admin.organization?e.organization_admin.organization.name:"-"),1)]),Object(l["createElementVNode"])("td",aK,[Object(l["createElementVNode"])("span",lK,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",cK,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-organization-admin",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[sK]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,oK)])])]))),128))])])])])])])])])}var rK={name:"tables",mounted(){this.setColor(),this.getAllAdmins(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_admin")},data(){return{allAdmins:"",schools:6}},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be deleted permanently and you will not be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteOrganizationAdmin(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},async getAllAdmins(){try{const e=await mt.get("/getAllOrganizationAdmins");this.allAdmins=e.data}catch(e){console.log(e)}},async deleteOrganizationAdmin(e){try{await mt.delete("/deleteOrganizationAdmin/"+e),this.removeOrganizationAdminFromList(e),this.snackbarMsg("Successfully Deleted")}catch(t){console.log(t)}},removeOrganizationAdminFromList(e){const t=this.allAdmins.findIndex(t=>t.id===e);this.allAdmins.splice(t,1)}}};a("2dbd");const iK=ot()(rK,[["render",nK]]);var dK=iK;Object(l["pushScopeId"])("data-v-9f457e52");const mK={class:"container-fluid py-4"},bK={class:"row"},pK={class:"col-12"},uK={class:"card my-4"},hK={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},OK=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Create Admin",-1),jK=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),gK={class:"card-body px-0 pb-2"},fK={class:"table-responsive p-0"},EK={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},VK={key:0,class:"mb-3 change-pass-alert"},NK=Object(l["createElementVNode"])("br",null,null,-1),yK={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},xK={class:"form-bg container p-4"},vK=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),kK={class:"card card-plain"},wK={class:"card-body"},SK={role:"form"},AK={class:"mb-1"},CK=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),BK={key:0,class:"text-danger error-txt"},_K={class:"mb-1"},PK=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),IK={key:0,class:"text-danger error-txt"},DK={class:"mb-1"},TK=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),MK={key:0,class:"text-danger error-txt"},zK={class:"mb-1"},FK=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),UK={key:0,class:"text-danger error-txt"},LK={class:"mb-1"},$K=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),RK={key:0,class:"text-danger error-txt"},qK={class:"mb-1"},HK=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),QK=Object(l["createElementVNode"])("br",null,null,-1),YK=["value"],JK={key:0,class:"text-danger error-txt"},WK={class:"mb-1"},XK=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),KK=Object(l["createElementVNode"])("br",null,null,-1),ZK=["value"],GK={key:0,class:"text-danger error-txt"},eZ={class:"mb-1"},tZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),aZ=Object(l["createElementVNode"])("br",null,null,-1),lZ=["value"],cZ={key:0,class:"text-danger error-txt"},sZ={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},oZ={class:""};function nZ(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",mK,[Object(l["createElementVNode"])("div",bK,[Object(l["createElementVNode"])("div",pK,[Object(l["createElementVNode"])("div",uK,[Object(l["createElementVNode"])("div",hK,[OK,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[jK]),_:1})]),Object(l["createElementVNode"])("div",gK,[Object(l["createElementVNode"])("div",fK,[Object(l["createElementVNode"])("div",EK,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",VK,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),NK]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",yK,[Object(l["createElementVNode"])("div",xK,[vK,Object(l["createElementVNode"])("div",kK,[Object(l["createElementVNode"])("div",wK,[Object(l["createElementVNode"])("form",SK,[Object(l["createElementVNode"])("div",AK,[CK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newAdmin.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",BK,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_K,[PK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newAdmin.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",IK,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",DK,[TK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newAdmin.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",MK,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zK,[FK,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[3]||(t[3]=e=>s.newAdmin.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],s.newAdmin.password]]),""!==s.formValidation&&""!==s.formValidation["password"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",UK,"password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",LK,[$K,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],s.newAdmin.password_confirmation]]),""!==s.formValidation&&""!==s.formValidation["password_confirmation"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",RK,"confirm password is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",qK,[HK,QK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,YK))),128))],512),[[l["vModelSelect"],s.newAdmin.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",JK,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",WK,[XK,KK,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[6]||(t[6]=e=>s.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,ZK)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],s.newAdmin.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",GK,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",eZ,[tZ,aZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[7]||(t[7]=e=>s.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,lZ))),128))],512),[[l["vModelSelect"],s.newAdmin.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",cZ,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",sZ,[Object(l["createElementVNode"])("div",oZ,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.saveNewAdmin&&o.saveNewAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var rZ={name:"",components:{},mounted(){this.getAllOrganizations(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:"",role:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_admin");let e=!1,t="";t=Jo()(this.newAdmin);for(let a in this.newAdmin)""===this.newAdmin[a]||void 0===this.newAdmin[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await mt.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async saveNewAdmin(){if(!this.validateForm())try{let e=await mt.post("/createOrganizationAdmin",this.newAdmin);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await mt.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("a86a");const iZ=ot()(rZ,[["render",nZ],["__scopeId","data-v-9f457e52"]]);var dZ=iZ;Object(l["pushScopeId"])("data-v-3c7089d6");const mZ={class:"container-fluid py-4"},bZ={class:"row"},pZ={class:"col-12"},uZ={class:"card my-4"},hZ={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},OZ=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Admin",-1),jZ=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),gZ={class:"card-body px-0 pb-2"},fZ={class:"table-responsive p-0"},EZ={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},VZ={key:0,class:"mb-3 change-pass-alert"},NZ=Object(l["createElementVNode"])("br",null,null,-1),yZ={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},xZ={class:"form-bg container p-4"},vZ=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),kZ={class:"card card-plain"},wZ={class:"card-body"},SZ={role:"form"},AZ={class:"mb-1"},CZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),BZ={key:0,class:"text-danger error-txt"},_Z={class:"mb-1"},PZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),IZ={key:0,class:"text-danger error-txt"},DZ={class:"mb-1"},TZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),MZ={key:0,class:"text-danger error-txt"},zZ={class:"mb-1"},FZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Organisation",-1),UZ=Object(l["createElementVNode"])("br",null,null,-1),LZ=["value"],$Z={key:0,class:"text-danger error-txt"},RZ={class:"mb-1"},qZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Role",-1),HZ=Object(l["createElementVNode"])("br",null,null,-1),QZ=["value"],YZ={key:0,class:"text-danger error-txt"},JZ={class:"mb-1"},WZ=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),XZ=Object(l["createElementVNode"])("br",null,null,-1),KZ=["value"],ZZ={key:0,class:"text-danger error-txt"},GZ={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},eG={class:"form-bg container p-4"},tG=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),aG=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),lG={class:"card card-plain"},cG={class:"card-body"},sG={role:"form"},oG={class:"mb-1"},nG=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),rG={class:"mb-1"},iG=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),dG={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},mG={class:""};function bG(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",mZ,[Object(l["createElementVNode"])("div",bZ,[Object(l["createElementVNode"])("div",pZ,[Object(l["createElementVNode"])("div",uZ,[Object(l["createElementVNode"])("div",hZ,[OZ,Object(l["createVNode"])(n,{to:{name:"list-organization-admins"}},{default:Object(l["withCtx"])(()=>[jZ]),_:1})]),Object(l["createElementVNode"])("div",gZ,[Object(l["createElementVNode"])("div",fZ,[Object(l["createElementVNode"])("div",EZ,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",VZ,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),NZ]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",yZ,[Object(l["createElementVNode"])("div",xZ,[vZ,Object(l["createElementVNode"])("div",kZ,[Object(l["createElementVNode"])("div",wZ,[Object(l["createElementVNode"])("form",SZ,[Object(l["createElementVNode"])("div",AZ,[CZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAdmin.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newAdmin.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",BZ,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_Z,[PZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newAdmin.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newAdmin.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",IZ,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",DZ,[TZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newAdmin.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newAdmin.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",MZ,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",zZ,[FZ,UZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>s.newAdmin.organization_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allOrganizations,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.name),9,LZ))),128))],512),[[l["vModelSelect"],s.newAdmin.organization_id]]),""!==s.formValidation&&""!==s.formValidation["organization_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",$Z,"Organisation is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",RZ,[qZ,HZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[4]||(t[4]=e=>s.newAdmin.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:0,value:e.name},Object(l["toDisplayString"])(e.name),9,QZ)):Object(l["createCommentVNode"])("",!0)],64))),128))],512),[[l["vModelSelect"],s.newAdmin.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",YZ,"Admin Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",JZ,[WZ,XZ,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.newAdmin.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,KZ))),128))],512),[[l["vModelSelect"],s.newAdmin.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",ZZ,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",GZ,[Object(l["createElementVNode"])("div",eG,[tG,aG,Object(l["createElementVNode"])("div",lG,[Object(l["createElementVNode"])("div",cG,[Object(l["createElementVNode"])("form",sG,[Object(l["createElementVNode"])("div",oG,[nG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newAdmin.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newAdmin.password]])]),Object(l["createElementVNode"])("div",rG,[iG,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[7]||(t[7]=e=>s.newAdmin.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newAdmin.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",dG,[Object(l["createElementVNode"])("div",mG,[Object(l["createElementVNode"])("button",{onClick:t[8]||(t[8]=(...e)=>o.updateAdmin&&o.updateAdmin(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Admin ")])])])])])])])])])}Object(l["popScopeId"])();var pG={name:"",components:{},mounted(){this.getAllRoles(),this.getAllOrganizations(),this.editOrganizationAdmin(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_admin")},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],isError:!1,formValidation:"",validationErrors:"",newAdmin:{organization_id:"",first_name:"",last_name:"",email:"",status:"",role:"",password:"",password_confirmation:""},availableStatus:["active","pending","blocked"],allOrganizations:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_admin");let e=!1,t="";t=Jo()(this.newAdmin);for(let a in this.newAdmin)""!==this.newAdmin[a]&&void 0!==this.newAdmin[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await mt.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async editOrganizationAdmin(){let e=this.$route.params.id;try{const t=await mt.get("/editOrganizationAdmin/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAdmin.organization_id=t.organization_admin.organization_id,this.newAdmin.first_name=t.first_name,this.newAdmin.last_name=t.last_name,this.newAdmin.email=t.email,this.newAdmin.status=t.status,this.newAdmin.role=t.user_role.role.name)},async updateAdmin(){if(this.validateForm())console.log(this.formValidation);else try{let e=this.$route.params.id;await mt.put("/updateOrganizationAdmin/"+e,this.newAdmin),this.isError=!1,this.$router.push({name:"list-organization-admins"}),this.snackbarMsg("Admin Updated Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newAdmin.first_name+" "+this.newAdmin.last_name,a={user_id:e,name:t,email:this.newAdmin.email};try{await mt.post("/createCustomer",a)}catch(l){console.log(l)}},async getAllOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("b909");const uG=ot()(pG,[["render",bG],["__scopeId","data-v-3c7089d6"]]);var hG=uG;const OG={class:"container-fluid"},jG={class:"row"},gG={class:"col-12"},fG={class:"card px-3"},EG={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},VG=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"STAFF",-1),NG=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-2 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),yG=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" Here, you can oversee staff accounts, add funds to their wallets, and track their transaction history. This functionality ensures effective management "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("of financial interactions and balances for each staff. ")])],-1),xG={class:"filter-container ms-2"},vG={class:"row",style:{width:"100%"}},kG={class:"col-4"},wG={style:{display:"flex"}},SG=["value"],AG={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"10px"}},CG=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),BG=Object(l["createTextVNode"])(" Export To XLS "),_G=[CG,BG],PG={class:"card-body px-0 pb-2"},IG={class:"table-responsive p-0"},DG={ref:"table",class:"table align-items-center mb-0"},TG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),MG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),zG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),FG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),UG=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," Balance ",-1),LG={key:0,class:"text-center text-uppercase text-xxs font-weight-bolder"},$G={key:1,class:"text-uppercase text-xxs font-weight-bolder"},RG=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),qG=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ",-1),HG={key:0},QG=Object(l["createElementVNode"])("td",{colspan:"9",class:"text-center"}," No data available. ",-1),YG=[QG],JG={class:"text-xs  text-center font-weight-bold mb-0"},WG={class:"text-xs font-weight-bold mb-0"},XG={class:"text-xs font-weight-bold mb-0"},KG={class:"text-xs text-center font-weight-bold mb-0"},ZG={class:"ms-4 text-secondary text-xs font-weight-bold"},GG={key:0,class:"align-middle text-center"},e1=["onClick"],t1={key:1,class:"align-middle text-center"},a1=["onClick"],l1={class:"align-middle text-center text-sm"},c1={class:"badge badge-sm bg-gradient-success"},s1={class:"align-middle text-center"},o1=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),n1=["onClick"],r1={class:"row"},i1={class:"col-md-12 col-lg-12"},d1={class:"pagination-container"},m1={class:"entries-dropdown"},b1=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),p1=["value"],u1={class:"pagination-wrapper"},h1={class:"pagination"},O1=["onClick"];function j1(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",OG,[Object(l["createElementVNode"])("div",jG,[Object(l["createElementVNode"])("div",gG,[Object(l["createElementVNode"])("div",fG,[Object(l["createElementVNode"])("div",EG,[VG,o.userPermissions.create_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-staff"}},{default:Object(l["withCtx"])(()=>[NG]),_:1})):Object(l["createCommentVNode"])("",!0)]),yG,Object(l["createElementVNode"])("div",xG,[Object(l["createElementVNode"])("div",vG,[Object(l["createElementVNode"])("div",kG,[Object(l["createElementVNode"])("span",wG,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.searchString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.searchString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,SG))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",AG,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},_G)])])]),Object(l["createElementVNode"])("div",PG,[Object(l["createElementVNode"])("div",IG,[Object(l["createElementVNode"])("table",DG,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[TG,MG,zG,FG,UG,o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",LG," Wallet ")):Object(l["createCommentVNode"])("",!0),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("th",$G," TopUp ")):Object(l["createCommentVNode"])("",!0),RG,qG])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",HG,YG)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",JG,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",WG,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",XG,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",KG,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("span",ZG,"£"+Object(l["toDisplayString"])(o.formattedPrice(e.balance?e.balance:0)),1)]),o.userPermissions.wallet?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",GG,[Object(l["createElementVNode"])("i",{onClick:t=>o.gotoBallance(e.user.id),class:"hover-pointer fas fa-donate fs-5 me-2"},null,8,e1)])):Object(l["createCommentVNode"])("",!0),o.userPermissions.topup?(Object(l["openBlock"])(),Object(l["createElementBlock"])("td",t1,[Object(l["createElementVNode"])("i",{onClick:t=>o.topUps(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"credit_card",8,a1)])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("td",l1,[Object(l["createElementVNode"])("span",c1,Object(l["toDisplayString"])(e.user.status),1)]),Object(l["createElementVNode"])("td",s1,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_staff?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-staff",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[o1]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_staff?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.user.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,n1)):Object(l["createCommentVNode"])("",!0)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",r1,[Object(l["createElementVNode"])("div",i1,[Object(l["createElementVNode"])("div",d1,[Object(l["createElementVNode"])("div",m1,[b1,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getAllStaff(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,p1))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",u1,[Object(l["createElementVNode"])("ul",h1,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getAllStaff(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,O1)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getAllStaff(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getAllStaff(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var g1={name:"tables",mounted(){this.setColor(),this.getUser(),this.getFilterString.filterBy?(this.filterBy=this.getFilterString.filterBy,this.searchString=this.getFilterString.searchString,this.debouncedSearch()):this.getAllStaff(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_staff"),this.$globalHelper.buttonColor()},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterStaff,500)},computed:{...Object(lt["c"])(["getBrandingSetting","getFilterString"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},beforeRouteLeave(e,t,a){if("payment_account"!==e.name&&"balance"!==e.name){let e={filterBy:"",searchString:""};this.updateFilterString(e),a()}else a()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],searchString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{...Object(lt["b"])(["updateFilterString"]),exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"staff_table.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteStaff(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/payment_account/"+e)},gotoBallance(e){let t={filterBy:this.filterBy,searchString:this.searchString};this.updateFilterString(t),this.$router.push("/balance/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await mt.post("/getAllStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await mt.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.user.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.searchString)return void this.getAllStaff();let e={type:this.filterBy,value:this.searchString,status:"active"};try{const t=await mt.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("b686");const f1=ot()(g1,[["render",j1]]);var E1=f1;const V1={class:"container-fluid"},N1={class:"row"},y1={class:"col-12"},x1={class:"card px-3"},v1=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize"},"ARCHIVED STAFF"),Object(l["createElementVNode"])("small",{class:"page-description ms-2"},[Object(l["createTextVNode"])("Every archived staff can be found in this table. Here, you can manage archived staff accounts. You can permanently delete them in bulk,"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" restore them, or export the data to an Excel sheet")])])],-1),k1={class:"card-body px-0 pb-2"},w1={class:"filter-container mb-1 ms-2",style:{"margin-top":"-11px"}},S1={class:"row",style:{width:"100%"}},A1={class:"col-4"},C1={style:{display:"flex"}},B1=["value"],_1={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},P1=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),I1=Object(l["createTextVNode"])(" Export To XLS "),D1=[P1,I1],T1={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},M1=Object(l["createElementVNode"])("i",{class:"fas fa-undo restore-icon me-1"},null,-1),z1=Object(l["createTextVNode"])(" Bulk Restore "),F1=[M1,z1],U1={class:"col-12 col-md-2 col-sm-6",style:{"padding-top":"15px"}},L1=Object(l["createElementVNode"])("i",{class:"fas fa-trash delete-icon me-1"},null,-1),$1=Object(l["createTextVNode"])(" Bulk Delete "),R1=[L1,$1],q1={class:"table-responsive p-0"},H1={ref:"table",class:"table align-items-center mb-0"},Q1={class:""},Y1={class:"form-check",style:{"margin-left":"-20px"}},J1=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),W1=Object(l["createElementVNode"])("th",{class:"text-uppercase text-center text-xxs font-weight-bolder"}," MIFARE ID ",-1),X1=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name ",-1),K1=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email ",-1),Z1=Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Site ",-1),G1=Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Status ",-1),e0={key:0},t0=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),a0=[t0],l0={class:"align-middle text-center text-sm"},c0={class:"form-check"},s0=["checked","onChange"],o0=Object(l["createElementVNode"])("label",{for:"",class:"custom-control-label"},null,-1),n0={class:"text-xs  text-center font-weight-bold mb-0"},r0={class:"text-xs font-weight-bold mb-0"},i0={class:"text-xs font-weight-bold mb-0"},d0={class:"text-xs text-center font-weight-bold mb-0"},m0={class:"align-middle text-center text-sm"},b0={class:"badge badge-sm bg-gradient-success"},p0={class:"row"},u0={class:"col-md-12 col-lg-12"},h0={class:"pagination-container"},O0={class:"entries-dropdown"},j0=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),g0=["value"],f0={class:"pagination-wrapper"},E0={class:"pagination"},V0=["onClick"];function N0(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",V1,[Object(l["createElementVNode"])("div",N1,[Object(l["createElementVNode"])("div",y1,[Object(l["createElementVNode"])("div",x1,[v1,Object(l["createElementVNode"])("div",k1,[Object(l["createElementVNode"])("div",w1,[Object(l["createElementVNode"])("div",S1,[Object(l["createElementVNode"])("div",A1,[Object(l["createElementVNode"])("span",C1,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,B1))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",_1,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},D1)]),Object(l["createElementVNode"])("div",T1,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[5]||(t[5]=e=>o.confirmAction("restore"))},F1)]),Object(l["createElementVNode"])("div",U1,[o.userPermissions.delete_student?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:"label-text bulk_topup",onClick:t[6]||(t[6]=e=>o.confirmAction("delete"))},R1)):Object(l["createCommentVNode"])("",!0)])])]),Object(l["createElementVNode"])("div",q1,[Object(l["createElementVNode"])("table",H1,[Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",Q1,[Object(l["createElementVNode"])("div",Y1,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{onChange:t[7]||(t[7]=(...e)=>o.selectAll&&o.selectAll(...e)),"onUpdate:modelValue":t[8]||(t[8]=e=>s.selectall=e),id:"",class:"form-check-input",type:"checkbox",name:""},null,544),[[l["vModelCheckbox"],s.selectall]]),J1])]),W1,X1,K1,Z1,G1])]),Object(l["createElementVNode"])("tbody",null,[0===s.allStaff.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",e0,a0)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStaff,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",l0,[Object(l["createElementVNode"])("div",c0,[Object(l["createElementVNode"])("input",{checked:o.checkIfSelected(e.user.id),onChange:t=>o.selectRecord(e.user.id),id:"",class:"form-check-input",type:"checkbox",name:""},null,40,s0),o0])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",n0,Object(l["toDisplayString"])(e.mifare_id?e.mifare_id:"-"),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",r0,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",i0,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",d0,Object(l["toDisplayString"])(e.school.name),1)]),Object(l["createElementVNode"])("td",m0,[Object(l["createElementVNode"])("span",b0,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])],512)]),Object(l["createElementVNode"])("div",p0,[Object(l["createElementVNode"])("div",u0,[Object(l["createElementVNode"])("div",h0,[Object(l["createElementVNode"])("div",O0,[j0,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[9]||(t[9]=e=>s.itemsPerPage=e),onChange:t[10]||(t[10]=e=>o.getAllStaff(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,g0))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",f0,[Object(l["createElementVNode"])("ul",E0,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[11]||(t[11]=e=>o.getAllStaff(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[12]||(t[12]=e=>o.getAllStaff(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getAllStaff(e),href:"#"},Object(l["toDisplayString"])(e),9,V0)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[13]||(t[13]=e=>o.getAllStaff(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[14]||(t[14]=e=>o.getAllStaff(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var y0={name:"tables",async mounted(){this.setColor(),await this.getUser(),await this.getAllStaff(),await this.selectAll()},updated(){this.$permissions.redirectIfNotAllowed("view_staff")},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterStaff,500)},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,filterBy:"Name",allFields:["MIFare Id","Name","Email"],selectall:!1,selectedRecords:[],seachString:"",allStaff:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},methods:{exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"archived_staff.xlsx")},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},selectAll(){this.selectedRecords=[],this.allStaff.filter(e=>{this.selectall?this.selectedRecords.push({id:e.user.id,value:!0}):this.selectedRecords.push({id:e.user.id,value:!1})})},checkIfSelected(e){const t=this.selectedRecords.find(t=>t.id===e);return!!t&&t.value},selectRecord(e){const t=this.selectedRecords.find(t=>t.id===e);t.value?t.value=!1:t.value=!0},async bulkDelete(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await mt.post("/bulkDeleteStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}},async bulkRestore(){let e=[];if(this.selectedRecords.filter(t=>{t.value&&e.push(t.id)}),e.length){const t=await mt.post("/bulkRestoreStaff",e);this.snackbarMsg(t.data.message),this.getAllStaff()}else this.snackbarMsg("Error: data not selected")},confirmAction(e){ys.a.fire({title:"Are you sure?",text:"delete"==e?"Items will be deleted permanently and you will not be able to revert this!":"Items Will be restored to the staff",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"delete"==e?"Yes, delete it!":"Yes, restore it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&("delete"==e?this.bulkDelete():"restore"==e&&this.bulkRestore())})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStaff(e){let t={user_id:null,page:e,entries_per_page:this.itemsPerPage};try{"organization_admin"==this.user.role&&(t.user_id=this.user.id);const e=await mt.post("/archivedStaff",t);this.allStaff=e.data.data,this.totalRows=e.data.pagination.total,this.currentPage=e.data.pagination.current_page,this.perPage=e.data.pagination.per_page,this.totalPages=e.data.pagination.last_page}catch(a){console.log(a)}},async deleteStaff(e){try{await mt.delete("/deleteStaff/"+e),this.removeStaffFromList(e),this.snackbarMsg("Staff Deleted")}catch(t){console.log(t)}},removeStaffFromList(e){const t=this.allStaff.findIndex(t=>t.id===e);this.allStaff.splice(t,1)},async filterStaff(){if(""==this.seachString)return void this.getAllStaff();let e={type:this.filterBy,value:this.seachString,status:"deleted"};try{const t=await mt.post("/searchStaff",e);this.allStaff=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}}}};a("2240");const x0=ot()(y0,[["render",N0]]);var v0=x0;Object(l["pushScopeId"])("data-v-e34a6ae6");const k0={class:"container-fluid py-4"},w0={class:"row"},S0={class:"col-12"},A0={class:"card my-4"},C0={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},B0=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Staff",-1),_0=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),P0={class:"card-body px-0 pb-2"},I0={class:"table-responsive p-0"},D0={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},T0={key:0,class:"mb-3 change-pass-alert"},M0=Object(l["createElementVNode"])("br",null,null,-1),z0={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},F0={class:"form-bg container p-4"},U0=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),L0={class:"card card-plain"},$0={class:"card-body"},R0={role:"form"},q0={class:"mb-1"},H0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Q0={key:0,class:"text-danger error-txt"},Y0={class:"mb-1"},J0=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),W0={key:0,class:"text-danger error-txt"},X0={class:"mb-1"},K0=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),Z0={key:0,class:"text-danger error-txt"},G0={class:"mb-1"},e2=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),t2={key:0,class:"text-danger error-txt"},a2={class:"mb-1"},l2=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),c2={key:0,class:"text-danger error-txt"},s2={class:"mb-1"},o2=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),n2=Object(l["createElementVNode"])("br",null,null,-1),r2=["value"],i2={key:0,class:"text-danger error-txt"},d2={class:"mb-1"},m2=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Balance ",-1),b2={class:"mb-1"},p2=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),u2=Object(l["createElementVNode"])("br",null,null,-1),h2=["value"],O2={key:0,class:"text-danger error-txt"},j2={class:"mb-1"},g2=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},[Object(l["createTextVNode"])("Status "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),f2=Object(l["createElementVNode"])("br",null,null,-1),E2=["value"],V2={key:0,class:"text-danger error-txt"},N2={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},y2={class:""};function x2(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",k0,[Object(l["createElementVNode"])("div",w0,[Object(l["createElementVNode"])("div",S0,[Object(l["createElementVNode"])("div",A0,[Object(l["createElementVNode"])("div",C0,[B0,Object(l["createVNode"])(n,{to:{name:"list-staff"}},{default:Object(l["withCtx"])(()=>[_0]),_:1})]),Object(l["createElementVNode"])("div",P0,[Object(l["createElementVNode"])("div",I0,[Object(l["createElementVNode"])("div",D0,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",T0,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),M0]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",z0,[Object(l["createElementVNode"])("div",F0,[U0,Object(l["createElementVNode"])("div",L0,[Object(l["createElementVNode"])("div",$0,[Object(l["createElementVNode"])("form",R0,[Object(l["createElementVNode"])("div",q0,[H0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStaff.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Q0,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Y0,[J0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStaff.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",W0,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",X0,[K0,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStaff.staff_id]]),""!==s.formValidation&&""!==s.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",Z0,"Student ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",G0,[e2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],s.newStaff.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",t2,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",a2,[l2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStaff.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",c2,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",s2,[o2,n2,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,r2))),128))],512),[[l["vModelSelect"],s.newStaff.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",i2,"School ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",d2,[m2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[6]||(t[6]=e=>s.newStaff.balance=e),type:"number",step:"0.01",min:"0",placeholder:"balance",name:"balance"},null,512),[[l["vModelText"],s.newStaff.balance]])]),Object(l["createElementVNode"])("div",b2,[p2,u2,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.name},Object(l["toDisplayString"])(e.name),9,h2))),128))],512),[[l["vModelSelect"],s.newStaff.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",O2,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",j2,[g2,f2,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,E2))),128))],512),[[l["vModelSelect"],s.newStaff.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",V2,"status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",N2,[Object(l["createElementVNode"])("div",y2,[Object(l["createElementVNode"])("button",{onClick:t[9]||(t[9]=(...e)=>o.saveNewStaff&&o.saveNewStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Staff ")])])])])])])])])])}Object(l["popScopeId"])();var v2={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("create_staff")},computed:{formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",last_name:"",email:"",status:"",role:"",balance:""},availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_staff");let e=!1,t="";t=Jo()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&void 0!==this.newStaff[a]||"balance"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},async getAllRoles(){try{const e=await mt.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewStaff(){if(!this.validateForm())try{await mt.post("/createStaff",this.newStaff),this.isError=!1,this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await mt.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("8409");const k2=ot()(v2,[["render",x2],["__scopeId","data-v-e34a6ae6"]]);var w2=k2;Object(l["pushScopeId"])("data-v-73fb7173");const S2={class:"container-fluid py-4"},A2={class:"row"},C2={class:"col-12"},B2={class:"card my-4"},_2={class:"d-flex justify-content-between border-radius-lg pt-4"},P2=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Staff",-1),I2=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Back ",-1),D2={class:"card-body px-0 pb-2"},T2={class:"table-responsive p-0"},M2={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},z2={key:0,class:"mb-3 change-pass-alert"},F2=Object(l["createElementVNode"])("br",null,null,-1),U2={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},L2={class:"form-bg container p-4"},$2=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),R2={class:"card card-plain"},q2={class:"card-body"},H2={role:"form"},Q2={class:"mb-1"},Y2=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("First Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),J2={key:0,class:"text-danger error-txt"},W2={class:"mb-1"},X2=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},[Object(l["createTextVNode"])("Last Name "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),K2={key:0,class:"text-danger error-txt"},Z2={class:"mb-1"},G2=Object(l["createElementVNode"])("label",{class:"input-label",for:"student_id"},[Object(l["createTextVNode"])("Staff ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),e4={key:0,class:"text-danger error-txt"},t4={class:"mb-1"},a4=Object(l["createElementVNode"])("label",{class:"input-label",for:"mifare_id"},[Object(l["createTextVNode"])("MIFARE ID "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),l4={key:0,class:"text-danger error-txt"},c4={class:"mb-1"},s4=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},[Object(l["createTextVNode"])("Email "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),o4={key:0,class:"text-danger error-txt"},n4={class:"mb-1"},r4=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),i4=Object(l["createElementVNode"])("br",null,null,-1),d4=["value"],m4={key:0,class:"text-danger error-txt"},b4={class:"mb-1"},p4=Object(l["createElementVNode"])("label",{class:"input-label",for:"balance"},"Add Amount",-1),u4={class:"mb-1"},h4=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Role "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),O4=Object(l["createElementVNode"])("br",null,null,-1),j4=["value"],g4={key:0,class:"text-danger error-txt"},f4={class:"mb-1"},E4=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),V4=Object(l["createElementVNode"])("br",null,null,-1),N4=["value"],y4={key:0,class:"text-danger error-txt"},x4={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},v4={class:"form-bg container p-4"},k4=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),w4=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),S4={class:"card card-plain"},A4={class:"card-body"},C4={role:"form"},B4={class:"mb-1"},_4=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),P4={class:"mb-1"},I4=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),D4={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},T4={class:""};function M4(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",S2,[Object(l["createElementVNode"])("div",A2,[Object(l["createElementVNode"])("div",C2,[Object(l["createElementVNode"])("div",B2,[Object(l["createElementVNode"])("div",_2,[P2,Object(l["createVNode"])(n,{to:{name:"list-staff"}},{default:Object(l["withCtx"])(()=>[I2]),_:1})]),Object(l["createElementVNode"])("div",D2,[Object(l["createElementVNode"])("div",T2,[Object(l["createElementVNode"])("div",M2,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",z2,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),F2]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",U2,[Object(l["createElementVNode"])("div",L2,[$2,Object(l["createElementVNode"])("div",R2,[Object(l["createElementVNode"])("div",q2,[Object(l["createElementVNode"])("form",H2,[Object(l["createElementVNode"])("div",Q2,[Y2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newStaff.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newStaff.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",J2,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",W2,[X2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newStaff.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newStaff.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",K2,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",Z2,[G2,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"student_id","onUpdate:modelValue":t[2]||(t[2]=e=>s.newStaff.staff_id=e),type:"text",placeholder:"ID",name:"student_id"},null,512),[[l["vModelText"],s.newStaff.staff_id]]),""!==s.formValidation&&""!==s.formValidation["staff_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",e4,"Staff ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",t4,[a4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"mifare_id","onUpdate:modelValue":t[3]||(t[3]=e=>s.newStaff.mifare_id=e),type:"text",placeholder:"MIFARE ID",name:"mifare_id"},null,512),[[l["vModelText"],s.newStaff.mifare_id]]),""!==s.formValidation&&""!==s.formValidation["mifare_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",l4,"MIFARE ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",c4,[s4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newStaff.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newStaff.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",o4,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",n4,[r4,i4,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[5]||(t[5]=e=>s.newStaff.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,d4))),128))],512),[[l["vModelSelect"],s.newStaff.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",m4,"Site is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",b4,[p4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"balance","onUpdate:modelValue":t[6]||(t[6]=e=>s.newStaff.add_amount=e),type:"number",step:"0.01",min:"0",placeholder:"add amount",name:"add_amount"},null,512),[[l["vModelText"],s.newStaff.add_amount]])]),Object(l["createElementVNode"])("div",u4,[h4,O4,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[7]||(t[7]=e=>s.newStaff.role=e),id:"role",type:"select",placeholder:"role",name:"role"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.name},Object(l["toDisplayString"])(e.name),9,j4))),128))],512),[[l["vModelSelect"],s.newStaff.role]]),""!==s.formValidation&&""!==s.formValidation["role"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",g4,"Staff Role is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",f4,[E4,V4,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[8]||(t[8]=e=>s.newStaff.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,N4))),128))],512),[[l["vModelSelect"],s.newStaff.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",y4,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",x4,[Object(l["createElementVNode"])("div",v4,[k4,w4,Object(l["createElementVNode"])("div",S4,[Object(l["createElementVNode"])("div",A4,[Object(l["createElementVNode"])("form",C4,[Object(l["createElementVNode"])("div",B4,[_4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[9]||(t[9]=e=>s.newStaff.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newStaff.password]])]),Object(l["createElementVNode"])("div",P4,[I4,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[10]||(t[10]=e=>s.newStaff.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newStaff.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",D4,[Object(l["createElementVNode"])("div",T4,[Object(l["createElementVNode"])("button",{onClick:t[11]||(t[11]=(...e)=>o.updateStaff&&o.updateStaff(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Staff ")])])])])])])])])])}Object(l["popScopeId"])();var z4={name:"",components:{},mounted(){this.getUser(),this.editStaff(),this.getSchools(),this.getAllRoles(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_staff")},computed:{formattedAmount:{get(){return parseFloat(this.newStaff.add_amount).toFixed(2)},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.add_amount=t}},formattedBalance:{get(){return this.newStaff.balance},set(e){const t=parseFloat(e).toFixed(2);this.newStaff.balance=t}}},data(){return{allRoles:"",user:"",availableCountries:["UK","USA","Canada"],newStaff:{school_id:"",mifare_id:"",staff_id:"",first_name:"",add_amount:"",last_name:"",email:"",phone:"",country:"",city:"",zip:"",address:"",status:"",password:"",password_confirmation:"",role:""},validationErrors:"",isError:!1,formValidation:"",availableStatus:["active","pending","blocked"],allSchools:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_staff");let e=!1,t="";t=Jo()(this.newStaff);for(let a in this.newStaff)""!==this.newStaff[a]&&null!==this.newStaff[a]||"phone"===a||"country"===a||"city"===a||"address"===a||"zip"===a||"balance"===a||"add_amount"===a||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,console.log(this.formValidation),e},async getAllRoles(){try{const e=await mt.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editStaff(){let e=this.$route.params.id;try{const t=await mt.get("/editStaff/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newStaff.school_id=t.school_id,this.newStaff.staff_id=t.staff_id,this.newStaff.mifare_id=t.mifare_id,this.newStaff.first_name=t.user.first_name,this.newStaff.last_name=t.user.last_name,this.newStaff.email=t.user.email,this.newStaff.phone=t.user.phone,this.newStaff.country=t.user.country,this.newStaff.city=t.user.city,this.newStaff.zip=t.user.zip,this.newStaff.address=t.user.address,this.newStaff.status=t.user.status,this.newStaff.role=t.user.user_role.role.name)},async updateStaff(){if(this.validateForm())return;let e=this.$route.params.id;try{await mt.put("/updateStaff/"+e,this.newStaff),this.$router.push({name:"list-staff"}),this.snackbarMsg("Staff Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}},formattedPrice(e){const t=parseFloat(e).toFixed(2);return t},async getSchools(){try{let e="/getAllSchools";"organization_admin"==this.user.role&&(e="/getAllSchools/"+this.user.id);const t=await mt.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("62cb");const F4=ot()(z4,[["render",M4],["__scopeId","data-v-73fb7173"]]);var U4=F4;const L4={class:"card"},$4={class:"card-body pt-4 p-3"},R4={class:"list-group"},q4={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},H4={class:"info-width d-flex flex-column"},Q4={class:"row"},Y4=Object(l["createStaticVNode"])('<div class="col-md-8 col-sm-8"><div><h6 class="mb-3 text-sm text-dark"> Muhammad Anees </h6><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Phone:</span><span class="text-dark ms-2 font-weight-bold"> +92347193809 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Email:</span><span class="text-dark ms-2 font-weight-bold"> anees@example.com </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Staff ID:</span><span class="text-dark ms-2 font-weight-bold"> satff349328 </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Site:</span><span class="text-dark ms-2 font-weight-bold"> XEPAY Site </span></span><span class="user-info d-flex justify-content-between  align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Country:</span><span class="text-dark ms-2 font-weight-bold"> United Kingdom (UK) </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">City:</span><span class="text-dark ms-2 font-weight-bold"> Birmingham </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Post Code/Zip Code:</span><span class="text-dark ms-2 font-weight-bold"> 3231223 </span></span><span class="user-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"><span class="text-sm fw-5">Address:</span><span class="text-dark ms-2 font-weight-bold"> 3673 Edington Drive </span></span></div></div>',1),J4={class:"col-md-4 col-sm-4"},W4=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," PERMISSIONS ",-1),X4=Object(l["createElementVNode"])("small",{class:"text-xs"},"Muhammad Anees has following permissions",-1),K4={class:"permissions mt-3"},Z4={class:"switch-container mt-2 me-5"},G4=["onChange","checked","id"],e5=["for"],t5={class:"permission-name text-uppercase"};function a5(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",L4,[Object(l["createElementVNode"])("div",$4,[Object(l["createElementVNode"])("div",R4,[Object(l["createElementVNode"])("div",q4,[Object(l["createElementVNode"])("div",H4,[Object(l["createElementVNode"])("div",Q4,[Y4,Object(l["createElementVNode"])("div",J4,[W4,X4,Object(l["createElementVNode"])("div",K4,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},[Object(l["createElementVNode"])("div",Z4,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>o.updatePermission(e.id),checked:o.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,G4),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,e5)]),Object(l["createElementVNode"])("span",t5,Object(l["toDisplayString"])(e.name),1)]))),128))])])])])])])])])}var l5={name:"billing-card",mounted(){this.getAllPermissions(),this.getUserPermissions()},data(){return{allPermissions:"",userPermissions:[]}},methods:{async getAllPermissions(){try{const e=await mt.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await mt.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.userPermissions.some(t=>t.permission_id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await mt.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("fa86");const c5=ot()(l5,[["render",a5]]);var s5=c5;const o5={class:"container-fluid"},n5={class:"row"},r5={class:"col-12"},i5={class:"card"},d5={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},m5=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PARENTS",-1),b5=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),p5=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Parents section, you can manage parent or carer accounts by adding, editing, or deleting them. Additionally, you can link each parent to "),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])("the students they are responsible for. This functionality helps keep parent information up to date. ")])],-1),u5={class:"card-body px-0 pb-2"},h5={class:"table-responsive p-0"},O5={class:"table align-items-center mb-0"},j5=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Email "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Status "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),g5={key:0},f5=Object(l["createElementVNode"])("td",{colspan:"5",class:"text-center"}," No data available. ",-1),E5=[f5],V5={class:"text-xs  text-center font-weight-bold mb-0"},N5={class:"d-flex"},y5={class:"text-xs font-weight-bold mb-0"},x5=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 cursor-pointer"},"arrow_forward",-1),v5={class:"text-xs font-weight-bold mb-0"},k5={class:"align-middle text-center text-sm"},w5={class:"badge badge-sm bg-gradient-success"},S5={class:"align-middle text-center"},A5=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),C5=["onClick"],B5={class:"row"},_5={class:"col-md-12 col-lg-12"},P5={class:"pagination-container"},I5={class:"entries-dropdown"},D5=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),T5=["value"],M5={class:"pagination-wrapper"},z5={class:"pagination"},F5=["onClick"];function U5(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",o5,[Object(l["createElementVNode"])("div",n5,[Object(l["createElementVNode"])("div",r5,[Object(l["createElementVNode"])("div",i5,[Object(l["createElementVNode"])("div",d5,[m5,o.userPermissions.create?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-parent"}},{default:Object(l["withCtx"])(()=>[b5]),_:1})):Object(l["createCommentVNode"])("",!0)]),p5,Object(l["createElementVNode"])("div",u5,[Object(l["createElementVNode"])("div",h5,[Object(l["createElementVNode"])("table",O5,[j5,Object(l["createElementVNode"])("tbody",null,[0===s.allParent.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",g5,E5)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allParent,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",V5,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createVNode"])(n,{to:{name:"add-childrens",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",N5,[Object(l["createElementVNode"])("p",y5,Object(l["toDisplayString"])(e.first_name)+" "+Object(l["toDisplayString"])(e.last_name),1),x5])]),_:2},1032,["to"])]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",v5,Object(l["toDisplayString"])(e.email),1)]),Object(l["createElementVNode"])("td",k5,[Object(l["createElementVNode"])("span",w5,Object(l["toDisplayString"])(e.status),1)]),Object(l["createElementVNode"])("td",S5,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-parent",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[A5]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,C5)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])]),Object(l["createElementVNode"])("div",B5,[Object(l["createElementVNode"])("div",_5,[Object(l["createElementVNode"])("div",P5,[Object(l["createElementVNode"])("div",I5,[D5,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.itemsPerPage=e),onChange:t[1]||(t[1]=t=>e.getAllStudents(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,T5))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",M5,[Object(l["createElementVNode"])("ul",z5,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[2]||(t[2]=t=>e.getAllStudents(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[3]||(t[3]=t=>e.getAllStudents(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,t=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:t,class:Object(l["normalizeClass"])({active:s.currentPage===t})},[Object(l["createElementVNode"])("a",{onClick:a=>e.getAllStudents(t),href:"#"},Object(l["toDisplayString"])(t),9,F5)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[4]||(t[4]=t=>e.getAllStudents(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[5]||(t[5]=t=>e.getAllStudents(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var L5={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllParents(),this.$globalHelper.buttonColor()},updated(){this.$globalHelper.buttonColor()},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,allParent:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteParent(e)})},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllParents(e){let t={page:e,entries_per_page:this.itemsPerPage};try{let e="/getAllParents";"organization_admin"==this.user.role&&(e="/getAllParents/"+this.user.id);const a=await mt.post(e,t);this.allParent=a.data.data.data,this.totalRows=a.data.pagination.total,this.currentPage=a.data.pagination.current_page,this.perPage=a.data.pagination.per_page,this.totalPages=a.data.pagination.last_page}catch(a){console.log(a)}},async deleteParent(e){try{await mt.delete("/deleteParent/"+e),this.removeParentFromList(e),this.snackbarMsg("Parent Deleted")}catch(t){console.log(t)}},removeParentFromList(e){const t=this.allParent.findIndex(t=>t.id===e);this.allParent.splice(t,1)}}};a("a4cd");const $5=ot()(L5,[["render",U5]]);var R5=$5;Object(l["pushScopeId"])("data-v-8f0e2a1c");const q5={class:"container-fluid py-4"},H5={class:"row"},Q5={class:"col-12"},Y5={class:"card my-4"},J5={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},W5=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Parent",-1),X5=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),K5={class:"card-body px-0 pb-2"},Z5={class:"table-responsive p-0"},G5={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},e3={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},t3={class:"form-bg container p-4"},a3=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),l3={class:"card card-plain"},c3={class:"card-body"},s3={role:"form"},o3={class:"mb-1"},n3=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),r3={class:"mb-1"},i3=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),d3={class:"mb-1"},m3=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),b3={class:"mb-1"},p3=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},[Object(l["createTextVNode"])("Site "),Object(l["createElementVNode"])("span",{class:"required"},"*")],-1),u3=Object(l["createElementVNode"])("br",null,null,-1),h3=["value"],O3={key:0,class:"text-danger error-txt"},j3={class:"mb-1"},g3=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),f3=Object(l["createElementVNode"])("br",null,null,-1),E3=["value"],V3={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},N3={class:"form-bg container p-4"},y3=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password Information",-1),x3={class:"card card-plain"},v3={class:"card-body"},k3={role:"form"},w3={class:"mb-1"},S3=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),A3={class:"mb-1"},C3=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Confirm Password",-1),B3={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},_3={class:""};function P3(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",q5,[Object(l["createElementVNode"])("div",H5,[Object(l["createElementVNode"])("div",Q5,[Object(l["createElementVNode"])("div",Y5,[Object(l["createElementVNode"])("div",J5,[W5,Object(l["createVNode"])(n,{to:{name:"list-parent"}},{default:Object(l["withCtx"])(()=>[X5]),_:1})]),Object(l["createElementVNode"])("div",K5,[Object(l["createElementVNode"])("div",Z5,[Object(l["createElementVNode"])("div",G5,[Object(l["createElementVNode"])("div",e3,[Object(l["createElementVNode"])("div",t3,[a3,Object(l["createElementVNode"])("div",l3,[Object(l["createElementVNode"])("div",c3,[Object(l["createElementVNode"])("form",s3,[Object(l["createElementVNode"])("div",o3,[n3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newParent.first_name]])]),Object(l["createElementVNode"])("div",r3,[i3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newParent.last_name]])]),Object(l["createElementVNode"])("div",d3,[m3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newParent.email]])]),Object(l["createElementVNode"])("div",b3,[p3,u3,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{class:"select-box","onUpdate:modelValue":t[3]||(t[3]=e=>s.newParent.school_id=e),id:"school",type:"select",placeholder:"school",name:"school"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allSchools,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e.id},Object(l["toDisplayString"])(e.title),9,h3))),128))],512),[[l["vModelSelect"],s.newParent.school_id]]),""!==s.formValidation&&""!==s.formValidation["school_id"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",O3,"Site ID is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",j3,[g3,f3,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,E3))),128))],512),[[l["vModelSelect"],s.newParent.status]])])])])])])]),Object(l["createElementVNode"])("div",V3,[Object(l["createElementVNode"])("div",N3,[y3,Object(l["createElementVNode"])("div",x3,[Object(l["createElementVNode"])("div",v3,[Object(l["createElementVNode"])("form",k3,[Object(l["createElementVNode"])("div",w3,[S3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>s.newParent.password=e),type:"password",placeholder:"Password",name:"password"},null,512),[[l["vModelText"],s.newParent.password]])]),Object(l["createElementVNode"])("div",A3,[C3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[6]||(t[6]=e=>s.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"password_confirmation"},null,512),[[l["vModelText"],s.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",B3,[Object(l["createElementVNode"])("div",_3,[Object(l["createElementVNode"])("button",{onClick:t[7]||(t[7]=(...e)=>o.saveNewParent&&o.saveNewParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Parent ")])])])])])])])])])}Object(l["popScopeId"])();var I3={name:"",components:{},mounted(){this.getUser(),this.getSchools(),this.$globalHelper.buttonColor()},updated(){this.userPermissions.create||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allSchools:"",newParent:{student_id:"",first_name:"",last_name:"",email:"",school_id:"",password:"",password_confirmation:"",status:""},availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Jo()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"phone"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewParent(){try{let e=await mt.post("/createParent",this.newParent);this.isError=!1,e=e.data,this.createCustomer(e.user.id),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}},async createCustomer(e){let t=this.newStudent.first_name+" "+this.newStudent.last_name,a={user_id:e,name:t,email:this.newStudent.email};try{await mt.post("/createCustomer",a)}catch(l){console.log(l)}},async getStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await mt.post("/getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async getSchools(){try{let e="/getAllSchools";e="organization_admin"==this.user.role?"/getAllSchools/"+this.user.id:"/getAllSchools";const t=await mt.get(e);this.allSchools=t.data}catch(e){console.log(e)}}}};a("66b5");const D3=ot()(I3,[["render",P3],["__scopeId","data-v-8f0e2a1c"]]);var T3=D3;Object(l["pushScopeId"])("data-v-2ea812ce");const M3={class:"container-fluid py-4"},z3={class:"row"},F3={class:"col-12"},U3={class:"card my-4"},L3=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between border-radius-lg pt-4"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Parent")],-1),$3={class:"card-body px-0 pb-2"},R3={class:"table-responsive p-0"},q3={class:"row d-flex justify-content-center bg-white form-data border-radius-lg"},H3={class:"mt-3 bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Q3={class:"form-bg container p-4"},Y3=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Personal Information",-1),J3={class:"card card-plain"},W3={class:"card-body"},X3={role:"form"},K3={class:"mb-1"},Z3=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"First Name",-1),G3={key:0,class:"text-danger error-txt"},e8={class:"mb-1"},t8=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Last Name",-1),a8={key:0,class:"text-danger error-txt"},l8={class:"mb-1"},c8=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Email",-1),s8={key:0,class:"text-danger error-txt"},o8={class:"mb-1"},n8=Object(l["createElementVNode"])("label",{class:"input-label",for:"status"},"Status",-1),r8=Object(l["createElementVNode"])("br",null,null,-1),i8=["value"],d8={key:0,class:"text-danger error-txt"},m8={class:"mt-3 bg-white box-shadow-dark border-radius-lg  col-xl-10 col-lg-10 col-md-10"},b8={class:"form-bg container p-4"},p8=Object(l["createElementVNode"])("p",{class:"text-dark ms-4 font-weight-bold"},"Password",-1),u8=Object(l["createElementVNode"])("small",{class:"ms-4 text-xs"},"password fields are optional if you wan't to change the password you can fill the following data",-1),h8={class:"card card-plain"},O8={class:"card-body"},j8={role:"form"},g8={class:"mb-1"},f8=Object(l["createElementVNode"])("label",{class:"input-label",for:"phone"},"Password",-1),E8={class:"mb-1"},V8=Object(l["createElementVNode"])("label",{class:"input-label",for:"address"},"Confirm Password",-1),N8={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},y8={class:""};function x8(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",M3,[Object(l["createElementVNode"])("div",z3,[Object(l["createElementVNode"])("div",F3,[Object(l["createElementVNode"])("div",U3,[L3,Object(l["createElementVNode"])("div",$3,[Object(l["createElementVNode"])("div",R3,[Object(l["createElementVNode"])("div",q3,[Object(l["createElementVNode"])("div",H3,[Object(l["createElementVNode"])("div",Q3,[Y3,Object(l["createElementVNode"])("div",J3,[Object(l["createElementVNode"])("div",W3,[Object(l["createElementVNode"])("form",X3,[Object(l["createElementVNode"])("div",K3,[Z3,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newParent.first_name=e),type:"text",placeholder:"First Name",name:"first_name"},null,512),[[l["vModelText"],s.newParent.first_name]]),""!==s.formValidation&&""!==s.formValidation["first_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",G3,"First Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",e8,[t8,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[1]||(t[1]=e=>s.newParent.last_name=e),type:"text",placeholder:"Last Name",name:"last_name"},null,512),[[l["vModelText"],s.newParent.last_name]]),""!==s.formValidation&&""!==s.formValidation["last_name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",a8,"Last Name is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",l8,[c8,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[2]||(t[2]=e=>s.newParent.email=e),type:"email",placeholder:"email",name:"email"},null,512),[[l["vModelText"],s.newParent.email]]),""!==s.formValidation&&""!==s.formValidation["email"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",s8,"Email is required")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",o8,[n8,r8,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.newParent.status=e),class:"select-box",id:"status",type:"select",placeholder:"status",name:"status"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.availableStatus,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,i8))),128))],512),[[l["vModelSelect"],s.newParent.status]]),""!==s.formValidation&&""!==s.formValidation["status"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",d8,"Status is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",m8,[Object(l["createElementVNode"])("div",b8,[p8,u8,Object(l["createElementVNode"])("div",h8,[Object(l["createElementVNode"])("div",O8,[Object(l["createElementVNode"])("form",j8,[Object(l["createElementVNode"])("div",g8,[f8,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[4]||(t[4]=e=>s.newParent.password=e),type:"password",placeholder:"Password",name:"zip"},null,512),[[l["vModelText"],s.newParent.password]])]),Object(l["createElementVNode"])("div",E8,[V8,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[5]||(t[5]=e=>s.newParent.password_confirmation=e),type:"password",placeholder:"Confirm Password",name:"address"},null,512),[[l["vModelText"],s.newParent.password_confirmation]])])])])])])]),Object(l["createElementVNode"])("div",N8,[Object(l["createElementVNode"])("div",y8,[Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=(...e)=>o.updateParent&&o.updateParent(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-3 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Student ")])])])])])])])])])}Object(l["popScopeId"])();var v8={name:"",components:{},mounted(){this.getUser(),this.editParent(),this.getStudents(),this.$globalHelper.buttonColor()},updated(){this.userPermissions.edit||this.$router.go(-1)},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newParent:{first_name:"",last_name:"",email:"",password:"",password_confirmation:"",status:""},validationErrors:"",formValidation:"",availableStatus:["active","pending","blocked"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Jo()(this.newParent);for(let a in this.newParent)""!==this.newParent[a]&&void 0!==this.newParent[a]||"password"===a||"password_confirmation"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editParent(){let e=this.$route.params.id;try{const t=await mt.get("/editParent/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newParent.student_id=t.student_id,this.newParent.first_name=t.first_name,this.newParent.last_name=t.last_name,this.newParent.email=t.email,this.newParent.status=t.status)},async updateParent(){let e=this.$route.params.id;try{await mt.put("/updateParent/"+e,this.newParent),this.$router.push({name:"list-parent"}),this.snackbarMsg("Parent Updated Successfuly")}catch(t){console.log(t)}},async getStudents(){try{let e="/getAllStudents";"organization_admin"==this.user.role&&(e="/getAllStudents/"+this.user.id);const t=await mt.get(e);this.allStudents=t.data}catch(e){console.log(e)}}}};a("52e2");const k8=ot()(v8,[["render",x8],["__scopeId","data-v-2ea812ce"]]);var w8=k8;const S8={class:"card"},A8={class:"card-body pt-4 p-3"},C8={class:"list-group"},B8={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},_8={class:"info-width d-flex flex-column"},P8={class:"row"},I8={class:"col-md-8 col-sm-8"},D8={class:"row"},T8={class:"col-md-9 col-sm-9"},M8={role:"form"},z8={class:"mb-1"},F8=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Student Email",-1),U8={class:"col-md-3 col-sm-3"},L8=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Childrens ",-1),$8=["onClick"],R8={class:"text-sm fw-5"},q8=Object(l["createElementVNode"])("br",null,null,-1),H8={class:"text-sm"},Q8={class:"text-dark ms-2 font-weight-bold"},Y8=["onClick"];function J8(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",S8,[Object(l["createElementVNode"])("div",A8,[Object(l["createElementVNode"])("div",C8,[Object(l["createElementVNode"])("div",B8,[Object(l["createElementVNode"])("div",_8,[Object(l["createElementVNode"])("div",P8,[Object(l["createElementVNode"])("div",I8,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",D8,[Object(l["createElementVNode"])("div",T8,[Object(l["createElementVNode"])("form",M8,[Object(l["createElementVNode"])("div",z8,[F8,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.studentEmail=e),class:"input-box",id:"name",type:"text",placeholder:"Enter Student Email",name:"student_email"},null,512),[[l["vModelText"],s.studentEmail]])])])]),Object(l["createElementVNode"])("div",U8,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.addChildren&&o.addChildren(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Student ")])]),L8,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.childrens,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:t,class:Object(l["normalizeClass"])([{"selected-role":s.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>o.toggleSelection(e.id,t)},[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("span",R8,Object(l["toDisplayString"])(e.student.first_name)+" "+Object(l["toDisplayString"])(e.student.last_name),1),q8,Object(l["createElementVNode"])("p",H8,Object(l["toDisplayString"])(e.student.email),1)]),Object(l["createElementVNode"])("span",Q8,[Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.student_id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,Y8)])],10,$8))),128))])])])])])])])])}var W8={name:"billing-card",mounted(){this.getChildrens(),this.$globalHelper.buttonColor()},updated(){},data(){return{childrens:"",permissionsOfRole:"",isSelected:"",isEdit:null,studentEmail:"",roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you will be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteChildren(e)})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},async addChildren(){let e=this.$route.params.id,t={student_email:this.studentEmail,parent_id:e};try{await mt.post("/addStudentToParent",t),this.getChildrens(),this.snackbarMsg("Children Added Successfully")}catch(a){console.log(a)}},async getChildrens(){let e=this.$route.params.id;try{const t=await mt.get("getChildrensOfParent/"+e);this.childrens=t.data}catch(t){console.log(t)}},async deleteChildren(e){try{await mt.get("deleteChildren/"+e),this.getChildrens(),this.snackbarMsg("Children Removed Successfully")}catch(t){console.log(t)}}}};a("2b98");const X8=ot()(W8,[["render",J8]]);var K8=X8;const Z8={class:"container-fluid py-4"},G8={class:"row"},e6={class:"col-12"},t6={class:"card my-4"},a6=Object(l["createElementVNode"])("div",{class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},[Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Childrens")],-1),l6={class:"card-body px-0 pb-2"},c6={class:"table-responsive p-0"},s6={class:"table align-items-center mb-0"},o6=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Student ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Name "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Email "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Site "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Stage "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Transactions "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Ballance "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-secondary text-xxs font-weight-bolder opacity-7"}," Status ")])],-1),n6={class:"align-middle text-center text-sm"},r6={class:"text-xs font-weight-bold mb-0"},i6={class:"text-xs font-weight-bold mb-0"},d6={class:"text-xs font-weight-bold mb-0"},m6={class:"align-middle text-center"},b6={class:"text-secondary text-xs font-weight-bold"},p6={class:"align-middle text-center"},u6={class:"text-secondary text-xs font-weight-bold"},h6={class:"align-middle text-center"},O6=["onClick"],j6={class:"align-middle text-center"},g6=Object(l["createElementVNode"])("i",{class:"fas fa-donate me-2"},null,-1),f6={class:"align-middle text-center text-sm"},E6={class:"badge badge-sm bg-gradient-success"};function V6(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Z8,[Object(l["createElementVNode"])("div",G8,[Object(l["createElementVNode"])("div",e6,[Object(l["createElementVNode"])("div",t6,[a6,Object(l["createElementVNode"])("div",l6,[Object(l["createElementVNode"])("div",c6,[Object(l["createElementVNode"])("table",s6,[o6,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allStudents,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",n6,[Object(l["createElementVNode"])("p",r6,Object(l["toDisplayString"])(e.student_id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",i6,Object(l["toDisplayString"])(e.user.first_name)+" "+Object(l["toDisplayString"])(e.user.last_name),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",d6,Object(l["toDisplayString"])(e.user.email),1)]),Object(l["createElementVNode"])("td",m6,[Object(l["createElementVNode"])("span",b6,Object(l["toDisplayString"])(e.school.title),1)]),Object(l["createElementVNode"])("td",p6,[Object(l["createElementVNode"])("span",u6,Object(l["toDisplayString"])(e.stage),1)]),Object(l["createElementVNode"])("td",h6,[Object(l["createElementVNode"])("i",{onClick:t=>o.transactionHistoryNav(e.user.id),class:"hover-pointer material-icons-round opacity-10 fs-5"},"swap_horizontal_circle",8,O6)]),Object(l["createElementVNode"])("td",j6,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"student-balance",params:{id:e.user.id}},title:"Wallet"},{default:Object(l["withCtx"])(()=>[g6]),_:2},1032,["to"])])]),Object(l["createElementVNode"])("td",f6,[Object(l["createElementVNode"])("span",E6,Object(l["toDisplayString"])(e.user.status),1)])]))),128))])])])])])])])])}var N6={name:"tables",mounted(){this.getUser(),this.getAllStudents()},data(){return{allStudents:"",schools:6,user:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},topUps(e){this.$router.push("/payment_account/"+e)},transactionHistoryNav(e){this.$router.push("/student-billing/"+e)},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllStudents(){try{let e={user_id:this.user.id,role:this.user.role};const t=await mt.post("getAllStudents",e);this.allStudents=t.data}catch(e){console.log(e)}},async deleteStudent(e){try{await mt.delete("/deleteStudent/"+e),this.removeStudentFromList(e),this.snackbarMsg("Student Deleted")}catch(t){console.log(t)}},removeStudentFromList(e){const t=this.allStudents.findIndex(t=>t.id===e);this.allStudents.splice(t,1)}}};a("2409");const y6=ot()(N6,[["render",V6]]);var x6=y6;const v6={class:"container-fluid py-4"},k6={class:"row"},w6={class:"col-12"},S6={class:"card my-4"},A6={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-3"},C6=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Attributes",-1),B6=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4 border-radius-lg"}," Add Attribute ",-1),_6={class:"card-body px-0 pb-2"},P6={class:"table-responsive p-0"},I6={class:"table align-items-center mb-0"},D6=Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase  text-center text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," Name "),Object(l["createElementVNode"])("th",{class:"text-center text-uppercase text-xxs font-weight-bolder"}," Action ")])],-1),T6={class:"text-xs  text-center font-weight-bold mb-0"},M6={class:"text-xs font-weight-bold mb-0"},z6={class:"align-middle text-center"},F6=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),U6=["onClick"];function L6(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",v6,[Object(l["createElementVNode"])("div",k6,[Object(l["createElementVNode"])("div",w6,[Object(l["createElementVNode"])("div",S6,[Object(l["createElementVNode"])("div",A6,[C6,o.userPermissions.create_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"add-attribute"}},{default:Object(l["withCtx"])(()=>[B6]),_:1})):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_6,[Object(l["createElementVNode"])("div",P6,[Object(l["createElementVNode"])("table",I6,[D6,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allAttributes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",T6,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("p",M6,Object(l["toDisplayString"])(e.name),1)]),Object(l["createElementVNode"])("td",z6,[Object(l["createElementVNode"])("span",null,[o.userPermissions.edit_attribute?(Object(l["openBlock"])(),Object(l["createBlock"])(n,{key:0,to:{name:"edit-attribute",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[F6]),_:2},1032,["to"])):Object(l["createCommentVNode"])("",!0),o.userPermissions.delete_attribute?(Object(l["openBlock"])(),Object(l["createElementBlock"])("i",{key:1,onClick:t=>o.deleteAttribute(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,U6)):Object(l["createCommentVNode"])("",!0)])])]))),128))])])])])])])])])}var $6={name:"tables",mounted(){this.setColor(),this.getUser(),this.getAllAttributes()},updated(){this.$permissions.redirectIfNotAllowed("view_attribute")},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value}},data(){return{allAttributes:"",schools:6,user:""}},methods:{setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getAllAttributes(){try{const e=await mt.get("/getAllAttributes");this.allAttributes=e.data}catch(e){console.log(e)}},async deleteAttribute(e){try{await mt.delete("/deleteAttribute/"+e),this.removeAttributeFromList(e),this.snackbarMsg("Attribute Deleted Successfully")}catch(t){console.log(t)}},removeAttributeFromList(e){const t=this.allAttributes.findIndex(t=>t.id===e);this.allAttributes.splice(t,1)}}};a("e33f");const R6=ot()($6,[["render",L6]]);var q6=R6;Object(l["pushScopeId"])("data-v-bfa38f8e");const H6={class:"container-fluid py-4"},Q6={class:"row"},Y6={class:"col-12"},J6={class:"card my-4"},W6={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},X6=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Attribute",-1),K6=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),Z6={class:"card-body px-0 pb-2"},G6={class:"table-responsive p-0"},e7={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},t7={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},a7={class:"form-bg container p-4"},l7={class:"card card-plain"},c7={class:"card-body"},s7={role:"form"},o7={class:"mb-1"},n7=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),r7={key:0,class:"text-danger error-txt"},i7={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},d7={class:""};function m7(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",H6,[Object(l["createElementVNode"])("div",Q6,[Object(l["createElementVNode"])("div",Y6,[Object(l["createElementVNode"])("div",J6,[Object(l["createElementVNode"])("div",W6,[X6,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[K6]),_:1})]),Object(l["createElementVNode"])("div",Z6,[Object(l["createElementVNode"])("div",G6,[Object(l["createElementVNode"])("div",e7,[Object(l["createElementVNode"])("div",t7,[Object(l["createElementVNode"])("div",a7,[Object(l["createElementVNode"])("div",l7,[Object(l["createElementVNode"])("div",c7,[Object(l["createElementVNode"])("form",s7,[Object(l["createElementVNode"])("div",o7,[n7,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newAttribute.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",r7,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",i7,[Object(l["createElementVNode"])("div",d7,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.saveNewAttribute&&o.saveNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var b7={name:"",components:{},mounted(){this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("create_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("create_attribute");let e=!1,t="";t=Jo()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewAttribute(){if(!this.validateForm()){this.newAttribute.user_role=this.user.role;try{await mt.post("/createAttribute",this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}},async getAllOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("94d7");const p7=ot()(b7,[["render",m7],["__scopeId","data-v-bfa38f8e"]]);var u7=p7;Object(l["pushScopeId"])("data-v-5310274d");const h7={class:"container-fluid py-4"},O7={class:"row"},j7={class:"col-12"},g7={class:"card my-4"},f7={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},E7=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Attribute",-1),V7=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),N7={class:"card-body px-0 pb-2"},y7={class:"table-responsive p-0"},x7={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},v7={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},k7={class:"form-bg container p-4"},w7={class:"card card-plain"},S7={class:"card-body"},A7={role:"form"},C7={class:"mb-1"},B7=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),_7={key:0,class:"text-danger error-txt"},P7={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},I7={class:""};function D7(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",h7,[Object(l["createElementVNode"])("div",O7,[Object(l["createElementVNode"])("div",j7,[Object(l["createElementVNode"])("div",g7,[Object(l["createElementVNode"])("div",f7,[E7,Object(l["createVNode"])(n,{to:{name:"list-attributes"}},{default:Object(l["withCtx"])(()=>[V7]),_:1})]),Object(l["createElementVNode"])("div",N7,[Object(l["createElementVNode"])("div",y7,[Object(l["createElementVNode"])("div",x7,[Object(l["createElementVNode"])("div",v7,[Object(l["createElementVNode"])("div",k7,[Object(l["createElementVNode"])("div",w7,[Object(l["createElementVNode"])("div",S7,[Object(l["createElementVNode"])("form",A7,[Object(l["createElementVNode"])("div",C7,[B7,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newAttribute.name=e),type:"text",placeholder:"Name",name:"name"},null,512),[[l["vModelText"],s.newAttribute.name]]),""!==s.formValidation&&""!==s.formValidation["name"]?(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",_7,"Name is required")):Object(l["createCommentVNode"])("",!0)])])])])])]),Object(l["createElementVNode"])("div",P7,[Object(l["createElementVNode"])("div",I7,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.updateNewAttribute&&o.updateNewAttribute(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Attribute ")])])])])])])])])])}Object(l["popScopeId"])();var T7={name:"",components:{},mounted(){this.editAttribute(),this.getUser(),this.getAllOrganizations()},updated(){this.$permissions.redirectIfNotAllowed("edit_attribute")},data(){return{availableCountries:["UK","USA","Canada"],user:"",isError:!1,formValidation:"",validationErrors:"",allOrganizations:"",newAttribute:{name:"",user_role:""},availableStatus:["active","pending","blocked"]}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){this.$permissions.redirectIfNotAllowed("edit_attribute");let e=!1,t="";t=Jo()(this.newAttribute);for(let a in this.newAttribute)""!==this.newAttribute[a]&&void 0!==this.newAttribute[a]||"user_role"===a?t[a]="":(t[a]="is required",e=!0);return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async updateNewAttribute(){if(this.validateForm())return;this.newAttribute.user_role=this.user.role;let e=this.$route.params.id;try{await mt.put("/updateAttribute/"+e,this.newAttribute),this.isError=!1,this.$router.push({name:"list-attributes"}),this.snackbarMsg("Attribute Saved Successfuly")}catch(t){this.isError=!0,this.validationErrors=t.response.data.errors}},async editAttribute(){let e=this.$route.params.id;try{const t=await mt.get("/editAttribute/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newAttribute.organization_id=t.organization_id,this.newAttribute.name=t.name)},async getAllOrganizations(){try{const e=await mt.get("/getAllOrganizations");this.allOrganizations=e.data}catch(e){console.log(e)}}}};a("8a36");const M7=ot()(T7,[["render",D7],["__scopeId","data-v-5310274d"]]);var z7=M7;const F7={class:"card"},U7={class:"card-body pt-4 p-3"},L7={class:"list-group"},$7={style:{"background-color":"#F0F2F5 !important"},class:"list-group-item border-0 d-flex p-4 mb-2 bg-gray-100 border-radius-lg"},R7={class:"info-width d-flex flex-column"},q7={class:"row"},H7={class:"col-md-8 col-sm-8"},Q7={class:"row"},Y7={class:"col-md-10 col-sm-10"},J7=Object(l["createElementVNode"])("span",null,[Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"MANAGE ROLES & PERMISSIONS"),Object(l["createElementVNode"])("small",{class:"ms-3 page-description"}," In the Roles and Permissions section, you can manage user roles and can assign specific permissions to each role. This functionality ensures that users have the appropriate access levels based on their role, improving security and operational efficiency. ")],-1),W7={role:"form"},X7={class:"mb-1"},K7=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Role Name",-1),Z7={class:"col-md-2 col-sm-2"},G7=Object(l["createElementVNode"])("h6",{class:"mb-3 text-sm text-dark"}," Roles List ",-1),e9=["onClick"],t9={class:"text-sm fw-5"},a9={key:0,class:"text-dark ms-2 font-weight-bold"},l9=["onClick"],c9=["onClick"],s9={class:"col-md-4 col-sm-4"},o9=Object(l["createElementVNode"])("h6",{class:"mt-3 text-sm text-dark"}," ROLE PERMISSIONS ",-1),n9=Object(l["createElementVNode"])("small",{class:"text-xs"},"This Role has following permissions",-1),r9={class:"permissions-container mt-3"},i9={key:0,class:"permission-info d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"},d9={class:"switch-container mt-2 me-5"},m9=["onChange","checked","id"],b9=["for"],p9={class:"permissions text-uppercase"};function u9(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",F7,[Object(l["createElementVNode"])("div",U7,[Object(l["createElementVNode"])("div",L7,[Object(l["createElementVNode"])("div",$7,[Object(l["createElementVNode"])("div",R7,[Object(l["createElementVNode"])("div",q7,[Object(l["createElementVNode"])("div",H7,[Object(l["createElementVNode"])("div",null,[Object(l["createElementVNode"])("div",Q7,[Object(l["createElementVNode"])("div",Y7,[J7,Object(l["createElementVNode"])("form",W7,[Object(l["createElementVNode"])("div",X7,[K7,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.roleName=e),class:"input-box",id:"name",type:"text",placeholder:"Role Name",name:"name"},null,512),[[l["vModelText"],s.roleName]])])])]),Object(l["createElementVNode"])("div",Z7,[null!=s.isEdit&&""!=s.roleName?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:0,onClick:t[1]||(t[1]=(...e)=>o.updateRole&&o.updateRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Update ")):Object(l["createCommentVNode"])("",!0),""==s.roleName||null==s.isEdit?(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[2]||(t[2]=(...e)=>o.createRole&&o.createRole(...e)),style:{"font-size":"10px","margin-top":"32px","background-color":"#573078"},class:"btn ms-1 text-white fw-5 border-0 py-2 px-2 border-radius-lg"}," Save Role ")):Object(l["createCommentVNode"])("",!0)])]),G7,(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allRoles,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},["Staff"!==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",{key:0,class:Object(l["normalizeClass"])([{"selected-role":s.isSelected===e.id},"mb-1 roles-list d-flex justify-content-between align-items-center text-dark font-weight-bold text-xs"]),onClick:t=>(o.toggleSelection(e.id,t),o.getPermissionsOfRole(e.id))},[Object(l["createElementVNode"])("span",t9,Object(l["toDisplayString"])(e.name),1),"super_admin"==e.name?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",a9,[Object(l["createElementVNode"])("i",{onClick:t=>o.editRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",8,l9),Object(l["createElementVNode"])("i",{onClick:t=>o.deleteRole(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,c9)])):Object(l["createCommentVNode"])("",!0)],10,e9)):Object(l["createCommentVNode"])("",!0)],64))),128))])]),Object(l["createElementVNode"])("div",s9,[o9,n9,Object(l["createElementVNode"])("div",r9,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allPermissions,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],{key:t},[o.checkIfAdmin(e)?(Object(l["openBlock"])(),Object(l["createElementBlock"])("span",i9,[Object(l["createElementVNode"])("div",d9,[Object(l["createElementVNode"])("input",{type:"checkbox",onChange:t=>o.givePermission(e.name),checked:o.checkIfPermission(e.id),id:e.id,class:"switch-input"},null,40,m9),Object(l["createElementVNode"])("label",{for:e.id,class:"switch-label"},null,8,b9)]),Object(l["createElementVNode"])("span",p9,Object(l["toDisplayString"])(e.name),1)])):Object(l["createCommentVNode"])("",!0)],64))),128))])])])])])])])])}var h9={name:"billing-card",mounted(){this.getAllRoles(),this.getAllPermissions(),this.getUserPermissions(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("roles")},data(){return{permissionsOfRole:"",isSelected:"",isEdit:null,roleName:"",allRoles:[],allPermissions:"",userPermissions:[]}},watch:{allRoles(e,t){console.log(e,t),this.isSelected=e[0]?e[0].id:"",this.getPermissionsOfRole()}},computed:{checkPermissionsOfRole(){return this.permissionsOfRole}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},toggleSelection(e,t){"i"!==t.target.tagName.toLowerCase()&&(this.isSelected=e)},checkIfAdmin(e){let t=!1,a=["create_admin","view_admin","edit_admin","delete_admin","roles"],l=[];return this.allRoles.filter(c=>{c.id==this.isSelected&&(t="Admin"==c.name||("Associate Admin"==c.name?!a.includes(e.name):!a.includes(e.name)&&!l.includes(e.name)))}),t},async getAllRoles(){try{const e=await mt.get("getAllRoles");this.allRoles=e.data}catch(e){console.log(e)}},async createRole(){let e={name:this.roleName};try{await mt.post("createRole",e),this.snackbarMsg("Role Created"),this.getAllRoles()}catch(t){console.log(t)}},async editRole(e){this.allRoles.filter(t=>{t.id==e&&(this.roleName=t.name,this.isEdit=e)})},async updateRole(){let e={name:this.roleName};try{await mt.put("updateRole/"+this.isEdit,e),this.snackbarMsg("Role Updated"),this.getAllRoles(),this.isEdit=null,this.roleName=""}catch(t){console.log(t)}},async deleteRole(e){try{await mt.delete("deleteRole/"+e),this.getAllRoles(),this.snackbarMsg("Role Deleted")}catch(t){console.log(t)}},async getAllPermissions(){try{const e=await mt.get("getAllPermissions");this.allPermissions=e.data}catch(e){console.log(e)}},async getPermissionsOfRole(e=null){null==e&&(e=this.isSelected);try{const t=await mt.get("getPermissionsOfaRole/"+e);this.permissionsOfRole=t.data;let a=Jo()(this.allPermissions);this.allPermissions=null,this.allPermissions=a}catch(t){console.log(t)}},async givePermission(e){let t={permission:e};try{await mt.post("givePermission/"+this.isSelected,t)}catch(a){console.log(a)}},async getUserPermissions(){let e=this.$route.params.id;try{const t=await mt.get("getUserPermissions/"+e);this.userPermissions=t.data}catch(t){console.log(t)}},checkIfPermission(e){return this.checkPermissionsOfRole.some(t=>t.id===e)},async updatePermission(e){let t={user_id:this.$route.params.id,permission_id:e};try{await mt.post("updateUserPermissions",t)}catch(a){console.log(a)}}}};a("4e40");const O9=ot()(h9,[["render",u9]]);var j9=O9;const g9={class:"main-content position-relative max-height-vh-100 h-100 overflow-x-hidden"};function f9(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-view");return Object(l["openBlock"])(),Object(l["createElementBlock"])("main",g9,[Object(l["createVNode"])(n)])}var E9={name:"DefaultLayout",components:{},methods:{...Object(lt["d"])(["toggleConfigurator","navbarMinimize"])},computed:{...Object(lt["e"])(["isRTL","color","isAbsolute","isNavFixed","navbarFixed","absolute","showSidenav","showNavbar","showFooter","showConfig","hideConfigButton"])},beforeMount(){this.$store.state.isTransparent="bg-transparent";const e=document.getElementsByClassName("g-sidenav-show")[0];window.innerWidth>1200&&e.classList.add("g-sidenav-pinned")}};a("566d");const V9=ot()(E9,[["render",f9]]);var N9=V9;const y9={class:"container-fluid"},x9={class:"row"},v9={class:"col-12"},k9={class:"card"},w9={class:"d-flex justify-content-between  border-radius-lg pt-4"},S9=Object(l["createElementVNode"])("h6",{class:"ms-3 text-dark text-capitalize"},"PRODUCT TYPES",-1),A9=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-4 justify-content-between text-white fw-1 border-0 py-2 px-3 border-radius-lg"},[Object(l["createElementVNode"])("i",{class:"fas fa-plus plus-icon"}),Object(l["createTextVNode"])(" New ")],-1),C9=Object(l["createElementVNode"])("span",{class:"ps-0"},[Object(l["createElementVNode"])("small",{class:"ms-3 me-4 page-description"},[Object(l["createTextVNode"])(" In the Product Types section, you can manage product type information by adding, editing, or deleting types. Additionally, you can view and update the list of types available"),Object(l["createElementVNode"])("br"),Object(l["createTextVNode"])(" for product creation. This functionality facilitates organizing and categorizing products by type, streamlining product management. ")])],-1),B9={class:"filter-container ms-2"},_9={class:"row",style:{width:"100%"}},P9={class:"col-4"},I9={style:{display:"flex"}},D9=["value"],T9={class:"col-12 col-md-6 col-sm-6",style:{"padding-top":"15px"}},M9=Object(l["createElementVNode"])("i",{class:"fas fa-download download-icon me-1"},null,-1),z9=Object(l["createTextVNode"])(" Export To XLS "),F9=[M9,z9],U9={class:"card-body px-0 pb-2"},L9={class:"table-responsive p-0 student-table"},$9={ref:"table",class:"table align-items-center mb-0"},R9=Object(l["createElementVNode"])("thead",{class:"thead"},[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," ID "),Object(l["createElementVNode"])("th",{class:"text-uppercase text-xxs font-weight-bolder"}," NAME "),Object(l["createElementVNode"])("th",{class:"text-uppercase  text-xxs font-weight-bolder"}," Action ")])],-1),q9={key:0},H9=Object(l["createElementVNode"])("td",{colspan:"6",class:"text-center"}," No data available. ",-1),Q9=[H9],Y9={style:{width:"12%"}},J9={class:"text-xs  text-center font-weight-bold mb-0"},W9={class:"d-flex"},X9={class:"text-xs font-weight-bold mb-0"},K9={style:{width:"10%"},class:"align-middle text-center"},Z9=Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"edit",-1),G9=["onClick"],eee={class:"row"},tee={class:"col-md-12 col-lg-12"},aee={class:"pagination-container"},lee={class:"entries-dropdown"},cee=Object(l["createElementVNode"])("label",{for:"entries"},"Entries",-1),see=["value"],oee={class:"pagination-wrapper"},nee={class:"pagination"},ree=["onClick"];function iee(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",y9,[Object(l["createElementVNode"])("div",x9,[Object(l["createElementVNode"])("div",v9,[Object(l["createElementVNode"])("div",k9,[Object(l["createElementVNode"])("div",w9,[S9,Object(l["createVNode"])(n,{to:{name:"add-product-types"}},{default:Object(l["withCtx"])(()=>[A9]),_:1})]),C9,Object(l["createElementVNode"])("div",B9,[Object(l["createElementVNode"])("div",_9,[Object(l["createElementVNode"])("div",P9,[Object(l["createElementVNode"])("span",I9,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box filter-box",onKeyup:t[0]||(t[0]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),"onUpdate:modelValue":t[1]||(t[1]=e=>s.seachString=e),id:"name",type:"text",placeholder:"Type to Search...",name:"address"},null,544),[[l["vModelText"],s.seachString]]),Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{onChange:t[2]||(t[2]=(...t)=>e.debouncedSearch&&e.debouncedSearch(...t)),class:"select-box filter-type-btn","onUpdate:modelValue":t[3]||(t[3]=e=>s.filterBy=e),id:"filter",type:"select",placeholder:"Filter",name:"filter",style:{width:"98px !important"}},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allFields,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:t,value:e},Object(l["toDisplayString"])(e),9,D9))),128))],544),[[l["vModelSelect"],s.filterBy]])])]),Object(l["createElementVNode"])("div",T9,[Object(l["createElementVNode"])("span",{class:"label-text bulk_topup",onClick:t[4]||(t[4]=e=>o.exportTableToXLS())},F9)])])]),Object(l["createElementVNode"])("div",U9,[Object(l["createElementVNode"])("div",L9,[Object(l["createElementVNode"])("table",$9,[R9,Object(l["createElementVNode"])("tbody",null,[0===s.allTypes.length?(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",q9,Q9)):Object(l["createCommentVNode"])("",!0),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.allTypes,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:t},[Object(l["createElementVNode"])("td",Y9,[Object(l["createElementVNode"])("p",J9,Object(l["toDisplayString"])(e.id),1)]),Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("div",W9,[Object(l["createElementVNode"])("p",X9,Object(l["toDisplayString"])(e.name),1)])]),Object(l["createElementVNode"])("td",K9,[Object(l["createElementVNode"])("span",null,[Object(l["createVNode"])(n,{to:{name:"edit-product-types",params:{id:e.id}}},{default:Object(l["withCtx"])(()=>[Z9]),_:2},1032,["to"]),Object(l["createElementVNode"])("i",{onClick:t=>o.confirmDelete(e.id),class:"material-icons-round opacity-10 fs-5 cursor-pointer"},"delete",8,G9)])])]))),128))])],512)]),Object(l["createElementVNode"])("div",eee,[Object(l["createElementVNode"])("div",tee,[Object(l["createElementVNode"])("div",aee,[Object(l["createElementVNode"])("div",lee,[cee,Object(l["withDirectives"])(Object(l["createElementVNode"])("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>s.itemsPerPage=e),onChange:t[6]||(t[6]=e=>o.getProductTypes(s.currentPage)),id:"entries"},[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.perPageOptions,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("option",{key:e,value:e},Object(l["toDisplayString"])(e),9,see))),128))],544),[[l["vModelSelect"],s.itemsPerPage]])]),Object(l["createElementVNode"])("nav",oee,[Object(l["createElementVNode"])("ul",nee,[Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[7]||(t[7]=e=>o.getProductTypes(1)),href:"#"},"«")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:1===s.currentPage})},[Object(l["createElementVNode"])("a",{onClick:t[8]||(t[8]=e=>o.getProductTypes(s.currentPage-1)),href:"#"},"‹")],2),(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(o.limitedPages,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("li",{key:e,class:Object(l["normalizeClass"])({active:s.currentPage===e})},[Object(l["createElementVNode"])("a",{onClick:t=>o.getProductTypes(e),href:"#"},Object(l["toDisplayString"])(e),9,ree)],2))),128)),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[9]||(t[9]=e=>o.getProductTypes(s.currentPage+1)),href:"#"},"›")],2),Object(l["createElementVNode"])("li",{class:Object(l["normalizeClass"])({disabled:s.currentPage===s.totalPages})},[Object(l["createElementVNode"])("a",{onClick:t[10]||(t[10]=e=>o.getProductTypes(s.totalPages)),href:"#"},"»")],2)])])])])])])])])])])}var dee={name:"tables",mounted(){this.setColor(),this.getUser(),this.getProductTypes(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("view_course"),this.$globalHelper.buttonColor()},created(){this.debouncedSearch=Object(ks["debounce"])(this.filterProductTypes,500)},data(){return{perPageOptions:[10,20,40,60,100,200,300,400],itemsPerPage:20,seachString:"",filterBy:"Name",allFields:["Name"],allTypes:"",schools:6,user:"",totalRows:"",currentPage:"",perPage:"",totalPages:""}},computed:{...Object(lt["c"])(["getBrandingSetting"]),userPermissions(){return this.$permissions.userPermissions.value},limitedPages(){let e=[];if(this.totalPages<=5)for(let t=1;t<=this.totalPages;t++)e.push(t);else{let t,a;this.currentPage<=3?(t=1,a=Math.min(5,this.totalPages)):this.currentPage>=this.totalPages-2?(t=Math.max(this.totalPages-4,1),a=this.totalPages):(t=this.currentPage-2,a=this.currentPage+2);for(let l=t;l<=a;l++)e.push(l);t>1&&(e.unshift(1),t>2&&e.splice(1,0,"...")),a<this.totalPages&&(a<this.totalPages-1&&e.push("..."),e.push(this.totalPages))}return e}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},confirmDelete(e){ys.a.fire({title:"Are you sure?",text:"Item will be archived and you won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",customClass:{popup:"custom-swal"}}).then(t=>{t.isConfirmed&&this.deleteProductType(e)})},exportTableToXLS(){const e=this.$refs.table,t=Qh["a"].table_to_sheet(e),a=Qh["a"].book_new();Qh["a"].book_append_sheet(a,t,"Sheet1"),Qh["b"](a,"produt_types.xlsx")},async filterProductTypes(){if(""==this.filterBy&&""==this.seachString)return void this.getProductTypes();if(""!=this.filterBy&&""==this.seachString)return void this.getProductTypes();let e={type:this.filterBy,value:this.seachString};try{const t=await mt.post("/filterProductTypes",e);this.allTypes=t.data,this.totalRows=t.data.total,this.currentPage=t.data.current_page,this.perPage=t.per_page,this.totalPages=t.data.last_page}catch(t){console.log(t)}},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async getProductTypes(e=null){try{let t={page:"",entries_per_page:this.itemsPerPage};t.page=e;let a="/getProductTypes";const l=await mt.post(a,t);this.allTypes=l.data.data.data,this.totalRows=l.data.pagination.total,this.currentPage=l.data.pagination.current_page,this.perPage=l.data.pagination.per_page,this.totalPages=l.data.pagination.last_page}catch(t){console.log(t)}},async deleteProductType(e){try{await mt.delete("/deleteProductType/"+e),this.removeTypeFromList(e),this.snackbarMsg("Product Type Successfully Deleted")}catch(t){console.log(t)}},removeTypeFromList(e){const t=this.allTypes.findIndex(t=>t.id===e);this.allTypes.splice(t,1)},setColor(){let e=this.getBrandingSetting.primary_color?this.getBrandingSetting.primary_color:"#573078";document.querySelector("thead").style.setProperty("--navheader-bg-color",e)}}};a("a00b");const mee=ot()(dee,[["render",iee]]);var bee=mee;Object(l["pushScopeId"])("data-v-c0392f5e");const pee={class:"container-fluid py-4"},uee={class:"row"},hee={class:"col-12"},Oee={class:"card my-4"},jee={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},gee=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Add Product Type",-1),fee=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),Eee={class:"card-body px-0 pb-2"},Vee={key:0,class:"mb-3 change-pass-alert"},Nee=Object(l["createElementVNode"])("br",null,null,-1),yee={class:"table-responsive p-0"},xee={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},vee={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},kee={class:"form-bg container p-4"},wee={class:"card card-plain"},See={class:"card-body"},Aee={role:"form"},Cee={class:"mb-1"},Bee=Object(l["createElementVNode"])("label",{class:"input-label",for:"email"},"Name",-1),_ee={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Pee={class:""};function Iee(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",pee,[Object(l["createElementVNode"])("div",uee,[Object(l["createElementVNode"])("div",hee,[Object(l["createElementVNode"])("div",Oee,[Object(l["createElementVNode"])("div",jee,[gee,Object(l["createVNode"])(n,{to:{name:"product-types"}},{default:Object(l["withCtx"])(()=>[fee]),_:1})]),Object(l["createElementVNode"])("div",Eee,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Vee,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Nee]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",yee,[Object(l["createElementVNode"])("div",xee,[Object(l["createElementVNode"])("div",vee,[Object(l["createElementVNode"])("div",kee,[Object(l["createElementVNode"])("div",wee,[Object(l["createElementVNode"])("div",See,[Object(l["createElementVNode"])("form",Aee,[Object(l["createElementVNode"])("div",Cee,[Bee,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.newProductType.name=e),class:"input-box",id:"name",type:"text",required:"",placeholder:"Name",name:"CourseDescription"},null,512),[[l["vModelText"],s.newProductType.name]])])])])])])]),Object(l["createElementVNode"])("div",_ee,[Object(l["createElementVNode"])("div",Pee,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.saveNewProductType&&o.saveNewProductType(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Save Product Type ")])])])])])])])])])}Object(l["popScopeId"])();var Dee={name:"",components:{},mounted(){this.getUser(),this.$globalHelper.buttonColor()},updated(){},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",isError:!1,formValidation:"",validationErrors:"",newProductType:{name:""}}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.create)return void this.$router.go(-1);let e=!1,t="";t=Jo()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async saveNewProductType(){this.isError=!1;try{await mt.post("/createProductType",this.newProductType),this.$router.push({name:"product-types"}),this.snackbarMsg("Product Type Saved Successfuly"),this.isError=!1}catch(e){this.isError=!0,this.validationErrors=e.response.data.errors}}}};a("71e7");const Tee=ot()(Dee,[["render",Iee],["__scopeId","data-v-c0392f5e"]]);var Mee=Tee;Object(l["pushScopeId"])("data-v-028eb140");const zee={class:"container-fluid py-4"},Fee={class:"row"},Uee={class:"col-12"},Lee={class:"card my-4"},$ee={class:"d-flex justify-content-between  border-radius-lg pt-4 pb-1"},Ree=Object(l["createElementVNode"])("h6",{class:"text-dark text-capitalize ps-3"},"Edit Product Type",-1),qee=Object(l["createElementVNode"])("button",{style:{"font-size":"12px","background-color":"#573078"},class:"btn me-3 text-white fw-5 border-0 py-2 px-4  border-radius-lg"}," Back ",-1),Hee={class:"card-body px-0 pb-2"},Qee={key:0,class:"mb-3 change-pass-alert"},Yee=Object(l["createElementVNode"])("br",null,null,-1),Jee={class:"table-responsive p-0"},Wee={class:"row py-1 d-flex justify-content-center bg-white form-data border-radius-lg"},Xee={class:"bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},Kee={class:"form-bg container p-4"},Zee={class:"card card-plain"},Gee={class:"card-body"},ete={role:"form"},tte={class:"mb-1"},ate=Object(l["createElementVNode"])("label",{class:"input-label",for:"name"},"Name",-1),lte={class:"d-flex justify-content-center bg-white box-shadow-dark border-radius-lg col-xl-10 col-lg-10 col-md-10"},cte={class:""};function ste(e,t,a,c,s,o){const n=Object(l["resolveComponent"])("router-link");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",zee,[Object(l["createElementVNode"])("div",Fee,[Object(l["createElementVNode"])("div",Uee,[Object(l["createElementVNode"])("div",Lee,[Object(l["createElementVNode"])("div",$ee,[Ree,Object(l["createVNode"])(n,{to:{name:"product-types"}},{default:Object(l["withCtx"])(()=>[qee]),_:1})]),Object(l["createElementVNode"])("div",Hee,[s.isError?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",Qee,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(s.validationErrors,(e,t)=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("small",{key:t,class:"pass-text"},[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e),1),Yee]))),128))])):Object(l["createCommentVNode"])("",!0),Object(l["createElementVNode"])("div",Jee,[Object(l["createElementVNode"])("div",Wee,[Object(l["createElementVNode"])("div",Xee,[Object(l["createElementVNode"])("div",Kee,[Object(l["createElementVNode"])("div",Zee,[Object(l["createElementVNode"])("div",Gee,[Object(l["createElementVNode"])("form",ete,[Object(l["createElementVNode"])("div",tte,[ate,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{class:"input-box",id:"name","onUpdate:modelValue":t[0]||(t[0]=e=>s.newProductType.name=e),type:"text",placeholder:"Name",name:"CourseCode"},null,512),[[l["vModelText"],s.newProductType.name]])])])])])])]),Object(l["createElementVNode"])("div",lte,[Object(l["createElementVNode"])("div",cte,[Object(l["createElementVNode"])("button",{onClick:t[1]||(t[1]=(...e)=>o.updateProductType&&o.updateProductType(...e)),style:{"font-size":"12px","background-color":"#573078"},class:"btn mt-3 ms-5 text-white fw-5 border-0 py-2 px-5  border-radius-lg"}," Update Product Type ")])])])])])])])])])}Object(l["popScopeId"])();var ote={name:"",components:{},mounted(){this.getUser(),this.editProductType(),this.$globalHelper.buttonColor()},updated(){this.$permissions.redirectIfNotAllowed("edit_course")},computed:{userPermissions(){return this.$permissions.userPermissions.value}},data(){return{user:"",availableCountries:["UK","USA","Canada"],newProductType:{name:""},isError:!1,validationErrors:"",formValidation:"",availableStatus:["Active","Inactive"],allStudents:""}},methods:{snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})},validateForm(){if(!this.userPermissions.edit)return void this.$router.go(-1);let e=!1,t="";t=Jo()(this.newParent);for(let a in this.newParent)""===this.newParent[a]||void 0===this.newParent[a]?(t[a]="is required",e=!0):t[a]="";return this.formValidation=t,e},getUser(){let e=localStorage.getItem("user");e=JSON.parse(e),this.user=e},async editProductType(){let e=this.$route.params.id;try{const t=await mt.get("/editProductType/"+e);this.setData(t)}catch(t){console.log(t)}},setData(e){let t;e&&(t=e.data,this.newProductType.name=t.name)},async updateProductType(){let e=this.$route.params.id;try{await mt.put("/updateProductType/"+e,this.newProductType),this.$router.push({name:"product-types"}),this.snackbarMsg("Product Type Updated Successfuly"),this.isError=!1}catch(t){console.log(t),this.isError=!0,this.validationErrors=t.response.data.errors}}}};a("67e4");const nte=ot()(ote,[["render",ste],["__scopeId","data-v-028eb140"]]);var rte=nte;Object(l["pushScopeId"])("data-v-394a68d4");const ite={class:"row"},dte={class:"col-12 col-md-6 col-xl-6 position-relative"},mte={class:"card card-plain h-100",style:{"background-color":"white"}},bte=Object(l["createElementVNode"])("div",{class:"p-3 pb-0 card-header"},[Object(l["createElementVNode"])("h6",{class:"mb-0"},"Microsoft Configurations")],-1),pte={class:"p-3 card-body"},ute={key:0,class:"list-group"},hte={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},Ote={class:"col-md-5 bg-white w-100 p-2"},jte=Object(l["createElementVNode"])("p",{class:"config-title"},"Microsoft client id",-1),gte={class:"config-value"},fte=Object(l["createElementVNode"])("hr",null,null,-1),Ete=Object(l["createElementVNode"])("p",{class:"config-title"},"Microsoft client secret",-1),Vte={class:"config-value"},Nte=Object(l["createElementVNode"])("hr",null,null,-1),yte=Object(l["createElementVNode"])("p",{class:"config-title"},"Microsoft tenant id",-1),xte={class:"config-value"},vte=Object(l["createElementVNode"])("hr",null,null,-1),kte=Object(l["createElementVNode"])("p",{class:"config-title"},"Email sending account",-1),wte={class:"config-value"},Ste=Object(l["createElementVNode"])("span",{class:"d-flex align-items-center"},[Object(l["createElementVNode"])("i",{class:"material-icons-round opacity-10 fs-6 me-1"},"settings"),Object(l["createTextVNode"])(" Edit Microsoft Settings ")],-1),Ate=[Ste],Cte={key:2,class:"list-group"},Bte={class:"px-0 mb-2 border-0 list-group-item d-flex align-items-center"},_te={class:"col-md-5 bg-white new-pass p-2"},Pte=Object(l["createElementVNode"])("label",null,"Microsoft client id",-1),Ite=Object(l["createElementVNode"])("br",null,null,-1),Dte=Object(l["createElementVNode"])("label",null,"Microsoft client secret",-1),Tte=Object(l["createElementVNode"])("br",null,null,-1),Mte=Object(l["createElementVNode"])("label",null,"Microsoft tenant id",-1),zte=Object(l["createElementVNode"])("br",null,null,-1),Fte=Object(l["createElementVNode"])("label",null,"Email sending account",-1),Ute=Object(l["createElementVNode"])("br",null,null,-1),Lte=Object(l["createElementVNode"])("span",{class:"d-flex align-items-center"}," Save Settings ",-1),$te=[Lte],Rte=Object(l["createElementVNode"])("span",{class:"d-flex align-items-center"}," Cancel ",-1),qte=[Rte],Hte=Object(l["createElementVNode"])("hr",{class:"vertical dark"},null,-1);function Qte(e,t,a,c,s,o){return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",null,[Object(l["createElementVNode"])("div",ite,[Object(l["createElementVNode"])("div",dte,[Object(l["createElementVNode"])("div",mte,[bte,Object(l["createElementVNode"])("div",pte,[s.isEditConfig?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("ul",ute,[Object(l["createElementVNode"])("li",hte,[Object(l["createElementVNode"])("div",Ote,[jte,Object(l["createElementVNode"])("small",gte,Object(l["toDisplayString"])(s.configuration.ms_client_id),1),fte,Ete,Object(l["createElementVNode"])("small",Vte,Object(l["toDisplayString"])(s.configuration.ms_client_secret),1),Nte,yte,Object(l["createElementVNode"])("small",xte,Object(l["toDisplayString"])(s.configuration.ms_tenent_id),1),vte,kte,Object(l["createElementVNode"])("small",wte,Object(l["toDisplayString"])(s.configuration.ms_email_account),1)])])])),s.isEditConfig?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("button",{key:1,onClick:t[0]||(t[0]=e=>o.openEdit()),style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:" p-2 fw-5 border-radius-lg"},Ate)),s.isEditConfig?(Object(l["openBlock"])(),Object(l["createElementBlock"])("ul",Cte,[Object(l["createElementVNode"])("li",Bte,[Object(l["createElementVNode"])("div",_te,[Pte,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>s.configuration.ms_client_id=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.configuration.ms_client_id]]),Ite,Dte,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>s.configuration.ms_client_secret=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.configuration.ms_client_secret]]),Tte,Mte,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>s.configuration.ms_tenent_id=e),id:"card-holder-name",type:"text",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.configuration.ms_tenent_id]]),zte,Fte,Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>s.configuration.ms_email_account=e),id:"card-holder-name",type:"email",class:"bg-white w-100  mb-2"},null,512),[[l["vModelText"],s.configuration.ms_email_account]]),Ute,Object(l["createElementVNode"])("button",{onClick:t[5]||(t[5]=e=>o.updateConfigurations()),style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:" p-2 fw-5 me-2 border-radius-lg"},$te),Object(l["createElementVNode"])("button",{onClick:t[6]||(t[6]=e=>s.isEditConfig=!1),style:{"font-size":"12px","background-color":"white",color:"#573078",border:"1px solid #573078"},class:" p-2 fw-5 border-radius-lg"},qte)])])])):Object(l["createCommentVNode"])("",!0)])]),Hte])])])}Object(l["popScopeId"])();var Yte={mounted(){this.getConfigurations()},computed:{...Object(lt["c"])(["getBrandingSetting"])},data(){return{isEditConfig:!1,configuration:{ms_client_id:"",ms_client_secret:"",ms_tenent_id:"",ms_email_account:""}}},methods:{openEdit(){this.isEditConfig=!0},async getConfigurations(){try{let e=await mt.get("/getConfigurations");e=e.data,this.configuration.ms_client_id=e.ms_client_id,this.configuration.ms_client_secret=e.ms_client_secret,this.configuration.ms_tenent_id=e.ms_tenent_id,this.configuration.ms_email_account=e.ms_email_account}catch(e){console.log(e)}},async updateConfigurations(){try{await mt.post("/saveConfigurations",this.configuration),this.snackbarMsg("Saved Successfuly")}catch(e){console.log(e)}},snackbarMsg(e){this.$snackbar.add({type:"success",text:e,background:"white"})}}};a("ab21");const Jte=ot()(Yte,[["render",Qte],["__scopeId","data-v-394a68d4"]]);var Wte=Jte;const Xte=[{path:"/auth/callback",name:"AuthCallback",component:rr},{path:"/",name:"/",redirect:"/dashboard",meta:{requiresAuth:!0}},{path:"/dashboard",name:"Dashboard",component:_s,meta:{title:"Dashboard",requiresAuth:!0}},{path:"/organizations",name:"organizations",component:N9,meta:{title:"Organizations",requiresAuth:!0},children:[{path:"/organizations",name:"list-organizations",component:kV},{path:"/organizations/add",name:"add-organizations",component:fN},{path:"/organizations/:id",name:"edit-organization",component:by}]},{path:"/organizations-admins",name:"organizations-admins",component:N9,meta:{title:"Organizations Admins",requiresAuth:!0},children:[{path:"/organizations-admins",name:"list-organization-admins",component:dK},{path:"/add-organizations-admins",name:"add-organization-admins",component:dZ},{path:"/edit-organizations-admin/:id",name:"edit-organization-admin",component:hG}]},{path:"/schools",name:"schools",component:N9,meta:{title:"Schools",requiresAuth:!0},children:[{path:"/schools",name:"list-schools",component:fd},{path:"/schools/add",name:"add-school",component:gb},{path:"/schools/edit-schools/:id",name:"edit-school",component:Np},{path:"/archived/schools",name:"archived-schools",component:um},{path:"/schools/settings/:id",name:"settings-school",component:Gp},{path:"/school/addCard/:id",name:"card-school",component:ru}]},{path:"/students",name:"students",component:N9,meta:{title:"Students",requiresAuth:!0},children:[{path:"/students",name:"list-students",component:Wh},{path:"/student/add",name:"add-student",component:ag},{path:"/student/:id",name:"edit-student",component:hf},{path:"/students/archived",name:"archived-students",component:lj},{path:"/student-billing/:id",name:"student-billing",component:Rf}]},{path:"/balance/:id?",name:"balance",component:HE},{path:"/attributes",name:"attributes",component:N9,meta:{title:"Student Attributes",requiresAuth:!0},children:[{path:"/attributes",name:"list-attributes",component:q6},{path:"/attributes/add",name:"add-attribute",component:u7},{path:"/attributes/edit/:id",name:"edit-attribute",component:z7}]},{path:"/staff",name:"staff",component:N9,meta:{title:"Staff",requiresAuth:!0},children:[{path:"/staff",name:"list-staff",component:E1},{path:"/staff/add",name:"add-staff",component:w2},{path:"/staff/edit/:id",name:"edit-staff",component:U4},{path:"/staff/archived",name:"archived-staff",component:v0},{path:"/staff/details/:id",name:"detail-staff",component:s5}]},{path:"/parent",name:"parent",component:N9,meta:{title:"Parent",requiresAuth:!0},children:[{path:"/parents",name:"list-parent",component:R5},{path:"/parents/add",name:"add-parent",component:T3},{path:"/parents/edit/:id",name:"edit-parent",component:w8},{path:"/childrens/:id",name:"add-childrens",component:K8}]},{path:"/course",name:"course",component:N9,meta:{title:"Course",requiresAuth:!0},children:[{path:"/courses",name:"list-courses",component:oJ},{path:"/course/add",name:"add-course",component:UJ},{path:"/course/edit/:id",name:"edit-course",component:EW},{path:"/course/enrolled-students/:id",name:"enrolled-students",component:_X}]},{path:"/payment",name:"payment",component:N9,meta:{title:"Payment Account",requiresAuth:!0},children:[{path:"/payment_method/:id?",name:"payment_method",component:ZQ},{path:"/payment_account/:id?",name:"payment_account",component:DQ},{path:"/add_card",name:"add_card",component:mY}]},{path:"/transactions-history",name:"transactions",component:N9,meta:{title:"Purchase",requiresAuth:!0},children:[{path:"/transaction-history",name:"transaction-history",component:GA},{path:"/purchase-history",name:"purchase-history",component:zC},{path:"/purchases",name:"purchases-admin",component:LB},{path:"/refunds",name:"refund",component:xT},{path:"/installments",name:"installments",component:jP},{path:"/pay-installment/:id",name:"pay-installment",component:OI},{path:"/paidinstallments",name:"paid-installments",component:bD}]},{path:"/support",component:N9,meta:{title:"Support",requiresAuth:!0},children:[{path:"",name:"support",component:RT}]},{path:"/configurations",component:N9,meta:{title:"Configurations",requiresAuth:!0},children:[{path:"/configurations",name:"configurations",component:Wte}]},{path:"/product-types",name:"ProductTypes",component:N9,meta:{title:"ProductTypes",requiresAuth:!0},children:[{path:"/product-types",name:"product-types",component:bee},{path:"/product-types/add",name:"add-product-types",component:Mee},{path:"/product-types/edit/:id",name:"edit-product-types",component:rte}]},{path:"/shop-items",name:"shop",component:N9,meta:{title:"Shop",requiresAuth:!0},children:[{path:"/shop-items",name:"shop-items",component:Nz},{path:"/shop-items/add",name:"add-items",component:GL},{path:"/shop-items/edit/:id",name:"edit-shop-items",component:Oq},{path:"/shop-items/archived",name:"archived-shop-items",component:DF}]},{path:"/checkout",name:"checkout",component:N9,meta:{title:"Checkout",requiresAuth:!0},children:[{path:"/cart-checkout",name:"cart-checkout",component:SH}]},{path:"/trips",name:"trips",component:N9,meta:{title:"Trips",requiresAuth:!0},children:[{path:"/trips",name:"list-trips",component:rx},{path:"/add-trips",name:"add-trips",component:bw},{path:"/edit-trips/:id",name:"edit-trips",component:OS},{path:"/participants-trips/:id",name:"participants-trips",component:LS}]},{path:"/roles",name:"roles",component:N9,meta:{title:"Roles",requiresAuth:!0},children:[{path:"/roles",name:"list-roles",component:j9}]},{path:"/meals",name:"meals",component:N9,meta:{title:"Meals",requiresAuth:!0},children:[{path:"/meals",name:"list-meals",component:UH},{path:"/add-menu",name:"add-menu",component:YH}]},{path:"/childrens",name:"childrens",component:N9,meta:{title:"Childrens",requiresAuth:!0},children:[{path:"/childrens",name:"list-childrens",component:x6}]},{path:"/payments",name:"payments",component:N9,meta:{title:"Payments",requiresAuth:!0},children:[{path:"/active-payments",name:"list-active-payments",component:""},{path:"/historical-payments",name:"list-historical-payments",component:""}]},{path:"/profile",name:"Profile",component:Ko,meta:{requiresAuth:!0}},{path:"/sign-in",name:"SignIn",component:Fn},{path:"/forgot-password",name:"ForgotPassword",component:kr},{path:"/reset-password/:email/:otp",name:"ResetPassword",component:Yr},{path:"/sign-up",name:"SignUp",component:Ti}],Kte=Object(kl["a"])({history:Object(kl["b"])("/"),routes:Xte,linkActiveClass:"active"});Kte.beforeEach((e,t,a)=>{document.title=e.meta.title||"StudentPay",e.meta.requiresAuth&&!localStorage.getItem("token")?a({name:"SignIn"}):!localStorage.getItem("token")||"SignIn"!==e.name&&"Register"!==e.name?a():a({name:"Dashboard"})});var Zte=Kte,Gte=(a("6a5d"),a("46d4"),a("5aea"),a("b945"),a("9e17"),{install(){}}),eae=a("fe63");a("6340"),a("f38d");const tae={install(e){const t=Object(l["ref"])({create:!1,edit:!1,delete:!1,view:!1,create_admin:!1,delete_admin:!1,view_admin:!1,edit_admin:!1,create_site:!0,view_site:!1,edit_site:!0,delete_site:!1,create_student:!1,delete_student:!1,view_student:!1,edit_student:!1,create_staff:!1,delete_staff:!1,view_staff:!1,edit_staff:!1,create_course:!1,view_course:!1,edit_course:!1,delete_course:!1,create_shop:!0,delete_shop:!1,view_shop:!0,edit_shop:!0,transaction_history:!0,purchase_history:!1,pending_installments:!1,refunds:!1,roles:!1,topup:!1,wallet:!1}),a=e=>{const a=JSON.parse(localStorage.getItem("user"));a&&"super_admin"===a.role?Object.keys(t.value).forEach(e=>{t.value[e]=!0}):Object.keys(t.value).forEach(a=>{t.value[a]=e.includes(a)})},c=a=>{const l=e.config.globalProperties.$router;t.value[a]||l.go(-1)};e.config.globalProperties.$permissions={userPermissions:t,checkIfPermission:a,redirectIfNotAllowed:c},e.provide("permissions",e.config.globalProperties.$permissions),Object(l["watch"])(()=>e.config.globalProperties.$store.getters.getPermissions,(t,a)=>{console.log(a),e.config.globalProperties.$permissions.checkIfPermission(t)})}};var aae=tae;const lae={install(e){const t=Object(l["ref"])({BASE_URL:"https://stagingapi.student-pay.co.uk"});e.config.globalProperties.$env_vars=t.value,e.provide("env_vars",e.config.globalProperties.env_vars)}};var cae=lae;const sae={install(e){const t=()=>{const t="null"!==e.config.globalProperties.$store.getters.getBrandingSetting.primary_color?e.config.globalProperties.$store.getters.getBrandingSetting.primary_color:"#010A21",a=document.querySelectorAll(".btn");a.forEach(e=>{e.style.backgroundColor=t});const l=document.querySelectorAll(".pagination li a");l.forEach(e=>{e.style.backgroundColor="white"});const c=document.querySelectorAll(".pagination li.active a");c.forEach(e=>{e.style.backgroundColor=t})};e.config.globalProperties.$globalHelper={buttonColor:t}}};var oae=sae;const nae={install(e){const t=()=>{const e=document.querySelector(".mx-datepicker-popup");e&&(e.style.display="none");const t=document.querySelector(".mx-input:focus");t&&t.blur()},a=()=>{const e=document.querySelector(".mx-datepicker-popup");e&&(e.style.display="block")},l=()=>{const e=document.querySelector(".mx-input");e&&(e.addEventListener("focus",a),window.addEventListener("scroll",t,!0))},c=()=>{const e=document.querySelector(".mx-input");e&&e.removeEventListener("focus",a),window.removeEventListener("scroll",t,!0)};e.config.globalProperties.$datepickerHelper={attachListeners:l,detachListeners:c},e.mixin({mounted(){l()},beforeUnmount(){c()}})}};var rae=nae;const iae=Object(l["createApp"])(Ka);iae.config.globalProperties.$msalInstance={},iae.config.globalProperties.$emitter=new Ga.a,iae.use(vl),iae.use(eae["a"]),iae.component("vue3-snackbar",eae["b"]),iae.use(Zte,iae),iae.use(Gte),iae.use(iw.a),iae.use(aae),iae.use(cae),iae.use(oae),iae.use(rae),iae.mount("#app")},"59bb":function(e,t,a){},"5aea":function(e,t,a){},"5dec":function(e,t,a){},"60de":function(e,t,a){"use strict";a("04ef")},6102:function(e,t,a){},6150:function(e,t,a){e.exports=a.p+"img/ivana-square.a1900888.jpg"},"62b9":function(e,t,a){},"62cb":function(e,t,a){"use strict";a("744f")},"639d":function(e,t,a){"use strict";a("91bf")},"66b5":function(e,t,a){"use strict";a("04e1")},"673a":function(e,t,a){},"67e4":function(e,t,a){"use strict";a("3470")},"6a07":function(e,t,a){e.exports=a.p+"img/background.19e62050.jpg"},"6a5d":function(e,t,a){},"6ce7":function(e,t,a){"use strict";a("5dec")},"6e4e":function(e,t,a){},"70ef":function(e,t,a){"use strict";a("eafa")},"71e7":function(e,t,a){"use strict";a("6102")},"73e7":function(e,t,a){},"744f":function(e,t,a){},7497:function(e,t,a){"use strict";a("a512")},"7a85":function(e,t,a){},"7b9a":function(e,t,a){e.exports=a.p+"img/StudentPay-logo.627241f4.png"},"7e48":function(e,t,a){"use strict";a("9b31")},"7ed5":function(e,t,a){},"804d":function(e,t,a){"use strict";a("a9c5")},8202:function(e,t,a){e.exports=a.p+"img/team-2.90c40d0c.jpg"},8409:function(e,t,a){"use strict";a("91c3")},8889:function(e,t,a){"use strict";a("6e4e")},"8a36":function(e,t,a){"use strict";a("539e")},"8bb8":function(e,t,a){},"8ed5":function(e,t,a){"use strict";a("5065")},"8f25":function(e,t,a){},9195:function(e,t,a){},"91bf":function(e,t,a){},"91c3":function(e,t,a){},9494:function(e,t,a){"use strict";a("4dd6")},"94b7":function(e,t,a){},"94d7":function(e,t,a){"use strict";a("a145")},"998c":function(e,t,a){"use strict";a("c355")},"9b31":function(e,t,a){},"9b7c":function(e,t,a){},"9bb4":function(e,t,a){"use strict";a("8bb8")},"9c6f":function(e,t,a){"use strict";a("fca7")},"9d09":function(e,t,a){},"9e17":function(e,t,a){},a00b:function(e,t,a){"use strict";a("73e7")},a13f:function(e,t,a){"use strict";a("100b")},a145:function(e,t,a){},a432:function(e,t,a){},a4cd:function(e,t,a){"use strict";a("3d83")},a512:function(e,t,a){},a556:function(e,t,a){"use strict";a("aca3")},a86a:function(e,t,a){"use strict";a("4b51")},a973:function(e,t,a){},a97b:function(e,t,a){},a9c5:function(e,t,a){},aa68:function(e,t,a){e.exports=a.p+"img/visa.98edc46d.png"},ab21:function(e,t,a){"use strict";a("2ffa")},aca3:function(e,t,a){},ae3b:function(e,t,a){},af17:function(e,t,a){e.exports=a.p+"img/marie.a60473a0.jpg"},b0e7:function(e,t,a){"use strict";a("e3f4")},b107:function(e,t,a){e.exports=a.p+"img/logo-slack.07d7b8e1.svg"},b237:function(e,t,a){"use strict";a("fba8")},b34a:function(e,t,a){e.exports=a.p+"img/home-decor-1.decbdadf.jpg"},b686:function(e,t,a){"use strict";a("0153")},b795:function(e,t,a){},b8de:function(e,t,a){e.exports=a.p+"img/logo-xd.46bbd281.svg"},b909:function(e,t,a){"use strict";a("b795")},b945:function(e,t){window.onload=function(){for(var e=document.querySelectorAll(".btn"),t=0;t<e.length;t++)e[t].addEventListener("click",(function(e){var t=e.target,a=t.querySelector(".ripple");a=document.createElement("span"),a.classList.add("ripple"),a.style.width=a.style.height=Math.max(t.offsetWidth,t.offsetHeight)+"px",t.appendChild(a),a.style.left=e.offsetX-a.offsetWidth/2+"px",a.style.top=e.offsetY-a.offsetHeight/2+"px",a.classList.add("ripple"),setTimeout((function(){a.parentElement.removeChild(a)}),600)}),!1)}},bbe0:function(e,t,a){e.exports=a.p+"img/dashboard2.3de49aaf.jpg"},bc12:function(e,t,a){"use strict";a("c5b8")},bdd3:function(e,t,a){},c1d2:function(e,t,a){"use strict";a("9d09")},c355:function(e,t,a){},c5b8:function(e,t,a){},c690:function(e,t,a){},c7c0:function(e,t,a){e.exports=a.p+"img/team-3.a539dfc6.jpg"},ca92:function(e,t,a){"use strict";a("2805")},cad8:function(e,t,a){"use strict";a("a973")},ccdc:function(e,t,a){},d108:function(e,t,a){"use strict";a("1e72")},d15c:function(e,t,a){e.exports=a.p+"img/trip.85ea72dc.jpg"},d3a1:function(e,t,a){},d822:function(e,t,a){"use strict";a("ae3b")},d858:function(e,t,a){"use strict";a("7ed5")},da94:function(e,t,a){"use strict";a("a97b")},de13:function(e,t,a){"use strict";a("7a85")},e0bc:function(e,t,a){"use strict";a("2e1b")},e33f:function(e,t,a){"use strict";a("d3a1")},e362:function(e,t,a){"use strict";a("8f25")},e3f4:function(e,t,a){},e6f0:function(e,t,a){"use strict";a("43be")},e978:function(e,t,a){},eafa:function(e,t,a){},eb29:function(e,t,a){"use strict";a("59bb")},ed1c:function(e,t,a){"use strict";a("42eb")},ed52:function(e,t,a){"use strict";a("bdd3")},f35e:function(e,t,a){e.exports=a.p+"img/team-4.16a9baef.jpg"},f5b4:function(e,t,a){},fa86:function(e,t,a){"use strict";a("55ff")},fba8:function(e,t,a){},fca7:function(e,t,a){}});
//# sourceMappingURL=app.89b5e573.js.map